webpackJsonp([0],{"+3lO":function(t,e,n){n("abPz");for(var r=n("YjQv"),i=n("aLzV"),o=n("yYxz"),a=n("hgbu")("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var c=s[u],h=r[c],l=h&&h.prototype;l&&!l[a]&&i(l,a,c),o[c]=o.Array}},"+GuK":function(t,e,n){"use strict";var r=n("Wdy1"),i=n("iANj"),o=n("YjQv"),a=n("BfX3"),s=n("qC2Z");r(r.P+r.R,"Promise",{finally:function(t){var e=a(this,i.Promise||o.Promise),n="function"==typeof t;return this.then(n?function(n){return s(e,t()).then(function(){return n})}:t,n?function(n){return s(e,t()).then(function(){throw n})}:t)}})},"+MZ2":function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},"+SdG":function(t,e,n){var r=n("a/OS")("keys"),i=n("GmwO");t.exports=function(t){return r[t]||(r[t]=i(t))}},"+VX5":function(t,e,n){var r=n("W6Rd"),i=Math.max,o=Math.min;t.exports=function(t,e){return t=r(t),t<0?i(t+e,0):o(t,e)}},"+iDZ":function(t,e,n){var r=n("YjQv").document;t.exports=r&&r.documentElement},"+opI":function(t,e,n){var r=n("hcE8"),i=n("wkr2"),o=n("l/2K"),a=n("C/Wh"),s=n("0Q51"),u=n("I1z2"),c=u.get,h=u.enforce,l=String(s).split("toString");n("izte")("inspectSource",function(t){return s.call(t)}),(t.exports=function(t,e,n,s){var u=!!s&&!!s.unsafe,c=!!s&&!!s.enumerable,f=!!s&&!!s.noTargetGet;if("function"==typeof n&&("string"!=typeof e||o(n,"name")||i(n,"name",e),h(n).source=l.join("string"==typeof e?e:"")),t===r)return void(c?t[e]=n:a(e,n));u?!f&&t[e]&&(c=!0):delete t[e],c?t[e]=n:i(t,e,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&c(this).source||s.call(this)})},"+sNg":function(t,e,n){e.markdown=n("xZWZ"),e.parse=e.markdown.toHTML},"//Fk":function(t,e,n){t.exports={default:n("x/31"),__esModule:!0}},"/09a":function(t,e,n){var r=n("AMIE"),i=n("YveC");t.exports=Object.keys||function(t){return r(t,i)}},"/ocq":function(t,e,n){"use strict";function r(t,e){}function i(t){return Object.prototype.toString.call(t).indexOf("Error")>-1}function o(t,e){switch(typeof e){case"undefined":return;case"object":return e;case"function":return e(t);case"boolean":return e?t.params:void 0}}function a(t,e){for(var n in e)t[n]=e[n];return t}function s(t,e,n){void 0===e&&(e={});var r,i=n||u;try{r=i(t||"")}catch(t){r={}}for(var o in e)r[o]=e[o];return r}function u(t){var e={};return(t=t.trim().replace(/^(\?|#|&)/,""))?(t.split("&").forEach(function(t){var n=t.replace(/\+/g," ").split("="),r=qt(n.shift()),i=n.length>0?qt(n.join("=")):null;void 0===e[r]?e[r]=i:Array.isArray(e[r])?e[r].push(i):e[r]=[e[r],i]}),e):e}function c(t){var e=t?Object.keys(t).map(function(e){var n=t[e];if(void 0===n)return"";if(null===n)return jt(e);if(Array.isArray(n)){var r=[];return n.forEach(function(t){void 0!==t&&(null===t?r.push(jt(e)):r.push(jt(e)+"="+jt(t)))}),r.join("&")}return jt(e)+"="+jt(n)}).filter(function(t){return t.length>0}).join("&"):null;return e?"?"+e:""}function h(t,e,n,r){var i=r&&r.options.stringifyQuery,o=e.query||{};try{o=l(o)}catch(t){}var a={name:e.name||t&&t.name,meta:t&&t.meta||{},path:e.path||"/",hash:e.hash||"",query:o,params:e.params||{},fullPath:p(e,i),matched:t?f(t):[]};return n&&(a.redirectedFrom=p(n,i)),Object.freeze(a)}function l(t){if(Array.isArray(t))return t.map(l);if(t&&"object"==typeof t){var e={};for(var n in t)e[n]=l(t[n]);return e}return t}function f(t){for(var e=[];t;)e.unshift(t),t=t.parent;return e}function p(t,e){var n=t.path,r=t.query;void 0===r&&(r={});var i=t.hash;void 0===i&&(i="");var o=e||c;return(n||"/")+o(r)+i}function d(t,e){return e===Bt?t===e:!!e&&(t.path&&e.path?t.path.replace(Vt,"")===e.path.replace(Vt,"")&&t.hash===e.hash&&y(t.query,e.query):!(!t.name||!e.name)&&(t.name===e.name&&t.hash===e.hash&&y(t.query,e.query)&&y(t.params,e.params)))}function y(t,e){if(void 0===t&&(t={}),void 0===e&&(e={}),!t||!e)return t===e;var n=Object.keys(t),r=Object.keys(e);return n.length===r.length&&n.every(function(n){var r=t[n],i=e[n];return"object"==typeof r&&"object"==typeof i?y(r,i):String(r)===String(i)})}function v(t,e){return 0===t.path.replace(Vt,"/").indexOf(e.path.replace(Vt,"/"))&&(!e.hash||t.hash===e.hash)&&m(t.query,e.query)}function m(t,e){for(var n in e)if(!(n in t))return!1;return!0}function g(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey||t.defaultPrevented||void 0!==t.button&&0!==t.button)){if(t.currentTarget&&t.currentTarget.getAttribute){if(/\b_blank\b/i.test(t.currentTarget.getAttribute("target")))return}return t.preventDefault&&t.preventDefault(),!0}}function b(t){if(t)for(var e,n=0;n<t.length;n++){if(e=t[n],"a"===e.tag)return e;if(e.children&&(e=b(e.children)))return e}}function _(t){if(!_.installed||Pt!==t){_.installed=!0,Pt=t;var e=function(t){return void 0!==t},n=function(t,n){var r=t.$options._parentVnode;e(r)&&e(r=r.data)&&e(r=r.registerRouteInstance)&&r(t,n)};t.mixin({beforeCreate:function(){e(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),t.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,n(this,this)},destroyed:function(){n(this)}}),Object.defineProperty(t.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(t.prototype,"$route",{get:function(){return this._routerRoot._route}}),t.component("router-view",Lt),t.component("router-link",Qt);var r=t.config.optionMergeStrategies;r.beforeRouteEnter=r.beforeRouteLeave=r.beforeRouteUpdate=r.created}}function w(t,e,n){var r=t.charAt(0);if("/"===r)return t;if("?"===r||"#"===r)return e+t;var i=e.split("/");n&&i[i.length-1]||i.pop();for(var o=t.replace(/^\//,"").split("/"),a=0;a<o.length;a++){var s=o[a];".."===s?i.pop():"."!==s&&i.push(s)}return""!==i[0]&&i.unshift(""),i.join("/")}function E(t){var e="",n="",r=t.indexOf("#");r>=0&&(e=t.slice(r),t=t.slice(0,r));var i=t.indexOf("?");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{path:t,query:n,hash:e}}function T(t){return t.replace(/\/\//g,"/")}function S(t,e){for(var n,r=[],i=0,o=0,a="",s=e&&e.delimiter||"/";null!=(n=Zt.exec(t));){var u=n[0],c=n[1],h=n.index;if(a+=t.slice(o,h),o=h+u.length,c)a+=c[1];else{var l=t[o],f=n[2],p=n[3],d=n[4],y=n[5],v=n[6],m=n[7];a&&(r.push(a),a="");var g=null!=f&&null!=l&&l!==f,b="+"===v||"*"===v,_="?"===v||"*"===v,w=n[2]||s,E=d||y;r.push({name:p||i++,prefix:f||"",delimiter:w,optional:_,repeat:b,partial:g,asterisk:!!m,pattern:E?D(E):m?".*":"[^"+N(w)+"]+?"})}}return o<t.length&&(a+=t.substr(o)),a&&r.push(a),r}function C(t,e){return A(S(t,e))}function I(t){return encodeURI(t).replace(/[\/?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function k(t){return encodeURI(t).replace(/[?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function A(t){for(var e=new Array(t.length),n=0;n<t.length;n++)"object"==typeof t[n]&&(e[n]=new RegExp("^(?:"+t[n].pattern+")$"));return function(n,r){for(var i="",o=n||{},a=r||{},s=a.pretty?I:encodeURIComponent,u=0;u<t.length;u++){var c=t[u];if("string"!=typeof c){var h,l=o[c.name];if(null==l){if(c.optional){c.partial&&(i+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(Ht(l)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(l)+"`");if(0===l.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var f=0;f<l.length;f++){if(h=s(l[f]),!e[u].test(h))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(h)+"`");i+=(0===f?c.prefix:c.delimiter)+h}}else{if(h=c.asterisk?k(l):s(l),!e[u].test(h))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+h+'"');i+=c.prefix+h}}else i+=c}return i}}function N(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function D(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function O(t,e){return t.keys=e,t}function R(t){return t.sensitive?"":"i"}function x(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return O(t,e)}function P(t,e,n){for(var r=[],i=0;i<t.length;i++)r.push(F(t[i],e,n).source);return O(new RegExp("(?:"+r.join("|")+")",R(n)),e)}function L(t,e,n){return M(S(t,n),e,n)}function M(t,e,n){Ht(e)||(n=e||n,e=[]),n=n||{};for(var r=n.strict,i=!1!==n.end,o="",a=0;a<t.length;a++){var s=t[a];if("string"==typeof s)o+=N(s);else{var u=N(s.prefix),c="(?:"+s.pattern+")";e.push(s),s.repeat&&(c+="(?:"+u+c+")*"),c=s.optional?s.partial?u+"("+c+")?":"(?:"+u+"("+c+"))?":u+"("+c+")",o+=c}}var h=N(n.delimiter||"/"),l=o.slice(-h.length)===h;return r||(o=(l?o.slice(0,-h.length):o)+"(?:"+h+"(?=$))?"),o+=i?"$":r&&l?"":"(?="+h+"|$)",O(new RegExp("^"+o,R(n)),e)}function F(t,e,n){return Ht(e)||(n=e||n,e=[]),n=n||{},t instanceof RegExp?x(t,e):Ht(t)?P(t,e,n):L(t,e,n)}function U(t,e,n){try{return(te[t]||(te[t]=zt.compile(t)))(e||{},{pretty:!0})}catch(t){return""}}function j(t,e,n,r){var i=e||[],o=n||Object.create(null),a=r||Object.create(null);t.forEach(function(t){q(i,o,a,t)});for(var s=0,u=i.length;s<u;s++)"*"===i[s]&&(i.push(i.splice(s,1)[0]),u--,s--);return{pathList:i,pathMap:o,nameMap:a}}function q(t,e,n,r,i,o){var a=r.path,s=r.name,u=r.pathToRegexpOptions||{},c=B(a,i,u.strict);"boolean"==typeof r.caseSensitive&&(u.sensitive=r.caseSensitive);var h={path:c,regex:V(c,u),components:r.components||{default:r.component},instances:{},name:s,parent:i,matchAs:o,redirect:r.redirect,beforeEnter:r.beforeEnter,meta:r.meta||{},props:null==r.props?{}:r.components?r.props:{default:r.props}};if(r.children&&r.children.forEach(function(r){var i=o?T(o+"/"+r.path):void 0;q(t,e,n,r,h,i)}),void 0!==r.alias){(Array.isArray(r.alias)?r.alias:[r.alias]).forEach(function(o){var a={path:o,children:r.children};q(t,e,n,a,i,h.path||"/")})}e[h.path]||(t.push(h.path),e[h.path]=h),s&&(n[s]||(n[s]=h))}function V(t,e){var n=zt(t,[],e);return n}function B(t,e,n){return n||(t=t.replace(/\/$/,"")),"/"===t[0]?t:null==e?t:T(e.path+"/"+t)}function W(t,e,n,r){var i="string"==typeof t?{path:t}:t;if(i.name||i._normalized)return i;if(!i.path&&i.params&&e){i=K({},i),i._normalized=!0;var o=K(K({},e.params),i.params);if(e.name)i.name=e.name,i.params=o;else if(e.matched.length){var a=e.matched[e.matched.length-1].path;i.path=U(a,o,"path "+e.path)}return i}var u=E(i.path||""),c=e&&e.path||"/",h=u.path?w(u.path,c,n||i.append):c,l=s(u.query,i.query,r&&r.options.parseQuery),f=i.hash||u.hash;return f&&"#"!==f.charAt(0)&&(f="#"+f),{_normalized:!0,path:h,query:l,hash:f}}function K(t,e){for(var n in e)t[n]=e[n];return t}function Q(t,e){function n(t){j(t,u,c,l)}function r(t,n,r){var i=W(t,n,!1,e),o=i.name;if(o){var s=l[o];if(!s)return a(null,i);var h=s.regex.keys.filter(function(t){return!t.optional}).map(function(t){return t.name});if("object"!=typeof i.params&&(i.params={}),n&&"object"==typeof n.params)for(var f in n.params)!(f in i.params)&&h.indexOf(f)>-1&&(i.params[f]=n.params[f]);if(s)return i.path=U(s.path,i.params,'named route "'+o+'"'),a(s,i,r)}else if(i.path){i.params={};for(var p=0;p<u.length;p++){var d=u[p],y=c[d];if(G(y.regex,i.path,i.params))return a(y,i,r)}}return a(null,i)}function i(t,n){var i=t.redirect,o="function"==typeof i?i(h(t,n,null,e)):i;if("string"==typeof o&&(o={path:o}),!o||"object"!=typeof o)return a(null,n);var s=o,u=s.name,c=s.path,f=n.query,p=n.hash,d=n.params;if(f=s.hasOwnProperty("query")?s.query:f,p=s.hasOwnProperty("hash")?s.hash:p,d=s.hasOwnProperty("params")?s.params:d,u){l[u];return r({_normalized:!0,name:u,query:f,hash:p,params:d},void 0,n)}if(c){var y=H(c,t);return r({_normalized:!0,path:U(y,d,'redirect route with path "'+y+'"'),query:f,hash:p},void 0,n)}return a(null,n)}function o(t,e,n){var i=U(n,e.params,'aliased route with path "'+n+'"'),o=r({_normalized:!0,path:i});if(o){var s=o.matched,u=s[s.length-1];return e.params=o.params,a(u,e)}return a(null,e)}function a(t,n,r){return t&&t.redirect?i(t,r||n):t&&t.matchAs?o(t,n,t.matchAs):h(t,n,r,e)}var s=j(t),u=s.pathList,c=s.pathMap,l=s.nameMap;return{match:r,addRoutes:n}}function G(t,e,n){var r=e.match(t);if(!r)return!1;if(!n)return!0;for(var i=1,o=r.length;i<o;++i){var a=t.keys[i-1],s="string"==typeof r[i]?decodeURIComponent(r[i]):r[i];a&&(n[a.name]=s)}return!0}function H(t,e){return w(t,e.parent?e.parent.path:"/",!0)}function z(){window.history.replaceState({key:ot()},""),window.addEventListener("popstate",function(t){Y(),t.state&&t.state.key&&at(t.state.key)})}function $(t,e,n,r){if(t.app){var i=t.options.scrollBehavior;i&&t.app.$nextTick(function(){var t=X(),o=i(e,n,r?t:null);o&&("function"==typeof o.then?o.then(function(e){rt(e,t)}).catch(function(t){}):rt(o,t))})}}function Y(){var t=ot();t&&(ee[t]={x:window.pageXOffset,y:window.pageYOffset})}function X(){var t=ot();if(t)return ee[t]}function J(t,e){var n=document.documentElement,r=n.getBoundingClientRect(),i=t.getBoundingClientRect();return{x:i.left-r.left-e.x,y:i.top-r.top-e.y}}function Z(t){return nt(t.x)||nt(t.y)}function tt(t){return{x:nt(t.x)?t.x:window.pageXOffset,y:nt(t.y)?t.y:window.pageYOffset}}function et(t){return{x:nt(t.x)?t.x:0,y:nt(t.y)?t.y:0}}function nt(t){return"number"==typeof t}function rt(t,e){var n="object"==typeof t;if(n&&"string"==typeof t.selector){var r=document.querySelector(t.selector);if(r){var i=t.offset&&"object"==typeof t.offset?t.offset:{};i=et(i),e=J(r,i)}else Z(t)&&(e=tt(t))}else n&&Z(t)&&(e=tt(t));e&&window.scrollTo(e.x,e.y)}function it(){return re.now().toFixed(3)}function ot(){return ie}function at(t){ie=t}function st(t,e){Y();var n=window.history;try{e?n.replaceState({key:ie},"",t):(ie=it(),n.pushState({key:ie},"",t))}catch(n){window.location[e?"replace":"assign"](t)}}function ut(t){st(t,!0)}function ct(t,e,n){var r=function(i){i>=t.length?n():t[i]?e(t[i],function(){r(i+1)}):r(i+1)};r(0)}function ht(t){return function(e,n,r){var o=!1,a=0,s=null;lt(t,function(t,e,n,u){if("function"==typeof t&&void 0===t.cid){o=!0,a++;var c,h=dt(function(e){pt(e)&&(e=e.default),t.resolved="function"==typeof e?e:Pt.extend(e),n.components[u]=e,--a<=0&&r()}),l=dt(function(t){var e="Failed to resolve async component "+u+": "+t;s||(s=i(t)?t:new Error(e),r(s))});try{c=t(h,l)}catch(t){l(t)}if(c)if("function"==typeof c.then)c.then(h,l);else{var f=c.component;f&&"function"==typeof f.then&&f.then(h,l)}}}),o||r()}}function lt(t,e){return ft(t.map(function(t){return Object.keys(t.components).map(function(n){return e(t.components[n],t.instances[n],t,n)})}))}function ft(t){return Array.prototype.concat.apply([],t)}function pt(t){return t.__esModule||oe&&"Module"===t[Symbol.toStringTag]}function dt(t){var e=!1;return function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];if(!e)return e=!0,t.apply(this,n)}}function yt(t){if(!t)if(Gt){var e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^https?:\/\/[^\/]+/,"")}else t="/";return"/"!==t.charAt(0)&&(t="/"+t),t.replace(/\/$/,"")}function vt(t,e){var n,r=Math.max(t.length,e.length);for(n=0;n<r&&t[n]===e[n];n++);return{updated:e.slice(0,n),activated:e.slice(n),deactivated:t.slice(n)}}function mt(t,e,n,r){var i=lt(t,function(t,r,i,o){var a=gt(t,e);if(a)return Array.isArray(a)?a.map(function(t){return n(t,r,i,o)}):n(a,r,i,o)});return ft(r?i.reverse():i)}function gt(t,e){return"function"!=typeof t&&(t=Pt.extend(t)),t.options[e]}function bt(t){return mt(t,"beforeRouteLeave",wt,!0)}function _t(t){return mt(t,"beforeRouteUpdate",wt)}function wt(t,e){if(e)return function(){return t.apply(e,arguments)}}function Et(t,e,n){return mt(t,"beforeRouteEnter",function(t,r,i,o){return Tt(t,i,o,e,n)})}function Tt(t,e,n,r,i){return function(o,a,s){return t(o,a,function(t){s(t),"function"==typeof t&&r.push(function(){St(t,e.instances,n,i)})})}}function St(t,e,n,r){e[n]?t(e[n]):r()&&setTimeout(function(){St(t,e,n,r)},16)}function Ct(t){var e=window.location.pathname;return t&&0===e.indexOf(t)&&(e=e.slice(t.length)),(e||"/")+window.location.search+window.location.hash}function It(t){var e=Ct(t);if(!/^\/#/.test(e))return window.location.replace(T(t+"/#"+e)),!0}function kt(){var t=At();return"/"===t.charAt(0)||(Ot("/"+t),!1)}function At(){var t=window.location.href,e=t.indexOf("#");return-1===e?"":t.slice(e+1)}function Nt(t){var e=window.location.href,n=e.indexOf("#");return(n>=0?e.slice(0,n):e)+"#"+t}function Dt(t){ne?st(Nt(t)):window.location.hash=t}function Ot(t){ne?ut(Nt(t)):window.location.replace(Nt(t))}function Rt(t,e){return t.push(e),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}function xt(t,e,n){var r="hash"===n?"#"+e:e;return t?T(t+"/"+r):r}var Pt,Lt={name:"router-view",functional:!0,props:{name:{type:String,default:"default"}},render:function(t,e){var n=e.props,r=e.children,i=e.parent,s=e.data;s.routerView=!0;for(var u=i.$createElement,c=n.name,h=i.$route,l=i._routerViewCache||(i._routerViewCache={}),f=0,p=!1;i&&i._routerRoot!==i;)i.$vnode&&i.$vnode.data.routerView&&f++,i._inactive&&(p=!0),i=i.$parent;if(s.routerViewDepth=f,p)return u(l[c],s,r);var d=h.matched[f];if(!d)return l[c]=null,u();var y=l[c]=d.components[c];s.registerRouteInstance=function(t,e){var n=d.instances[c];(e&&n!==t||!e&&n===t)&&(d.instances[c]=e)},(s.hook||(s.hook={})).prepatch=function(t,e){d.instances[c]=e.componentInstance};var v=s.props=o(h,d.props&&d.props[c]);if(v){v=s.props=a({},v);var m=s.attrs=s.attrs||{};for(var g in v)y.props&&g in y.props||(m[g]=v[g],delete v[g])}return u(y,s,r)}},Mt=/[!'()*]/g,Ft=function(t){return"%"+t.charCodeAt(0).toString(16)},Ut=/%2C/g,jt=function(t){return encodeURIComponent(t).replace(Mt,Ft).replace(Ut,",")},qt=decodeURIComponent,Vt=/\/?$/,Bt=h(null,{path:"/"}),Wt=[String,Object],Kt=[String,Array],Qt={name:"router-link",props:{to:{type:Wt,required:!0},tag:{type:String,default:"a"},exact:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,event:{type:Kt,default:"click"}},render:function(t){var e=this,n=this.$router,r=this.$route,i=n.resolve(this.to,r,this.append),o=i.location,a=i.route,s=i.href,u={},c=n.options.linkActiveClass,l=n.options.linkExactActiveClass,f=null==c?"router-link-active":c,p=null==l?"router-link-exact-active":l,y=null==this.activeClass?f:this.activeClass,m=null==this.exactActiveClass?p:this.exactActiveClass,_=o.path?h(null,o,null,n):a;u[m]=d(r,_),u[y]=this.exact?u[m]:v(r,_);var w=function(t){g(t)&&(e.replace?n.replace(o):n.push(o))},E={click:g};Array.isArray(this.event)?this.event.forEach(function(t){E[t]=w}):E[this.event]=w;var T={class:u};if("a"===this.tag)T.on=E,T.attrs={href:s};else{var S=b(this.$slots.default);if(S){S.isStatic=!1;var C=Pt.util.extend;(S.data=C({},S.data)).on=E;(S.data.attrs=C({},S.data.attrs)).href=s}else T.on=E}return t(this.tag,T,this.$slots.default)}},Gt="undefined"!=typeof window,Ht=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},zt=F,$t=S,Yt=C,Xt=A,Jt=M,Zt=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");zt.parse=$t,zt.compile=Yt,zt.tokensToFunction=Xt,zt.tokensToRegExp=Jt;var te=Object.create(null),ee=Object.create(null),ne=Gt&&function(){var t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)}(),re=Gt&&window.performance&&window.performance.now?window.performance:Date,ie=it(),oe="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,ae=function(t,e){this.router=t,this.base=yt(e),this.current=Bt,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[]};ae.prototype.listen=function(t){this.cb=t},ae.prototype.onReady=function(t,e){this.ready?t():(this.readyCbs.push(t),e&&this.readyErrorCbs.push(e))},ae.prototype.onError=function(t){this.errorCbs.push(t)},ae.prototype.transitionTo=function(t,e,n){var r=this,i=this.router.match(t,this.current);this.confirmTransition(i,function(){r.updateRoute(i),e&&e(i),r.ensureURL(),r.ready||(r.ready=!0,r.readyCbs.forEach(function(t){t(i)}))},function(t){n&&n(t),t&&!r.ready&&(r.ready=!0,r.readyErrorCbs.forEach(function(e){e(t)}))})},ae.prototype.confirmTransition=function(t,e,n){var o=this,a=this.current,s=function(t){i(t)&&(o.errorCbs.length?o.errorCbs.forEach(function(e){e(t)}):(r(!1,"uncaught error during route navigation:"),console.error(t))),n&&n(t)};if(d(t,a)&&t.matched.length===a.matched.length)return this.ensureURL(),s();var u=vt(this.current.matched,t.matched),c=u.updated,h=u.deactivated,l=u.activated,f=[].concat(bt(h),this.router.beforeHooks,_t(c),l.map(function(t){return t.beforeEnter}),ht(l));this.pending=t;var p=function(e,n){if(o.pending!==t)return s();try{e(t,a,function(t){!1===t||i(t)?(o.ensureURL(!0),s(t)):"string"==typeof t||"object"==typeof t&&("string"==typeof t.path||"string"==typeof t.name)?(s(),"object"==typeof t&&t.replace?o.replace(t):o.push(t)):n(t)})}catch(t){s(t)}};ct(f,p,function(){var n=[];ct(Et(l,n,function(){return o.current===t}).concat(o.router.resolveHooks),p,function(){if(o.pending!==t)return s();o.pending=null,e(t),o.router.app&&o.router.app.$nextTick(function(){n.forEach(function(t){t()})})})})},ae.prototype.updateRoute=function(t){var e=this.current;this.current=t,this.cb&&this.cb(t),this.router.afterHooks.forEach(function(n){n&&n(t,e)})};var se=function(t){function e(e,n){var r=this;t.call(this,e,n);var i=e.options.scrollBehavior;i&&z();var o=Ct(this.base);window.addEventListener("popstate",function(t){var n=r.current,a=Ct(r.base);r.current===Bt&&a===o||r.transitionTo(a,function(t){i&&$(e,t,n,!0)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.go=function(t){window.history.go(t)},e.prototype.push=function(t,e,n){var r=this,i=this,o=i.current;this.transitionTo(t,function(t){st(T(r.base+t.fullPath)),$(r.router,t,o,!1),e&&e(t)},n)},e.prototype.replace=function(t,e,n){var r=this,i=this,o=i.current;this.transitionTo(t,function(t){ut(T(r.base+t.fullPath)),$(r.router,t,o,!1),e&&e(t)},n)},e.prototype.ensureURL=function(t){if(Ct(this.base)!==this.current.fullPath){var e=T(this.base+this.current.fullPath);t?st(e):ut(e)}},e.prototype.getCurrentLocation=function(){return Ct(this.base)},e}(ae),ue=function(t){function e(e,n,r){t.call(this,e,n),r&&It(this.base)||kt()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var t=this,e=this.router,n=e.options.scrollBehavior,r=ne&&n;r&&z(),window.addEventListener(ne?"popstate":"hashchange",function(){var e=t.current;kt()&&t.transitionTo(At(),function(n){r&&$(t.router,n,e,!0),ne||Ot(n.fullPath)})})},e.prototype.push=function(t,e,n){var r=this,i=this,o=i.current;this.transitionTo(t,function(t){Dt(t.fullPath),$(r.router,t,o,!1),e&&e(t)},n)},e.prototype.replace=function(t,e,n){var r=this,i=this,o=i.current;this.transitionTo(t,function(t){Ot(t.fullPath),$(r.router,t,o,!1),e&&e(t)},n)},e.prototype.go=function(t){window.history.go(t)},e.prototype.ensureURL=function(t){var e=this.current.fullPath;At()!==e&&(t?Dt(e):Ot(e))},e.prototype.getCurrentLocation=function(){return At()},e}(ae),ce=function(t){function e(e,n){t.call(this,e,n),this.stack=[],this.index=-1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.push=function(t,e,n){var r=this;this.transitionTo(t,function(t){r.stack=r.stack.slice(0,r.index+1).concat(t),r.index++,e&&e(t)},n)},e.prototype.replace=function(t,e,n){var r=this;this.transitionTo(t,function(t){r.stack=r.stack.slice(0,r.index).concat(t),e&&e(t)},n)},e.prototype.go=function(t){var e=this,n=this.index+t;if(!(n<0||n>=this.stack.length)){var r=this.stack[n];this.confirmTransition(r,function(){e.index=n,e.updateRoute(r)})}},e.prototype.getCurrentLocation=function(){var t=this.stack[this.stack.length-1];return t?t.fullPath:"/"},e.prototype.ensureURL=function(){},e}(ae),he=function(t){void 0===t&&(t={}),this.app=null,this.apps=[],this.options=t,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=Q(t.routes||[],this);var e=t.mode||"hash";switch(this.fallback="history"===e&&!ne&&!1!==t.fallback,this.fallback&&(e="hash"),Gt||(e="abstract"),this.mode=e,e){case"history":this.history=new se(this,t.base);break;case"hash":this.history=new ue(this,t.base,this.fallback);break;case"abstract":this.history=new ce(this,t.base)}},le={currentRoute:{configurable:!0}};he.prototype.match=function(t,e,n){return this.matcher.match(t,e,n)},le.currentRoute.get=function(){return this.history&&this.history.current},he.prototype.init=function(t){var e=this;if(this.apps.push(t),!this.app){this.app=t;var n=this.history;if(n instanceof se)n.transitionTo(n.getCurrentLocation());else if(n instanceof ue){var r=function(){n.setupListeners()};n.transitionTo(n.getCurrentLocation(),r,r)}n.listen(function(t){e.apps.forEach(function(e){e._route=t})})}},he.prototype.beforeEach=function(t){return Rt(this.beforeHooks,t)},he.prototype.beforeResolve=function(t){return Rt(this.resolveHooks,t)},he.prototype.afterEach=function(t){return Rt(this.afterHooks,t)},he.prototype.onReady=function(t,e){this.history.onReady(t,e)},he.prototype.onError=function(t){this.history.onError(t)},he.prototype.push=function(t,e,n){this.history.push(t,e,n)},he.prototype.replace=function(t,e,n){this.history.replace(t,e,n)},he.prototype.go=function(t){this.history.go(t)},he.prototype.back=function(){this.go(-1)},he.prototype.forward=function(){this.go(1)},he.prototype.getMatchedComponents=function(t){var e=t?t.matched?t:this.resolve(t).route:this.currentRoute;return e?[].concat.apply([],e.matched.map(function(t){return Object.keys(t.components).map(function(e){return t.components[e]})})):[]},he.prototype.resolve=function(t,e,n){var r=W(t,e||this.history.current,n,this),i=this.match(r,e),o=i.redirectedFrom||i.fullPath;return{location:r,route:i,href:xt(this.history.base,o,this.mode),normalizedTo:r,resolved:i}},he.prototype.addRoutes=function(t){this.matcher.addRoutes(t),this.history.current!==Bt&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(he.prototype,le),he.install=_,he.version="2.8.1",Gt&&window.Vue&&window.Vue.use(he),e.a=he},"0Lvz":function(t,e,n){var r=n("W6Rd"),i=n("+MZ2");t.exports=function(t){return function(e,n){var o,a,s=String(i(e)),u=r(n),c=s.length;return u<0||u>=c?t?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},"0Q51":function(t,e,n){t.exports=n("izte")("native-function-to-string",Function.toString)},"162o":function(t,e,n){(function(t){function r(t,e){this._id=t,this._clearFn=e}var i=void 0!==t&&t||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;e.setTimeout=function(){return new r(o.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new r(o.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n("mypn"),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(e,n("DuR2"))},"17Rs":function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},"1RnF":function(t,e,n){t.exports=n("aLzV")},"1rEs":function(t,e,n){var r=n("q0qZ"),i=n("K6eN"),o=n("5+O3"),a=n("whWw"),s=Object.defineProperty;e.f=r?s:function(t,e,n){if(o(t),e=a(e,!0),o(n),i)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},"1yV6":function(t,e,n){var r=n("FHqv"),i=n("hgbu")("iterator"),o=n("yYxz");t.exports=n("iANj").getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[r(t)]}},"3HN9":function(t,e,n){"use strict";function r(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=i(e),this.reject=i(n)}var i=n("SWGL");t.exports.f=function(t){return new r(t)}},"3fMt":function(t,e,n){var r=n("SWGL");t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},"3mz+":function(t,e,n){var r=n("PedI"),i=n("a/rO"),o=n("hcE8"),a=n("wkr2"),s=n("jAiL"),u=s("iterator"),c=s("toStringTag"),h=i.values;for(var l in r){var f=o[l],p=f&&f.prototype;if(p){if(p[u]!==h)try{a(p,u,h)}catch(t){p[u]=h}if(p[c]||a(p,c,l),r[l])for(var d in i)if(p[d]!==i[d])try{a(p,d,i[d])}catch(t){p[d]=i[d]}}}},"40wi":function(t,e,n){var r=n("mWhC"),i=Math.max,o=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):o(n,e)}},"40x7":function(t,e,n){var r=n("5in1"),i=n("hiy0");t.exports=function(t,e,n){if(r(e))throw TypeError("String.prototype."+n+" doesn't accept regex");return String(i(t))}},"43zn":function(t,e,n){var r=n("5+O3"),i=n("o/tC"),o=n("YveC"),a=n("N5RP"),s=n("P1fK"),u=n("siPu")("IE_PROTO"),c=function(){},h=function(){var t,e=s("iframe"),n=o.length;for(e.style.display="none",a.appendChild(e),e.src=String("javascript:"),t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),h=t.F;n--;)delete h.prototype[o[n]];return h()};t.exports=Object.create||function(t,e){var n;return null!==t?(c.prototype=r(t),n=new c,c.prototype=null,n[u]=t):n=h(),void 0===e?n:i(n,e)},n("Eb96")[u]=!0},"45zI":function(t,e,n){"use strict";var r=n("q0qZ"),i=n("l/2K"),o=n("HAas"),a=n("1rEs").f,s=n("PYrI"),u=n("hcE8").Symbol;if(r&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var c={},h=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof h?new u(t):void 0===t?u():u(t);return""===t&&(c[e]=!0),e};s(h,u);var l=h.prototype=u.prototype;l.constructor=h;var f=l.toString,p="Symbol(test)"==String(u("test")),d=/^Symbol\((.*)\)[^)]+$/;a(l,"description",{configurable:!0,get:function(){var t=o(this)?this.valueOf():this,e=f.call(t);if(i(c,t))return"";var n=p?e.slice(7,-1):e.replace(d,"$1");return""===n?void 0:n}}),n("i9tX")({global:!0,forced:!0},{Symbol:h})}},"4S0F":function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},"4dmN":function(t,e,n){"use strict";var r=n("c8Kh"),i=n("Wdy1"),o=n("1RnF"),a=n("aLzV"),s=n("yYxz"),u=n("I7B8"),c=n("LhDF"),h=n("VD8v"),l=n("hgbu")("iterator"),f=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,n,d,y,v,m){u(n,e,d);var g,b,_,w=function(t){if(!f&&t in C)return C[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},E=e+" Iterator",T="values"==y,S=!1,C=t.prototype,I=C[l]||C["@@iterator"]||y&&C[y],k=I||w(y),A=y?T?w("entries"):k:void 0,N="Array"==e?C.entries||I:I;if(N&&(_=h(N.call(new t)))!==Object.prototype&&_.next&&(c(_,E,!0),r||"function"==typeof _[l]||a(_,l,p)),T&&I&&"values"!==I.name&&(S=!0,k=function(){return I.call(this)}),r&&!m||!f&&!S&&C[l]||a(C,l,k),s[e]=k,s[E]=p,y)if(g={values:T?k:w("values"),keys:v?k:w("keys"),entries:A},m)for(b in g)b in C||o(C,b,g[b]);else i(i.P+i.F*(f||S),e,g);return g}},"5+O3":function(t,e,n){var r=n("HAas");t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},"5in1":function(t,e,n){var r=n("HAas"),i=n("raVe"),o=n("jAiL")("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},"649e":function(t,e,n){var r=n("Xo5R"),i=n("fkET"),o=n("EJk4"),a=n("xDUa"),s=n("MkIS");t.exports=function(t,e){var n=1==t,u=2==t,c=3==t,h=4==t,l=6==t,f=5==t||l,p=e||s;return function(e,s,d){for(var y,v,m=o(e),g=i(m),b=r(s,d,3),_=a(g.length),w=0,E=n?p(e,_):u?p(e,0):void 0;_>w;w++)if((f||w in g)&&(y=g[w],v=b(y,w,m),t))if(n)E[w]=v;else if(v)switch(t){case 3:return!0;case 5:return y;case 6:return w;case 2:E.push(y)}else if(h)return!1;return l?-1:c||h?h:E}}},"65ot":function(t,e,n){"use strict";var r=n("/09a"),i=n("fTzd"),o=n("NGss"),a=n("EJk4"),s=n("fkET"),u=Object.assign;t.exports=!u||n("r54x")(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||r(u({},e)).join("")!=i})?function(t,e){for(var n=a(t),u=arguments.length,c=1,h=i.f,l=o.f;u>c;)for(var f,p=s(arguments[c++]),d=h?r(p).concat(h(p)):r(p),y=d.length,v=0;y>v;)l.call(p,f=d[v++])&&(n[f]=p[f]);return n}:u},"6Az+":function(t,e,n){t.exports=n("z4Y4"),n("Rgwr"),n("g+rL"),n("tAQF")},"7+uW":function(t,e,n){"use strict";(function(t,n){function r(t){return void 0===t||null===t}function i(t){return void 0!==t&&null!==t}function o(t){return!0===t}function a(t){return!1===t}function s(t){return"string"==typeof t||"number"==typeof t||"symbol"==typeof t||"boolean"==typeof t}function u(t){return null!==t&&"object"==typeof t}function c(t){return"[object Object]"===Co.call(t)}function h(t){return"[object RegExp]"===Co.call(t)}function l(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function f(t){return i(t)&&"function"==typeof t.then&&"function"==typeof t.catch}function p(t){return null==t?"":Array.isArray(t)||c(t)&&t.toString===Co?JSON.stringify(t,null,2):String(t)}function d(t){var e=parseFloat(t);return isNaN(e)?t:e}function y(t,e){for(var n=Object.create(null),r=t.split(","),i=0;i<r.length;i++)n[r[i]]=!0;return e?function(t){return n[t.toLowerCase()]}:function(t){return n[t]}}function v(t,e){if(t.length){var n=t.indexOf(e);if(n>-1)return t.splice(n,1)}}function m(t,e){return Ao.call(t,e)}function g(t){var e=Object.create(null);return function(n){return e[n]||(e[n]=t(n))}}function b(t,e){function n(n){var r=arguments.length;return r?r>1?t.apply(e,arguments):t.call(e,n):t.call(e)}return n._length=t.length,n}function _(t,e){return t.bind(e)}function w(t,e){e=e||0;for(var n=t.length-e,r=new Array(n);n--;)r[n]=t[n+e];return r}function E(t,e){for(var n in e)t[n]=e[n];return t}function T(t){for(var e={},n=0;n<t.length;n++)t[n]&&E(e,t[n]);return e}function S(t,e,n){}function C(t,e){if(t===e)return!0;var n=u(t),r=u(e);if(!n||!r)return!n&&!r&&String(t)===String(e);try{var i=Array.isArray(t),o=Array.isArray(e);if(i&&o)return t.length===e.length&&t.every(function(t,n){return C(t,e[n])});if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(i||o)return!1;var a=Object.keys(t),s=Object.keys(e);return a.length===s.length&&a.every(function(n){return C(t[n],e[n])})}catch(t){return!1}}function I(t,e){for(var n=0;n<t.length;n++)if(C(t[n],e))return n;return-1}function k(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}function A(t){var e=(t+"").charCodeAt(0);return 36===e||95===e}function N(t,e,n,r){Object.defineProperty(t,e,{value:n,enumerable:!!r,writable:!0,configurable:!0})}function D(t){if(!Bo.test(t)){var e=t.split(".");return function(t){for(var n=0;n<e.length;n++){if(!t)return;t=t[e[n]]}return t}}}function O(t){return"function"==typeof t&&/native code/.test(t.toString())}function R(t){ha.push(t),ca.target=t}function x(){ha.pop(),ca.target=ha[ha.length-1]}function P(t){return new la(void 0,void 0,void 0,String(t))}function L(t){var e=new la(t.tag,t.data,t.children&&t.children.slice(),t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.asyncMeta=t.asyncMeta,e.isCloned=!0,e}function M(t){ma=t}function F(t,e){t.__proto__=e}function U(t,e,n){for(var r=0,i=n.length;r<i;r++){var o=n[r];N(t,o,e[o])}}function j(t,e){if(u(t)&&!(t instanceof la)){var n;return m(t,"__ob__")&&t.__ob__ instanceof ga?n=t.__ob__:ma&&!ia()&&(Array.isArray(t)||c(t))&&Object.isExtensible(t)&&!t._isVue&&(n=new ga(t)),e&&n&&n.vmCount++,n}}function q(t,e,n,r,i){var o=new ca,a=Object.getOwnPropertyDescriptor(t,e);if(!a||!1!==a.configurable){var s=a&&a.get,u=a&&a.set;s&&!u||2!==arguments.length||(n=t[e]);var c=!i&&j(n);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=s?s.call(t):n;return ca.target&&(o.depend(),c&&(c.dep.depend(),Array.isArray(e)&&W(e))),e},set:function(e){var r=s?s.call(t):n;e===r||e!==e&&r!==r||s&&!u||(u?u.call(t,e):n=e,c=!i&&j(e),o.notify())}})}}function V(t,e,n){if(Array.isArray(t)&&l(e))return t.length=Math.max(t.length,e),t.splice(e,1,n),n;if(e in t&&!(e in Object.prototype))return t[e]=n,n;var r=t.__ob__;return t._isVue||r&&r.vmCount?n:r?(q(r.value,e,n),r.dep.notify(),n):(t[e]=n,n)}function B(t,e){if(Array.isArray(t)&&l(e))return void t.splice(e,1);var n=t.__ob__;t._isVue||n&&n.vmCount||m(t,e)&&(delete t[e],n&&n.dep.notify())}function W(t){for(var e=void 0,n=0,r=t.length;n<r;n++)e=t[n],e&&e.__ob__&&e.__ob__.dep.depend(),Array.isArray(e)&&W(e)}function K(t,e){if(!e)return t;for(var n,r,i,o=aa?Reflect.ownKeys(e):Object.keys(e),a=0;a<o.length;a++)"__ob__"!==(n=o[a])&&(r=t[n],i=e[n],m(t,n)?r!==i&&c(r)&&c(i)&&K(r,i):V(t,n,i));return t}function Q(t,e,n){return n?function(){var r="function"==typeof e?e.call(n,n):e,i="function"==typeof t?t.call(n,n):t;return r?K(r,i):i}:e?t?function(){return K("function"==typeof e?e.call(this,this):e,"function"==typeof t?t.call(this,this):t)}:e:t}function G(t,e){var n=e?t?t.concat(e):Array.isArray(e)?e:[e]:t;return n?H(n):n}function H(t){for(var e=[],n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n]);return e}function z(t,e,n,r){var i=Object.create(t||null);return e?E(i,e):i}function $(t,e){var n=t.props;if(n){var r,i,o,a={};if(Array.isArray(n))for(r=n.length;r--;)"string"==typeof(i=n[r])&&(o=Do(i),a[o]={type:null});else if(c(n))for(var s in n)i=n[s],o=Do(s),a[o]=c(i)?i:{type:i};t.props=a}}function Y(t,e){var n=t.inject;if(n){var r=t.inject={};if(Array.isArray(n))for(var i=0;i<n.length;i++)r[n[i]]={from:n[i]};else if(c(n))for(var o in n){var a=n[o];r[o]=c(a)?E({from:o},a):{from:a}}}}function X(t){var e=t.directives;if(e)for(var n in e){var r=e[n];"function"==typeof r&&(e[n]={bind:r,update:r})}}function J(t,e,n){function r(r){var i=ba[r]||wa;s[r]=i(t[r],e[r],n,r)}if("function"==typeof e&&(e=e.options),$(e,n),Y(e,n),X(e),!e._base&&(e.extends&&(t=J(t,e.extends,n)),e.mixins))for(var i=0,o=e.mixins.length;i<o;i++)t=J(t,e.mixins[i],n);var a,s={};for(a in t)r(a);for(a in e)m(t,a)||r(a);return s}function Z(t,e,n,r){if("string"==typeof n){var i=t[e];if(m(i,n))return i[n];var o=Do(n);if(m(i,o))return i[o];var a=Oo(o);if(m(i,a))return i[a];return i[n]||i[o]||i[a]}}function tt(t,e,n,r){var i=e[t],o=!m(n,t),a=n[t],s=it(Boolean,i.type);if(s>-1)if(o&&!m(i,"default"))a=!1;else if(""===a||a===xo(t)){var u=it(String,i.type);(u<0||s<u)&&(a=!0)}if(void 0===a){a=et(r,i,t);var c=ma;M(!0),j(a),M(c)}return a}function et(t,e,n){if(m(e,"default")){var r=e.default;return t&&t.$options.propsData&&void 0===t.$options.propsData[n]&&void 0!==t._props[n]?t._props[n]:"function"==typeof r&&"Function"!==nt(e.type)?r.call(t):r}}function nt(t){var e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function rt(t,e){return nt(t)===nt(e)}function it(t,e){if(!Array.isArray(e))return rt(e,t)?0:-1;for(var n=0,r=e.length;n<r;n++)if(rt(e[n],t))return n;return-1}function ot(t,e,n){R();try{if(e)for(var r=e;r=r.$parent;){var i=r.$options.errorCaptured;if(i)for(var o=0;o<i.length;o++)try{var a=!1===i[o].call(r,t,e,n);if(a)return}catch(t){st(t,r,"errorCaptured hook")}}st(t,e,n)}finally{x()}}function at(t,e,n,r,i){var o;try{o=n?t.apply(e,n):t.call(e),o&&!o._isVue&&f(o)&&!o._handled&&(o.catch(function(t){return ot(t,r,i+" (Promise/async)")}),o._handled=!0)}catch(t){ot(t,r,i)}return o}function st(t,e,n){if(qo.errorHandler)try{return qo.errorHandler.call(null,t,e,n)}catch(e){e!==t&&ut(e,null,"config.errorHandler")}ut(t,e,n)}function ut(t,e,n){if(!Ko&&!Qo||"undefined"==typeof console)throw t;console.error(t)}function ct(){Sa=!1;var t=Ta.slice(0);Ta.length=0;for(var e=0;e<t.length;e++)t[e]()}function ht(t,e){var n;if(Ta.push(function(){if(t)try{t.call(e)}catch(t){ot(t,e,"nextTick")}else n&&n(e)}),Sa||(Sa=!0,_a()),!t&&"undefined"!=typeof Promise)return new Promise(function(t){n=t})}function lt(t){ft(t,Na),Na.clear()}function ft(t,e){var n,r,i=Array.isArray(t);if(!(!i&&!u(t)||Object.isFrozen(t)||t instanceof la)){if(t.__ob__){var o=t.__ob__.dep.id;if(e.has(o))return;e.add(o)}if(i)for(n=t.length;n--;)ft(t[n],e);else for(r=Object.keys(t),n=r.length;n--;)ft(t[r[n]],e)}}function pt(t,e){function n(){var t=arguments,r=n.fns;if(!Array.isArray(r))return at(r,null,arguments,e,"v-on handler");for(var i=r.slice(),o=0;o<i.length;o++)at(i[o],null,t,e,"v-on handler")}return n.fns=t,n}function dt(t,e,n,i,a,s){var u,c,h,l;for(u in t)c=t[u],h=e[u],l=Da(u),r(c)||(r(h)?(r(c.fns)&&(c=t[u]=pt(c,s)),o(l.once)&&(c=t[u]=a(l.name,c,l.capture)),n(l.name,c,l.capture,l.passive,l.params)):c!==h&&(h.fns=c,t[u]=h));for(u in e)r(t[u])&&(l=Da(u),i(l.name,e[u],l.capture))}function yt(t,e,n){function a(){n.apply(this,arguments),v(s.fns,a)}t instanceof la&&(t=t.data.hook||(t.data.hook={}));var s,u=t[e];r(u)?s=pt([a]):i(u.fns)&&o(u.merged)?(s=u,s.fns.push(a)):s=pt([u,a]),s.merged=!0,t[e]=s}function vt(t,e,n){var o=e.options.props;if(!r(o)){var a={},s=t.attrs,u=t.props;if(i(s)||i(u))for(var c in o){var h=xo(c);mt(a,u,c,h,!0)||mt(a,s,c,h,!1)}return a}}function mt(t,e,n,r,o){if(i(e)){if(m(e,n))return t[n]=e[n],o||delete e[n],!0;if(m(e,r))return t[n]=e[r],o||delete e[r],!0}return!1}function gt(t){for(var e=0;e<t.length;e++)if(Array.isArray(t[e]))return Array.prototype.concat.apply([],t);return t}function bt(t){return s(t)?[P(t)]:Array.isArray(t)?wt(t):void 0}function _t(t){return i(t)&&i(t.text)&&a(t.isComment)}function wt(t,e){var n,a,u,c,h=[];for(n=0;n<t.length;n++)a=t[n],r(a)||"boolean"==typeof a||(u=h.length-1,c=h[u],Array.isArray(a)?a.length>0&&(a=wt(a,(e||"")+"_"+n),_t(a[0])&&_t(c)&&(h[u]=P(c.text+a[0].text),a.shift()),h.push.apply(h,a)):s(a)?_t(c)?h[u]=P(c.text+a):""!==a&&h.push(P(a)):_t(a)&&_t(c)?h[u]=P(c.text+a.text):(o(t._isVList)&&i(a.tag)&&r(a.key)&&i(e)&&(a.key="__vlist"+e+"_"+n+"__"),h.push(a)));return h}function Et(t){var e=t.$options.provide;e&&(t._provided="function"==typeof e?e.call(t):e)}function Tt(t){var e=St(t.$options.inject,t);e&&(M(!1),Object.keys(e).forEach(function(n){q(t,n,e[n])}),M(!0))}function St(t,e){if(t){for(var n=Object.create(null),r=aa?Reflect.ownKeys(t):Object.keys(t),i=0;i<r.length;i++){var o=r[i];if("__ob__"!==o){for(var a=t[o].from,s=e;s;){if(s._provided&&m(s._provided,a)){n[o]=s._provided[a];break}s=s.$parent}if(!s&&"default"in t[o]){var u=t[o].default;n[o]="function"==typeof u?u.call(e):u}}}return n}}function Ct(t,e){if(!t||!t.length)return{};for(var n={},r=0,i=t.length;r<i;r++){var o=t[r],a=o.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,o.context!==e&&o.fnContext!==e||!a||null==a.slot)(n.default||(n.default=[])).push(o);else{var s=a.slot,u=n[s]||(n[s]=[]);"template"===o.tag?u.push.apply(u,o.children||[]):u.push(o)}}for(var c in n)n[c].every(It)&&delete n[c];return n}function It(t){return t.isComment&&!t.asyncFactory||" "===t.text}function kt(t,e,n){var r,i=Object.keys(e).length>0,o=t?!!t.$stable:!i,a=t&&t.$key;if(t){if(t._normalized)return t._normalized;if(o&&n&&n!==So&&a===n.$key&&!i&&!n.$hasNormal)return n;r={};for(var s in t)t[s]&&"$"!==s[0]&&(r[s]=At(e,s,t[s]))}else r={};for(var u in e)u in r||(r[u]=Nt(e,u));return t&&Object.isExtensible(t)&&(t._normalized=r),N(r,"$stable",o),N(r,"$key",a),N(r,"$hasNormal",i),r}function At(t,e,n){var r=function(){var t=arguments.length?n.apply(null,arguments):n({});return t=t&&"object"==typeof t&&!Array.isArray(t)?[t]:bt(t),t&&(0===t.length||1===t.length&&t[0].isComment)?void 0:t};return n.proxy&&Object.defineProperty(t,e,{get:r,enumerable:!0,configurable:!0}),r}function Nt(t,e){return function(){return t[e]}}function Dt(t,e){var n,r,o,a,s;if(Array.isArray(t)||"string"==typeof t)for(n=new Array(t.length),r=0,o=t.length;r<o;r++)n[r]=e(t[r],r);else if("number"==typeof t)for(n=new Array(t),r=0;r<t;r++)n[r]=e(r+1,r);else if(u(t))if(aa&&t[Symbol.iterator]){n=[];for(var c=t[Symbol.iterator](),h=c.next();!h.done;)n.push(e(h.value,n.length)),h=c.next()}else for(a=Object.keys(t),n=new Array(a.length),r=0,o=a.length;r<o;r++)s=a[r],n[r]=e(t[s],s,r);return i(n)||(n=[]),n._isVList=!0,n}function Ot(t,e,n,r){var i,o=this.$scopedSlots[t];o?(n=n||{},r&&(n=E(E({},r),n)),i=o(n)||e):i=this.$slots[t]||e;var a=n&&n.slot;return a?this.$createElement("template",{slot:a},i):i}function Rt(t){return Z(this.$options,"filters",t,!0)||Mo}function xt(t,e){return Array.isArray(t)?-1===t.indexOf(e):t!==e}function Pt(t,e,n,r,i){var o=qo.keyCodes[e]||n;return i&&r&&!qo.keyCodes[e]?xt(i,r):o?xt(o,t):r?xo(r)!==e:void 0}function Lt(t,e,n,r,i){if(n)if(u(n)){Array.isArray(n)&&(n=T(n));var o;for(var a in n)!function(a){if("class"===a||"style"===a||ko(a))o=t;else{var s=t.attrs&&t.attrs.type;o=r||qo.mustUseProp(e,s,a)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}var u=Do(a),c=xo(a);if(!(u in o||c in o)&&(o[a]=n[a],i)){(t.on||(t.on={}))["update:"+a]=function(t){n[a]=t}}}(a)}else;return t}function Mt(t,e){var n=this._staticTrees||(this._staticTrees=[]),r=n[t];return r&&!e?r:(r=n[t]=this.$options.staticRenderFns[t].call(this._renderProxy,null,this),Ut(r,"__static__"+t,!1),r)}function Ft(t,e,n){return Ut(t,"__once__"+e+(n?"_"+n:""),!0),t}function Ut(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]&&"string"!=typeof t[r]&&jt(t[r],e+"_"+r,n);else jt(t,e,n)}function jt(t,e,n){t.isStatic=!0,t.key=e,t.isOnce=n}function qt(t,e){if(e)if(c(e)){var n=t.on=t.on?E({},t.on):{};for(var r in e){var i=n[r],o=e[r];n[r]=i?[].concat(i,o):o}}else;return t}function Vt(t,e,n,r){e=e||{$stable:!n};for(var i=0;i<t.length;i++){var o=t[i];Array.isArray(o)?Vt(o,e,n):o&&(o.proxy&&(o.fn.proxy=!0),e[o.key]=o.fn)}return r&&(e.$key=r),e}function Bt(t,e){for(var n=0;n<e.length;n+=2){var r=e[n];"string"==typeof r&&r&&(t[e[n]]=e[n+1])}return t}function Wt(t,e){return"string"==typeof t?e+t:t}function Kt(t){t._o=Ft,t._n=d,t._s=p,t._l=Dt,t._t=Ot,t._q=C,t._i=I,t._m=Mt,t._f=Rt,t._k=Pt,t._b=Lt,t._v=P,t._e=pa,t._u=Vt,t._g=qt,t._d=Bt,t._p=Wt}function Qt(t,e,n,r,i){var a,s=this,u=i.options;m(r,"_uid")?(a=Object.create(r),a._original=r):(a=r,r=r._original);var c=o(u._compiled),h=!c;this.data=t,this.props=e,this.children=n,this.parent=r,this.listeners=t.on||So,this.injections=St(u.inject,r),this.slots=function(){return s.$slots||kt(t.scopedSlots,s.$slots=Ct(n,r)),s.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return kt(t.scopedSlots,this.slots())}}),c&&(this.$options=u,this.$slots=this.slots(),this.$scopedSlots=kt(t.scopedSlots,this.$slots)),u._scopeId?this._c=function(t,e,n,i){var o=te(a,t,e,n,i,h);return o&&!Array.isArray(o)&&(o.fnScopeId=u._scopeId,o.fnContext=r),o}:this._c=function(t,e,n,r){return te(a,t,e,n,r,h)}}function Gt(t,e,n,r,o){var a=t.options,s={},u=a.props;if(i(u))for(var c in u)s[c]=tt(c,u,e||So);else i(n.attrs)&&zt(s,n.attrs),i(n.props)&&zt(s,n.props);var h=new Qt(n,s,o,r,t),l=a.render.call(null,h._c,h);if(l instanceof la)return Ht(l,n,h.parent,a,h);if(Array.isArray(l)){for(var f=bt(l)||[],p=new Array(f.length),d=0;d<f.length;d++)p[d]=Ht(f[d],n,h.parent,a,h);return p}}function Ht(t,e,n,r,i){var o=L(t);return o.fnContext=n,o.fnOptions=r,e.slot&&((o.data||(o.data={})).slot=e.slot),o}function zt(t,e){for(var n in e)t[Do(n)]=e[n]}function $t(t,e,n,a,s){if(!r(t)){var c=n.$options._base;if(u(t)&&(t=c.extend(t)),"function"==typeof t){var h;if(r(t.cid)&&(h=t,void 0===(t=se(h,c))))return ae(h,e,n,a,s);e=e||{},Be(t),i(e.model)&&Zt(t.options,e);var l=vt(e,t,s);if(o(t.options.functional))return Gt(t,l,e,n,a);var f=e.on;if(e.on=e.nativeOn,o(t.options.abstract)){var p=e.slot;e={},p&&(e.slot=p)}Xt(e);var d=t.options.name||s;return new la("vue-component-"+t.cid+(d?"-"+d:""),e,void 0,void 0,void 0,n,{Ctor:t,propsData:l,listeners:f,tag:s,children:a},h)}}}function Yt(t,e){var n={_isComponent:!0,_parentVnode:t,parent:e},r=t.data.inlineTemplate;return i(r)&&(n.render=r.render,n.staticRenderFns=r.staticRenderFns),new t.componentOptions.Ctor(n)}function Xt(t){for(var e=t.hook||(t.hook={}),n=0;n<xa.length;n++){var r=xa[n],i=e[r],o=Ra[r];i===o||i&&i._merged||(e[r]=i?Jt(o,i):o)}}function Jt(t,e){var n=function(n,r){t(n,r),e(n,r)};return n._merged=!0,n}function Zt(t,e){var n=t.model&&t.model.prop||"value",r=t.model&&t.model.event||"input";(e.attrs||(e.attrs={}))[n]=e.model.value;var o=e.on||(e.on={}),a=o[r],s=e.model.callback;i(a)?(Array.isArray(a)?-1===a.indexOf(s):a!==s)&&(o[r]=[s].concat(a)):o[r]=s}function te(t,e,n,r,i,a){return(Array.isArray(n)||s(n))&&(i=r,r=n,n=void 0),o(a)&&(i=La),ee(t,e,n,r,i)}function ee(t,e,n,r,o){if(i(n)&&i(n.__ob__))return pa();if(i(n)&&i(n.is)&&(e=n.is),!e)return pa();Array.isArray(r)&&"function"==typeof r[0]&&(n=n||{},n.scopedSlots={default:r[0]},r.length=0),o===La?r=bt(r):o===Pa&&(r=gt(r));var a,s;if("string"==typeof e){var u;s=t.$vnode&&t.$vnode.ns||qo.getTagNamespace(e),a=qo.isReservedTag(e)?new la(qo.parsePlatformTagName(e),n,r,void 0,void 0,t):n&&n.pre||!i(u=Z(t.$options,"components",e))?new la(e,n,r,void 0,void 0,t):$t(u,n,t,r,e)}else a=$t(e,n,t,r);return Array.isArray(a)?a:i(a)?(i(s)&&ne(a,s),i(n)&&re(n),a):pa()}function ne(t,e,n){if(t.ns=e,"foreignObject"===t.tag&&(e=void 0,n=!0),i(t.children))for(var a=0,s=t.children.length;a<s;a++){var u=t.children[a];i(u.tag)&&(r(u.ns)||o(n)&&"svg"!==u.tag)&&ne(u,e,n)}}function re(t){u(t.style)&&lt(t.style),u(t.class)&&lt(t.class)}function ie(t){t._vnode=null,t._staticTrees=null;var e=t.$options,n=t.$vnode=e._parentVnode,r=n&&n.context;t.$slots=Ct(e._renderChildren,r),t.$scopedSlots=So,t._c=function(e,n,r,i){return te(t,e,n,r,i,!1)},t.$createElement=function(e,n,r,i){return te(t,e,n,r,i,!0)};var i=n&&n.data;q(t,"$attrs",i&&i.attrs||So,null,!0),q(t,"$listeners",e._parentListeners||So,null,!0)}function oe(t,e){return(t.__esModule||aa&&"Module"===t[Symbol.toStringTag])&&(t=t.default),u(t)?e.extend(t):t}function ae(t,e,n,r,i){var o=pa();return o.asyncFactory=t,o.asyncMeta={data:e,context:n,children:r,tag:i},o}function se(t,e){if(o(t.error)&&i(t.errorComp))return t.errorComp;if(i(t.resolved))return t.resolved;var n=Ma;if(n&&i(t.owners)&&-1===t.owners.indexOf(n)&&t.owners.push(n),o(t.loading)&&i(t.loadingComp))return t.loadingComp;if(n&&!i(t.owners)){var a=t.owners=[n],s=!0,c=null,h=null;n.$on("hook:destroyed",function(){return v(a,n)});var l=function(t){for(var e=0,n=a.length;e<n;e++)a[e].$forceUpdate();t&&(a.length=0,null!==c&&(clearTimeout(c),c=null),null!==h&&(clearTimeout(h),h=null))},p=k(function(n){t.resolved=oe(n,e),s?a.length=0:l(!0)}),d=k(function(e){i(t.errorComp)&&(t.error=!0,l(!0))}),y=t(p,d);return u(y)&&(f(y)?r(t.resolved)&&y.then(p,d):f(y.component)&&(y.component.then(p,d),i(y.error)&&(t.errorComp=oe(y.error,e)),i(y.loading)&&(t.loadingComp=oe(y.loading,e),0===y.delay?t.loading=!0:c=setTimeout(function(){c=null,r(t.resolved)&&r(t.error)&&(t.loading=!0,l(!1))},y.delay||200)),i(y.timeout)&&(h=setTimeout(function(){h=null,r(t.resolved)&&d(null)},y.timeout)))),s=!1,t.loading?t.loadingComp:t.resolved}}function ue(t){return t.isComment&&t.asyncFactory}function ce(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var n=t[e];if(i(n)&&(i(n.componentOptions)||ue(n)))return n}}function he(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&de(t,e)}function le(t,e){Oa.$on(t,e)}function fe(t,e){Oa.$off(t,e)}function pe(t,e){var n=Oa;return function r(){null!==e.apply(null,arguments)&&n.$off(t,r)}}function de(t,e,n){Oa=t,dt(e,n||{},le,fe,pe,t),Oa=void 0}function ye(t){var e=Fa;return Fa=t,function(){Fa=e}}function ve(t){var e=t.$options,n=e.parent;if(n&&!e.abstract){for(;n.$options.abstract&&n.$parent;)n=n.$parent;n.$children.push(t)}t.$parent=n,t.$root=n?n.$root:t,t.$children=[],t.$refs={},t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}function me(t,e,n){t.$el=e,t.$options.render||(t.$options.render=pa),Ee(t,"beforeMount");var r;return r=function(){t._update(t._render(),n)},new za(t,r,S,{before:function(){t._isMounted&&!t._isDestroyed&&Ee(t,"beforeUpdate")}},!0),n=!1,null==t.$vnode&&(t._isMounted=!0,Ee(t,"mounted")),t}function ge(t,e,n,r,i){var o=r.data.scopedSlots,a=t.$scopedSlots,s=!!(o&&!o.$stable||a!==So&&!a.$stable||o&&t.$scopedSlots.$key!==o.$key),u=!!(i||t.$options._renderChildren||s);if(t.$options._parentVnode=r,t.$vnode=r,t._vnode&&(t._vnode.parent=r),t.$options._renderChildren=i,t.$attrs=r.data.attrs||So,t.$listeners=n||So,e&&t.$options.props){M(!1);for(var c=t._props,h=t.$options._propKeys||[],l=0;l<h.length;l++){var f=h[l],p=t.$options.props;c[f]=tt(f,p,e,t)}M(!0),t.$options.propsData=e}n=n||So;var d=t.$options._parentListeners;t.$options._parentListeners=n,de(t,n,d),u&&(t.$slots=Ct(i,r.context),t.$forceUpdate())}function be(t){for(;t&&(t=t.$parent);)if(t._inactive)return!0;return!1}function _e(t,e){if(e){if(t._directInactive=!1,be(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var n=0;n<t.$children.length;n++)_e(t.$children[n]);Ee(t,"activated")}}function we(t,e){if(!(e&&(t._directInactive=!0,be(t))||t._inactive)){t._inactive=!0;for(var n=0;n<t.$children.length;n++)we(t.$children[n]);Ee(t,"deactivated")}}function Ee(t,e){R();var n=t.$options[e],r=e+" hook";if(n)for(var i=0,o=n.length;i<o;i++)at(n[i],t,null,t,r);t._hasHookEvent&&t.$emit("hook:"+e),x()}function Te(){Wa=Ua.length=ja.length=0,qa={},Va=Ba=!1}function Se(){Ka=Qa(),Ba=!0;var t,e;for(Ua.sort(function(t,e){return t.id-e.id}),Wa=0;Wa<Ua.length;Wa++)t=Ua[Wa],t.before&&t.before(),e=t.id,qa[e]=null,t.run();var n=ja.slice(),r=Ua.slice();Te(),ke(n),Ce(r),oa&&qo.devtools&&oa.emit("flush")}function Ce(t){for(var e=t.length;e--;){var n=t[e],r=n.vm;r._watcher===n&&r._isMounted&&!r._isDestroyed&&Ee(r,"updated")}}function Ie(t){t._inactive=!1,ja.push(t)}function ke(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,_e(t[e],!0)}function Ae(t){var e=t.id;if(null==qa[e]){if(qa[e]=!0,Ba){for(var n=Ua.length-1;n>Wa&&Ua[n].id>t.id;)n--;Ua.splice(n+1,0,t)}else Ua.push(t);Va||(Va=!0,ht(Se))}}function Ne(t,e,n){$a.get=function(){return this[e][n]},$a.set=function(t){this[e][n]=t},Object.defineProperty(t,n,$a)}function De(t){t._watchers=[];var e=t.$options;e.props&&Oe(t,e.props),e.methods&&Ue(t,e.methods),e.data?Re(t):j(t._data={},!0),e.computed&&Pe(t,e.computed),e.watch&&e.watch!==Zo&&je(t,e.watch)}function Oe(t,e){var n=t.$options.propsData||{},r=t._props={},i=t.$options._propKeys=[],o=!t.$parent;o||M(!1);for(var a in e)!function(o){i.push(o);var a=tt(o,e,n,t);q(r,o,a),o in t||Ne(t,"_props",o)}(a);M(!0)}function Re(t){var e=t.$options.data;e=t._data="function"==typeof e?xe(e,t):e||{},c(e)||(e={});for(var n=Object.keys(e),r=t.$options.props,i=(t.$options.methods,n.length);i--;){var o=n[i];r&&m(r,o)||A(o)||Ne(t,"_data",o)}j(e,!0)}function xe(t,e){R();try{return t.call(e,e)}catch(t){return ot(t,e,"data()"),{}}finally{x()}}function Pe(t,e){var n=t._computedWatchers=Object.create(null),r=ia();for(var i in e){var o=e[i],a="function"==typeof o?o:o.get;r||(n[i]=new za(t,a||S,S,Ya)),i in t||Le(t,i,o)}}function Le(t,e,n){var r=!ia();"function"==typeof n?($a.get=r?Me(e):Fe(n),$a.set=S):($a.get=n.get?r&&!1!==n.cache?Me(e):Fe(n.get):S,$a.set=n.set||S),Object.defineProperty(t,e,$a)}function Me(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),ca.target&&e.depend(),e.value}}function Fe(t){return function(){return t.call(this,this)}}function Ue(t,e){t.$options.props;for(var n in e)t[n]="function"!=typeof e[n]?S:Po(e[n],t)}function je(t,e){for(var n in e){var r=e[n];if(Array.isArray(r))for(var i=0;i<r.length;i++)qe(t,n,r[i]);else qe(t,n,r)}}function qe(t,e,n,r){return c(n)&&(r=n,n=n.handler),"string"==typeof n&&(n=t[n]),t.$watch(e,n,r)}function Ve(t,e){var n=t.$options=Object.create(t.constructor.options),r=e._parentVnode;n.parent=e.parent,n._parentVnode=r;var i=r.componentOptions;n.propsData=i.propsData,n._parentListeners=i.listeners,n._renderChildren=i.children,n._componentTag=i.tag,e.render&&(n.render=e.render,n.staticRenderFns=e.staticRenderFns)}function Be(t){var e=t.options;if(t.super){var n=Be(t.super);if(n!==t.superOptions){t.superOptions=n;var r=We(t);r&&E(t.extendOptions,r),e=t.options=J(n,t.extendOptions),e.name&&(e.components[e.name]=t)}}return e}function We(t){var e,n=t.options,r=t.sealedOptions;for(var i in n)n[i]!==r[i]&&(e||(e={}),e[i]=n[i]);return e}function Ke(t){this._init(t)}function Qe(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var n=w(arguments,1);return n.unshift(this),"function"==typeof t.install?t.install.apply(t,n):"function"==typeof t&&t.apply(null,n),e.push(t),this}}function Ge(t){t.mixin=function(t){return this.options=J(this.options,t),this}}function He(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var n=this,r=n.cid,i=t._Ctor||(t._Ctor={});if(i[r])return i[r];var o=t.name||n.options.name,a=function(t){this._init(t)};return a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.cid=e++,a.options=J(n.options,t),a.super=n,a.options.props&&ze(a),a.options.computed&&$e(a),a.extend=n.extend,a.mixin=n.mixin,a.use=n.use,Uo.forEach(function(t){a[t]=n[t]}),o&&(a.options.components[o]=a),a.superOptions=n.options,a.extendOptions=t,a.sealedOptions=E({},a.options),i[r]=a,a}}function ze(t){var e=t.options.props;for(var n in e)Ne(t.prototype,"_props",n)}function $e(t){var e=t.options.computed;for(var n in e)Le(t.prototype,n,e[n])}function Ye(t){Uo.forEach(function(e){t[e]=function(t,n){return n?("component"===e&&c(n)&&(n.name=n.name||t,n=this.options._base.extend(n)),"directive"===e&&"function"==typeof n&&(n={bind:n,update:n}),this.options[e+"s"][t]=n,n):this.options[e+"s"][t]}})}function Xe(t){return t&&(t.Ctor.options.name||t.tag)}function Je(t,e){return Array.isArray(t)?t.indexOf(e)>-1:"string"==typeof t?t.split(",").indexOf(e)>-1:!!h(t)&&t.test(e)}function Ze(t,e){var n=t.cache,r=t.keys,i=t._vnode;for(var o in n){var a=n[o];if(a){var s=Xe(a.componentOptions);s&&!e(s)&&tn(n,o,r,i)}}}function tn(t,e,n,r){var i=t[e];!i||r&&i.tag===r.tag||i.componentInstance.$destroy(),t[e]=null,v(n,e)}function en(t){for(var e=t.data,n=t,r=t;i(r.componentInstance);)(r=r.componentInstance._vnode)&&r.data&&(e=nn(r.data,e));for(;i(n=n.parent);)n&&n.data&&(e=nn(e,n.data));return rn(e.staticClass,e.class)}function nn(t,e){return{staticClass:on(t.staticClass,e.staticClass),class:i(t.class)?[t.class,e.class]:e.class}}function rn(t,e){return i(t)||i(e)?on(t,an(e)):""}function on(t,e){return t?e?t+" "+e:t:e||""}function an(t){return Array.isArray(t)?sn(t):u(t)?un(t):"string"==typeof t?t:""}function sn(t){for(var e,n="",r=0,o=t.length;r<o;r++)i(e=an(t[r]))&&""!==e&&(n&&(n+=" "),n+=e);return n}function un(t){var e="";for(var n in t)t[n]&&(e&&(e+=" "),e+=n);return e}function cn(t){return Ss(t)?"svg":"math"===t?"math":void 0}function hn(t){if(!Ko)return!0;if(Is(t))return!1;if(t=t.toLowerCase(),null!=ks[t])return ks[t];var e=document.createElement(t);return t.indexOf("-")>-1?ks[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:ks[t]=/HTMLUnknownElement/.test(e.toString())}function ln(t){if("string"==typeof t){var e=document.querySelector(t);return e||document.createElement("div")}return t}function fn(t,e){var n=document.createElement(t);return"select"!==t?n:(e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n)}function pn(t,e){return document.createElementNS(Es[t],e)}function dn(t){return document.createTextNode(t)}function yn(t){return document.createComment(t)}function vn(t,e,n){t.insertBefore(e,n)}function mn(t,e){t.removeChild(e)}function gn(t,e){t.appendChild(e)}function bn(t){return t.parentNode}function _n(t){return t.nextSibling}function wn(t){return t.tagName}function En(t,e){t.textContent=e}function Tn(t,e){t.setAttribute(e,"")}function Sn(t,e){var n=t.data.ref;if(i(n)){var r=t.context,o=t.componentInstance||t.elm,a=r.$refs;e?Array.isArray(a[n])?v(a[n],o):a[n]===o&&(a[n]=void 0):t.data.refInFor?Array.isArray(a[n])?a[n].indexOf(o)<0&&a[n].push(o):a[n]=[o]:a[n]=o}}function Cn(t,e){return t.key===e.key&&(t.tag===e.tag&&t.isComment===e.isComment&&i(t.data)===i(e.data)&&In(t,e)||o(t.isAsyncPlaceholder)&&t.asyncFactory===e.asyncFactory&&r(e.asyncFactory.error))}function In(t,e){if("input"!==t.tag)return!0;var n,r=i(n=t.data)&&i(n=n.attrs)&&n.type,o=i(n=e.data)&&i(n=n.attrs)&&n.type;return r===o||As(r)&&As(o)}function kn(t,e,n){var r,o,a={};for(r=e;r<=n;++r)o=t[r].key,i(o)&&(a[o]=r);return a}function An(t,e){(t.data.directives||e.data.directives)&&Nn(t,e)}function Nn(t,e){var n,r,i,o=t===Os,a=e===Os,s=Dn(t.data.directives,t.context),u=Dn(e.data.directives,e.context),c=[],h=[];for(n in u)r=s[n],i=u[n],r?(i.oldValue=r.value,i.oldArg=r.arg,Rn(i,"update",e,t),i.def&&i.def.componentUpdated&&h.push(i)):(Rn(i,"bind",e,t),i.def&&i.def.inserted&&c.push(i));if(c.length){var l=function(){for(var n=0;n<c.length;n++)Rn(c[n],"inserted",e,t)};o?yt(e,"insert",l):l()}if(h.length&&yt(e,"postpatch",function(){for(var n=0;n<h.length;n++)Rn(h[n],"componentUpdated",e,t)}),!o)for(n in s)u[n]||Rn(s[n],"unbind",t,t,a)}function Dn(t,e){var n=Object.create(null);if(!t)return n;var r,i;for(r=0;r<t.length;r++)i=t[r],i.modifiers||(i.modifiers=Ps),n[On(i)]=i,i.def=Z(e.$options,"directives",i.name,!0);return n}function On(t){return t.rawName||t.name+"."+Object.keys(t.modifiers||{}).join(".")}function Rn(t,e,n,r,i){var o=t.def&&t.def[e];if(o)try{o(n.elm,t,n,r,i)}catch(r){ot(r,n.context,"directive "+t.name+" "+e+" hook")}}function xn(t,e){var n=e.componentOptions;if(!(i(n)&&!1===n.Ctor.options.inheritAttrs||r(t.data.attrs)&&r(e.data.attrs))){var o,a,s=e.elm,u=t.data.attrs||{},c=e.data.attrs||{};i(c.__ob__)&&(c=e.data.attrs=E({},c));for(o in c)a=c[o],u[o]!==a&&Pn(s,o,a);(zo||Yo)&&c.value!==u.value&&Pn(s,"value",c.value);for(o in u)r(c[o])&&(bs(o)?s.removeAttributeNS(gs,_s(o)):ds(o)||s.removeAttribute(o))}}function Pn(t,e,n){t.tagName.indexOf("-")>-1?Ln(t,e,n):ms(e)?ws(n)?t.removeAttribute(e):(n="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,n)):ds(e)?t.setAttribute(e,vs(e,n)):bs(e)?ws(n)?t.removeAttributeNS(gs,_s(e)):t.setAttributeNS(gs,e,n):Ln(t,e,n)}function Ln(t,e,n){if(ws(n))t.removeAttribute(e);else{if(zo&&!$o&&"TEXTAREA"===t.tagName&&"placeholder"===e&&""!==n&&!t.__ieph){var r=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",r)};t.addEventListener("input",r),t.__ieph=!0}t.setAttribute(e,n)}}function Mn(t,e){var n=e.elm,o=e.data,a=t.data;if(!(r(o.staticClass)&&r(o.class)&&(r(a)||r(a.staticClass)&&r(a.class)))){var s=en(e),u=n._transitionClasses;i(u)&&(s=on(s,an(u))),s!==n._prevClass&&(n.setAttribute("class",s),n._prevClass=s)}}function Fn(t){function e(){(a||(a=[])).push(t.slice(d,i).trim()),d=i+1}var n,r,i,o,a,s=!1,u=!1,c=!1,h=!1,l=0,f=0,p=0,d=0;for(i=0;i<t.length;i++)if(r=n,n=t.charCodeAt(i),s)39===n&&92!==r&&(s=!1);else if(u)34===n&&92!==r&&(u=!1);else if(c)96===n&&92!==r&&(c=!1);else if(h)47===n&&92!==r&&(h=!1);else if(124!==n||124===t.charCodeAt(i+1)||124===t.charCodeAt(i-1)||l||f||p){switch(n){case 34:u=!0;break;case 39:s=!0;break;case 96:c=!0;break;case 40:p++;break;case 41:p--;break;case 91:f++;break;case 93:f--;break;case 123:l++;break;case 125:l--}if(47===n){for(var y=i-1,v=void 0;y>=0&&" "===(v=t.charAt(y));y--);v&&Us.test(v)||(h=!0)}}else void 0===o?(d=i+1,o=t.slice(0,i).trim()):e();if(void 0===o?o=t.slice(0,i).trim():0!==d&&e(),a)for(i=0;i<a.length;i++)o=Un(o,a[i]);return o}function Un(t,e){var n=e.indexOf("(");if(n<0)return'_f("'+e+'")('+t+")";var r=e.slice(0,n),i=e.slice(n+1);return'_f("'+r+'")('+t+(")"!==i?","+i:i)}function jn(t,e){console.error("[Vue compiler]: "+t)}function qn(t,e){return t?t.map(function(t){return t[e]}).filter(function(t){return t}):[]}function Vn(t,e,n,r,i){(t.props||(t.props=[])).push(Xn({name:e,value:n,dynamic:i},r)),t.plain=!1}function Bn(t,e,n,r,i){(i?t.dynamicAttrs||(t.dynamicAttrs=[]):t.attrs||(t.attrs=[])).push(Xn({name:e,value:n,dynamic:i},r)),t.plain=!1}function Wn(t,e,n,r){t.attrsMap[e]=n,t.attrsList.push(Xn({name:e,value:n},r))}function Kn(t,e,n,r,i,o,a,s){(t.directives||(t.directives=[])).push(Xn({name:e,rawName:n,value:r,arg:i,isDynamicArg:o,modifiers:a},s)),t.plain=!1}function Qn(t,e,n){return n?"_p("+e+',"'+t+'")':t+e}function Gn(t,e,n,r,i,o,a,s){r=r||So,r.right?s?e="("+e+")==='click'?'contextmenu':("+e+")":"click"===e&&(e="contextmenu",delete r.right):r.middle&&(s?e="("+e+")==='click'?'mouseup':("+e+")":"click"===e&&(e="mouseup")),r.capture&&(delete r.capture,e=Qn("!",e,s)),r.once&&(delete r.once,e=Qn("~",e,s)),r.passive&&(delete r.passive,e=Qn("&",e,s));var u;r.native?(delete r.native,u=t.nativeEvents||(t.nativeEvents={})):u=t.events||(t.events={});var c=Xn({value:n.trim(),dynamic:s},a);r!==So&&(c.modifiers=r);var h=u[e];Array.isArray(h)?i?h.unshift(c):h.push(c):u[e]=h?i?[c,h]:[h,c]:c,t.plain=!1}function Hn(t,e){return t.rawAttrsMap[":"+e]||t.rawAttrsMap["v-bind:"+e]||t.rawAttrsMap[e]}function zn(t,e,n){var r=$n(t,":"+e)||$n(t,"v-bind:"+e);if(null!=r)return Fn(r);if(!1!==n){var i=$n(t,e);if(null!=i)return JSON.stringify(i)}}function $n(t,e,n){var r;if(null!=(r=t.attrsMap[e]))for(var i=t.attrsList,o=0,a=i.length;o<a;o++)if(i[o].name===e){i.splice(o,1);break}return n&&delete t.attrsMap[e],r}function Yn(t,e){for(var n=t.attrsList,r=0,i=n.length;r<i;r++){var o=n[r];if(e.test(o.name))return n.splice(r,1),o}}function Xn(t,e){return e&&(null!=e.start&&(t.start=e.start),null!=e.end&&(t.end=e.end)),t}function Jn(t,e,n){var r=n||{},i=r.number,o=r.trim,a="$$v";o&&(a="(typeof $$v === 'string'? $$v.trim(): $$v)"),i&&(a="_n("+a+")");var s=Zn(e,a);t.model={value:"("+e+")",expression:JSON.stringify(e),callback:"function ($$v) {"+s+"}"}}function Zn(t,e){var n=tr(t);return null===n.key?t+"="+e:"$set("+n.exp+", "+n.key+", "+e+")"}function tr(t){if(t=t.trim(),es=t.length,t.indexOf("[")<0||t.lastIndexOf("]")<es-1)return is=t.lastIndexOf("."),is>-1?{exp:t.slice(0,is),key:'"'+t.slice(is+1)+'"'}:{exp:t,key:null};for(ns=t,is=os=as=0;!nr();)rs=er(),rr(rs)?or(rs):91===rs&&ir(rs);return{exp:t.slice(0,os),key:t.slice(os+1,as)}}function er(){return ns.charCodeAt(++is)}function nr(){return is>=es}function rr(t){return 34===t||39===t}function ir(t){var e=1;for(os=is;!nr();)if(t=er(),rr(t))or(t);else if(91===t&&e++,93===t&&e--,0===e){as=is;break}}function or(t){for(var e=t;!nr()&&(t=er())!==e;);}function ar(t,e,n){ss=n;var r=e.value,i=e.modifiers,o=t.tag,a=t.attrsMap.type;if(t.component)return Jn(t,r,i),!1;if("select"===o)cr(t,r,i);else if("input"===o&&"checkbox"===a)sr(t,r,i);else if("input"===o&&"radio"===a)ur(t,r,i);else if("input"===o||"textarea"===o)hr(t,r,i);else if(!qo.isReservedTag(o))return Jn(t,r,i),!1;return!0}function sr(t,e,n){var r=n&&n.number,i=zn(t,"value")||"null",o=zn(t,"true-value")||"true",a=zn(t,"false-value")||"false";Vn(t,"checked","Array.isArray("+e+")?_i("+e+","+i+")>-1"+("true"===o?":("+e+")":":_q("+e+","+o+")")),Gn(t,"change","var $$a="+e+",$$el=$event.target,$$c=$$el.checked?("+o+"):("+a+");if(Array.isArray($$a)){var $$v="+(r?"_n("+i+")":i)+",$$i=_i($$a,$$v);if($$el.checked){$$i<0&&("+Zn(e,"$$a.concat([$$v])")+")}else{$$i>-1&&("+Zn(e,"$$a.slice(0,$$i).concat($$a.slice($$i+1))")+")}}else{"+Zn(e,"$$c")+"}",null,!0)}function ur(t,e,n){var r=n&&n.number,i=zn(t,"value")||"null";i=r?"_n("+i+")":i,Vn(t,"checked","_q("+e+","+i+")"),Gn(t,"change",Zn(e,i),null,!0)}function cr(t,e,n){var r=n&&n.number,i='Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;return '+(r?"_n(val)":"val")+"})",o="var $$selectedVal = "+i+";";o=o+" "+Zn(e,"$event.target.multiple ? $$selectedVal : $$selectedVal[0]"),Gn(t,"change",o,null,!0)}function hr(t,e,n){var r=t.attrsMap.type,i=n||{},o=i.lazy,a=i.number,s=i.trim,u=!o&&"range"!==r,c=o?"change":"range"===r?js:"input",h="$event.target.value";s&&(h="$event.target.value.trim()"),a&&(h="_n("+h+")");var l=Zn(e,h);u&&(l="if($event.target.composing)return;"+l),Vn(t,"value","("+e+")"),Gn(t,c,l,null,!0),(s||a)&&Gn(t,"blur","$forceUpdate()")}function lr(t){if(i(t[js])){var e=zo?"change":"input";t[e]=[].concat(t[js],t[e]||[]),delete t[js]}i(t[qs])&&(t.change=[].concat(t[qs],t.change||[]),delete t[qs])}function fr(t,e,n){var r=us;return function i(){null!==e.apply(null,arguments)&&dr(t,i,n,r)}}function pr(t,e,n,r){if(Vs){var i=Ka,o=e;e=o._wrapper=function(t){if(t.target===t.currentTarget||t.timeStamp>=i||t.timeStamp<=0||t.target.ownerDocument!==document)return o.apply(this,arguments)}}us.addEventListener(t,e,ta?{capture:n,passive:r}:n)}function dr(t,e,n,r){(r||us).removeEventListener(t,e._wrapper||e,n)}function yr(t,e){if(!r(t.data.on)||!r(e.data.on)){var n=e.data.on||{},i=t.data.on||{};us=e.elm,lr(n),dt(n,i,pr,dr,fr,e.context),us=void 0}}function vr(t,e){if(!r(t.data.domProps)||!r(e.data.domProps)){var n,o,a=e.elm,s=t.data.domProps||{},u=e.data.domProps||{};i(u.__ob__)&&(u=e.data.domProps=E({},u));for(n in s)n in u||(a[n]="");for(n in u){if(o=u[n],"textContent"===n||"innerHTML"===n){if(e.children&&(e.children.length=0),o===s[n])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===n&&"PROGRESS"!==a.tagName){a._value=o;var c=r(o)?"":String(o);mr(a,c)&&(a.value=c)}else if("innerHTML"===n&&Ss(a.tagName)&&r(a.innerHTML)){cs=cs||document.createElement("div"),cs.innerHTML="<svg>"+o+"</svg>";for(var h=cs.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;h.firstChild;)a.appendChild(h.firstChild)}else if(o!==s[n])try{a[n]=o}catch(t){}}}}function mr(t,e){return!t.composing&&("OPTION"===t.tagName||gr(t,e)||br(t,e))}function gr(t,e){var n=!0;try{n=document.activeElement!==t}catch(t){}return n&&t.value!==e}function br(t,e){var n=t.value,r=t._vModifiers;if(i(r)){if(r.number)return d(n)!==d(e);if(r.trim)return n.trim()!==e.trim()}return n!==e}function _r(t){var e=wr(t.style);return t.staticStyle?E(t.staticStyle,e):e}function wr(t){return Array.isArray(t)?T(t):"string"==typeof t?Ks(t):t}function Er(t,e){var n,r={};if(e)for(var i=t;i.componentInstance;)(i=i.componentInstance._vnode)&&i.data&&(n=_r(i.data))&&E(r,n);(n=_r(t.data))&&E(r,n);for(var o=t;o=o.parent;)o.data&&(n=_r(o.data))&&E(r,n);return r}function Tr(t,e){var n=e.data,o=t.data;if(!(r(n.staticStyle)&&r(n.style)&&r(o.staticStyle)&&r(o.style))){var a,s,u=e.elm,c=o.staticStyle,h=o.normalizedStyle||o.style||{},l=c||h,f=wr(e.data.style)||{};e.data.normalizedStyle=i(f.__ob__)?E({},f):f;var p=Er(e,!0);for(s in l)r(p[s])&&Hs(u,s,"");for(s in p)(a=p[s])!==l[s]&&Hs(u,s,null==a?"":a)}}function Sr(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(Xs).forEach(function(e){return t.classList.add(e)}):t.classList.add(e);else{var n=" "+(t.getAttribute("class")||"")+" ";n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}}function Cr(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(Xs).forEach(function(e){return t.classList.remove(e)}):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{for(var n=" "+(t.getAttribute("class")||"")+" ",r=" "+e+" ";n.indexOf(r)>=0;)n=n.replace(r," ");n=n.trim(),n?t.setAttribute("class",n):t.removeAttribute("class")}}function Ir(t){if(t){if("object"==typeof t){var e={};return!1!==t.css&&E(e,Js(t.name||"v")),E(e,t),e}return"string"==typeof t?Js(t):void 0}}function kr(t){au(function(){au(t)})}function Ar(t,e){var n=t._transitionClasses||(t._transitionClasses=[]);n.indexOf(e)<0&&(n.push(e),Sr(t,e))}function Nr(t,e){t._transitionClasses&&v(t._transitionClasses,e),Cr(t,e)}function Dr(t,e,n){var r=Or(t,e),i=r.type,o=r.timeout,a=r.propCount;if(!i)return n();var s=i===tu?ru:ou,u=0,c=function(){t.removeEventListener(s,h),n()},h=function(e){e.target===t&&++u>=a&&c()};setTimeout(function(){u<a&&c()},o+1),t.addEventListener(s,h)}function Or(t,e){var n,r=window.getComputedStyle(t),i=(r[nu+"Delay"]||"").split(", "),o=(r[nu+"Duration"]||"").split(", "),a=Rr(i,o),s=(r[iu+"Delay"]||"").split(", "),u=(r[iu+"Duration"]||"").split(", "),c=Rr(s,u),h=0,l=0;return e===tu?a>0&&(n=tu,h=a,l=o.length):e===eu?c>0&&(n=eu,h=c,l=u.length):(h=Math.max(a,c),n=h>0?a>c?tu:eu:null,l=n?n===tu?o.length:u.length:0),{type:n,timeout:h,propCount:l,hasTransform:n===tu&&su.test(r[nu+"Property"])}}function Rr(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,e.map(function(e,n){return xr(e)+xr(t[n])}))}function xr(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function Pr(t,e){var n=t.elm;i(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var o=Ir(t.data.transition);if(!r(o)&&!i(n._enterCb)&&1===n.nodeType){for(var a=o.css,s=o.type,c=o.enterClass,h=o.enterToClass,l=o.enterActiveClass,f=o.appearClass,p=o.appearToClass,y=o.appearActiveClass,v=o.beforeEnter,m=o.enter,g=o.afterEnter,b=o.enterCancelled,_=o.beforeAppear,w=o.appear,E=o.afterAppear,T=o.appearCancelled,S=o.duration,C=Fa,I=Fa.$vnode;I&&I.parent;)C=I.context,I=I.parent;var A=!C._isMounted||!t.isRootInsert;if(!A||w||""===w){var N=A&&f?f:c,D=A&&y?y:l,O=A&&p?p:h,R=A?_||v:v,x=A&&"function"==typeof w?w:m,P=A?E||g:g,L=A?T||b:b,M=d(u(S)?S.enter:S),F=!1!==a&&!$o,U=Fr(x),j=n._enterCb=k(function(){F&&(Nr(n,O),Nr(n,D)),j.cancelled?(F&&Nr(n,N),L&&L(n)):P&&P(n),n._enterCb=null});t.data.show||yt(t,"insert",function(){var e=n.parentNode,r=e&&e._pending&&e._pending[t.key];r&&r.tag===t.tag&&r.elm._leaveCb&&r.elm._leaveCb(),x&&x(n,j)}),R&&R(n),F&&(Ar(n,N),Ar(n,D),kr(function(){Nr(n,N),j.cancelled||(Ar(n,O),U||(Mr(M)?setTimeout(j,M):Dr(n,s,j)))})),t.data.show&&(e&&e(),x&&x(n,j)),F||U||j()}}}function Lr(t,e){function n(){T.cancelled||(!t.data.show&&o.parentNode&&((o.parentNode._pending||(o.parentNode._pending={}))[t.key]=t),p&&p(o),_&&(Ar(o,h),Ar(o,f),kr(function(){Nr(o,h),T.cancelled||(Ar(o,l),w||(Mr(E)?setTimeout(T,E):Dr(o,c,T)))})),y&&y(o,T),_||w||T())}var o=t.elm;i(o._enterCb)&&(o._enterCb.cancelled=!0,o._enterCb());var a=Ir(t.data.transition);if(r(a)||1!==o.nodeType)return e();if(!i(o._leaveCb)){var s=a.css,c=a.type,h=a.leaveClass,l=a.leaveToClass,f=a.leaveActiveClass,p=a.beforeLeave,y=a.leave,v=a.afterLeave,m=a.leaveCancelled,g=a.delayLeave,b=a.duration,_=!1!==s&&!$o,w=Fr(y),E=d(u(b)?b.leave:b),T=o._leaveCb=k(function(){o.parentNode&&o.parentNode._pending&&(o.parentNode._pending[t.key]=null),_&&(Nr(o,l),Nr(o,f)),T.cancelled?(_&&Nr(o,h),m&&m(o)):(e(),v&&v(o)),o._leaveCb=null});g?g(n):n()}}function Mr(t){return"number"==typeof t&&!isNaN(t)}function Fr(t){if(r(t))return!1;var e=t.fns;return i(e)?Fr(Array.isArray(e)?e[0]:e):(t._length||t.length)>1}function Ur(t,e){!0!==e.data.show&&Pr(e)}function jr(t,e,n){qr(t,e,n),(zo||Yo)&&setTimeout(function(){qr(t,e,n)},0)}function qr(t,e,n){var r=e.value,i=t.multiple;if(!i||Array.isArray(r)){for(var o,a,s=0,u=t.options.length;s<u;s++)if(a=t.options[s],i)o=I(r,Br(a))>-1,a.selected!==o&&(a.selected=o);else if(C(Br(a),r))return void(t.selectedIndex!==s&&(t.selectedIndex=s));i||(t.selectedIndex=-1)}}function Vr(t,e){return e.every(function(e){return!C(e,t)})}function Br(t){return"_value"in t?t._value:t.value}function Wr(t){t.target.composing=!0}function Kr(t){t.target.composing&&(t.target.composing=!1,Qr(t.target,"input"))}function Qr(t,e){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}function Gr(t){return!t.componentInstance||t.data&&t.data.transition?t:Gr(t.componentInstance._vnode)}function Hr(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?Hr(ce(e.children)):t}function zr(t){var e={},n=t.$options;for(var r in n.propsData)e[r]=t[r];var i=n._parentListeners;for(var o in i)e[Do(o)]=i[o];return e}function $r(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}function Yr(t){for(;t=t.parent;)if(t.data.transition)return!0}function Xr(t,e){return e.key===t.key&&e.tag===t.tag}function Jr(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function Zr(t){t.data.newPos=t.elm.getBoundingClientRect()}function ti(t){var e=t.data.pos,n=t.data.newPos,r=e.left-n.left,i=e.top-n.top;if(r||i){t.data.moved=!0;var o=t.elm.style;o.transform=o.WebkitTransform="translate("+r+"px,"+i+"px)",o.transitionDuration="0s"}}function ei(t,e){var n=e?Fu(e):Lu;if(n.test(t)){for(var r,i,o,a=[],s=[],u=n.lastIndex=0;r=n.exec(t);){i=r.index,i>u&&(s.push(o=t.slice(u,i)),a.push(JSON.stringify(o)));var c=Fn(r[1].trim());a.push("_s("+c+")"),s.push({"@binding":c}),u=i+r[0].length}return u<t.length&&(s.push(o=t.slice(u)),a.push(JSON.stringify(o))),{expression:a.join("+"),tokens:s}}}function ni(t,e){var n=(e.warn,$n(t,"class"));n&&(t.staticClass=JSON.stringify(n));var r=zn(t,"class",!1);r&&(t.classBinding=r)}function ri(t){var e="";return t.staticClass&&(e+="staticClass:"+t.staticClass+","),t.classBinding&&(e+="class:"+t.classBinding+","),e}function ii(t,e){var n=(e.warn,$n(t,"style"));if(n){t.staticStyle=JSON.stringify(Ks(n))}var r=zn(t,"style",!1);r&&(t.styleBinding=r)}function oi(t){var e="";return t.staticStyle&&(e+="staticStyle:"+t.staticStyle+","),t.styleBinding&&(e+="style:("+t.styleBinding+"),"),e}function ai(t,e){var n=e?ic:rc;return t.replace(n,function(t){return nc[t]})}function si(t,e){function n(e){h+=e,t=t.substring(e)}function r(t,n,r){var i,s;if(null==n&&(n=h),null==r&&(r=h),t)for(s=t.toLowerCase(),i=a.length-1;i>=0&&a[i].lowerCasedTag!==s;i--);else i=0;if(i>=0){for(var u=a.length-1;u>=i;u--)e.end&&e.end(a[u].tag,n,r);a.length=i,o=i&&a[i-1].tag}else"br"===s?e.start&&e.start(t,[],!0,n,r):"p"===s&&(e.start&&e.start(t,[],!1,n,r),e.end&&e.end(t,n,r))}for(var i,o,a=[],s=e.expectHTML,u=e.isUnaryTag||Lo,c=e.canBeLeftOpenTag||Lo,h=0;t;){if(i=t,o&&tc(o)){var l=0,f=o.toLowerCase(),p=ec[f]||(ec[f]=new RegExp("([\\s\\S]*?)(</"+f+"[^>]*>)","i")),d=t.replace(p,function(t,n,r){return l=r.length,tc(f)||"noscript"===f||(n=n.replace(/<!\--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g,"$1")),ac(f,n)&&(n=n.slice(1)),e.chars&&e.chars(n),""});h+=t.length-d.length,t=d,r(f,h-l,h)}else{var y=t.indexOf("<");if(0===y){if(Ju.test(t)){var v=t.indexOf("--\x3e");if(v>=0){e.shouldKeepComment&&e.comment(t.substring(4,v),h,h+v+3),n(v+3);continue}}if(Zu.test(t)){var m=t.indexOf("]>");if(m>=0){n(m+2);continue}}var g=t.match(Xu);if(g){n(g[0].length);continue}var b=t.match(Yu);if(b){var _=h;n(b[0].length),r(b[1],_,h);continue}var w=function(){var e=t.match(zu);if(e){var r={tagName:e[1],attrs:[],start:h};n(e[0].length);for(var i,o;!(i=t.match($u))&&(o=t.match(Qu)||t.match(Ku));)o.start=h,n(o[0].length),o.end=h,r.attrs.push(o);if(i)return r.unarySlash=i[1],n(i[0].length),r.end=h,r}}();if(w){!function(t){var n=t.tagName,i=t.unarySlash;s&&("p"===o&&Wu(n)&&r(o),c(n)&&o===n&&r(n));for(var h=u(n)||!!i,l=t.attrs.length,f=new Array(l),p=0;p<l;p++){var d=t.attrs[p],y=d[3]||d[4]||d[5]||"",v="a"===n&&"href"===d[1]?e.shouldDecodeNewlinesForHref:e.shouldDecodeNewlines;f[p]={name:d[1],value:ai(y,v)}}h||(a.push({tag:n,lowerCasedTag:n.toLowerCase(),attrs:f,start:t.start,end:t.end}),o=n),e.start&&e.start(n,f,h,t.start,t.end)}(w),ac(w.tagName,t)&&n(1);continue}}var E=void 0,T=void 0,S=void 0;if(y>=0){for(T=t.slice(y);!(Yu.test(T)||zu.test(T)||Ju.test(T)||Zu.test(T)||(S=T.indexOf("<",1))<0);)y+=S,T=t.slice(y);E=t.substring(0,y)}y<0&&(E=t),E&&n(E.length),e.chars&&E&&e.chars(E,h-E.length,h)}if(t===i){e.chars&&e.chars(t);break}}r()}function ui(t,e,n){return{type:1,tag:t,attrsList:e,attrsMap:Ni(e),rawAttrsMap:{},parent:n,children:[]}}function ci(t,e){function n(t){if(r(t),h||t.processed||(t=fi(t,e)),s.length||t===o||o.if&&(t.elseif||t.else)&&_i(o,{exp:t.elseif,block:t}),a&&!t.forbidden)if(t.elseif||t.else)gi(t,a);else{if(t.slotScope){var n=t.slotTarget||'"default"';(a.scopedSlots||(a.scopedSlots={}))[n]=t}a.children.push(t),t.parent=a}t.children=t.children.filter(function(t){return!t.slotScope}),r(t),t.pre&&(h=!1),Au(t.tag)&&(l=!1);for(var i=0;i<ku.length;i++)ku[i](t,e)}function r(t){if(!l)for(var e;(e=t.children[t.children.length-1])&&3===e.type&&" "===e.text;)t.children.pop()}Tu=e.warn||jn,Au=e.isPreTag||Lo,Nu=e.mustUseProp||Lo,Du=e.getTagNamespace||Lo;var i=e.isReservedTag||Lo;Ou=function(t){return!!t.component||!i(t.tag)},Cu=qn(e.modules,"transformNode"),Iu=qn(e.modules,"preTransformNode"),ku=qn(e.modules,"postTransformNode"),Su=e.delimiters;var o,a,s=[],u=!1!==e.preserveWhitespace,c=e.whitespace,h=!1,l=!1;return si(t,{warn:Tu,expectHTML:e.expectHTML,isUnaryTag:e.isUnaryTag,canBeLeftOpenTag:e.canBeLeftOpenTag,shouldDecodeNewlines:e.shouldDecodeNewlines,shouldDecodeNewlinesForHref:e.shouldDecodeNewlinesForHref,shouldKeepComment:e.comments,outputSourceRange:e.outputSourceRange,start:function(t,r,i,u,c){var f=a&&a.ns||Du(t);zo&&"svg"===f&&(r=Ri(r));var p=ui(t,r,a);f&&(p.ns=f),Oi(p)&&!ia()&&(p.forbidden=!0);for(var d=0;d<Iu.length;d++)p=Iu[d](p,e)||p;h||(hi(p),p.pre&&(h=!0)),Au(p.tag)&&(l=!0),h?li(p):p.processed||(yi(p),mi(p),wi(p)),o||(o=p),i?n(p):(a=p,s.push(p))},end:function(t,e,r){var i=s[s.length-1];s.length-=1,a=s[s.length-1],n(i)},chars:function(t,e,n){if(a&&(!zo||"textarea"!==a.tag||a.attrsMap.placeholder!==t)){var r=a.children;if(t=l||t.trim()?Di(a)?t:bc(t):r.length?c?"condense"===c&&mc.test(t)?"":" ":u?" ":"":""){l||"condense"!==c||(t=t.replace(gc," "));var i,o;!h&&" "!==t&&(i=ei(t,Su))?o={type:2,expression:i.expression,tokens:i.tokens,text:t}:" "===t&&r.length&&" "===r[r.length-1].text||(o={type:3,text:t}),o&&r.push(o)}}},comment:function(t,e,n){if(a){var r={type:3,text:t,isComment:!0};a.children.push(r)}}}),o}function hi(t){null!=$n(t,"v-pre")&&(t.pre=!0)}function li(t){var e=t.attrsList,n=e.length;if(n)for(var r=t.attrs=new Array(n),i=0;i<n;i++)r[i]={name:e[i].name,value:JSON.stringify(e[i].value)},null!=e[i].start&&(r[i].start=e[i].start,r[i].end=e[i].end);else t.pre||(t.plain=!0)}function fi(t,e){pi(t),t.plain=!t.key&&!t.scopedSlots&&!t.attrsList.length,di(t),Ei(t),Si(t),Ci(t);for(var n=0;n<Cu.length;n++)t=Cu[n](t,e)||t;return Ii(t),t}function pi(t){var e=zn(t,"key");if(e){t.key=e}}function di(t){var e=zn(t,"ref");e&&(t.ref=e,t.refInFor=ki(t))}function yi(t){var e;if(e=$n(t,"v-for")){var n=vi(e);n&&E(t,n)}}function vi(t){var e=t.match(cc);if(e){var n={};n.for=e[2].trim();var r=e[1].trim().replace(lc,""),i=r.match(hc);return i?(n.alias=r.replace(hc,"").trim(),n.iterator1=i[1].trim(),i[2]&&(n.iterator2=i[2].trim())):n.alias=r,n}}function mi(t){var e=$n(t,"v-if");if(e)t.if=e,_i(t,{exp:e,block:t});else{null!=$n(t,"v-else")&&(t.else=!0);var n=$n(t,"v-else-if");n&&(t.elseif=n)}}function gi(t,e){var n=bi(e.children);n&&n.if&&_i(n,{exp:t.elseif,block:t})}function bi(t){for(var e=t.length;e--;){if(1===t[e].type)return t[e];t.pop()}}function _i(t,e){t.ifConditions||(t.ifConditions=[]),t.ifConditions.push(e)}function wi(t){null!=$n(t,"v-once")&&(t.once=!0)}function Ei(t){var e;"template"===t.tag?(e=$n(t,"scope"),t.slotScope=e||$n(t,"slot-scope")):(e=$n(t,"slot-scope"))&&(t.slotScope=e);var n=zn(t,"slot");if(n&&(t.slotTarget='""'===n?'"default"':n,t.slotTargetDynamic=!(!t.attrsMap[":slot"]&&!t.attrsMap["v-bind:slot"]),"template"===t.tag||t.slotScope||Bn(t,"slot",n,Hn(t,"slot"))),"template"===t.tag){var r=Yn(t,vc);if(r){var i=Ti(r),o=i.name,a=i.dynamic;t.slotTarget=o,t.slotTargetDynamic=a,t.slotScope=r.value||_c}}else{var s=Yn(t,vc);if(s){var u=t.scopedSlots||(t.scopedSlots={}),c=Ti(s),h=c.name,l=c.dynamic,f=u[h]=ui("template",[],t);f.slotTarget=h,f.slotTargetDynamic=l,f.children=t.children.filter(function(t){if(!t.slotScope)return t.parent=f,!0}),f.slotScope=s.value||_c,t.children=[],t.plain=!1}}}function Ti(t){var e=t.name.replace(vc,"");return e||"#"!==t.name[0]&&(e="default"),fc.test(e)?{name:e.slice(1,-1),dynamic:!0}:{name:'"'+e+'"',dynamic:!1}}function Si(t){"slot"===t.tag&&(t.slotName=zn(t,"name"))}function Ci(t){var e;(e=zn(t,"is"))&&(t.component=e),null!=$n(t,"inline-template")&&(t.inlineTemplate=!0)}function Ii(t){var e,n,r,i,o,a,s,u,c=t.attrsList;for(e=0,n=c.length;e<n;e++)if(r=i=c[e].name,o=c[e].value,uc.test(r))if(t.hasBindings=!0,a=Ai(r.replace(uc,"")),a&&(r=r.replace(yc,"")),dc.test(r))r=r.replace(dc,""),o=Fn(o),u=fc.test(r),u&&(r=r.slice(1,-1)),a&&(a.prop&&!u&&"innerHtml"===(r=Do(r))&&(r="innerHTML"),a.camel&&!u&&(r=Do(r)),a.sync&&(s=Zn(o,"$event"),u?Gn(t,'"update:"+('+r+")",s,null,!1,Tu,c[e],!0):(Gn(t,"update:"+Do(r),s,null,!1,Tu,c[e]),xo(r)!==Do(r)&&Gn(t,"update:"+xo(r),s,null,!1,Tu,c[e])))),a&&a.prop||!t.component&&Nu(t.tag,t.attrsMap.type,r)?Vn(t,r,o,c[e],u):Bn(t,r,o,c[e],u);else if(sc.test(r))r=r.replace(sc,""),u=fc.test(r),u&&(r=r.slice(1,-1)),Gn(t,r,o,a,!1,Tu,c[e],u);else{r=r.replace(uc,"");var h=r.match(pc),l=h&&h[1];u=!1,l&&(r=r.slice(0,-(l.length+1)),fc.test(l)&&(l=l.slice(1,-1),u=!0)),Kn(t,r,i,o,l,u,a,c[e])}else{Bn(t,r,JSON.stringify(o),c[e]),!t.component&&"muted"===r&&Nu(t.tag,t.attrsMap.type,r)&&Vn(t,r,"true",c[e])}}function ki(t){for(var e=t;e;){if(void 0!==e.for)return!0;e=e.parent}return!1}function Ai(t){var e=t.match(yc);if(e){var n={};return e.forEach(function(t){n[t.slice(1)]=!0}),n}}function Ni(t){for(var e={},n=0,r=t.length;n<r;n++)e[t[n].name]=t[n].value;return e}function Di(t){return"script"===t.tag||"style"===t.tag}function Oi(t){return"style"===t.tag||"script"===t.tag&&(!t.attrsMap.type||"text/javascript"===t.attrsMap.type)}function Ri(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];wc.test(r.name)||(r.name=r.name.replace(Ec,""),e.push(r))}return e}function xi(t,e){if("input"===t.tag){var n=t.attrsMap;if(!n["v-model"])return;var r;if((n[":type"]||n["v-bind:type"])&&(r=zn(t,"type")),n.type||r||!n["v-bind"]||(r="("+n["v-bind"]+").type"),r){var i=$n(t,"v-if",!0),o=i?"&&("+i+")":"",a=null!=$n(t,"v-else",!0),s=$n(t,"v-else-if",!0),u=Pi(t);yi(u),Wn(u,"type","checkbox"),fi(u,e),u.processed=!0,u.if="("+r+")==='checkbox'"+o,_i(u,{exp:u.if,block:u});var c=Pi(t);$n(c,"v-for",!0),Wn(c,"type","radio"),fi(c,e),_i(u,{exp:"("+r+")==='radio'"+o,block:c});var h=Pi(t);return $n(h,"v-for",!0),Wn(h,":type",r),fi(h,e),_i(u,{exp:i,block:h}),a?u.else=!0:s&&(u.elseif=s),u}}}function Pi(t){return ui(t.tag,t.attrsList.slice(),t.parent)}function Li(t,e){e.value&&Vn(t,"textContent","_s("+e.value+")",e)}function Mi(t,e){e.value&&Vn(t,"innerHTML","_s("+e.value+")",e)}function Fi(t,e){t&&(Ru=kc(e.staticKeys||""),xu=e.isReservedTag||Lo,ji(t),qi(t,!1))}function Ui(t){return y("type,tag,attrsList,attrsMap,plain,parent,children,attrs,start,end,rawAttrsMap"+(t?","+t:""))}function ji(t){if(t.static=Vi(t),1===t.type){if(!xu(t.tag)&&"slot"!==t.tag&&null==t.attrsMap["inline-template"])return;for(var e=0,n=t.children.length;e<n;e++){var r=t.children[e];ji(r),r.static||(t.static=!1)}if(t.ifConditions)for(var i=1,o=t.ifConditions.length;i<o;i++){var a=t.ifConditions[i].block;ji(a),a.static||(t.static=!1)}}}function qi(t,e){if(1===t.type){if((t.static||t.once)&&(t.staticInFor=e),t.static&&t.children.length&&(1!==t.children.length||3!==t.children[0].type))return void(t.staticRoot=!0);if(t.staticRoot=!1,t.children)for(var n=0,r=t.children.length;n<r;n++)qi(t.children[n],e||!!t.for);if(t.ifConditions)for(var i=1,o=t.ifConditions.length;i<o;i++)qi(t.ifConditions[i].block,e)}}function Vi(t){return 2!==t.type&&(3===t.type||!(!t.pre&&(t.hasBindings||t.if||t.for||Io(t.tag)||!xu(t.tag)||Bi(t)||!Object.keys(t).every(Ru))))}function Bi(t){for(;t.parent;){if(t=t.parent,"template"!==t.tag)return!1;if(t.for)return!0}return!1}function Wi(t,e){var n=e?"nativeOn:":"on:",r="",i="";for(var o in t){var a=Ki(t[o]);t[o]&&t[o].dynamic?i+=o+","+a+",":r+='"'+o+'":'+a+","}return r="{"+r.slice(0,-1)+"}",i?n+"_d("+r+",["+i.slice(0,-1)+"])":n+r}function Ki(t){if(!t)return"function(){}";if(Array.isArray(t))return"["+t.map(function(t){return Ki(t)}).join(",")+"]";var e=Dc.test(t.value),n=Ac.test(t.value),r=Dc.test(t.value.replace(Nc,""));if(t.modifiers){var i="",o="",a=[];for(var s in t.modifiers)if(Pc[s])o+=Pc[s],Oc[s]&&a.push(s);else if("exact"===s){var u=t.modifiers;o+=xc(["ctrl","shift","alt","meta"].filter(function(t){return!u[t]}).map(function(t){return"$event."+t+"Key"}).join("||"))}else a.push(s);a.length&&(i+=Qi(a)),o&&(i+=o);return"function($event){"+i+(e?"return "+t.value+"($event)":n?"return ("+t.value+")($event)":r?"return "+t.value:t.value)+"}"}return e||n?t.value:"function($event){"+(r?"return "+t.value:t.value)+"}"}function Qi(t){return"if(!$event.type.indexOf('key')&&"+t.map(Gi).join("&&")+")return null;"}function Gi(t){var e=parseInt(t,10);if(e)return"$event.keyCode!=="+e;var n=Oc[t],r=Rc[t];return"_k($event.keyCode,"+JSON.stringify(t)+","+JSON.stringify(n)+",$event.key,"+JSON.stringify(r)+")"}function Hi(t,e){t.wrapListeners=function(t){return"_g("+t+","+e.value+")"}}function zi(t,e){t.wrapData=function(n){return"_b("+n+",'"+t.tag+"',"+e.value+","+(e.modifiers&&e.modifiers.prop?"true":"false")+(e.modifiers&&e.modifiers.sync?",true":"")+")"}}function $i(t,e){var n=new Mc(e);return{render:"with(this){return "+(t?Yi(t,n):'_c("div")')+"}",staticRenderFns:n.staticRenderFns}}function Yi(t,e){if(t.parent&&(t.pre=t.pre||t.parent.pre),t.staticRoot&&!t.staticProcessed)return Xi(t,e);if(t.once&&!t.onceProcessed)return Ji(t,e);if(t.for&&!t.forProcessed)return eo(t,e);if(t.if&&!t.ifProcessed)return Zi(t,e);if("template"!==t.tag||t.slotTarget||e.pre){if("slot"===t.tag)return vo(t,e);var n;if(t.component)n=mo(t.component,t,e);else{var r;(!t.plain||t.pre&&e.maybeComponent(t))&&(r=no(t,e));var i=t.inlineTemplate?null:co(t,e,!0);n="_c('"+t.tag+"'"+(r?","+r:"")+(i?","+i:"")+")"}for(var o=0;o<e.transforms.length;o++)n=e.transforms[o](t,n);return n}return co(t,e)||"void 0"}function Xi(t,e){t.staticProcessed=!0;var n=e.pre;return t.pre&&(e.pre=t.pre),e.staticRenderFns.push("with(this){return "+Yi(t,e)+"}"),e.pre=n,"_m("+(e.staticRenderFns.length-1)+(t.staticInFor?",true":"")+")"}function Ji(t,e){if(t.onceProcessed=!0,t.if&&!t.ifProcessed)return Zi(t,e);if(t.staticInFor){for(var n="",r=t.parent;r;){if(r.for){n=r.key;break}r=r.parent}return n?"_o("+Yi(t,e)+","+e.onceId+++","+n+")":Yi(t,e)}return Xi(t,e)}function Zi(t,e,n,r){return t.ifProcessed=!0,to(t.ifConditions.slice(),e,n,r)}function to(t,e,n,r){function i(t){return n?n(t,e):t.once?Ji(t,e):Yi(t,e)}if(!t.length)return r||"_e()";var o=t.shift();return o.exp?"("+o.exp+")?"+i(o.block)+":"+to(t,e,n,r):""+i(o.block)}function eo(t,e,n,r){var i=t.for,o=t.alias,a=t.iterator1?","+t.iterator1:"",s=t.iterator2?","+t.iterator2:"";return t.forProcessed=!0,(r||"_l")+"(("+i+"),function("+o+a+s+"){return "+(n||Yi)(t,e)+"})"}function no(t,e){var n="{",r=ro(t,e);r&&(n+=r+","),t.key&&(n+="key:"+t.key+","),t.ref&&(n+="ref:"+t.ref+","),t.refInFor&&(n+="refInFor:true,"),t.pre&&(n+="pre:true,"),t.component&&(n+='tag:"'+t.tag+'",');for(var i=0;i<e.dataGenFns.length;i++)n+=e.dataGenFns[i](t);if(t.attrs&&(n+="attrs:"+go(t.attrs)+","),t.props&&(n+="domProps:"+go(t.props)+","),t.events&&(n+=Wi(t.events,!1)+","),t.nativeEvents&&(n+=Wi(t.nativeEvents,!0)+","),t.slotTarget&&!t.slotScope&&(n+="slot:"+t.slotTarget+","),t.scopedSlots&&(n+=oo(t,t.scopedSlots,e)+","),t.model&&(n+="model:{value:"+t.model.value+",callback:"+t.model.callback+",expression:"+t.model.expression+"},"),t.inlineTemplate){var o=io(t,e);o&&(n+=o+",")}return n=n.replace(/,$/,"")+"}",t.dynamicAttrs&&(n="_b("+n+',"'+t.tag+'",'+go(t.dynamicAttrs)+")"),t.wrapData&&(n=t.wrapData(n)),t.wrapListeners&&(n=t.wrapListeners(n)),n}function ro(t,e){var n=t.directives;if(n){var r,i,o,a,s="directives:[",u=!1;for(r=0,i=n.length;r<i;r++){o=n[r],a=!0;var c=e.directives[o.name];c&&(a=!!c(t,o,e.warn)),a&&(u=!0,s+='{name:"'+o.name+'",rawName:"'+o.rawName+'"'+(o.value?",value:("+o.value+"),expression:"+JSON.stringify(o.value):"")+(o.arg?",arg:"+(o.isDynamicArg?o.arg:'"'+o.arg+'"'):"")+(o.modifiers?",modifiers:"+JSON.stringify(o.modifiers):"")+"},")}return u?s.slice(0,-1)+"]":void 0}}function io(t,e){var n=t.children[0];if(n&&1===n.type){var r=$i(n,e.options);return"inlineTemplate:{render:function(){"+r.render+"},staticRenderFns:["+r.staticRenderFns.map(function(t){return"function(){"+t+"}"}).join(",")+"]}"}}function oo(t,e,n){var r=t.for||Object.keys(e).some(function(t){var n=e[t];return n.slotTargetDynamic||n.if||n.for||so(n)}),i=!!t.if;if(!r)for(var o=t.parent;o;){if(o.slotScope&&o.slotScope!==_c||o.for){r=!0;break}o.if&&(i=!0),o=o.parent}var a=Object.keys(e).map(function(t){return uo(e[t],n)}).join(",");return"scopedSlots:_u(["+a+"]"+(r?",null,true":"")+(!r&&i?",null,false,"+ao(a):"")+")"}function ao(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return e>>>0}function so(t){return 1===t.type&&("slot"===t.tag||t.children.some(so))}function uo(t,e){var n=t.attrsMap["slot-scope"];if(t.if&&!t.ifProcessed&&!n)return Zi(t,e,uo,"null");if(t.for&&!t.forProcessed)return eo(t,e,uo);var r=t.slotScope===_c?"":String(t.slotScope),i="function("+r+"){return "+("template"===t.tag?t.if&&n?"("+t.if+")?"+(co(t,e)||"undefined")+":undefined":co(t,e)||"undefined":Yi(t,e))+"}",o=r?"":",proxy:true";return"{key:"+(t.slotTarget||'"default"')+",fn:"+i+o+"}"}function co(t,e,n,r,i){var o=t.children;if(o.length){var a=o[0];if(1===o.length&&a.for&&"template"!==a.tag&&"slot"!==a.tag){var s=n?e.maybeComponent(a)?",1":",0":"";return""+(r||Yi)(a,e)+s}var u=n?ho(o,e.maybeComponent):0,c=i||fo;return"["+o.map(function(t){return c(t,e)}).join(",")+"]"+(u?","+u:"")}}function ho(t,e){for(var n=0,r=0;r<t.length;r++){var i=t[r];if(1===i.type){if(lo(i)||i.ifConditions&&i.ifConditions.some(function(t){return lo(t.block)})){n=2;break}(e(i)||i.ifConditions&&i.ifConditions.some(function(t){return e(t.block)}))&&(n=1)}}return n}function lo(t){return void 0!==t.for||"template"===t.tag||"slot"===t.tag}function fo(t,e){return 1===t.type?Yi(t,e):3===t.type&&t.isComment?yo(t):po(t)}function po(t){return"_v("+(2===t.type?t.expression:bo(JSON.stringify(t.text)))+")"}function yo(t){return"_e("+JSON.stringify(t.text)+")"}function vo(t,e){var n=t.slotName||'"default"',r=co(t,e),i="_t("+n+(r?","+r:""),o=t.attrs||t.dynamicAttrs?go((t.attrs||[]).concat(t.dynamicAttrs||[]).map(function(t){return{name:Do(t.name),value:t.value,dynamic:t.dynamic}})):null,a=t.attrsMap["v-bind"];return!o&&!a||r||(i+=",null"),o&&(i+=","+o),a&&(i+=(o?"":",null")+","+a),i+")"}function mo(t,e,n){var r=e.inlineTemplate?null:co(e,n,!0);return"_c("+t+","+no(e,n)+(r?","+r:"")+")"}function go(t){for(var e="",n="",r=0;r<t.length;r++){var i=t[r],o=bo(i.value);i.dynamic?n+=i.name+","+o+",":e+='"'+i.name+'":'+o+","}return e="{"+e.slice(0,-1)+"}",n?"_d("+e+",["+n.slice(0,-1)+"])":e}function bo(t){return t.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}function _o(t,e){try{return new Function(t)}catch(n){return e.push({err:n,code:t}),S}}function wo(t){var e=Object.create(null);return function(n,r,i){r=E({},r);r.warn;delete r.warn;var o=r.delimiters?String(r.delimiters)+n:n;if(e[o])return e[o];var a=t(n,r),s={},u=[];return s.render=_o(a.render,u),s.staticRenderFns=a.staticRenderFns.map(function(t){return _o(t,u)}),e[o]=s}}function Eo(t){return Pu=Pu||document.createElement("div"),Pu.innerHTML=t?'<a href="\n"/>':'<div a="\n"/>',Pu.innerHTML.indexOf("&#10;")>0}function To(t){if(t.outerHTML)return t.outerHTML;var e=document.createElement("div");return e.appendChild(t.cloneNode(!0)),e.innerHTML}/*!
 * Vue.js v2.6.10
 * (c) 2014-2019 Evan You
 * Released under the MIT License.
 */
var So=Object.freeze({}),Co=Object.prototype.toString,Io=y("slot,component",!0),ko=y("key,ref,slot,slot-scope,is"),Ao=Object.prototype.hasOwnProperty,No=/-(\w)/g,Do=g(function(t){return t.replace(No,function(t,e){return e?e.toUpperCase():""})}),Oo=g(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}),Ro=/\B([A-Z])/g,xo=g(function(t){return t.replace(Ro,"-$1").toLowerCase()}),Po=Function.prototype.bind?_:b,Lo=function(t,e,n){return!1},Mo=function(t){return t},Fo="data-server-rendered",Uo=["component","directive","filter"],jo=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],qo={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:Lo,isReservedAttr:Lo,isUnknownElement:Lo,getTagNamespace:S,parsePlatformTagName:Mo,mustUseProp:Lo,async:!0,_lifecycleHooks:jo},Vo=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/,Bo=new RegExp("[^"+Vo.source+".$_\\d]"),Wo="__proto__"in{},Ko="undefined"!=typeof window,Qo="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,Go=Qo&&WXEnvironment.platform.toLowerCase(),Ho=Ko&&window.navigator.userAgent.toLowerCase(),zo=Ho&&/msie|trident/.test(Ho),$o=Ho&&Ho.indexOf("msie 9.0")>0,Yo=Ho&&Ho.indexOf("edge/")>0,Xo=(Ho&&Ho.indexOf("android"),Ho&&/iphone|ipad|ipod|ios/.test(Ho)||"ios"===Go),Jo=(Ho&&/chrome\/\d+/.test(Ho),Ho&&/phantomjs/.test(Ho),Ho&&Ho.match(/firefox\/(\d+)/)),Zo={}.watch,ta=!1;if(Ko)try{var ea={};Object.defineProperty(ea,"passive",{get:function(){ta=!0}}),window.addEventListener("test-passive",null,ea)}catch(t){}var na,ra,ia=function(){return void 0===na&&(na=!Ko&&!Qo&&void 0!==t&&(t.process&&"server"===t.process.env.VUE_ENV)),na},oa=Ko&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__,aa="undefined"!=typeof Symbol&&O(Symbol)&&"undefined"!=typeof Reflect&&O(Reflect.ownKeys);ra="undefined"!=typeof Set&&O(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return!0===this.set[t]},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var sa=S,ua=0,ca=function(){this.id=ua++,this.subs=[]};ca.prototype.addSub=function(t){this.subs.push(t)},ca.prototype.removeSub=function(t){v(this.subs,t)},ca.prototype.depend=function(){ca.target&&ca.target.addDep(this)},ca.prototype.notify=function(){for(var t=this.subs.slice(),e=0,n=t.length;e<n;e++)t[e].update()},ca.target=null;var ha=[],la=function(t,e,n,r,i,o,a,s){this.tag=t,this.data=e,this.children=n,this.text=r,this.elm=i,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},fa={child:{configurable:!0}};fa.child.get=function(){return this.componentInstance},Object.defineProperties(la.prototype,fa);var pa=function(t){void 0===t&&(t="");var e=new la;return e.text=t,e.isComment=!0,e},da=Array.prototype,ya=Object.create(da);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(t){var e=da[t];N(ya,t,function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];var i,o=e.apply(this,n),a=this.__ob__;switch(t){case"push":case"unshift":i=n;break;case"splice":i=n.slice(2)}return i&&a.observeArray(i),a.dep.notify(),o})});var va=Object.getOwnPropertyNames(ya),ma=!0,ga=function(t){this.value=t,this.dep=new ca,this.vmCount=0,N(t,"__ob__",this),Array.isArray(t)?(Wo?F(t,ya):U(t,ya,va),this.observeArray(t)):this.walk(t)};ga.prototype.walk=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)q(t,e[n])},ga.prototype.observeArray=function(t){for(var e=0,n=t.length;e<n;e++)j(t[e])};var ba=qo.optionMergeStrategies;ba.data=function(t,e,n){return n?Q(t,e,n):e&&"function"!=typeof e?t:Q(t,e)},jo.forEach(function(t){ba[t]=G}),Uo.forEach(function(t){ba[t+"s"]=z}),ba.watch=function(t,e,n,r){if(t===Zo&&(t=void 0),e===Zo&&(e=void 0),!e)return Object.create(t||null);if(!t)return e;var i={};E(i,t);for(var o in e){var a=i[o],s=e[o];a&&!Array.isArray(a)&&(a=[a]),i[o]=a?a.concat(s):Array.isArray(s)?s:[s]}return i},ba.props=ba.methods=ba.inject=ba.computed=function(t,e,n,r){if(!t)return e;var i=Object.create(null);return E(i,t),e&&E(i,e),i},ba.provide=Q;var _a,wa=function(t,e){return void 0===e?t:e},Ea=!1,Ta=[],Sa=!1;if("undefined"!=typeof Promise&&O(Promise)){var Ca=Promise.resolve();_a=function(){Ca.then(ct),Xo&&setTimeout(S)},Ea=!0}else if(zo||"undefined"==typeof MutationObserver||!O(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())_a=void 0!==n&&O(n)?function(){n(ct)}:function(){setTimeout(ct,0)};else{var Ia=1,ka=new MutationObserver(ct),Aa=document.createTextNode(String(Ia));ka.observe(Aa,{characterData:!0}),_a=function(){Ia=(Ia+1)%2,Aa.data=String(Ia)},Ea=!0}var Na=new ra,Da=g(function(t){var e="&"===t.charAt(0);t=e?t.slice(1):t;var n="~"===t.charAt(0);t=n?t.slice(1):t;var r="!"===t.charAt(0);return t=r?t.slice(1):t,{name:t,once:n,capture:r,passive:e}});Kt(Qt.prototype);var Oa,Ra={init:function(t,e){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var n=t;Ra.prepatch(n,n)}else{(t.componentInstance=Yt(t,Fa)).$mount(e?t.elm:void 0,e)}},prepatch:function(t,e){var n=e.componentOptions;ge(e.componentInstance=t.componentInstance,n.propsData,n.listeners,e,n.children)},insert:function(t){var e=t.context,n=t.componentInstance;n._isMounted||(n._isMounted=!0,Ee(n,"mounted")),t.data.keepAlive&&(e._isMounted?Ie(n):_e(n,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?we(e,!0):e.$destroy())}},xa=Object.keys(Ra),Pa=1,La=2,Ma=null,Fa=null,Ua=[],ja=[],qa={},Va=!1,Ba=!1,Wa=0,Ka=0,Qa=Date.now;if(Ko&&!zo){var Ga=window.performance;Ga&&"function"==typeof Ga.now&&Qa()>document.createEvent("Event").timeStamp&&(Qa=function(){return Ga.now()})}var Ha=0,za=function(t,e,n,r,i){this.vm=t,i&&(t._watcher=this),t._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++Ha,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ra,this.newDepIds=new ra,this.expression="","function"==typeof e?this.getter=e:(this.getter=D(e),this.getter||(this.getter=S)),this.value=this.lazy?void 0:this.get()};za.prototype.get=function(){R(this);var t,e=this.vm;try{t=this.getter.call(e,e)}catch(t){if(!this.user)throw t;ot(t,e,'getter for watcher "'+this.expression+'"')}finally{this.deep&&lt(t),x(),this.cleanupDeps()}return t},za.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},za.prototype.cleanupDeps=function(){for(var t=this.deps.length;t--;){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},za.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():Ae(this)},za.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||u(t)||this.deep){var e=this.value;if(this.value=t,this.user)try{this.cb.call(this.vm,t,e)}catch(t){ot(t,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,t,e)}}},za.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},za.prototype.depend=function(){for(var t=this.deps.length;t--;)this.deps[t].depend()},za.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||v(this.vm._watchers,this);for(var t=this.deps.length;t--;)this.deps[t].removeSub(this);this.active=!1}};var $a={enumerable:!0,configurable:!0,get:S,set:S},Ya={lazy:!0},Xa=0;!function(t){t.prototype._init=function(t){var e=this;e._uid=Xa++,e._isVue=!0,t&&t._isComponent?Ve(e,t):e.$options=J(Be(e.constructor),t||{},e),e._renderProxy=e,e._self=e,ve(e),he(e),ie(e),Ee(e,"beforeCreate"),Tt(e),De(e),Et(e),Ee(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}(Ke),function(t){var e={};e.get=function(){return this._data};var n={};n.get=function(){return this._props},Object.defineProperty(t.prototype,"$data",e),Object.defineProperty(t.prototype,"$props",n),t.prototype.$set=V,t.prototype.$delete=B,t.prototype.$watch=function(t,e,n){var r=this;if(c(e))return qe(r,t,e,n);n=n||{},n.user=!0;var i=new za(r,t,e,n);if(n.immediate)try{e.call(r,i.value)}catch(t){ot(t,r,'callback for immediate watcher "'+i.expression+'"')}return function(){i.teardown()}}}(Ke),function(t){var e=/^hook:/;t.prototype.$on=function(t,n){var r=this;if(Array.isArray(t))for(var i=0,o=t.length;i<o;i++)r.$on(t[i],n);else(r._events[t]||(r._events[t]=[])).push(n),e.test(t)&&(r._hasHookEvent=!0);return r},t.prototype.$once=function(t,e){function n(){r.$off(t,n),e.apply(r,arguments)}var r=this;return n.fn=e,r.$on(t,n),r},t.prototype.$off=function(t,e){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(t)){for(var r=0,i=t.length;r<i;r++)n.$off(t[r],e);return n}var o=n._events[t];if(!o)return n;if(!e)return n._events[t]=null,n;for(var a,s=o.length;s--;)if((a=o[s])===e||a.fn===e){o.splice(s,1);break}return n},t.prototype.$emit=function(t){var e=this,n=e._events[t];if(n){n=n.length>1?w(n):n;for(var r=w(arguments,1),i='event handler for "'+t+'"',o=0,a=n.length;o<a;o++)at(n[o],e,r,e,i)}return e}}(Ke),function(t){t.prototype._update=function(t,e){var n=this,r=n.$el,i=n._vnode,o=ye(n);n._vnode=t,n.$el=i?n.__patch__(i,t):n.__patch__(n.$el,t,e,!1),o(),r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},t.prototype.$forceUpdate=function(){var t=this;t._watcher&&t._watcher.update()},t.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){Ee(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||v(e.$children,t),t._watcher&&t._watcher.teardown();for(var n=t._watchers.length;n--;)t._watchers[n].teardown();t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),Ee(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}(Ke),function(t){Kt(t.prototype),t.prototype.$nextTick=function(t){return ht(t,this)},t.prototype._render=function(){var t=this,e=t.$options,n=e.render,r=e._parentVnode;r&&(t.$scopedSlots=kt(r.data.scopedSlots,t.$slots,t.$scopedSlots)),t.$vnode=r;var i;try{Ma=t,i=n.call(t._renderProxy,t.$createElement)}catch(e){ot(e,t,"render"),i=t._vnode}finally{Ma=null}return Array.isArray(i)&&1===i.length&&(i=i[0]),i instanceof la||(i=pa()),i.parent=r,i}}(Ke);var Ja=[String,RegExp,Array],Za={name:"keep-alive",abstract:!0,props:{include:Ja,exclude:Ja,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var t in this.cache)tn(this.cache,t,this.keys)},mounted:function(){var t=this;this.$watch("include",function(e){Ze(t,function(t){return Je(e,t)})}),this.$watch("exclude",function(e){Ze(t,function(t){return!Je(e,t)})})},render:function(){var t=this.$slots.default,e=ce(t),n=e&&e.componentOptions;if(n){var r=Xe(n),i=this,o=i.include,a=i.exclude;if(o&&(!r||!Je(o,r))||a&&r&&Je(a,r))return e;var s=this,u=s.cache,c=s.keys,h=null==e.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):e.key;u[h]?(e.componentInstance=u[h].componentInstance,v(c,h),c.push(h)):(u[h]=e,c.push(h),this.max&&c.length>parseInt(this.max)&&tn(u,c[0],c,this._vnode)),e.data.keepAlive=!0}return e||t&&t[0]}},ts={KeepAlive:Za};!function(t){var e={};e.get=function(){return qo},Object.defineProperty(t,"config",e),t.util={warn:sa,extend:E,mergeOptions:J,defineReactive:q},t.set=V,t.delete=B,t.nextTick=ht,t.observable=function(t){return j(t),t},t.options=Object.create(null),Uo.forEach(function(e){t.options[e+"s"]=Object.create(null)}),t.options._base=t,E(t.options.components,ts),Qe(t),Ge(t),He(t),Ye(t)}(Ke),Object.defineProperty(Ke.prototype,"$isServer",{get:ia}),Object.defineProperty(Ke.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Ke,"FunctionalRenderContext",{value:Qt}),Ke.version="2.6.10";var es,ns,rs,is,os,as,ss,us,cs,hs,ls=y("style,class"),fs=y("input,textarea,option,select,progress"),ps=function(t,e,n){return"value"===n&&fs(t)&&"button"!==e||"selected"===n&&"option"===t||"checked"===n&&"input"===t||"muted"===n&&"video"===t},ds=y("contenteditable,draggable,spellcheck"),ys=y("events,caret,typing,plaintext-only"),vs=function(t,e){return ws(e)||"false"===e?"false":"contenteditable"===t&&ys(e)?e:"true"},ms=y("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),gs="http://www.w3.org/1999/xlink",bs=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},_s=function(t){return bs(t)?t.slice(6,t.length):""},ws=function(t){return null==t||!1===t},Es={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Ts=y("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Ss=y("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Cs=function(t){return"pre"===t},Is=function(t){return Ts(t)||Ss(t)},ks=Object.create(null),As=y("text,number,password,search,email,tel,url"),Ns=Object.freeze({createElement:fn,createElementNS:pn,createTextNode:dn,createComment:yn,insertBefore:vn,removeChild:mn,appendChild:gn,parentNode:bn,nextSibling:_n,tagName:wn,setTextContent:En,setStyleScope:Tn}),Ds={create:function(t,e){Sn(e)},update:function(t,e){t.data.ref!==e.data.ref&&(Sn(t,!0),Sn(e))},destroy:function(t){Sn(t,!0)}},Os=new la("",{},[]),Rs=["create","activate","update","remove","destroy"],xs={create:An,update:An,destroy:function(t){An(t,Os)}},Ps=Object.create(null),Ls=[Ds,xs],Ms={create:xn,update:xn},Fs={create:Mn,update:Mn},Us=/[\w).+\-_$\]]/,js="__r",qs="__c",Vs=Ea&&!(Jo&&Number(Jo[1])<=53),Bs={create:yr,update:yr},Ws={create:vr,update:vr},Ks=g(function(t){var e={},n=/;(?![^(]*\))/g,r=/:(.+)/;return t.split(n).forEach(function(t){if(t){var n=t.split(r);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}),Qs=/^--/,Gs=/\s*!important$/,Hs=function(t,e,n){if(Qs.test(e))t.style.setProperty(e,n);else if(Gs.test(n))t.style.setProperty(xo(e),n.replace(Gs,""),"important");else{var r=$s(e);if(Array.isArray(n))for(var i=0,o=n.length;i<o;i++)t.style[r]=n[i];else t.style[r]=n}},zs=["Webkit","Moz","ms"],$s=g(function(t){if(hs=hs||document.createElement("div").style,"filter"!==(t=Do(t))&&t in hs)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<zs.length;n++){var r=zs[n]+e;if(r in hs)return r}}),Ys={create:Tr,update:Tr},Xs=/\s+/,Js=g(function(t){return{enterClass:t+"-enter",enterToClass:t+"-enter-to",enterActiveClass:t+"-enter-active",leaveClass:t+"-leave",leaveToClass:t+"-leave-to",leaveActiveClass:t+"-leave-active"}}),Zs=Ko&&!$o,tu="transition",eu="animation",nu="transition",ru="transitionend",iu="animation",ou="animationend";Zs&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(nu="WebkitTransition",ru="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(iu="WebkitAnimation",ou="webkitAnimationEnd"));var au=Ko?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()},su=/\b(transform|all)(,|$)/,uu=Ko?{create:Ur,activate:Ur,remove:function(t,e){!0!==t.data.show?Lr(t,e):e()}}:{},cu=[Ms,Fs,Bs,Ws,Ys,uu],hu=cu.concat(Ls),lu=function(t){function e(t){return new la(O.tagName(t).toLowerCase(),{},[],void 0,t)}function n(t,e){function n(){0==--n.listeners&&a(t)}return n.listeners=e,n}function a(t){var e=O.parentNode(t);i(e)&&O.removeChild(e,t)}function u(t,e,n,r,a,s,u){if(i(t.elm)&&i(s)&&(t=s[u]=L(t)),t.isRootInsert=!a,!c(t,e,n,r)){var h=t.data,l=t.children,d=t.tag;i(d)?(t.elm=t.ns?O.createElementNS(t.ns,d):O.createElement(d,t),m(t),p(t,l,e),i(h)&&v(t,e),f(n,t.elm,r)):o(t.isComment)?(t.elm=O.createComment(t.text),f(n,t.elm,r)):(t.elm=O.createTextNode(t.text),f(n,t.elm,r))}}function c(t,e,n,r){var a=t.data;if(i(a)){var s=i(t.componentInstance)&&a.keepAlive;if(i(a=a.hook)&&i(a=a.init)&&a(t,!1),i(t.componentInstance))return h(t,e),f(n,t.elm,r),o(s)&&l(t,e,n,r),!0}}function h(t,e){i(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,d(t)?(v(t,e),m(t)):(Sn(t),e.push(t))}function l(t,e,n,r){for(var o,a=t;a.componentInstance;)if(a=a.componentInstance._vnode,i(o=a.data)&&i(o=o.transition)){for(o=0;o<N.activate.length;++o)N.activate[o](Os,a);e.push(a);break}f(n,t.elm,r)}function f(t,e,n){i(t)&&(i(n)?O.parentNode(n)===t&&O.insertBefore(t,e,n):O.appendChild(t,e))}function p(t,e,n){if(Array.isArray(e))for(var r=0;r<e.length;++r)u(e[r],n,t.elm,null,!0,e,r);else s(t.text)&&O.appendChild(t.elm,O.createTextNode(String(t.text)))}function d(t){for(;t.componentInstance;)t=t.componentInstance._vnode;return i(t.tag)}function v(t,e){for(var n=0;n<N.create.length;++n)N.create[n](Os,t);k=t.data.hook,i(k)&&(i(k.create)&&k.create(Os,t),i(k.insert)&&e.push(t))}function m(t){var e;if(i(e=t.fnScopeId))O.setStyleScope(t.elm,e);else for(var n=t;n;)i(e=n.context)&&i(e=e.$options._scopeId)&&O.setStyleScope(t.elm,e),n=n.parent;i(e=Fa)&&e!==t.context&&e!==t.fnContext&&i(e=e.$options._scopeId)&&O.setStyleScope(t.elm,e)}function g(t,e,n,r,i,o){for(;r<=i;++r)u(n[r],o,t,e,!1,n,r)}function b(t){var e,n,r=t.data;if(i(r))for(i(e=r.hook)&&i(e=e.destroy)&&e(t),e=0;e<N.destroy.length;++e)N.destroy[e](t);if(i(e=t.children))for(n=0;n<t.children.length;++n)b(t.children[n])}function _(t,e,n,r){for(;n<=r;++n){var o=e[n];i(o)&&(i(o.tag)?(w(o),b(o)):a(o.elm))}}function w(t,e){if(i(e)||i(t.data)){var r,o=N.remove.length+1;for(i(e)?e.listeners+=o:e=n(t.elm,o),i(r=t.componentInstance)&&i(r=r._vnode)&&i(r.data)&&w(r,e),r=0;r<N.remove.length;++r)N.remove[r](t,e);i(r=t.data.hook)&&i(r=r.remove)?r(t,e):e()}else a(t.elm)}function E(t,e,n,o,a){for(var s,c,h,l,f=0,p=0,d=e.length-1,y=e[0],v=e[d],m=n.length-1,b=n[0],w=n[m],E=!a;f<=d&&p<=m;)r(y)?y=e[++f]:r(v)?v=e[--d]:Cn(y,b)?(S(y,b,o,n,p),y=e[++f],b=n[++p]):Cn(v,w)?(S(v,w,o,n,m),v=e[--d],w=n[--m]):Cn(y,w)?(S(y,w,o,n,m),E&&O.insertBefore(t,y.elm,O.nextSibling(v.elm)),y=e[++f],w=n[--m]):Cn(v,b)?(S(v,b,o,n,p),E&&O.insertBefore(t,v.elm,y.elm),v=e[--d],b=n[++p]):(r(s)&&(s=kn(e,f,d)),c=i(b.key)?s[b.key]:T(b,e,f,d),r(c)?u(b,o,t,y.elm,!1,n,p):(h=e[c],Cn(h,b)?(S(h,b,o,n,p),e[c]=void 0,E&&O.insertBefore(t,h.elm,y.elm)):u(b,o,t,y.elm,!1,n,p)),b=n[++p]);f>d?(l=r(n[m+1])?null:n[m+1].elm,g(t,l,n,p,m,o)):p>m&&_(t,e,f,d)}function T(t,e,n,r){for(var o=n;o<r;o++){var a=e[o];if(i(a)&&Cn(t,a))return o}}function S(t,e,n,a,s,u){if(t!==e){i(e.elm)&&i(a)&&(e=a[s]=L(e));var c=e.elm=t.elm;if(o(t.isAsyncPlaceholder))return void(i(e.asyncFactory.resolved)?I(t.elm,e,n):e.isAsyncPlaceholder=!0);if(o(e.isStatic)&&o(t.isStatic)&&e.key===t.key&&(o(e.isCloned)||o(e.isOnce)))return void(e.componentInstance=t.componentInstance);var h,l=e.data;i(l)&&i(h=l.hook)&&i(h=h.prepatch)&&h(t,e);var f=t.children,p=e.children;if(i(l)&&d(e)){for(h=0;h<N.update.length;++h)N.update[h](t,e);i(h=l.hook)&&i(h=h.update)&&h(t,e)}r(e.text)?i(f)&&i(p)?f!==p&&E(c,f,p,n,u):i(p)?(i(t.text)&&O.setTextContent(c,""),g(c,null,p,0,p.length-1,n)):i(f)?_(c,f,0,f.length-1):i(t.text)&&O.setTextContent(c,""):t.text!==e.text&&O.setTextContent(c,e.text),i(l)&&i(h=l.hook)&&i(h=h.postpatch)&&h(t,e)}}function C(t,e,n){if(o(n)&&i(t.parent))t.parent.data.pendingInsert=e;else for(var r=0;r<e.length;++r)e[r].data.hook.insert(e[r])}function I(t,e,n,r){var a,s=e.tag,u=e.data,c=e.children;if(r=r||u&&u.pre,e.elm=t,o(e.isComment)&&i(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(i(u)&&(i(a=u.hook)&&i(a=a.init)&&a(e,!0),i(a=e.componentInstance)))return h(e,n),!0;if(i(s)){if(i(c))if(t.hasChildNodes())if(i(a=u)&&i(a=a.domProps)&&i(a=a.innerHTML)){if(a!==t.innerHTML)return!1}else{for(var l=!0,f=t.firstChild,d=0;d<c.length;d++){if(!f||!I(f,c[d],n,r)){l=!1;break}f=f.nextSibling}if(!l||f)return!1}else p(e,c,n);if(i(u)){var y=!1;for(var m in u)if(!R(m)){y=!0,v(e,n);break}!y&&u.class&&lt(u.class)}}else t.data!==e.text&&(t.data=e.text);return!0}var k,A,N={},D=t.modules,O=t.nodeOps;for(k=0;k<Rs.length;++k)for(N[Rs[k]]=[],A=0;A<D.length;++A)i(D[A][Rs[k]])&&N[Rs[k]].push(D[A][Rs[k]]);var R=y("attrs,class,staticClass,staticStyle,key");return function(t,n,a,s){if(r(n))return void(i(t)&&b(t));var c=!1,h=[];if(r(t))c=!0,u(n,h);else{var l=i(t.nodeType);if(!l&&Cn(t,n))S(t,n,h,null,null,s);else{if(l){if(1===t.nodeType&&t.hasAttribute(Fo)&&(t.removeAttribute(Fo),a=!0),o(a)&&I(t,n,h))return C(n,h,!0),t;t=e(t)}var f=t.elm,p=O.parentNode(f);if(u(n,h,f._leaveCb?null:p,O.nextSibling(f)),i(n.parent))for(var y=n.parent,v=d(n);y;){for(var m=0;m<N.destroy.length;++m)N.destroy[m](y);if(y.elm=n.elm,v){for(var g=0;g<N.create.length;++g)N.create[g](Os,y);var w=y.data.hook.insert;if(w.merged)for(var E=1;E<w.fns.length;E++)w.fns[E]()}else Sn(y);y=y.parent}i(p)?_(p,[t],0,0):i(t.tag)&&b(t)}}return C(n,h,c),n.elm}}({nodeOps:Ns,modules:hu});$o&&document.addEventListener("selectionchange",function(){var t=document.activeElement;t&&t.vmodel&&Qr(t,"input")});var fu={inserted:function(t,e,n,r){"select"===n.tag?(r.elm&&!r.elm._vOptions?yt(n,"postpatch",function(){fu.componentUpdated(t,e,n)}):jr(t,e,n.context),t._vOptions=[].map.call(t.options,Br)):("textarea"===n.tag||As(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",Wr),t.addEventListener("compositionend",Kr),t.addEventListener("change",Kr),$o&&(t.vmodel=!0)))},componentUpdated:function(t,e,n){if("select"===n.tag){jr(t,e,n.context);var r=t._vOptions,i=t._vOptions=[].map.call(t.options,Br);if(i.some(function(t,e){return!C(t,r[e])})){(t.multiple?e.value.some(function(t){return Vr(t,i)}):e.value!==e.oldValue&&Vr(e.value,i))&&Qr(t,"change")}}}},pu={bind:function(t,e,n){var r=e.value;n=Gr(n);var i=n.data&&n.data.transition,o=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;r&&i?(n.data.show=!0,Pr(n,function(){t.style.display=o})):t.style.display=r?o:"none"},update:function(t,e,n){var r=e.value;!r!=!e.oldValue&&(n=Gr(n),n.data&&n.data.transition?(n.data.show=!0,r?Pr(n,function(){t.style.display=t.__vOriginalDisplay}):Lr(n,function(){t.style.display="none"})):t.style.display=r?t.__vOriginalDisplay:"none")},unbind:function(t,e,n,r,i){i||(t.style.display=t.__vOriginalDisplay)}},du={model:fu,show:pu},yu={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]},vu=function(t){return t.tag||ue(t)},mu=function(t){return"show"===t.name},gu={name:"transition",props:yu,abstract:!0,render:function(t){var e=this,n=this.$slots.default;if(n&&(n=n.filter(vu),n.length)){var r=this.mode,i=n[0];if(Yr(this.$vnode))return i;var o=Hr(i);if(!o)return i;if(this._leaving)return $r(t,i);var a="__transition-"+this._uid+"-";o.key=null==o.key?o.isComment?a+"comment":a+o.tag:s(o.key)?0===String(o.key).indexOf(a)?o.key:a+o.key:o.key;var u=(o.data||(o.data={})).transition=zr(this),c=this._vnode,h=Hr(c);if(o.data.directives&&o.data.directives.some(mu)&&(o.data.show=!0),h&&h.data&&!Xr(o,h)&&!ue(h)&&(!h.componentInstance||!h.componentInstance._vnode.isComment)){var l=h.data.transition=E({},u);if("out-in"===r)return this._leaving=!0,yt(l,"afterLeave",function(){e._leaving=!1,e.$forceUpdate()}),$r(t,i);if("in-out"===r){if(ue(o))return c;var f,p=function(){f()};yt(u,"afterEnter",p),yt(u,"enterCancelled",p),yt(l,"delayLeave",function(t){f=t})}}return i}}},bu=E({tag:String,moveClass:String},yu);delete bu.mode;var _u={props:bu,beforeMount:function(){var t=this,e=this._update;this._update=function(n,r){var i=ye(t);t.__patch__(t._vnode,t.kept,!1,!0),t._vnode=t.kept,i(),e.call(t,n,r)}},render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),r=this.prevChildren=this.children,i=this.$slots.default||[],o=this.children=[],a=zr(this),s=0;s<i.length;s++){var u=i[s];if(u.tag)if(null!=u.key&&0!==String(u.key).indexOf("__vlist"))o.push(u),n[u.key]=u,(u.data||(u.data={})).transition=a;else;}if(r){for(var c=[],h=[],l=0;l<r.length;l++){var f=r[l];f.data.transition=a,f.data.pos=f.elm.getBoundingClientRect(),n[f.key]?c.push(f):h.push(f)}this.kept=t(e,null,c),this.removed=h}return t(e,null,o)},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(Jr),t.forEach(Zr),t.forEach(ti),this._reflow=document.body.offsetHeight,t.forEach(function(t){if(t.data.moved){var n=t.elm,r=n.style;Ar(n,e),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(ru,n._moveCb=function t(r){r&&r.target!==n||r&&!/transform$/.test(r.propertyName)||(n.removeEventListener(ru,t),n._moveCb=null,Nr(n,e))})}}))},methods:{hasMove:function(t,e){if(!Zs)return!1;if(this._hasMove)return this._hasMove;var n=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach(function(t){Cr(n,t)}),Sr(n,e),n.style.display="none",this.$el.appendChild(n);var r=Or(n);return this.$el.removeChild(n),this._hasMove=r.hasTransform}}},wu={Transition:gu,TransitionGroup:_u};Ke.config.mustUseProp=ps,Ke.config.isReservedTag=Is,Ke.config.isReservedAttr=ls,Ke.config.getTagNamespace=cn,Ke.config.isUnknownElement=hn,E(Ke.options.directives,du),E(Ke.options.components,wu),Ke.prototype.__patch__=Ko?lu:S,Ke.prototype.$mount=function(t,e){return t=t&&Ko?ln(t):void 0,me(this,t,e)},Ko&&setTimeout(function(){qo.devtools&&oa&&oa.emit("init",Ke)},0);var Eu,Tu,Su,Cu,Iu,ku,Au,Nu,Du,Ou,Ru,xu,Pu,Lu=/\{\{((?:.|\r?\n)+?)\}\}/g,Mu=/[-.*+?^${}()|[\]\/\\]/g,Fu=g(function(t){var e=t[0].replace(Mu,"\\$&"),n=t[1].replace(Mu,"\\$&");return new RegExp(e+"((?:.|\\n)+?)"+n,"g")}),Uu={staticKeys:["staticClass"],transformNode:ni,genData:ri},ju={staticKeys:["staticStyle"],transformNode:ii,genData:oi},qu={decode:function(t){return Eu=Eu||document.createElement("div"),Eu.innerHTML=t,Eu.textContent}},Vu=y("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr"),Bu=y("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source"),Wu=y("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track"),Ku=/^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,Qu=/^\s*((?:v-[\w-]+:|@|:|#)\[[^=]+\][^\s"'<>\/=]*)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,Gu="[a-zA-Z_][\\-\\.0-9_a-zA-Z"+Vo.source+"]*",Hu="((?:"+Gu+"\\:)?"+Gu+")",zu=new RegExp("^<"+Hu),$u=/^\s*(\/?)>/,Yu=new RegExp("^<\\/"+Hu+"[^>]*>"),Xu=/^<!DOCTYPE [^>]+>/i,Ju=/^<!\--/,Zu=/^<!\[/,tc=y("script,style,textarea",!0),ec={},nc={"&lt;":"<","&gt;":">","&quot;":'"',"&amp;":"&","&#10;":"\n","&#9;":"\t","&#39;":"'"},rc=/&(?:lt|gt|quot|amp|#39);/g,ic=/&(?:lt|gt|quot|amp|#39|#10|#9);/g,oc=y("pre,textarea",!0),ac=function(t,e){return t&&oc(t)&&"\n"===e[0]},sc=/^@|^v-on:/,uc=/^v-|^@|^:/,cc=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,hc=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,lc=/^\(|\)$/g,fc=/^\[.*\]$/,pc=/:(.*)$/,dc=/^:|^\.|^v-bind:/,yc=/\.[^.\]]+(?=[^\]]*$)/g,vc=/^v-slot(:|$)|^#/,mc=/[\r\n]/,gc=/\s+/g,bc=g(qu.decode),_c="_empty_",wc=/^xmlns:NS\d+/,Ec=/^NS\d+:/,Tc={preTransformNode:xi},Sc=[Uu,ju,Tc],Cc={model:ar,text:Li,html:Mi},Ic={expectHTML:!0,modules:Sc,directives:Cc,isPreTag:Cs,isUnaryTag:Vu,mustUseProp:ps,canBeLeftOpenTag:Bu,isReservedTag:Is,getTagNamespace:cn,staticKeys:function(t){return t.reduce(function(t,e){return t.concat(e.staticKeys||[])},[]).join(",")}(Sc)},kc=g(Ui),Ac=/^([\w$_]+|\([^)]*?\))\s*=>|^function\s*(?:[\w$]+)?\s*\(/,Nc=/\([^)]*?\);*$/,Dc=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,Oc={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},Rc={esc:["Esc","Escape"],tab:"Tab",enter:"Enter",space:[" ","Spacebar"],up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete","Del"]},xc=function(t){return"if("+t+")return null;"},Pc={stop:"$event.stopPropagation();",prevent:"$event.preventDefault();",self:xc("$event.target !== $event.currentTarget"),ctrl:xc("!$event.ctrlKey"),shift:xc("!$event.shiftKey"),alt:xc("!$event.altKey"),meta:xc("!$event.metaKey"),left:xc("'button' in $event && $event.button !== 0"),middle:xc("'button' in $event && $event.button !== 1"),right:xc("'button' in $event && $event.button !== 2")},Lc={on:Hi,bind:zi,cloak:S},Mc=function(t){this.options=t,this.warn=t.warn||jn,this.transforms=qn(t.modules,"transformCode"),this.dataGenFns=qn(t.modules,"genData"),this.directives=E(E({},Lc),t.directives);var e=t.isReservedTag||Lo;this.maybeComponent=function(t){return!!t.component||!e(t.tag)},this.onceId=0,this.staticRenderFns=[],this.pre=!1},Fc=(new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments".split(",").join("\\b|\\b")+"\\b"),new RegExp("\\b"+"delete,typeof,void".split(",").join("\\s*\\([^\\)]*\\)|\\b")+"\\s*\\([^\\)]*\\)"),function(t){return function(e){function n(n,r){var i=Object.create(e),o=[],a=[],s=function(t,e,n){(n?a:o).push(t)};if(r){r.modules&&(i.modules=(e.modules||[]).concat(r.modules)),r.directives&&(i.directives=E(Object.create(e.directives||null),r.directives));for(var u in r)"modules"!==u&&"directives"!==u&&(i[u]=r[u])}i.warn=s;var c=t(n.trim(),i);return c.errors=o,c.tips=a,c}return{compile:n,compileToFunctions:wo(n)}}}(function(t,e){var n=ci(t.trim(),e);!1!==e.optimize&&Fi(n,e);var r=$i(n,e);return{ast:n,render:r.render,staticRenderFns:r.staticRenderFns}})),Uc=Fc(Ic),jc=(Uc.compile,Uc.compileToFunctions),qc=!!Ko&&Eo(!1),Vc=!!Ko&&Eo(!0),Bc=g(function(t){var e=ln(t);return e&&e.innerHTML}),Wc=Ke.prototype.$mount;Ke.prototype.$mount=function(t,e){if((t=t&&ln(t))===document.body||t===document.documentElement)return this;var n=this.$options;if(!n.render){var r=n.template;if(r)if("string"==typeof r)"#"===r.charAt(0)&&(r=Bc(r));else{if(!r.nodeType)return this;r=r.innerHTML}else t&&(r=To(t));if(r){var i=jc(r,{outputSourceRange:!1,shouldDecodeNewlines:qc,shouldDecodeNewlinesForHref:Vc,delimiters:n.delimiters,comments:n.comments},this),o=i.render,a=i.staticRenderFns;n.render=o,n.staticRenderFns=a}}return Wc.call(this,t,e)},Ke.compile=jc,e.a=Ke}).call(e,n("DuR2"),n("162o").setImmediate)},"8ANE":function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},"8MKS":function(t,e,n){n("Ld14")("search")},"8phf":function(t,e,n){"use strict";var r=n("mWhC"),i=n("hiy0");t.exports="".repeat||function(t){var e=String(i(this)),n="",o=r(t);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},"9+GO":function(t,e,n){t.exports=!n("r54x")(function(){String(Symbol())})},"9MbE":function(t,e,n){var r=n("8ANE");t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},"9mDF":function(t,e,n){var r=n("fkET"),i=n("hiy0");t.exports=function(t){return r(i(t))}},A2uy:function(t,e,n){var r=n("9mDF"),i=n("xDUa"),o=n("40wi");t.exports=function(t){return function(e,n,a){var s,u=r(e),c=i(u.length),h=o(a,c);if(t&&n!=n){for(;c>h;)if((s=u[h++])!=s)return!0}else for(;c>h;h++)if((t||h in u)&&u[h]===n)return t||h||0;return!t&&-1}}},AMIE:function(t,e,n){var r=n("l/2K"),i=n("9mDF"),o=n("A2uy")(!1),a=n("Eb96");t.exports=function(t,e){var n,s=i(t),u=0,c=[];for(n in s)!r(a,n)&&r(s,n)&&c.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~o(c,n)||c.push(n));return c}},AaIv:function(t,e,n){"use strict";var r=n("hcE8"),i=n("l/2K"),o=n("q0qZ"),a=n("pzR0"),s=n("i9tX"),u=n("+opI"),c=n("Eb96"),h=n("r54x"),l=n("izte"),f=n("GB3+"),p=n("17Rs"),d=n("jAiL"),y=n("PBlj"),v=n("Ld14"),m=n("KsHu"),g=n("rF9q"),b=n("5+O3"),_=n("HAas"),w=n("9mDF"),E=n("whWw"),T=n("C1ru"),S=n("43zn"),C=n("hEnP"),I=n("He3V"),k=n("1rEs"),A=n("NGss"),N=n("wkr2"),D=n("/09a"),O=n("siPu")("hidden"),R=n("I1z2"),x=R.set,P=R.getterFor("Symbol"),L=I.f,M=k.f,F=C.f,U=r.Symbol,j=r.JSON,q=j&&j.stringify,V=d("toPrimitive"),B=A.f,W=l("symbol-registry"),K=l("symbols"),Q=l("op-symbols"),G=l("wks"),H=Object.prototype,z=r.QObject,$=n("9+GO"),Y=!z||!z.prototype||!z.prototype.findChild,X=o&&h(function(){return 7!=S(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=L(H,e);r&&delete H[e],M(t,e,n),r&&t!==H&&M(H,e,r)}:M,J=function(t,e){var n=K[t]=S(U.prototype);return x(n,{type:"Symbol",tag:t,description:e}),o||(n.description=e),n},Z=$&&"symbol"==typeof U.iterator?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof U},tt=function(t,e,n){return t===H&&tt(Q,e,n),b(t),e=E(e,!0),b(n),i(K,e)?(n.enumerable?(i(t,O)&&t[O][e]&&(t[O][e]=!1),n=S(n,{enumerable:T(0,!1)})):(i(t,O)||M(t,O,T(1,{})),t[O][e]=!0),X(t,e,n)):M(t,e,n)},et=function(t,e){b(t);for(var n,r=m(e=w(e)),i=0,o=r.length;o>i;)tt(t,n=r[i++],e[n]);return t},nt=function(t,e){return void 0===e?S(t):et(S(t),e)},rt=function(t){var e=B.call(this,t=E(t,!0));return!(this===H&&i(K,t)&&!i(Q,t))&&(!(e||!i(this,t)||!i(K,t)||i(this,O)&&this[O][t])||e)},it=function(t,e){if(t=w(t),e=E(e,!0),t!==H||!i(K,e)||i(Q,e)){var n=L(t,e);return!n||!i(K,e)||i(t,O)&&t[O][e]||(n.enumerable=!0),n}},ot=function(t){for(var e,n=F(w(t)),r=[],o=0;n.length>o;)i(K,e=n[o++])||i(c,e)||r.push(e);return r},at=function(t){for(var e,n=t===H,r=F(n?Q:w(t)),o=[],a=0;r.length>a;)!i(K,e=r[a++])||n&&!i(H,e)||o.push(K[e]);return o};$||(U=function(){if(this instanceof U)throw TypeError("Symbol is not a constructor");var t=void 0===arguments[0]?void 0:String(arguments[0]),e=p(t),n=function(t){this===H&&n.call(Q,t),i(this,O)&&i(this[O],e)&&(this[O][e]=!1),X(this,e,T(1,t))};return o&&Y&&X(H,e,{configurable:!0,set:n}),J(e,t)},u(U.prototype,"toString",function(){return P(this).tag}),A.f=rt,k.f=tt,I.f=it,n("gLsf").f=C.f=ot,n("fTzd").f=at,o&&(M(U.prototype,"description",{configurable:!0,get:function(){return P(this).description}}),a||u(H,"propertyIsEnumerable",rt,{unsafe:!0})),y.f=function(t){return J(d(t),t)}),s({global:!0,wrap:!0,forced:!$,sham:!$},{Symbol:U});for(var st=D(G),ut=0;st.length>ut;)v(st[ut++]);s({target:"Symbol",stat:!0,forced:!$},{for:function(t){return i(W,t+="")?W[t]:W[t]=U(t)},keyFor:function(t){if(!Z(t))throw TypeError(t+" is not a symbol");for(var e in W)if(W[e]===t)return e},useSetter:function(){Y=!0},useSimple:function(){Y=!1}}),s({target:"Object",stat:!0,forced:!$,sham:!o},{create:nt,defineProperty:tt,defineProperties:et,getOwnPropertyDescriptor:it}),s({target:"Object",stat:!0,forced:!$},{getOwnPropertyNames:ot,getOwnPropertySymbols:at}),j&&s({target:"JSON",stat:!0,forced:!$||h(function(){var t=U();return"[null]"!=q([t])||"{}"!=q({a:t})||"{}"!=q(Object(t))})},{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(_(e)||void 0!==t)&&!Z(t))return g(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Z(e))return e}),r[1]=e,q.apply(j,r)}}),U.prototype[V]||N(U.prototype,V,U.prototype.valueOf),f(U,"Symbol"),c[O]=!0},AgWD:function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},Aq0r:function(t,e){t.exports=function(){}},B5V0:function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},BfX3:function(t,e,n){var r=n("FKWp"),i=n("SWGL"),o=n("hgbu")("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||void 0==(n=r(a)[o])?e:i(n)}},"C/Wh":function(t,e,n){var r=n("hcE8"),i=n("wkr2");t.exports=function(t,e){try{i(r,t,e)}catch(n){r[t]=e}return e}},C1ru:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"CTE+":function(t,e,n){var r=n("jAiL")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,"/./"[t](e)}catch(t){}}return!1}},CwNI:function(t,e,n){n("vQY2"),t.exports=n("flBj")("Array","findIndex")},D8I6:function(t,e,n){"use strict";function r(t){return"storage/"+t}function i(){return new Zt(te.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function o(t){return new Zt(te.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function a(t){return new Zt(te.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function s(){return new Zt(te.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}function u(t){return new Zt(te.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function c(){return new Zt(te.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function h(){return new Zt(te.CANCELED,"User canceled the upload/download.")}function l(t){return new Zt(te.INVALID_URL,"Invalid URL '"+t+"'.")}function f(t){return new Zt(te.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function p(){return new Zt(te.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function d(){return new Zt(te.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function y(){return new Zt(te.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function v(t,e,n){return new Zt(te.INVALID_ARGUMENT,"Invalid argument in `"+e+"` at index "+t+": "+n)}function m(t,e,n,r){var i,o;return t===e?(i=t,o=1===t?"argument":"arguments"):(i="between "+t+" and "+e,o="arguments"),new Zt(te.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+n+"`: Expected "+i+" "+o+", received "+r+".")}function g(){return new Zt(te.APP_DELETED,"The Firebase app was deleted.")}function b(t){return new Zt(te.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function _(t,e){return new Zt(te.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function w(t){throw new Zt(te.INTERNAL_ERROR,"Internal error: "+t)}function E(t){switch(t){case ee.RAW:case ee.BASE64:case ee.BASE64URL:case ee.DATA_URL:return;default:throw"Expected one of the event types: ["+ee.RAW+", "+ee.BASE64+", "+ee.BASE64URL+", "+ee.DATA_URL+"]."}}function T(t,e){switch(t){case ee.RAW:return new ne(S(e));case ee.BASE64:case ee.BASE64URL:return new ne(I(t,e));case ee.DATA_URL:return new ne(k(e),A(e))}throw i()}function S(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r)){var i=n<t.length-1&&56320==(64512&t.charCodeAt(n+1));if(i){var o=r,a=t.charCodeAt(++n);r=65536|(1023&o)<<10|1023&a,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189)}else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function C(t){var e;try{e=decodeURIComponent(t)}catch(t){throw _(ee.DATA_URL,"Malformed data URL.")}return S(e)}function I(t,e){switch(t){case ee.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r){var i=n?"-":"_";throw _(t,"Invalid character '"+i+"' found: is it base64url encoded?")}break;case ee.BASE64URL:var o=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(o||a){var i=o?"+":"/";throw _(t,"Invalid character '"+i+"' found: is it base64 encoded?")}e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(e){throw _(t,"Invalid character found")}for(var u=new Uint8Array(s.length),c=0;c<s.length;c++)u[c]=s.charCodeAt(c);return u}function k(t){var e=new re(t);return e.base64?I(ee.BASE64,e.rest):C(e.rest)}function A(t){return new re(t).contentType}function N(t,e){return!!(t.length>=e.length)&&t.substring(t.length-e.length)===e}function D(t){switch(t){case oe.RUNNING:case oe.PAUSING:case oe.CANCELING:return ae.RUNNING;case oe.PAUSED:return ae.PAUSED;case oe.SUCCESS:return ae.SUCCESS;case oe.CANCELED:return ae.CANCELED;case oe.ERROR:default:return ae.ERROR}}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function O(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function R(t,e){for(var n in t)O(t,n)&&e(n,t[n])}function x(t){if(null==t)return{};var e={};return R(t,function(t,n){e[t]=n}),e}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function P(t){return new Promise(t)}function L(t){return Promise.resolve(t)}function M(t){return Promise.reject(t)}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function F(t){return null!=t}function U(t){return void 0!==t}function j(t){return"function"==typeof t}function q(t){return"object"==typeof t}function V(t){return q(t)&&null!==t}function B(t){return q(t)&&!Array.isArray(t)}function W(t){return"string"==typeof t||t instanceof String}function K(t){return"number"==typeof t||t instanceof Number}function Q(t){return G()&&t instanceof Blob}function G(){return"undefined"!=typeof Blob}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function H(t){var e;try{e=JSON.parse(t)}catch(t){return null}return B(e)?e:null}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function z(t){if(0==t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}function $(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}function Y(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function X(t){return"https://"+$t+"/v0"+t}function J(t){var e=encodeURIComponent,n="?";return R(t,function(t,r){var i=e(t)+"="+e(r);n=n+i+"&"}),n=n.slice(0,-1)}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Z(t,e){return e}function tt(t){return!W(t)||t.length<2?t:(t=t,Y(t))}function et(){function t(t,e){return tt(e)}function e(t,e){return F(e)?+e:e}if(le)return le;var n=[];n.push(new he("bucket")),n.push(new he("generation")),n.push(new he("metageneration")),n.push(new he("name","fullPath",!0));var r=new he("name");r.xform=t,n.push(r);var i=new he("size");return i.xform=e,n.push(i),n.push(new he("timeCreated")),n.push(new he("updated")),n.push(new he("md5Hash",null,!0)),n.push(new he("cacheControl",null,!0)),n.push(new he("contentDisposition",null,!0)),n.push(new he("contentEncoding",null,!0)),n.push(new he("contentLanguage",null,!0)),n.push(new he("contentType",null,!0)),n.push(new he("metadata","customMetadata",!0)),le=n}function nt(t,e){function n(){var n=t.bucket,r=t.fullPath,i=new ce(n,r);return e.makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function rt(t,e,n){var r={};r.type="file";for(var i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return nt(r,t),r}function it(t,e,n){var r=H(e);return null===r?null:rt(t,r,n)}function ot(t,e){var n=H(e);if(null===n)return null;if(!W(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map(function(e){var n=t.bucket,r=t.fullPath;return X("/b/"+i(n)+"/o/"+i(r))+J({alt:"media",token:e})})[0]}function at(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function st(t){if(!t||!q(t))throw"Expected Metadata object.";for(var e in t){var n=t[e];if("customMetadata"===e){if(!q(n))throw"Expected object for 'customMetadata' mapping."}else if(V(n))throw"Mapping for '"+e+"' cannot be an object."}}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ut(t,e,n){for(var r=e.length,i=e.length,o=0;o<e.length;o++)if(e[o].optional){r=o;break}if(!(r<=n.length&&n.length<=i))throw m(r,i,t,n.length);for(var o=0;o<n.length;o++)try{e[o].validator(n[o])}catch(e){throw e instanceof Error?v(o,t,e.message):v(o,t,e)}}function ct(t,e){return function(n){t(n),e(n)}}function ht(t,e){function n(t){if(!W(t))throw"Expected string."}var r;return r=t?ct(n,t):n,new fe(r,e)}function lt(){function t(t){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||G()&&t instanceof Blob))throw"Expected Blob or File."}return new fe(t)}function ft(t){return new fe(st,t)}function pt(){function t(t){if(!(K(t)&&t>=0))throw"Expected a number 0 or greater."}return new fe(t)}function dt(t,e){function n(e){if(!(null===e||F(e)&&e instanceof Object))throw"Expected an Object.";void 0!==t&&null!==t&&t(e)}return new fe(n,e)}function yt(t){function e(t){if(null!==t&&!j(t))throw"Expected a Function."}return new fe(e,t)}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function vt(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function mt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=vt();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(G())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}function gt(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function bt(t,e){return-1!==t.indexOf(e)}function _t(t){return Array.prototype.slice.call(t)}function wt(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Et(t){if(!t)throw i()}function Tt(t,e){function n(n,r){var i=it(t,r,e);return Et(null!==i),i}return n}function St(t,e){function n(n,r){var i=it(t,r,e);return Et(null!==i),ot(i,r)}return n}function Ct(t){function e(e,n){var r;return r=401===e.getStatus()?s():402===e.getStatus()?a(t.bucket):403===e.getStatus()?u(t.path):n,r.setServerResponseProp(n.serverResponseProp()),r}return e}function It(t){function e(e,r){var i=n(e,r);return 404===e.getStatus()&&(i=o(t.path)),i.setServerResponseProp(r.serverResponseProp()),i}var n=Ct(t);return e}function kt(t,e,n){var r=e.fullServerUrl(),i=X(r),o=t.maxOperationRetryTime(),a=new de(i,"GET",Tt(t,n),o);return a.errorHandler=It(e),a}function At(t,e,n){var r=e.fullServerUrl(),i=X(r),o=t.maxOperationRetryTime(),a=new de(i,"GET",St(t,n),o);return a.errorHandler=It(e),a}function Nt(t,e,n,r){var i=e.fullServerUrl(),o=X(i),a=at(n,r),s={"Content-Type":"application/json; charset=utf-8"},u=t.maxOperationRetryTime(),c=new de(o,"PATCH",Tt(t,r),u);return c.headers=s,c.body=a,c.errorHandler=It(e),c}function Dt(t,e){function n(t,e){}var r=e.fullServerUrl(),i=X(r),o=t.maxOperationRetryTime(),a=new de(i,"DELETE",n,o);return a.successCodes=[200,204],a.errorHandler=It(e),a}function Ot(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Rt(t,e,n){var r=x(n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Ot(null,e)),r}function xt(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=Rt(e,r,i),c=at(u,n),h="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",f=pe.getBlob(h,r,l);if(null===f)throw p();var d={name:u.fullPath},y=X(o),v=t.maxUploadRetryTime(),m=new de(y,"POST",Tt(t,n),v);return m.urlParams=d,m.headers=a,m.body=f.uploadData(),m.errorHandler=Ct(e),m}function Pt(t,e){var n;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){Et(!1)}return Et(bt(e||["active"],n)),n}function Lt(t,e,n,r,i){function o(t,e){Pt(t);var n;try{n=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){Et(!1)}return Et(W(n)),n}var a=e.bucketOnlyServerUrl(),s=Rt(e,r,i),u={name:s.fullPath},c=X(a),h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=at(s,n),f=t.maxUploadRetryTime(),p=new de(c,"POST",o,f);return p.urlParams=u,p.headers=h,p.body=l,p.errorHandler=Ct(e),p}function Mt(t,e,n,r){function i(t,e){var n,i=Pt(t,["active","final"]);try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){Et(!1)}var o=parseInt(n,10);return Et(!isNaN(o)),new ye(o,r.size(),"final"===i)}var o={"X-Goog-Upload-Command":"query"},a=t.maxUploadRetryTime(),s=new de(n,"POST",i,a);return s.headers=o,s.errorHandler=Ct(e),s}function Ft(t,e,n,r,i,o,a,s){function u(t,n){var i,a=Pt(t,["active","final"]),s=c.current+l,u=r.size();return i="final"===a?Tt(e,o)(t,n):null,new ye(s,u,"final"===a,i)}var c=new ye(0,0);if(a?(c.current=a.current,c.total=a.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw d();var h=c.total-c.current,l=h;i>0&&(l=Math.min(l,i));var f=c.current,y=f+l,v=l===h?"upload, finalize":"upload",m={"X-Goog-Upload-Command":v,"X-Goog-Upload-Offset":c.current},g=r.slice(f,y);if(null===g)throw p();var b=e.maxUploadRetryTime(),_=new de(n,"POST",u,b);return _.headers=m,_.body=g.uploadData(),_.progressCallback=s||null,_.errorHandler=Ct(t),_}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ut(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];L(!0).then(function(){t.apply(null,e)})}}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function jt(t,e,n){function r(){return 2===l}function i(){f||(f=!0,e.apply(null,arguments))}function o(e){c=setTimeout(function(){c=null,t(a,r())},e)}function a(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!f){if(t)return void i.apply(null,arguments);if(r()||h)return void i.apply(null,arguments);u<64&&(u*=2);var a;1===l?(l=2,a=0):a=1e3*(u+Math.random()),o(a)}}function s(t){p||(p=!0,f||(null!==c?(t||(l=2),clearTimeout(c),o(0)):t||(l=1)))}var u=1,c=null,h=!1,l=0,f=!1,p=!1;return o(0),setTimeout(function(){h=!0,s(!0)},n),s}function qt(t){t(!1)}function Vt(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}function Bt(t){var e=void 0!==zt.a?zt.a.SDK_VERSION:"AppManager";t["X-Firebase-Storage-Version"]="webjs/"+e}function Wt(t,e,n){var r=J(t.urlParams),i=t.url+r,o=x(t.headers);return Vt(o,e),Bt(o),new Te(i,t.method,o,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,n)}function Kt(t,e,n){return new Ce(t,new ue,n)}function Qt(t){var e={TaskState:ae,TaskEvent:ie,StringFormat:ee,Storage:Ce,Reference:be};t.INTERNAL.registerService(ke,Kt,e,void 0,!0)}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"registerStorage",function(){return Qt});var Gt,Ht=n("O4tu"),zt=n.n(Ht),$t="firebasestorage.googleapis.com",Yt=12e4,Xt=6e4,Jt=-9007199254740991,Zt=function(){function t(t,e){this.code_=r(t),this.message_="Firebase Storage: "+e,this.serverResponse_=null,this.name_="FirebaseError"}return t.prototype.codeProp=function(){return this.code},t.prototype.codeEquals=function(t){return r(t)===this.codeProp()},t.prototype.serverResponseProp=function(){return this.serverResponse_},t.prototype.setServerResponseProp=function(t){this.serverResponse_=t},Object.defineProperty(t.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),t}(),te={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"},ee={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},ne=function(){function t(t,e){this.data=t,this.contentType=e||null}return t}(),re=function(){function t(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw _(ee.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=N(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1)}return t}(),ie={STATE_CHANGED:"state_changed"},oe={RUNNING:"running",PAUSING:"pausing",PAUSED:"paused",SUCCESS:"success",CANCELING:"canceling",CANCELED:"canceled",ERROR:"error"},ae={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(Gt||(Gt={}));/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var se=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Gt.NO_ERROR,this.sendPromise_=P(function(e,n){t.xhr_.addEventListener("abort",function(n){t.errorCode_=Gt.ABORT,e(t)}),t.xhr_.addEventListener("error",function(n){t.errorCode_=Gt.NETWORK_ERROR,e(t)}),t.xhr_.addEventListener("load",function(n){e(t)})})}return t.prototype.send=function(t,e,n,r){var i=this;if(this.sent_)throw w("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),F(r)){R(r,function(t,e){i.xhr_.setRequestHeader(t,e.toString())})}return F(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw w("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw w("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw w("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){F(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){F(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},t}(),ue=function(){function t(){}return t.prototype.createXhrIo=function(){return new se},t}(),ce=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(n){return new t(e,"")}if(""===n.path)return n;throw f(e)},t.makeFromUrl=function(e){function n(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}function r(t){t.path_=decodeURIComponent(t.path)}for(var i=null,o=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i"),a={bucket:1,path:3},s=$t.replace(/[.]/g,"\\."),u=new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$","i"),c={bucket:1,path:3},h=[{regex:o,indices:a,postModify:n},{regex:u,indices:c,postModify:r}],f=0;f<h.length;f++){var p=h[f],d=p.regex.exec(e);if(d){var y=d[p.indices.bucket],v=d[p.indices.path];v||(v=""),i=new t(y,v),p.postModify(i);break}}if(null==i)throw l(e);return i},t}(),he=function(){function t(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||Z}return t}(),le=null,fe=function(){function t(t,e){var n=this;this.validator=function(e){n.optional&&!U(e)||t(e)},this.optional=!!e}return t}(),pe=function(){function t(t,e){var n=0,r="";Q(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(Q(this.data_)){var r=this.data_,i=gt(r,e,n);return null===i?null:new t(i)}return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(G()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t(mt.apply(null,r))}var i=e.map(function(t){return W(t)?T(ee.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var a=new Uint8Array(o),s=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)a[s++]=t[e]}),new t(a,!0)},t.prototype.uploadData=function(){return this.data_},t}(),de=function(){function t(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}return t}(),ye=function(){function t(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}return t}(),ve=function(){function t(t,e,n){if(j(t)||F(e)||F(n))this.next=t,this.error=e||null,this.complete=n||null;else{var r=t;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}}return t}(),me=function(){function t(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o}return t}(),ge=function(){function t(t,e,n,r,i,o){void 0===o&&(o=null);var a=this;this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.authWrapper_=e,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=oe.RUNNING,this.errorHandler_=function(t){a.request_=null,a.chunkMultiplier_=1,t.codeEquals(te.CANCELED)?(a.needToFetchStatus_=!0,a.completeTransitions_()):(a.error_=t,a.transition_(oe.ERROR))},this.metadataErrorHandler_=function(t){a.request_=null,t.codeEquals(te.CANCELED)?a.completeTransitions_():(a.error_=t,a.transition_(oe.ERROR))},this.promise_=P(function(t,e){a.resolve_=t,a.reject_=e,a.start_()}),this.promise_.then(null,function(){})}return t.prototype.makeProgressCallback_=function(){var t=this,e=this.transferred_;return function(n,r){t.updateProgress_(e+n)}},t.prototype.shouldDoResumable_=function(t){return t.size()>262144},t.prototype.start_=function(){this.state_===oe.RUNNING&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},t.prototype.resolveToken_=function(t){var e=this;this.authWrapper_.getAuthToken().then(function(n){switch(e.state_){case oe.RUNNING:t(n);break;case oe.CANCELING:e.transition_(oe.CANCELED);break;case oe.PAUSING:e.transition_(oe.PAUSED)}})},t.prototype.createResumable_=function(){var t=this;this.resolveToken_(function(e){var n=Lt(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then(function(e){t.request_=null,t.uploadUrl_=e,t.needToFetchStatus_=!1,t.completeTransitions_()},t.errorHandler_)})},t.prototype.fetchStatus_=function(){var t=this,e=this.uploadUrl_;this.resolveToken_(function(n){var r=Mt(t.authWrapper_,t.location_,e,t.blob_),i=t.authWrapper_.makeRequest(r,n);t.request_=i,i.getPromise().then(function(e){e=e,t.request_=null,t.updateProgress_(e.current),t.needToFetchStatus_=!1,e.finalized&&(t.needToFetchMetadata_=!0),t.completeTransitions_()},t.errorHandler_)})},t.prototype.continueUpload_=function(){var t=this,e=262144*this.chunkMultiplier_,n=new ye(this.transferred_,this.blob_.size()),r=this.uploadUrl_;this.resolveToken_(function(i){var o;try{o=Ft(t.location_,t.authWrapper_,r,t.blob_,e,t.mappings_,n,t.makeProgressCallback_())}catch(e){return t.error_=e,void t.transition_(oe.ERROR)}var a=t.authWrapper_.makeRequest(o,i);t.request_=a,a.getPromise().then(function(e){t.increaseMultiplier_(),t.request_=null,t.updateProgress_(e.current),e.finalized?(t.metadata_=e.metadata,t.transition_(oe.SUCCESS)):t.completeTransitions_()},t.errorHandler_)})},t.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},t.prototype.fetchMetadata_=function(){var t=this;this.resolveToken_(function(e){var n=kt(t.authWrapper_,t.location_,t.mappings_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then(function(e){t.request_=null,t.metadata_=e,t.transition_(oe.SUCCESS)},t.metadataErrorHandler_)})},t.prototype.oneShotUpload_=function(){var t=this;this.resolveToken_(function(e){var n=xt(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then(function(e){t.request_=null,t.metadata_=e,t.updateProgress_(t.blob_.size()),t.transition_(oe.SUCCESS)},t.errorHandler_)})},t.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},t.prototype.transition_=function(t){if(this.state_!==t)switch(t){case oe.CANCELING:case oe.PAUSING:this.state_=t,null!==this.request_&&this.request_.cancel();break;case oe.RUNNING:var e=this.state_===oe.PAUSED;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case oe.PAUSED:this.state_=t,this.notifyObservers_();break;case oe.CANCELED:this.error_=h(),this.state_=t,this.notifyObservers_();break;case oe.ERROR:case oe.SUCCESS:this.state_=t,this.notifyObservers_()}},t.prototype.completeTransitions_=function(){switch(this.state_){case oe.PAUSING:this.transition_(oe.PAUSED);break;case oe.CANCELING:this.transition_(oe.CANCELED);break;case oe.RUNNING:this.start_()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=D(this.state_);return new me(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),t.prototype.on=function(t,e,n,r){function i(e){if(t!==ie.STATE_CHANGED)throw"Expected one of the event types: ["+ie.STATE_CHANGED+"]."}function o(t){try{return void c(t)}catch(t){}try{h(t);if(!(U(t.next)||U(t.error)||U(t.complete)))throw"";return}catch(t){throw u}}function a(t){function e(e,n,i){null!==t&&ut("on",t,arguments);var o=new ve(e,n,r);return l.addObserver_(o),function(){l.removeObserver_(o)}}return e}function s(t){if(null===t)throw u;o(t)}void 0===e&&(e=void 0),void 0===n&&(n=void 0),void 0===r&&(r=void 0);var u="Expected a function or an Object with one of `next`, `error`, `complete` properties.",c=yt(!0).validator,h=dt(null,!0).validator;ut("on",[ht(i),dt(o,!0),yt(!0),yt(!0)],arguments);var l=this,f=[dt(s),yt(!0),yt(!0)];return U(e)||U(n)||U(r)?a(null)(e,n,r):a(f)},t.prototype.then=function(t,e){return this.promise_.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},t.prototype.removeObserver_=function(t){wt(this.observers_,t)},t.prototype.notifyObservers_=function(){var t=this;this.finishPromise_(),_t(this.observers_).forEach(function(e){t.notifyObserver_(e)})},t.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(D(this.state_)){case ae.SUCCESS:Ut(this.resolve_.bind(null,this.snapshot))();break;case ae.CANCELED:case ae.ERROR:Ut(this.reject_.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},t.prototype.notifyObserver_=function(t){switch(D(this.state_)){case ae.RUNNING:case ae.PAUSED:null!==t.next&&Ut(t.next.bind(t,this.snapshot))();break;case ae.SUCCESS:null!==t.complete&&Ut(t.complete.bind(t))();break;case ae.CANCELED:case ae.ERROR:null!==t.error&&Ut(t.error.bind(t,this.error_))();break;default:null!==t.error&&Ut(t.error.bind(t,this.error_))()}},t.prototype.resume=function(){ut("resume",[],arguments);var t=this.state_===oe.PAUSED||this.state_===oe.PAUSING;return t&&this.transition_(oe.RUNNING),t},t.prototype.pause=function(){ut("pause",[],arguments);var t=this.state_===oe.RUNNING;return t&&this.transition_(oe.PAUSING),t},t.prototype.cancel=function(){ut("cancel",[],arguments);var t=this.state_===oe.RUNNING||this.state_===oe.PAUSING;return t&&this.transition_(oe.CANCELING),t},t}(),be=function(){function t(t,e){this.authWrapper=t,this.location=e instanceof ce?e:ce.makeFromUrl(e)}return t.prototype.toString=function(){return ut("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},t.prototype.newRef=function(e,n){return new t(e,n)},t.prototype.mappings=function(){return et()},t.prototype.child=function(t){ut("child",[ht()],arguments);var e=$(this.location.path,t),n=new ce(this.location.bucket,e);return this.newRef(this.authWrapper,n)},Object.defineProperty(t.prototype,"parent",{get:function(){var t=z(this.location.path);if(null===t)return null;var e=new ce(this.location.bucket,t);return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){var t=new ce(this.location.bucket,"");return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return Y(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),t.prototype.put=function(t,e){return void 0===e&&(e=null),ut("put",[lt(),ft(!0)],arguments),this.throwIfRoot_("put"),new ge(this,this.authWrapper,this.location,this.mappings(),new pe(t),e)},t.prototype.putString=function(t,e,n){void 0===e&&(e=ee.RAW),ut("putString",[ht(),ht(E,!0),ft(!0)],arguments),this.throwIfRoot_("putString");var r=T(e,t),i=x(n);return!F(i.contentType)&&F(r.contentType)&&(i.contentType=r.contentType),new ge(this,this.authWrapper,this.location,this.mappings(),new pe(r.data,!0),i)},t.prototype.delete=function(){ut("delete",[],arguments),this.throwIfRoot_("delete");var t=this;return this.authWrapper.getAuthToken().then(function(e){var n=Dt(t.authWrapper,t.location);return t.authWrapper.makeRequest(n,e).getPromise()})},t.prototype.getMetadata=function(){ut("getMetadata",[],arguments),this.throwIfRoot_("getMetadata");var t=this;return this.authWrapper.getAuthToken().then(function(e){var n=kt(t.authWrapper,t.location,t.mappings());return t.authWrapper.makeRequest(n,e).getPromise()})},t.prototype.updateMetadata=function(t){ut("updateMetadata",[ft()],arguments),this.throwIfRoot_("updateMetadata");var e=this;return this.authWrapper.getAuthToken().then(function(n){var r=Nt(e.authWrapper,e.location,t,e.mappings());return e.authWrapper.makeRequest(r,n).getPromise()})},t.prototype.getDownloadURL=function(){ut("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL");var t=this;return this.authWrapper.getAuthToken().then(function(e){var n=At(t.authWrapper,t.location,t.mappings());return t.authWrapper.makeRequest(n,e).getPromise().then(function(t){if(null===t)throw y();return t})})},t.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw b(t)},t}(),_e=function(){function t(t){this.promise_=M(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){void 0===t&&(t=!1)},t}(),we=function(){function t(){this.map_={},this.id_=Jt}return t.prototype.addRequest=function(t){function e(){delete r.map_[n]}var n=this.id_;this.id_++,this.map_[n]=t;var r=this;t.getPromise().then(e,e)},t.prototype.clear=function(){R(this.map_,function(t,e){e&&e.cancel(!0)}),this.map_={}},t}(),Ee=function(){function t(e,n,r,i,o){if(this.bucket_=null,this.deleted_=!1,this.app_=e,null!==this.app_){var a=this.app_.options;F(a)&&(this.bucket_=t.extractBucket_(a))}this.storageRefMaker_=n,this.requestMaker_=r,this.pool_=o,this.service_=i,this.maxOperationRetryTime_=Yt,this.maxUploadRetryTime_=Xt,this.requestMap_=new we}return t.extractBucket_=function(t){var e=t.storageBucket||null;return null==e?null:ce.makeFromBucketSpec(e).bucket},t.prototype.getAuthToken=function(){return null!==this.app_&&F(this.app_.INTERNAL)&&F(this.app_.INTERNAL.getToken)?this.app_.INTERNAL.getToken().then(function(t){return null!==t?t.accessToken:null},function(t){return null}):L(null)},t.prototype.bucket=function(){if(this.deleted_)throw g();return this.bucket_},t.prototype.service=function(){return this.service_},t.prototype.makeStorageReference=function(t){return this.storageRefMaker_(this,t)},t.prototype.makeRequest=function(t,e){if(this.deleted_)return new _e(g());var n=this.requestMaker_(t,e,this.pool_);return this.requestMap_.addRequest(n),n},t.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},t.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},t.prototype.setMaxUploadRetryTime=function(t){this.maxUploadRetryTime_=t},t.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},t.prototype.setMaxOperationRetryTime=function(t){this.maxOperationRetryTime_=t},t}(),Te=function(){function t(t,e,n,r,i,o,a,s,u,c,h){this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=h;var l=this;this.promise_=P(function(t,e){l.resolve_=t,l.reject_=e,l.start_()})}return t.prototype.start_=function(){function t(t,e){function r(t){var e=t.loaded,r=t.lengthComputable?t.total:-1;null!==n.progressCallback_&&n.progressCallback_(e,r)}if(e)return void t(!1,new Se(!1,null,!0));var i=n.pool_.createXhrIo();n.pendingXhr_=i,null!==n.progressCallback_&&i.addUploadProgressListener(r),i.send(n.url_,n.method_,n.body_,n.headers_).then(function(e){null!==n.progressCallback_&&e.removeUploadProgressListener(r),n.pendingXhr_=null,e=e;var i=e.getErrorCode()===Gt.NO_ERROR,o=e.getStatus();if(!i||n.isRetryStatusCode_(o)){var a=e.getErrorCode()===Gt.ABORT;return void t(!1,new Se(!1,null,a))}var s=bt(n.successCodes_,o);t(!0,new Se(s,e))})}function e(t,e){var r=n.resolve_,o=n.reject_,a=e.xhr;if(e.wasSuccessCode)try{var s=n.callback_(a,a.getResponseText());U(s)?r(s):r()}catch(t){o(t)}else if(null!==a){var u=i();u.setServerResponseProp(a.getResponseText()),o(n.errorCallback_?n.errorCallback_(a,u):u)}else if(e.canceled){var u=n.appDelete_?g():h();o(u)}else{var u=c();o(u)}}var n=this;this.canceled_?e(!1,new Se(!1,null,!0)):this.backoffId_=jt(t,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&qt(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=[408,429],r=bt(n,t),i=bt(this.additionalRetryCodes_,t);return e||r||i},t}(),Se=function(){function t(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}return t}(),Ce=function(){function t(t,e,n){function r(t,e){return new be(t,e)}if(this.bucket_=null,this.authWrapper_=new Ee(t,r,Wt,this,e),this.app_=t,null!=n)this.bucket_=ce.makeFromBucketSpec(n);else{var i=this.authWrapper_.bucket();null!=i&&(this.bucket_=new ce(i,""))}this.internals_=new Ie(this)}return t.prototype.ref=function(t){function e(t){if(/^[A-Za-z]+:\/\//.test(t))throw"Expected child path but got a URL, use refFromURL instead."}if(ut("ref",[ht(e,!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var n=new be(this.authWrapper_,this.bucket_);return null!=t?n.child(t):n},t.prototype.refFromURL=function(t){function e(t){if(!/^[A-Za-z]+:\/\//.test(t))throw"Expected full URL but got a child path, use ref instead.";try{ce.makeFromUrl(t)}catch(t){throw"Expected valid full URL but got an invalid one."}}return ut("refFromURL",[ht(e,!1)],arguments),new be(this.authWrapper_,t)},Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),t.prototype.setMaxUploadRetryTime=function(t){ut("setMaxUploadRetryTime",[pt()],arguments),this.authWrapper_.setMaxUploadRetryTime(t)},t.prototype.setMaxOperationRetryTime=function(t){ut("setMaxOperationRetryTime",[pt()],arguments),this.authWrapper_.setMaxOperationRetryTime(t)},Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),t}(),Ie=function(){function t(t){this.service_=t}return t.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),L(void 0)},t}(),ke="storage";Qt(zt.a)},DFDv:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("ls6R"),i=(n.n(r),n("tf1T")),o=(n.n(i),n("L20s")),a=(n.n(o),n("er2X")),s=(n.n(a),n("Qa/u")),u=(n.n(s),n("zmmn")),c=(n.n(u),n("zT9F")),h=(n.n(c),n("6Az+")),l=(n.n(h),n("kpD2"));n.n(l)},DuR2:function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},DvwR:function(t,e,n){var r=n("x//u"),i=n("ksFB"),o=n("PbQV")(!1),a=n("+SdG")("IE_PROTO");t.exports=function(t,e){var n,s=i(t),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~o(c,n)||c.push(n));return c}},EFoD:function(t,e,n){"use strict";var r=n("YjQv"),i=n("iANj"),o=n("GCs6"),a=n("qs+f"),s=n("hgbu")("species");t.exports=function(t){var e="function"==typeof i[t]?i[t]:r[t];a&&e&&!e[s]&&o.f(e,s,{configurable:!0,get:function(){return this}})}},EJk4:function(t,e,n){var r=n("hiy0");t.exports=function(t){return Object(r(t))}},"EU5/":function(t,e,n){n("GB3+")(n("hcE8").JSON,"JSON",!0)},Eb96:function(t,e){t.exports={}},FHqv:function(t,e,n){var r=n("NZra"),i=n("hgbu")("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),i))?n:o?r(e):"Object"==(s=r(e))&&"function"==typeof e.callee?"Arguments":s}},FKWp:function(t,e,n){var r=n("8ANE");t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},"FZ+f":function(t,e){function n(t,e){var n=t[1]||"",i=t[3];if(!i)return n;if(e&&"function"==typeof btoa){var o=r(i);return[n].concat(i.sources.map(function(t){return"/*# sourceURL="+i.sourceRoot+t+" */"})).concat([o]).join("\n")}return[n].join("\n")}function r(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var r=n(e,t);return e[2]?"@media "+e[2]+"{"+r+"}":r}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},"GB/M":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){function r(t){return"string"==typeof t}function i(t,e){t=t.split("."),e=e||ne;for(var n=0;n<t.length;n++)if(null==(e=e[t[n]]))return null;return e}function o(){}function a(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function s(t){return"array"==a(t)}function u(t){var e=a(t);return"array"==e||"object"==e&&"number"==typeof t.length}function c(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function h(t,e,n){return t.call.apply(t.bind,arguments)}function l(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function f(t,e,n){return f=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?h:l,f.apply(null,arguments)}function p(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function d(t,e){function n(){}n.prototype=e.prototype,t.S=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.re=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function y(){this.i=this.i,this.j=this.j}function v(t){t:{for(var e=Vt,n=t.length,i=r(t)?t.split(""):t,o=0;o<n;o++)if(o in i&&e.call(void 0,i[o],o,t)){e=o;break t}e=-1}return 0>e?null:r(t)?t.charAt(e):t[e]}function m(t){return Array.prototype.concat.apply([],arguments)}function g(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function b(t){return/^[\s\xa0]*$/.test(t)}function _(t,e){return-1!=t.indexOf(e)}function w(t,e){return t<e?-1:t>e?1:0}function E(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function T(t){var e,n={};for(e in t)n[e]=t[e];return n}function S(t,e){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(var o=0;o<fe.length;o++)n=fe[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function C(t){return C[" "](t),t}function I(t,e){var n=Se;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}function k(){var t=ne.document;return t?t.documentMode:void 0}function A(t){return I(t,function(){for(var e=0,n=ce(String(pe)).split("."),r=ce(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=w(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||w(0==a[2].length,0==s[2].length)||w(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e})}function N(t,e){this.type=t,this.a=this.target=e,this.b=!1,this.hc=!0}function D(t,e){N.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.f=null,t&&this.g(t,e)}function O(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ya=i,this.key=++Oe,this.ja=this.oa=!1}function R(t){this.src=t,this.a={},this.b=0}function x(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ja&&o.listener==e&&o.capture==!!n&&o.ya==r)return i}return-1}function P(t,e,n,r,i){if(r&&r.once)return F(t,e,n,r,i);if(s(e)){for(var o=0;o<e.length;o++)P(t,e[o],n,r,i);return null}return n=K(n),t&&t[De]?t.Lb(e,n,c(r)?!!r.capture:!!r,i):L(t,e,n,!1,r,i)}function L(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=c(i)?!!i.capture:!!i;if(a&&!Ie)return null;var s=W(t);if(s||(t[Re]=s=new R(t)),n=s.add(e,n,r,a,o),n.proxy)return n;if(r=M(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ae||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(q(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function M(){var t=B,e=Ie?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}function F(t,e,n,r,i){if(s(e)){for(var o=0;o<e.length;o++)F(t,e[o],n,r,i);return null}return n=K(n),t&&t[De]?t.Mb(e,n,c(r)?!!r.capture:!!r,i):L(t,e,n,!0,r,i)}function U(t,e,n,r,i){if(s(e))for(var o=0;o<e.length;o++)U(t,e[o],n,r,i);else r=c(r)?!!r.capture:!!r,n=K(n),t&&t[De]?t.Qc(e,n,r,i):t&&(t=W(t))&&(e=t.Rc(e,n,r,i))&&j(e)}function j(t){if("number"!=typeof t&&t&&!t.ja){var e=t.src;if(e&&e[De])e.nc(t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(q(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=W(e))?(n.fc(t),0==n.b&&(n.src=null,e[Re]=null)):t.a()}}}function q(t){return t in xe?xe[t]:xe[t]="on"+t}function V(t,e){var n=t.listener,r=t.ya||t.src;return t.oa&&j(t),n.call(r,e)}function B(t,e){return!!t.ja||(Ie?V(t,new D(e,this)):(e=new D(e||i("window.event"),this),V(t,e)))}function W(t){return t=t[Re],t instanceof R?t:null}function K(t){return"function"==a(t)?t:(t[Pe]||(t[Pe]=function(e){return t.handleEvent(e)}),t[Pe])}function Q(){y.call(this),this.c=new R(this),this.K=this,this.F=null}function G(t,e){this.g=100,this.c=t,this.h=e,this.b=0,this.a=null}function H(){this.b=this.a=null}function z(){this.next=this.b=this.a=null}function $(t){ne.setTimeout(function(){throw t},0)}function Y(){var t=ne.Promise.resolve(void 0);Fe=function(){t.then(X)}}function X(){for(var t;t=je.f();){try{t.a.call(t.b)}catch(t){$(t)}je.g(t)}Ue=!1}function J(t,e){Q.call(this),this.b=t||1,this.a=e||ne,this.f=f(this.$d,this),this.g=oe()}function Z(t,e,n){if("function"==a(t))n&&(t=f(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=f(t.handleEvent,t)}return 2147483647<Number(e)?-1:ne.setTimeout(t,e||0)}function tt(t,e,n){y.call(this),this.f=null!=n?f(t,n):t,this.c=e,this.b=f(this.Cd,this),this.a=[]}function et(t){y.call(this),this.b=t,this.a={}}function nt(){}function rt(t){N.call(this,"serverreachability",t)}function it(t){Ve.dispatchEvent(new rt(Ve,t))}function ot(t){N.call(this,"statevent",t)}function at(t){Ve.dispatchEvent(new ot(Ve,t))}function st(t){N.call(this,"timingevent",t)}function ut(t,e){if("function"!=a(t))throw Error("Fn must not be null and must be a function");return ne.setTimeout(function(){t()},e)}function ct(){}function ht(){}function lt(){N.call(this,"d")}function ft(){N.call(this,"c")}function pt(){}function dt(t,e,n){this.g=t,this.da=e,this.ca=n||1,this.I=new et(this),this.L=Ge,t=me?125:void 0,this.T=new J(t),this.J=null,this.b=!1,this.i=this.C=this.f=this.F=this.u=this.U=this.h=null,this.j=[],this.a=null,this.A=0,this.c=this.v=null,this.o=-1,this.l=!1,this.K=0,this.B=null,this.s=this.Y=this.H=!1}function yt(t){if(t.D&&"function"==typeof t.D)return t.D();if(r(t))return t.split("");if(u(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}e=[],n=0;for(i in t)e[n++]=t[i];return e}function vt(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(u(t)||r(t))ue(t,e,void 0);else{if(t.O&&"function"==typeof t.O)var n=t.O();else if(t.D&&"function"==typeof t.D)n=void 0;else if(u(t)||r(t)){n=[];for(var i=t.length,o=0;o<i;o++)n.push(o)}else for(o in n=[],i=0,t)n[i++]=o;i=yt(t),o=i.length;for(var a=0;a<o;a++)e.call(void 0,i[a],n&&n[a],t)}}function mt(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else t&&this.fd(t)}function gt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function bt(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function _t(t,e){this.c=this.i=this.b="",this.h=null,this.j=this.g="",this.f=this.l=!1;var n;t instanceof _t?(this.f=void 0!==e?e:t.f,this.ma(t.b),this.$a(t.i),this.ka(t.c),this.la(t.h),this.Ba(t.g),this.Za(t.a.Gb()),this.Ya(t.j)):t&&(n=String(t).match($e))?(this.f=!!e,this.ma(n[1]||"",!0),this.$a(n[2]||"",!0),this.ka(n[3]||"",!0),this.la(n[4]),this.Ba(n[5]||"",!0),this.Za(n[6]||"",!0),this.Ya(n[7]||"",!0)):(this.f=!!e,this.a=new It(null,this.f))}function wt(t){return t instanceof _t?t.N():new _t(t,void 0)}function Et(t,e,n,r){var i=new _t(null,void 0);return t&&i.ma(t),e&&i.ka(e),n&&i.la(n),r&&i.Ba(r),i}function Tt(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function St(t,e,n){return r(t)?(t=encodeURI(t).replace(e,Ct),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ct(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(15&t).toString(16)}function It(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function kt(){}function At(){}function Nt(t){this.a=t,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function Dt(){this.a=this.b=null}function Ot(){this.a=new mt}function Rt(t){var e=typeof t;return"object"==e&&t||"function"==e?"o"+(t[re]||(t[re]=++ie)):e.charAt(0)+t}function xt(t,e){this.a=t,this.b=e}function Pt(t){this.g=t||en,ne.PerformanceNavigationTiming?(t=ne.performance.getEntriesByType("navigation"),t=0<t.length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol)):t=!!(ne.Ja&&ne.Ja.Vb&&ne.Ja.Vb()&&ne.Ja.Vb().te),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Ot),this.b=null,this.c=[]}function Lt(){this.b=this.a=void 0}function Mt(){this.f=new Lt}function Ft(t,e){var n=new nt;if(ne.Image){var r=new Image;r.onload=p(Ut,n,r,"TestLoadImage: loaded",!0,e),r.onerror=p(Ut,n,r,"TestLoadImage: error",!1,e),r.onabort=p(Ut,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=p(Ut,n,r,"TestLoadImage: timeout",!1,e),ne.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Ut(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}function jt(t){Q.call(this),this.headers=new mt,this.l=t||null,this.b=!1,this.v=this.a=null,this.C="",this.h=0,this.f="",this.g=this.B=this.o=this.A=!1,this.u=0,this.s=null,this.J=rn,this.H=this.L=this.I=!1}function qt(t){return ye&&A(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}function Vt(t){return"content-type"==t.toLowerCase()}function Bt(t,e){return{type:e,lengthComputable:t.lengthComputable,loaded:t.loaded,total:t.total}}function Wt(t){var e="";return E(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}function Kt(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}if(i)return t;if(n=Wt(n),r(t)){if(e=encodeURIComponent(String(e)),n=null!=n?"="+encodeURIComponent(String(n)):"",e+=n){if(n=t.indexOf("#"),0>n&&(n=t.length),0>(i=t.indexOf("?"))||i>n){i=n;var o=""}else o=t.substring(i+1,n);t=[t.substr(0,i),o,t.substr(n)],n=t[1],t[1]=e?n?n+"&"+e:e:n,t=t[0]+(t[1]?"?"+t[1]:"")+t[2]}return t}return t.m(e,n),t}function Qt(t){this.gb=22,this.g=[],this.H=new Dt,this.da=this.fb=this.C=this.Ea=this.a=this.Fa=this.j=this.ca=this.f=this.J=this.h=null,this.sc=!0,this.zc=this.L=0,this.uc=!!i("internalChannelParams.failFast",t),this.Ga=this.v=this.s=this.l=this.i=this.b=null,this.eb=!0,this.B=this.jb=this.K=-1,this.Y=this.u=this.A=0,this.tc=i("internalChannelParams.baseRetryDelayMs",t)||5e3,this.Fc=i("internalChannelParams.retryDelaySeedMs",t)||1e4,this.pc=i("internalChannelParams.forwardChannelMaxRetries",t)||2,this.ib=i("internalChannelParams.forwardChannelRequestTimeoutMs",t)||2e4,this.xc=t&&t.ue||void 0,this.F=void 0,this.vc=0,this.T=t&&t.supportsCrossDomainXhr||!1,this.I="",this.c=new Pt(t&&t.concurrentRequestLimit),this.U=new Mt,this.o=!t||void 0===t.backgroundChannelTest||t.backgroundChannelTest,(this.hb=t&&t.fastHandshake||!1)&&!this.o&&(this.o=!0),t&&t.se&&(this.eb=!1)}function Gt(){}function Ht(t){for(var e=arguments[0],n=1;n<arguments.length;n++){var r=arguments[n];if(0==r.lastIndexOf("/",0))e=r;else{var i;(i=""==e)||(i=e.length-1,i=0<=i&&e.indexOf("/",i)==i),e+=i?r:"/"+r}}return e}function zt(){if(ye&&!(10<=Number(Te)))throw Error("Environmental error: no available transport.")}function $t(t,e){Q.call(this),this.a=new Qt(e),this.g=t,this.o=e&&e.testUrl?e.testUrl:Ht(this.g,"test"),this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.cd(t),t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.tb&&(t?t["X-WebChannel-Client-Profile"]=e.tb:t={"X-WebChannel-Client-Profile":e.tb}),this.a.Pd(t),(t=e&&e.httpHeadersOverwriteParam)&&!b(t)&&this.a.Nd(t),this.l=e&&e.supportsCrossDomainXhr||!1,this.h=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!b(e)&&(this.a.Od(e),null!==(t=this.b)&&e in t&&(t=this.b,e in t&&delete t[e])),this.f=new Jt(this)}function Yt(t){lt.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.f=t)?(t=this.f,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Xt(){ft.call(this),this.status=1}function Jt(t){this.a=t}n.d(e,"ErrorCode",function(){return hn}),n.d(e,"EventType",function(){return ln}),n.d(e,"WebChannel",function(){return fn}),n.d(e,"XhrIo",function(){return pn}),n.d(e,"createWebChannelTransport",function(){return cn});var Zt,te="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},ee=ee||{},ne=te,re="closure_uid_"+(1e9*Math.random()>>>0),ie=0,oe=Date.now||function(){return+new Date};y.prototype.i=!1,y.prototype.La=function(){if(!this.i&&(this.i=!0,this.G(),!1)){this[re]||(this[re]=++ie)}},y.prototype.G=function(){if(this.j)for(;this.j.length;)this.j.shift()()};var ae,se=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(r(t))return r(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},ue=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var i=t.length,o=r(t)?t.split(""):t,a=0;a<i;a++)a in o&&e.call(n,o[a],a,t)},ce=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};t:{var he=ne.navigator;if(he){var le=he.userAgent;if(le){ae=le;break t}}ae=""}var fe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");C[" "]=o;var pe,de=_(ae,"Opera"),ye=_(ae,"Trident")||_(ae,"MSIE"),ve=_(ae,"Edge"),me=ve||ye,ge=_(ae,"Gecko")&&!(_(ae.toLowerCase(),"webkit")&&!_(ae,"Edge"))&&!(_(ae,"Trident")||_(ae,"MSIE"))&&!_(ae,"Edge"),be=_(ae.toLowerCase(),"webkit")&&!_(ae,"Edge");t:{var _e="",we=function(){var t=ae;return ge?/rv:([^\);]+)(\)|;)/.exec(t):ve?/Edge\/([\d\.]+)/.exec(t):ye?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):be?/WebKit\/(\S+)/.exec(t):de?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(we&&(_e=we?we[1]:""),ye){var Ee=k();if(null!=Ee&&Ee>parseFloat(_e)){pe=String(Ee);break t}}pe=_e}var Te,Se={},Ce=ne.document;Te=Ce&&ye?k()||("CSS1Compat"==Ce.compatMode?parseInt(pe,10):5):void 0;var Ie=!ye||9<=Number(Te),ke=ye&&!A("9"),Ae=function(){if(!ne.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ne.addEventListener("test",o,e),ne.removeEventListener("test",o,e)}catch(t){}return t}();N.prototype.c=function(){this.hc=!1},d(D,N);var Ne={2:"touch",3:"pen",4:"mouse"};D.prototype.g=function(t,e){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(ge){t:{try{C(e.nodeName);var o=!0;break t}catch(t){}o=!1}o||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=r(t.pointerType)?t.pointerType:Ne[t.pointerType]||"",this.f=t,t.defaultPrevented&&this.c()},D.prototype.c=function(){D.S.c.call(this);var t=this.f;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ke)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var De="closure_listenable_"+(1e6*Math.random()|0),Oe=0;O.prototype.a=function(){this.ja=!0,this.ya=this.src=this.proxy=this.listener=null},Zt=R.prototype,Zt.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=x(t,e,r,i);return-1<a?(e=t[a],n||(e.oa=!1)):(e=new O(e,this.src,o,!!r,i),e.oa=n,t.push(e)),e},Zt.Sc=function(t,e,n,r){if((t=t.toString())in this.a){var i=this.a[t];e=x(i,e,n,r),-1<e&&(i[e].a(),Array.prototype.splice.call(i,e,1),0==i.length&&(delete this.a[t],this.b--))}},Zt.fc=function(t){var e=t.type;if(e in this.a){var n,r=this.a[e],i=se(r,t);(n=0<=i)&&Array.prototype.splice.call(r,i,1),n&&(t.a(),0==this.a[e].length&&(delete this.a[e],this.b--))}},Zt.Tc=function(){var t;for(t in this.a){for(var e=this.a[t],n=0;n<e.length;n++)e[n].a();delete this.a[t],this.b--}},Zt.Rc=function(t,e,n,r){t=this.a[t.toString()];var i=-1;return t&&(i=x(t,e,n,r)),-1<i?t[i]:null};var Re="closure_lm_"+(1e6*Math.random()|0),xe={},Pe="__closure_events_fn_"+(1e9*Math.random()>>>0);d(Q,y),Q.prototype[De]=!0,Zt=Q.prototype,Zt.addEventListener=function(t,e,n,r){P(this,t,e,n,r)},Zt.removeEventListener=function(t,e,n,r){U(this,t,e,n,r)},Zt.dispatchEvent=function(t){var e,n=this.F;if(n)for(e=[];n;n=n.F)e.push(n);n=this.K;var i=t.type||t;if(r(t))t=new N(t,n);else if(t instanceof N)t.target=t.target||n;else{var o=t;t=new N(i,n),S(t,o)}if(o=!0,e)for(var a=e.length-1;!t.b&&0<=a;a--){var s=t.a=e[a];o=s.ua(i,!0,t)&&o}if(t.b||(s=t.a=n,o=s.ua(i,!0,t)&&o,t.b||(o=s.ua(i,!1,t)&&o)),e)for(a=0;!t.b&&a<e.length;a++)s=t.a=e[a],o=s.ua(i,!1,t)&&o;return o},Zt.G=function(){Q.S.G.call(this),this.Id(),this.F=null},Zt.Lb=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Zt.Mb=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)},Zt.Qc=function(t,e,n,r){this.c.Sc(String(t),e,n,r)},Zt.nc=function(t){this.c.fc(t)},Zt.Id=function(){this.c&&this.c.Tc()},Zt.ua=function(t,e,n){if(!(t=this.c.a[String(t)]))return!0;t=t.concat();for(var r=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.ja&&o.capture==e){var a=o.listener,s=o.ya||o.src;o.oa&&this.nc(o),r=!1!==a.call(s,n)&&r}}return r&&0!=n.hc};var Le=ne.JSON.stringify;G.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t},G.prototype.f=function(t){this.h(t),this.b<this.g&&(this.b++,t.next=this.a,this.a=t)};var Me=new G(function(){return new z},function(t){t.reset()});H.prototype.add=function(t,e){var n=this.c();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},H.prototype.f=function(){var t=null;return this.a&&(t=this.a,this.a=this.a.next,this.a||(this.b=null),t.next=null),t},H.prototype.g=function(t){Me.f(t)},H.prototype.c=function(){return Me.get()},z.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},z.prototype.reset=function(){this.next=this.b=this.a=null};var Fe,Ue=!1,je=new H;d(J,Q),Zt=J.prototype,Zt.wa=!1,Zt.P=null,Zt.$d=function(){if(this.wa){var t=oe()-this.g;0<t&&t<.8*this.b?this.P=this.a.setTimeout(this.f,this.b-t):(this.P&&(this.a.clearTimeout(this.P),this.P=null),this.Gc(),this.wa&&(this.Na(),this.start()))}},Zt.Gc=function(){this.dispatchEvent("tick")},Zt.start=function(){this.wa=!0,this.P||(this.P=this.a.setTimeout(this.f,this.b),this.g=oe())},Zt.Na=function(){this.wa=!1,this.P&&(this.a.clearTimeout(this.P),this.P=null)},Zt.G=function(){J.S.G.call(this),this.Na(),delete this.a},d(tt,y),Zt=tt.prototype,Zt.Ca=!1,Zt.ec=0,Zt.ba=null,Zt.Hc=function(t){this.a=arguments,this.ba||this.ec?this.Ca=!0:this.yb()},Zt.Pc=function(){this.ba&&(ne.clearTimeout(this.ba),this.ba=null,this.Ca=!1,this.a=[])},Zt.G=function(){tt.S.G.call(this),this.Pc()},Zt.Cd=function(){this.ba=null,this.Ca&&!this.ec&&(this.Ca=!1,this.yb())},Zt.yb=function(){this.ba=Z(this.b,this.c),this.f.apply(null,this.a)},d(et,y);var qe=[];Zt=et.prototype,Zt.Jb=function(t,e,n){this.wd(t,e,n)},Zt.wd=function(t,e,n){s(e)||(e&&(qe[0]=e.toString()),e=qe);for(var r=0;r<e.length;r++){var i=P(t,e[r],n||this.handleEvent,!1,this.b||this);if(!i)break;this.a[i.key]=i}},Zt.Kb=function(){E(this.a,function(t,e){this.a.hasOwnProperty(e)&&j(t)},this),this.a={}},Zt.G=function(){et.S.G.call(this),this.Kb()},Zt.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ve=new Q;d(rt,N),d(ot,N),d(st,N);var Be={NO_ERROR:0,ae:1,he:2,ge:3,de:4,fe:5,ie:6,qc:7,TIMEOUT:8,le:9},We={ce:"complete",pe:"success",rc:"error",qc:"abort",ne:"ready",oe:"readystatechange",TIMEOUT:"timeout",je:"incrementaldata",me:"progress",ee:"downloadprogress",qe:"uploadprogress"};ct.prototype.a=null,ct.prototype.c=function(){return this.a||(this.a={})};var Ke={OPEN:"a",be:"b",rc:"c",ke:"d"};d(lt,N),d(ft,N);var Qe;d(pt,ct),pt.prototype.b=function(){return new XMLHttpRequest},Qe=new pt;var Ge=45e3,He={},ze={};Zt=dt.prototype,Zt.ha=function(t){this.J=t},Zt.setTimeout=function(t){this.L=t},Zt.Xc=function(t){this.K=t},Zt.Qd=function(t){this.j=t},Zt.cb=function(t,e){this.F=1,this.f=t.N().za(),this.i=e,this.H=!0,this.ic(null)},Zt.bb=function(t,e,n){this.F=1,this.f=t.N().za(),this.i=null,this.H=e,this.ic(n)},Zt.ic=function(t){this.u=oe(),this.fa(),this.C=this.f.N(),this.C.Aa("t",this.ca),this.A=0,this.a=this.g.sa(this.g.Da()?t:null),0<this.K&&(this.B=new tt(f(this.oc,this,this.a),this.K)),this.I.Jb(this.a,"readystatechange",this.Hd),t=this.J?T(this.J):{},this.i?(this.v||(this.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",this.a.xa(this.C,this.v,this.i,t)):(this.v="GET",this.a.xa(this.C,this.v,null,t)),it(1)},Zt.Hd=function(t){t=t.target;var e=this.B;e&&3==t.W()?e.Hc():this.oc(t)},Zt.oc=function(t){try{t==this.a&&this.Ed()}catch(t){}},Zt.Ed=function(){var t=this.a.W(),e=this.a.Db(),n=this.a.aa();if(!(3>t||3==t&&!me&&!this.a.va()))if(this.l||4!=t||7==e||it(8==e||0>=n?3:2),this.pa(),this.o=n=this.a.aa(),e=this.a.va(),this.b=200==n){if(this.Td()){if(!(n=this.Kc()))return this.b=!1,this.c=3,at(12),this.Z(),void this.ta();this.s=!0,this.Wa(n)}this.H?(this.vb(t,e),me&&this.b&&3==t&&this.Yd()):this.Wa(e),4==t&&this.Z(),this.b&&!this.l&&(4==t?this.g.Va(this):(this.b=!1,this.fa()))}else 400==n&&0<e.indexOf("Unknown SID")?(this.c=3,at(12)):(this.c=0,at(13)),this.Z(),this.ta()},Zt.Td=function(){return this.Y&&!this.s},Zt.Kc=function(){if(this.a){var t=this.a.ga("X-HTTP-Initial-Response");if(t&&!b(t))return t}return null},Zt.Md=function(){this.Y=!0},Zt.vb=function(t,e){for(var n=!0;!this.l&&this.A<e.length;){var r=this.Lc(e);if(r==ze){4==t&&(this.c=4,at(14),n=!1);break}if(r==He){this.c=4,at(15),n=!1;break}this.Wa(r)}4==t&&0==e.length&&(this.c=1,at(16),n=!1),this.b=this.b&&n,n||(this.Z(),this.ta())},Zt.Gd=function(){if(this.a){var t=this.a.W(),e=this.a.va();this.A<e.length&&(this.pa(),this.vb(t,e),this.b&&4!=t&&this.fa())}},Zt.Yd=function(){this.I.Jb(this.T,"tick",this.Gd),this.T.start()},Zt.Lc=function(t){var e=this.A,n=t.indexOf("\n",e);return-1==n?ze:(e=Number(t.substring(e,n)),isNaN(e)?He:(n+=1)+e>t.length?ze:(t=t.substr(n,e),this.A=n+e,t))},Zt.Ld=function(t){this.F=2,this.f=t.N().za(),t=!1,ne.navigator&&ne.navigator.sendBeacon&&(t=ne.navigator.sendBeacon(this.f.toString(),"")),!t&&ne.Image&&((new Image).src=this.f,t=!0),t||(this.a=this.g.sa(null),this.a.xa(this.f)),this.u=oe(),this.fa()},Zt.cancel=function(){this.l=!0,this.Z()},Zt.Kd=function(t){t&&this.setTimeout(t),this.h&&(this.pa(),this.fa())},Zt.fa=function(){this.U=oe()+this.L,this.mc(this.L)},Zt.mc=function(t){if(null!=this.h)throw Error("WatchDog timer not null");this.h=ut(f(this.Dd,this),t)},Zt.pa=function(){this.h&&(ne.clearTimeout(this.h),this.h=null)},Zt.Dd=function(){this.h=null;var t=oe();0<=t-this.U?this.md():this.mc(this.U-t)},Zt.md=function(){2!=this.F&&(it(3),at(17)),this.Z(),this.c=2,this.ta()},Zt.ta=function(){this.g.Tb()||this.l||this.g.Va(this)},Zt.Z=function(){this.pa();var t=this.B;t&&"function"==typeof t.La&&t.La(),this.B=null,this.T.Na(),this.I.Kb(),this.a&&(t=this.a,this.a=null,t.abort(),t.La())},Zt.Wa=function(t){try{this.g.bc(this,t),it(4)}catch(t){}},Zt=mt.prototype,Zt.D=function(){this.Ka();for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Zt.O=function(){return this.Ka(),this.a.concat()},Zt.Ra=function(t){return gt(this.b,t)},Zt.hd=function(){return 0==this.c},Zt.gd=function(){this.b={},this.c=this.a.length=0},Zt.Qb=function(t){gt(this.b,t)&&(delete this.b[t],this.c--,this.a.length>2*this.c&&this.Ka())},Zt.Ka=function(){if(this.c!=this.a.length){for(var t=0,e=0;t<this.a.length;){var n=this.a[t];gt(this.b,n)&&(this.a[e++]=n),t++}this.a.length=e}if(this.c!=this.a.length){var r={};for(e=t=0;t<this.a.length;)n=this.a[t],gt(r,n)||(this.a[e++]=n,r[n]=1),t++;this.a.length=e}},Zt.get=function(t,e){return gt(this.b,t)?this.b[t]:e},Zt.set=function(t,e){gt(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Zt.fd=function(t){if(t instanceof mt)for(var e=t.O(),n=0;n<e.length;n++)this.set(e[n],t.get(e[n]));else for(e in t)this.set(e,t[e])},Zt.forEach=function(t,e){for(var n=this.O(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}},Zt.Pb=function(){return new mt(this)};var $e=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;Zt=_t.prototype,Zt.toString=function(){var t=[],e=this.b;e&&t.push(St(e,Ye,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.i)&&t.push(St(e,Ye,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.Sa()&&"/"!=n.charAt(0)&&t.push("/"),t.push(St(n,"/"==n.charAt(0)?Je:Xe,!0))),(n=this.Ic())&&t.push("?",n),(n=this.j)&&t.push("#",St(n,tn)),t.join("")},Zt.resolve=function(t){var e=this.N(),n=t.qd();n?e.ma(t.b):n=t.rd(),n?e.$a(t.i):n=t.Sa(),n?e.ka(t.c):n=t.od();var r=t.g;if(n)e.la(t.h);else if(n=t.Sb()){if("/"!=r.charAt(0))if(this.Sa()&&!this.Sb())r="/"+r;else{var i=e.g.lastIndexOf("/");-1!=i&&(r=e.g.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(_(i,"./")||_(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.Ba(r):n=t.pd(),n?e.Za(t.a.Gb()):n=t.nd(),n&&e.Ya(t.j),e},Zt.N=function(){return new _t(this)},Zt.ma=function(t,e){this.M(),(this.b=e?Tt(t,!0):t)&&(this.b=this.b.replace(/:$/,""))},Zt.qd=function(){return!!this.b},Zt.$a=function(t,e){this.M(),this.i=e?Tt(t):t},Zt.rd=function(){return!!this.i},Zt.ka=function(t,e){this.M(),this.c=e?Tt(t,!0):t},Zt.Sa=function(){return!!this.c},Zt.la=function(t){if(this.M(),t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);this.h=t}else this.h=null},Zt.od=function(){return null!=this.h},Zt.Ba=function(t,e){this.M(),this.g=e?Tt(t,!0):t},Zt.Sb=function(){return!!this.g},Zt.pd=function(){return""!==this.a.toString()},Zt.Za=function(t,e){this.M(),t instanceof It?(this.a=t,this.a.Oc(this.f)):(e||(t=St(t,Ze)),this.a=new It(t,this.f))},Zt.Ic=function(){return this.a.toString()},Zt.m=function(t,e){this.M(),this.a.set(t,e)},Zt.Aa=function(t,e){this.M(),s(e)||(e=[String(e)]),this.a.lc(t,e)},Zt.Ya=function(t,e){this.M(),this.j=e?Tt(t):t},Zt.nd=function(){return!!this.j},Zt.za=function(){return this.M(),this.m("zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^oe()).toString(36)),this},Zt.M=function(){if(this.l)throw Error("Tried to modify a read-only Uri")};var Ye=/[#\/\?@]/g,Xe=/[#\?:]/g,Je=/[#\?]/g,Ze=/[#\?@]/g,tn=/#/g;Zt=It.prototype,Zt.V=function(){if(!this.a&&(this.a=new mt,this.b=0,this.c)){var t=this;bt(this.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})}},Zt.add=function(t,e){this.V(),this.ia(),t=this.$(t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Zt.Ib=function(t){this.V(),t=this.$(t),this.a.Ra(t)&&(this.ia(),this.b-=this.a.get(t).length,this.a.Qb(t))},Zt.Hb=function(t){return this.V(),t=this.$(t),this.a.Ra(t)},Zt.forEach=function(t,e){this.V(),this.a.forEach(function(n,r){ue(n,function(n){t.call(e,n,r,this)},this)},this)},Zt.O=function(){this.V();for(var t=this.a.D(),e=this.a.O(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Zt.D=function(t){this.V();var e=[];if(r(t))this.Hb(t)&&(e=m(e,this.a.get(this.$(t))));else{t=this.a.D();for(var n=0;n<t.length;n++)e=m(e,t[n])}return e},Zt.set=function(t,e){return this.V(),this.ia(),t=this.$(t),this.Hb(t)&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Zt.get=function(t,e){return t?(t=this.D(t),0<t.length?String(t[0]):e):e},Zt.lc=function(t,e){this.Ib(t),0<e.length&&(this.ia(),this.a.set(this.$(t),g(e)),this.b+=e.length)},Zt.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.O(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.D(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")},Zt.ia=function(){this.c=null},Zt.Gb=function(){var t=new It;return t.c=this.c,this.a&&(t.a=this.a.Pb(),t.b=this.b),t},Zt.$=function(t){return t=String(t),this.f&&(t=t.toLowerCase()),t},Zt.Oc=function(t){t&&!this.f&&(this.V(),this.ia(),this.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(this.Ib(e),this.lc(n,t))},this)),this.f=t},d(At,kt),Zt=Nt.prototype,Zt.R=null,Zt.Wc=function(t){this.h=t},Zt.Vc=function(t){this.i=t,t=this.a.Cb(this.i),at(3);var e=this.a.H.b;null!=e?(this.f=this.a.Oa(e[0]),this.R=1,this.rb()):(t.Aa("MODE","init"),!this.a.o&&this.a.j&&t.Aa("X-HTTP-Session-Id",this.a.j),this.b=new dt(this,void 0,void 0),this.b.ha(this.h),this.b.bb(t,!1,null),this.R=0)},Zt.rb=function(){var t=this.a.H.a;if(null!=t)at(4),t?(at(10),this.a.na(this,!1)):(at(11),this.a.na(this,!0));else{this.b=new dt(this,void 0,void 0),this.b.ha(this.h),t=this.a.Bb(this.f,this.i),at(4),t.Aa("TYPE","xmlhttp");var e=this.a.j,n=this.a.Fa;e&&n&&t.m(e,n),this.b.bb(t,!1,this.f)}},Zt.sa=function(t){return this.a.sa(t)},Zt.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},Zt.Tb=function(){return!1},Zt.bc=function(t,e){if(this.c=t.o,0==this.R)if(this.Uc(t),e){try{var n=this.a.U.a(e)}catch(t){return void this.a.ab(this)}this.f=this.a.Oa(n[0])}else this.a.ab(this);else 1==this.R&&(this.g?at(6):"11111"==e?(at(5),this.g=!0,this.Ac()&&(this.c=200,this.b.cancel(),at(11),this.a.na(this,!0))):(at(7),this.g=!1))},Zt.Va=function(){this.c=this.b.o,this.b.b?0==this.R?(this.R=1,this.rb()):1==this.R&&(this.g?(at(11),this.a.na(this,!0)):(at(10),this.a.na(this,!1))):(0==this.R?at(8):1==this.R&&at(9),this.a.ab(this))},Zt.Uc=function(t){if(!this.a.o&&(t=t.a)){var e=t.ga("X-Client-Wire-Protocol");this.l=e||null,this.a.j&&(t=t.ga("X-HTTP-Session-Id"))&&this.a.kc(t)}},Zt.Da=function(){return this.a.Da()},Zt.Pa=function(){return this.a.Pa()},Zt.Ac=function(){return!ye||10<=Number(Te)},Zt=Ot.prototype,Zt.add=function(t){this.a.set(Rt(t),t)},Zt.ed=function(t){this.a.Qb(Rt(t))},Zt.jd=function(){this.a.gd()},Zt.Rb=function(){return this.a.hd()},Zt.Ob=function(t){return this.a.Ra(Rt(t))},Zt.D=function(){return this.a.D()};var en=10;Zt=Pt.prototype,Zt.kb=function(t){!this.a&&(_(t,"spdy")||_(t,"quic")||_(t,"h2"))&&(this.f=this.g,this.a=new Ot,this.b&&(this.Ha(this.b),this.b=null))},Zt.Ub=function(){return!!this.b||!!this.a&&this.a.a.c>=this.f},Zt.Mc=function(){return this.b?1:this.a?this.a.a.c:0},Zt.Ta=function(t){return this.b?this.b==t:!!this.a&&this.a.Ob(t)},Zt.Ha=function(t){this.a?this.a.add(t):this.b=t},Zt.gc=function(t){this.b&&this.b==t?this.b=null:this.a&&this.a.Ob(t)&&this.a.ed(t)},Zt.cancel=function(){this.c=this.Xb(),this.b?(this.b.cancel(),this.b=null):this.a&&!this.a.Rb()&&(ue(this.a.D(),function(t){t.cancel()}),this.a.jd())},Zt.Xb=function(){if(null!=this.b)return this.c.concat(this.b.j);if(null!=this.a&&!this.a.Rb()){var t=this.c;return ue(this.a.D(),function(e){t=t.concat(e.j)}),t}return g(this.c)},Zt.wc=function(t){this.c=this.c.concat(t)},Zt.Bc=function(){this.c.length=0},Lt.prototype.stringify=function(t){return ne.JSON.stringify(t,this.a)},Lt.prototype.parse=function(t){return ne.JSON.parse(t,this.b)},Mt.prototype.b=function(t,e,n){var r=n||"";try{vt(t,function(t,n){var i=t;c(t)&&(i=Le(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}},Mt.prototype.c=function(t,e,n){for(var r=-1;;){var i=["count="+e];-1==r?0<e?(r=t[0].a,i.push("ofs="+r)):r=0:i.push("ofs="+r);for(var o=!0,a=0;a<e;a++){var s=t[a].a,u=t[a].b;if(0>(s-=r))r=Math.max(0,t[a].a-100),o=!1;else try{this.b(u,i,"req"+s+"_")}catch(t){n&&n(u)}}if(o)return i.join("&")}},Mt.prototype.a=function(t){return this.f.parse(t)};var nn=ne.JSON.parse;d(jt,Q);var rn="",on=/^https?$/i,an=["POST","PUT"];Zt=jt.prototype,Zt.Sd=function(t){this.I=t},Zt.xa=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.C+"; newUri="+t);e=e?e.toUpperCase():"GET",this.C=t,this.f="",this.h=0,this.A=!1,this.b=!0,this.a=this.Ec(),this.v=this.l?this.l.c():Qe.c(),this.a.onreadystatechange=f(this.ac,this),this.L&&"onprogress"in this.a&&(this.a.onprogress=f(function(t){this.Zb(t,!0)},this),this.a.upload&&(this.a.upload.onprogress=f(this.Zb,this)));try{this.B=!0,this.a.open(e,String(t),!0),this.B=!1}catch(t){return void this.Ab(t)}t=n||"";var i=this.headers.Pb();r&&vt(r,function(t,e){i.set(e,t)}),r=v(i.O()),n=ne.FormData&&t instanceof ne.FormData,!(0<=se(an,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.J&&(this.a.responseType=this.J),"withCredentials"in this.a&&this.a.withCredentials!==this.I&&(this.a.withCredentials=this.I);try{this.sb(),0<this.u&&((this.H=qt(this.a))?(this.a.timeout=this.u,this.a.ontimeout=f(this.Nb,this)):this.s=Z(this.Nb,this.u,this)),this.o=!0,this.a.send(t),this.o=!1}catch(t){this.Ab(t)}},Zt.Ec=function(){return this.l?this.l.b():Qe.b()},Zt.Nb=function(){void 0!==ee&&this.a&&(this.f="Timed out after "+this.u+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},Zt.Ab=function(t){this.b=!1,this.a&&(this.g=!0,this.a.abort(),this.g=!1),this.f=t,this.h=5,this.xb(),this.qa()},Zt.xb=function(){this.A||(this.A=!0,this.dispatchEvent("complete"),this.dispatchEvent("error"))},Zt.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),this.qa())},Zt.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),this.qa(!0)),jt.S.G.call(this)},Zt.ac=function(){this.i||(this.B||this.o||this.g?this.$b():this.Bd())},Zt.Bd=function(){this.$b()},Zt.$b=function(){if(this.b&&void 0!==ee&&(!this.v[1]||4!=this.W()||2!=this.aa()))if(this.o&&4==this.W())Z(this.ac,0,this);else if(this.dispatchEvent("readystatechange"),this.td()){this.b=!1;try{this.vd()?(this.dispatchEvent("complete"),this.dispatchEvent("success")):(this.h=6,this.f=this.Fb()+" ["+this.aa()+"]",this.xb())}finally{this.qa()}}},Zt.Zb=function(t,e){this.dispatchEvent(Bt(t,"progress")),this.dispatchEvent(Bt(t,e?"downloadprogress":"uploadprogress"))},Zt.qa=function(t){if(this.a){this.sb();var e=this.a,n=this.v[0]?o:null;this.v=this.a=null,t||this.dispatchEvent("ready");try{e.onreadystatechange=n}catch(t){}}},Zt.sb=function(){this.a&&this.H&&(this.a.ontimeout=null),this.s&&(ne.clearTimeout(this.s),this.s=null)},Zt.td=function(){return 4==this.W()},Zt.vd=function(){var t=this.aa();t:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}return e||0===t&&!this.ud()},Zt.ud=function(){var t=String(this.C).match($e)[1]||null;return!t&&ne.self&&ne.self.location&&(t=ne.self.location.protocol,t=t.substr(0,t.length-1)),on.test(t?t.toLowerCase():"")},Zt.W=function(){return this.a?this.a.readyState:0},Zt.aa=function(){try{return 2<this.W()?this.a.status:-1}catch(t){return-1}},Zt.Fb=function(){try{return 2<this.W()?this.a.statusText:""}catch(t){return""}},Zt.va=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},Zt.Nc=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),nn(e)}},Zt.ga=function(t){return this.a?this.a.getResponseHeader(t):null},Zt.Db=function(){return this.h},Zt.dd=function(){return r(this.f)?this.f:String(this.f)},Zt=Qt.prototype,Zt.qb=8,Zt.w=1,Zt.bd=function(t,e,n){at(0),this.Ea=e,this.ca=n||{},this.o&&(this.H.b=[],this.H.a=!1),this.Dc(t)},Zt.Qa=function(){if(this.lb(),3==this.w){var t=this.L++,e=this.C.N();e.m("SID",this.I),e.m("RID",t),e.m("TYPE","terminate"),this.ea(e),new dt(this,t,void 0).Ld(e)}this.Yb()},Zt.Dc=function(t){this.v=new Nt(this),null===this.f&&this.v.Wc(this.h);var e=t;this.f&&this.h&&(e=Kt(t,this.f,this.h)),this.v.Vc(e)},Zt.Cc=function(){this.C=this.Cb(this.Ea),this.Ma()},Zt.lb=function(){this.v&&(this.v.abort(),this.v=null),this.a&&(this.a.cancel(),this.a=null),this.l&&(ne.clearTimeout(this.l),this.l=null),this.ra(),this.c.cancel(),this.i&&(ne.clearTimeout(this.i),this.i=null)},Zt.cd=function(t){this.h=t},Zt.Pd=function(t){this.J=t},Zt.Nd=function(t){this.f=t},Zt.Od=function(t){this.j=t},Zt.kc=function(t){this.Fa=t},Zt.Rd=function(){this.T=!0},Zt.jc=function(t){this.b=t},Zt.sd=function(){return!this.Ga},Zt.Xa=function(t){this.g.push(new xt(this.zc++,t)),3==this.w&&this.Ma()},Zt.Jc=function(){return this.uc?0:this.pc},Zt.Tb=function(){return 0==this.w},Zt.Ma=function(){this.c.Ub()||this.i||(this.i=ut(f(this.dc,this),0),this.A=0)},Zt.xd=function(t){return!(this.c.Mc()>=this.c.f-(this.i?1:0))&&(this.i?(this.g=t.j.concat(this.g),!0):!(1==this.w||2==this.w||this.A>=this.Jc())&&(this.i=ut(f(this.dc,this,t),this.Eb(this.A)),this.A++,!0))},Zt.dc=function(t){this.i=null,this.Xd(t)},Zt.Xd=function(t){1==this.w?t||(this.Fd(),this.w=2):3==this.w&&(t?this.Wb(t):0==this.g.length||this.c.Ub()||this.Wb())},Zt.Fd=function(){this.L=Math.floor(1e5*Math.random());var t=this.L++,e=new dt(this,t,void 0),n=this.h;this.J&&(n?(n=T(n),S(n,this.J)):n=this.J),null===this.f&&e.ha(n);var r=this.wb(e),i=this.C.N();i.m("RID",t),0<this.gb&&i.m("CVER",this.gb),this.o&&this.j&&i.m("X-HTTP-Session-Id",this.j),this.ea(i),this.f&&n&&Kt(i,this.f,n),this.c.Ha(e),this.hb?(i.m("$req",r),i.m("SID","null"),e.Md(),e.cb(i,null)):e.cb(i,r)},Zt.Wb=function(t){var e;e=t?t.da:this.L++;var n=this.C.N();n.m("SID",this.I),n.m("RID",e),n.m("AID",this.K),this.ea(n),this.f&&this.h&&Kt(n,this.f,this.h),e=new dt(this,e,this.A+1),null===this.f&&e.ha(this.h),t&&this.Jd(t),t=this.wb(e),e.setTimeout(Math.round(.5*this.ib)+Math.round(.5*this.ib*Math.random())),this.c.Ha(e),e.cb(n,t)},Zt.ea=function(t){this.b&&vt({},function(e,n){t.m(n,e)})},Zt.wb=function(t){var e=Math.min(this.g.length,1e3),n=this.b?f(this.b.yc,this.b,this):null;return n=this.U.c(this.g,e,n),t.Qd(this.g.splice(0,e)),n},Zt.Jd=function(t){this.g=t.j.concat(this.g)},Zt.zb=function(){if(!this.a&&!this.l){this.Y=1;var t=this.cc;Fe||Y(),Ue||(Fe(),Ue=!0),je.add(t,this),this.u=0}},Zt.Ua=function(){return!(this.a||this.l||3<=this.u)&&(this.Y++,this.l=ut(f(this.cc,this),this.Eb(this.u)),this.u++,!0)},Zt.cc=function(){this.l=null,this.Vd()},Zt.Vd=function(){this.a=new dt(this,"rpc",this.Y),null===this.f&&this.a.ha(this.h),this.a.Xc(this.vc);var t=this.fb.N();t.m("RID","rpc"),t.m("SID",this.I),t.m("CI",this.Ga?"0":"1"),t.m("AID",this.K),this.ea(t),t.m("TYPE","xmlhttp"),this.f&&this.h&&Kt(t,this.f,this.h),this.F&&this.a.setTimeout(this.F),this.a.bb(t,!0,this.da)},Zt.na=function(t,e){var n=t.l;n&&this.c.kb(n),this.Ga=this.eb&&e,this.B=t.c,this.Cc()},Zt.ab=function(t){this.B=t.c,this.X(2)},Zt.bc=function(t,e){if(0!=this.w&&(this.a==t||this.c.Ta(t)))if(this.B=t.o,!t.s&&this.c.Ta(t)&&3==this.w){try{var n=this.U.a(e)}catch(t){n=null}s(n)&&3==n.length?this.ld(n,t):this.X(11)}else(t.s||this.a==t)&&this.ra(),b(e)||(n=this.U.a(e),this.Ad(n,t))},Zt.ld=function(t,e){0==t[0]?this.kd(e):(this.jb=t[1],0<this.jb-this.K&&this.Ud(t[2])&&!this.s&&(this.s=ut(f(this.yd,this),6e3)))},Zt.kd=function(t){if(!this.l){if(this.a){if(!(this.a.u+3e3<t.u))return;this.ra(),this.a.cancel(),this.a=null}this.Ua(),at(18)}},Zt.Ud=function(t){return 37500>t&&!this.sd()&&0==this.u},Zt.Oa=function(t){return this.sc?this.b?this.b.$c(t):t:null},Zt.yd=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,this.Ua(),at(19))},Zt.ra=function(){null!=this.s&&(ne.clearTimeout(this.s),this.s=null)},Zt.Va=function(t){var e=null;if(this.a==t){this.ra(),this.a=null;var n=2}else{if(!this.c.Ta(t))return;e=t.j,this.c.gc(t),n=1}if(this.B=t.o,0!=this.w)if(t.b)1==n?(n=oe()-t.u,Ve.dispatchEvent(new st(Ve,t.i?t.i.length:0,n,this.A)),this.Ma()):this.zb();else{var r=t.c;if(3==r||0==r&&0<this.B||!(1==n&&this.xd(t)||2==n&&this.Ua()))switch(e&&0<e.length&&this.c.wc(e),r){case 1:this.X(5);break;case 4:this.X(10);break;case 3:this.X(6);break;default:this.X(2)}}},Zt.Eb=function(t){var e=this.tc+Math.floor(Math.random()*this.Fc);return this.Pa()||(e*=2),e*t},Zt.ad=function(t){if(this.o&&(t=t.a)){var e=t.ga("X-Client-Wire-Protocol");e&&this.c.kb(e),this.j&&(t=t.ga("X-HTTP-Session-Id"))&&(this.kc(t),this.C.m(this.j,t))}},Zt.Ad=function(t,e){for(var n=this.b&&this.b.Ia?[]:null,r=0;r<t.length;r++){var i=t[r];if(this.K=i[0],i=i[1],2==this.w)if("c"==i[0]){this.I=i[1],this.da=this.Oa(i[2]);var o=i[3];null!=o&&(this.qb=o),i=i[5],null!=i&&"number"==typeof i&&0<i&&(this.F=1.5*i),this.ad(e),this.w=3,this.b&&this.b.pb(),this.Wd(e)}else"stop"!=i[0]&&"close"!=i[0]||this.X(7);else 3==this.w&&("stop"==i[0]||"close"==i[0]?(n&&0!=n.length&&(this.b.Ia(this,n),n.length=0),"stop"==i[0]?this.X(7):this.Qa()):"noop"!=i[0]&&(n?n.push(i):this.b&&this.b.ob(i)),this.u=0)}n&&0!=n.length&&this.b.Ia(this,n)},Zt.Wd=function(t){this.fb=this.Bb(this.da,this.Ea),t.s?(this.c.gc(t),t.Kd(this.F),this.a=t):this.zb()},Zt.X=function(t){if(2==t){var e=null;this.b&&(e=null);var n=f(this.Zd,this);e||(e=new _t("//www.google.com/images/cleardot.gif"),ne.location&&"http"==ne.location.protocol||e.ma("https"),e.za()),Ft(e.toString(),n)}else at(2);this.zd(t)},Zt.Zd=function(t){at(t?2:1)},Zt.zd=function(t){this.w=0,this.b&&this.b.nb(t),this.Yb(),this.lb()},Zt.Yb=function(){this.w=0,this.B=-1,this.b&&(0==this.c.Xb().length&&0==this.g.length||(this.c.Bc(),g(this.g),this.g.length=0),this.b.mb())},Zt.Cb=function(t){return this.ub(null,t)},Zt.Bb=function(t,e){return this.ub(this.Da()?t:null,e)},Zt.ub=function(t,e){var n=wt(e);if(""!=n.c)t&&n.ka(t+"."+n.c),n.la(n.h);else{var r,i=ne.location;r=t?t+"."+i.hostname:i.hostname,n=Et(i.protocol,r,+i.port,e)}return this.ca&&E(this.ca,function(t,e){n.m(e,t)}),t=this.j,e=this.Fa,t&&e&&n.m(t,e),n.m("VER",this.qb),this.ea(n),n},Zt.sa=function(t){if(t&&!this.T)throw Error("Can't create secondary domain capable XhrIo object.");return t=new jt(this.xc),t.Sd(this.T),t},Zt.Pa=function(){return!!this.b&&!0},Zt.Da=function(){return this.T},Zt=Gt.prototype,Zt.Ia=null,Zt.pb=function(){},Zt.ob=function(){},Zt.nb=function(){},Zt.mb=function(){},Zt.yc=function(){},Zt.$c=function(t){return t},zt.prototype.a=function(t,e){return new $t(t,e)},d($t,Q),Zt=$t.prototype,Zt.addEventListener=function(t,e,n,r){$t.S.addEventListener.call(this,t,e,n,r)},Zt.removeEventListener=function(t,e,n,r){$t.S.removeEventListener.call(this,t,e,n,r)},Zt.Yc=function(){this.a.jc(this.f),this.l&&this.a.Rd(),this.a.bd(this.o,this.g,this.b||void 0)},Zt.close=function(){this.a.Qa()},Zt.Zc=function(t){if(r(t)){var e={};e.__data__=t,this.a.Xa(e)}else this.h?(e={},e.__data__=Le(t),this.a.Xa(e)):this.a.Xa(t)},Zt.G=function(){this.a.jc(null),delete this.f,this.a.Qa(),delete this.a,$t.S.G.call(this)},d(Yt,lt),d(Xt,ft),d(Jt,Gt),Jt.prototype.pb=function(){this.a.dispatchEvent("a")},Jt.prototype.ob=function(t){this.a.dispatchEvent(new Yt(t))},Jt.prototype.nb=function(t){this.a.dispatchEvent(new Xt(t))},Jt.prototype.mb=function(){this.a.dispatchEvent("b")};var sn=p(function(t,e){function n(){}n.prototype=t.prototype;var r=new n;return t.apply(r,Array.prototype.slice.call(arguments,1)),r},zt);zt.prototype.createWebChannel=zt.prototype.a,$t.prototype.send=$t.prototype.Zc,$t.prototype.open=$t.prototype.Yc,$t.prototype.close=$t.prototype.close,Be.NO_ERROR=0,Be.TIMEOUT=8,Be.HTTP_ERROR=6,We.COMPLETE="complete",ht.EventType=Ke,Ke.OPEN="a",Ke.CLOSE="b",Ke.ERROR="c",Ke.MESSAGE="d",Q.prototype.listen=Q.prototype.Lb,jt.prototype.listenOnce=jt.prototype.Mb,jt.prototype.getLastError=jt.prototype.dd,jt.prototype.getLastErrorCode=jt.prototype.Db,jt.prototype.getStatus=jt.prototype.aa,jt.prototype.getStatusText=jt.prototype.Fb,jt.prototype.getResponseJson=jt.prototype.Nc,jt.prototype.getResponseText=jt.prototype.va,jt.prototype.send=jt.prototype.xa;var un={createWebChannelTransport:sn,ErrorCode:Be,EventType:We,WebChannel:ht,XhrIo:jt},cn=un.createWebChannelTransport,hn=un.ErrorCode,ln=un.EventType,fn=un.WebChannel,pn=un.XhrIo;e.default=un}.call(e,n("DuR2"))},"GB3+":function(t,e,n){var r=n("1rEs").f,i=n("l/2K"),o=n("jAiL")("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},GCs6:function(t,e,n){var r=n("FKWp"),i=n("LocR"),o=n("9MbE"),a=Object.defineProperty;e.f=n("qs+f")?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},GPcm:function(t,e,n){"use strict";var r=n("rUAC"),i=n("I1z2"),o=n("RxPu"),a=i.set,s=i.getterFor("String Iterator");o(String,"String",function(t){a(this,{type:"String Iterator",string:String(t),index:0})},function(){var t,e=s(this),n=e.string,i=e.index;return i>=n.length?{value:void 0,done:!0}:(t=r(n,i,!0),e.index+=t.length,{value:t,done:!1})})},GhAV:function(t,e,n){var r=n("W6Rd"),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},GmwO:function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},Gor1:function(t,e,n){n("Ld14")("species")},HAas:function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},HLWT:function(t,e,n){var r=n("jAiL")("unscopables"),i=n("43zn"),o=n("wkr2"),a=Array.prototype;void 0==a[r]&&o(a,r,i(null)),t.exports=function(t){a[r][t]=!0}},HVdB:function(t,e,n){t.exports=!n("r54x")(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})},He3V:function(t,e,n){var r=n("q0qZ"),i=n("NGss"),o=n("C1ru"),a=n("9mDF"),s=n("whWw"),u=n("l/2K"),c=n("K6eN"),h=Object.getOwnPropertyDescriptor;e.f=r?h:function(t,e){if(t=a(t),e=s(e,!0),c)try{return h(t,e)}catch(t){}if(u(t,e))return o(!i.f.call(t,e),t[e])}},I1z2:function(t,e,n){var r,i,o,a=n("QYNq"),s=n("HAas"),u=n("wkr2"),c=n("l/2K"),h=n("siPu"),l=n("Eb96"),f=n("hcE8").WeakMap,p=function(t){return o(t)?i(t):r(t,{})},d=function(t){return function(e){var n;if(!s(e)||(n=i(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}};if(a){var y=new f,v=y.get,m=y.has,g=y.set;r=function(t,e){return g.call(y,t,e),e},i=function(t){return v.call(y,t)||{}},o=function(t){return m.call(y,t)}}else{var b=h("state");l[b]=!0,r=function(t,e){return u(t,b,e),e},i=function(t){return c(t,b)?t[b]:{}},o=function(t){return c(t,b)}}t.exports={set:r,get:i,has:o,enforce:p,getterFor:d}},I7B8:function(t,e,n){"use strict";var r=n("NZ8V"),i=n("YTz9"),o=n("LhDF"),a={};n("aLzV")(a,n("hgbu")("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(a,{next:i(1,n)}),o(t,e+" Iterator")}},K6eN:function(t,e,n){t.exports=!n("q0qZ")&&!n("r54x")(function(){return 7!=Object.defineProperty(n("P1fK")("div"),"a",{get:function(){return 7}}).a})},Kglm:function(t,e,n){n("Ld14")("split")},KsHu:function(t,e,n){var r=n("/09a"),i=n("fTzd"),o=n("NGss");t.exports=function(t){var e=r(t),n=i.f;if(n)for(var a,s=n(t),u=o.f,c=0;s.length>c;)u.call(t,a=s[c++])&&e.push(a);return e}},L20s:function(t,e,n){t.exports=n("m1su")},LC74:function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},LKnP:function(t,e,n){var r=n("YjQv"),i=n("kkvn").set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n("NZra")(a);t.exports=function(){var t,e,n,c=function(){var r,i;for(u&&(r=a.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(c)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var h=s.resolve(void 0);n=function(){h.then(c)}}else n=function(){i.call(r,c)};else{var l=!0,f=document.createTextNode("");new o(c).observe(f,{characterData:!0}),n=function(){f.data=l=!l}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}},Ld14:function(t,e,n){var r=n("odTk"),i=n("l/2K"),o=n("PBlj"),a=n("1rEs").f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});i(e,t)||a(e,t,{value:o.f(t)})}},LhDF:function(t,e,n){var r=n("GCs6").f,i=n("x//u"),o=n("hgbu")("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},LocR:function(t,e,n){t.exports=!n("qs+f")&&!n("zyKz")(function(){return 7!=Object.defineProperty(n("PY1i")("div"),"a",{get:function(){return 7}}).a})},MkIS:function(t,e,n){var r=n("HAas"),i=n("rF9q"),o=n("jAiL")("species");t.exports=function(t,e){var n;return i(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)?r(n)&&null===(n=n[o])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},MzAl:function(t,e,n){var r=n("HAas"),i=n("5+O3");t.exports=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}},N5RP:function(t,e,n){var r=n("hcE8").document;t.exports=r&&r.documentElement},NGss:function(t,e,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);e.f=o?function(t){var e=i(this,t);return!!e&&e.enumerable}:r},NZ8V:function(t,e,n){var r=n("FKWp"),i=n("r3+g"),o=n("B5V0"),a=n("+SdG")("IE_PROTO"),s=function(){},u=function(){var t,e=n("PY1i")("iframe"),r=o.length;for(e.style.display="none",n("+iDZ").appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;r--;)delete u.prototype[o[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=r(t),n=new s,s.prototype=null,n[a]=t):n=u(),void 0===e?n:i(n,e)}},NZra:function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},Nrqz:function(t,e,n){"use strict";var r=n("Wdy1"),i=n("3HN9"),o=n("AgWD");r(r.S,"Promise",{try:function(t){var e=i.f(this),n=o(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},O4tu:function(t,e,n){"use strict";(function(t){function r(){function t(t){f(d[t],"delete"),delete d[t]}function e(t){return t=t||s,a(d,t)||i("no-app",{name:t}),d[t]}function n(t,e){if(void 0===e&&(e={}),"object"!=typeof e||null===e){e={name:e}}var n=e;void 0===n.name&&(n.name=s);var r=n.name;"string"==typeof r&&r||i("bad-app-name",{name:r+""}),a(d,r)&&i("duplicate-app",{name:r});var o=new c(t,n,m);return d[r]=o,f(o,"create"),o}function u(){return Object.keys(d).map(function(t){return d[t]})}function h(t,n,r,a,s){y[t]&&i("duplicate-service",{name:t}),y[t]=n,a&&(v[t]=a,u().forEach(function(t){a("create",t)}));var h=function(n){return void 0===n&&(n=e()),"function"!=typeof n[t]&&i("invalid-app-argument",{name:t}),n[t]()};return void 0!==r&&o.deepExtend(h,r),m[t]=h,c.prototype[t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._getService.bind(this,t).apply(this,s?e:[])},h}function l(t){o.deepExtend(m,t)}function f(t,e){Object.keys(y).forEach(function(n){var r=p(t,n);null!==r&&v[r]&&v[r](e,t)})}function p(t,e){if("serverAuth"===e)return null;var n=e;t.options;return n}var d={},y={},v={},m={__esModule:!0,initializeApp:n,app:e,apps:null,Promise:Promise,SDK_VERSION:"5.9.4",INTERNAL:{registerService:h,createFirebaseNamespace:r,extendNamespace:l,createSubscribe:o.createSubscribe,ErrorFactory:o.ErrorFactory,removeApp:t,factories:y,useAsService:p,Promise:Promise,deepExtend:o.deepExtend}};return o.patchProperty(m,"default",m),Object.defineProperty(m,"apps",{get:u}),o.patchProperty(e,"App",c),m}function i(t,e){throw l.create(t,e)}Object.defineProperty(e,"__esModule",{value:!0});var o=n("Pxmi"),a=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s="[DEFAULT]",u=[],c=function(){function t(t,e,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled||!1,this.options_=o.deepCopy(t),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(t){u.push(t),setTimeout(function(){return t(null)},0)},removeAuthTokenListener:function(t){u=u.filter(function(e){return e!==t})}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this._automaticDataCollectionEnabled},set:function(t){this.checkDestroyed_(),this._automaticDataCollectionEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){t.firebase_.INTERNAL.removeApp(t.name_);var e=[];return Object.keys(t.services_).forEach(function(n){Object.keys(t.services_[n]).forEach(function(r){e.push(t.services_[n][r])})}),Promise.all(e.map(function(t){return t.INTERNAL.delete()}))}).then(function(){t.isDeleted_=!0,t.services_={}})},t.prototype._getService=function(t,e){if(void 0===e&&(e=s),this.checkDestroyed_(),this.services_[t]||(this.services_[t]={}),!this.services_[t][e]){var n=e!==s?e:void 0,r=this.firebase_.INTERNAL.factories[t](this,this.extendApp.bind(this),n);this.services_[t][e]=r}return this.services_[t][e]},t.prototype.extendApp=function(t){var e=this;o.deepExtend(this,t),t.INTERNAL&&t.INTERNAL.addAuthTokenListener&&(u.forEach(function(t){e.INTERNAL.addAuthTokenListener(t)}),u=[])},t.prototype.checkDestroyed_=function(){this.isDeleted_&&i("app-deleted",{name:this.name_})},t}();c.prototype.name&&c.prototype.options||c.prototype.delete||console.log("dc");var h={"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain","invalid-app-argument":"firebase.{$name}() takes either no argument or a Firebase App instance."},l=new o.ErrorFactory("app","Firebase",h),f=!1;try{f="[object process]"===Object.prototype.toString.call(t.process)}catch(t){}f&&console.warn('\nWarning: This is a browser-targeted Firebase bundle but it appears it is being\nrun in a Node environment.  If running in a Node environment, make sure you\nare using the bundle specified by the "main" field in package.json.\n\nIf you are using Webpack, you can specify "main" as the first item in\n"resolve.mainFields":\nhttps://webpack.js.org/configuration/resolve/#resolvemainfields\n\nIf using Rollup, use the rollup-plugin-node-resolve plugin and set "module"\nto false and "main" to true:\nhttps://github.com/rollup/rollup-plugin-node-resolve\n');var p=r();e.default=p,e.firebase=p}).call(e,n("DuR2"))},OHLg:function(t,e,n){n("Ld14")("asyncIterator")},OMJi:function(t,e,n){(function(t){function r(t,n){var r={seen:[],stylize:o};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),d(n)?r.showHidden=n:n&&e._extend(r,n),_(r.showHidden)&&(r.showHidden=!1),_(r.depth)&&(r.depth=2),_(r.colors)&&(r.colors=!1),_(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=i),s(r,t,r.depth)}function i(t,e){var n=r.styles[e];return n?"["+r.colors[n][0]+"m"+t+"["+r.colors[n][1]+"m":t}function o(t,e){return t}function a(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function s(t,n,r){if(t.customInspect&&n&&C(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return g(i)||(i=s(t,i,r)),i}var o=u(t,n);if(o)return o;var d=Object.keys(n),y=a(d);if(t.showHidden&&(d=Object.getOwnPropertyNames(n)),S(n)&&(d.indexOf("message")>=0||d.indexOf("description")>=0))return c(n);if(0===d.length){if(C(n)){var v=n.name?": "+n.name:"";return t.stylize("[Function"+v+"]","special")}if(w(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(T(n))return t.stylize(Date.prototype.toString.call(n),"date");if(S(n))return c(n)}var m="",b=!1,_=["{","}"];if(p(n)&&(b=!0,_=["[","]"]),C(n)){m=" [Function"+(n.name?": "+n.name:"")+"]"}if(w(n)&&(m=" "+RegExp.prototype.toString.call(n)),T(n)&&(m=" "+Date.prototype.toUTCString.call(n)),S(n)&&(m=" "+c(n)),0===d.length&&(!b||0==n.length))return _[0]+m+_[1];if(r<0)return w(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var E;return E=b?h(t,n,r,y,d):d.map(function(e){return l(t,n,r,y,e,b)}),t.seen.pop(),f(E,m,_)}function u(t,e){if(_(e))return t.stylize("undefined","undefined");if(g(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return m(e)?t.stylize(""+e,"number"):d(e)?t.stylize(""+e,"boolean"):y(e)?t.stylize("null","null"):void 0}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,n,r,i){for(var o=[],a=0,s=e.length;a<s;++a)D(e,String(a))?o.push(l(t,e,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(l(t,e,n,r,i,!0))}),o}function l(t,e,n,r,i,o){var a,u,c;if(c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},c.get?u=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(u=t.stylize("[Setter]","special")),D(r,i)||(a="["+i+"]"),u||(t.seen.indexOf(c.value)<0?(u=y(n)?s(t,c.value,null):s(t,c.value,n-1),u.indexOf("\n")>-1&&(u=o?u.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+u.split("\n").map(function(t){return"   "+t}).join("\n"))):u=t.stylize("[Circular]","special")),_(a)){if(o&&i.match(/^\d+$/))return u;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+u}function f(t,e,n){var r=0;return t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function p(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function y(t){return null===t}function v(t){return null==t}function m(t){return"number"==typeof t}function g(t){return"string"==typeof t}function b(t){return"symbol"==typeof t}function _(t){return void 0===t}function w(t){return E(t)&&"[object RegExp]"===k(t)}function E(t){return"object"==typeof t&&null!==t}function T(t){return E(t)&&"[object Date]"===k(t)}function S(t){return E(t)&&("[object Error]"===k(t)||t instanceof Error)}function C(t){return"function"==typeof t}function I(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function k(t){return Object.prototype.toString.call(t)}function A(t){return t<10?"0"+t.toString(10):t.toString(10)}function N(){var t=new Date,e=[A(t.getHours()),A(t.getMinutes()),A(t.getSeconds())].join(":");return[t.getDate(),F[t.getMonth()],e].join(" ")}function D(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function O(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}function R(e){function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,a=function(){return i.apply(o,arguments)};e.apply(this,n).then(function(e){t.nextTick(a,null,e)},function(e){t.nextTick(O,e,a)})}if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),Object.defineProperties(n,x(e)),n}var x=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++)n[e[r]]=Object.getOwnPropertyDescriptor(t,e[r]);return n},P=/%[sdj%]/g;e.format=function(t){if(!g(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(r(arguments[n]));return e.join(" ")}for(var n=1,i=arguments,o=i.length,a=String(t).replace(P,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(t){return"[Circular]"}default:return t}}),s=i[n];n<o;s=i[++n])y(s)||!E(s)?a+=" "+s:a+=" "+r(s);return a},e.deprecate=function(n,r){function i(){if(!o){if(t.throwDeprecation)throw new Error(r);t.traceDeprecation?console.trace(r):console.error(r),o=!0}return n.apply(this,arguments)}if(void 0!==t&&!0===t.noDeprecation)return n;if(void 0===t)return function(){return e.deprecate(n,r).apply(this,arguments)};var o=!1;return i};var L,M={};e.debuglog=function(r){if(_(L)&&(L=n.i({NODE_ENV:"production"}).NODE_DEBUG||""),r=r.toUpperCase(),!M[r])if(new RegExp("\\b"+r+"\\b","i").test(L)){var i=t.pid;M[r]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",r,i,t)}}else M[r]=function(){};return M[r]},e.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=d,e.isNull=y,e.isNullOrUndefined=v,e.isNumber=m,e.isString=g,e.isSymbol=b,e.isUndefined=_,e.isRegExp=w,e.isObject=E,e.isDate=T,e.isError=S,e.isFunction=C,e.isPrimitive=I,e.isBuffer=n("fC4T");var F=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",N(),e.format.apply(e,arguments))},e.inherits=n("LC74"),e._extend=function(t,e){if(!e||!E(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t};var U="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;e.promisify=function(t){function e(){for(var e,n,r=new Promise(function(t,r){e=t,n=r}),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push(function(t,r){t?n(t):e(r)});try{t.apply(this,i)}catch(t){n(t)}return r}if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(U&&t[U]){var e=t[U];if("function"!=typeof e)throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,U,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),U&&Object.defineProperty(e,U,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,x(t))},e.promisify.custom=U,e.callbackify=R}).call(e,n("W2nU"))},P1fK:function(t,e,n){var r=n("HAas"),i=n("hcE8").document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},PBlj:function(t,e,n){e.f=n("jAiL")},PY1i:function(t,e,n){var r=n("8ANE"),i=n("YjQv").document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},PYrI:function(t,e,n){var r=n("l/2K"),i=n("aske"),o=n("He3V"),a=n("1rEs");t.exports=function(t,e){for(var n=i(e),s=a.f,u=o.f,c=0;c<n.length;c++){var h=n[c];r(t,h)||s(t,h,u(e,h))}}},PbQV:function(t,e,n){var r=n("ksFB"),i=n("GhAV"),o=n("+VX5");t.exports=function(t){return function(e,n,a){var s,u=r(e),c=i(u.length),h=o(a,c);if(t&&n!=n){for(;c>h;)if((s=u[h++])!=s)return!0}else for(;c>h;h++)if((t||h in u)&&u[h]===n)return t||h||0;return!t&&-1}}},PedI:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},Pxmi:function(t,e,n){"use strict";/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function r(t){return i(void 0,t)}function i(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:var n=e;return new Date(n.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var r in e)e.hasOwnProperty(r)&&(t[r]=i(t[r],e[r]));return t}function o(t,e,n){t[e]=n}function a(t){var e=O;return O=t,e}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function s(t){return JSON.parse(t)}function u(t){return JSON.stringify(t)}function c(t,e){var n=new nt(t,e);return n.subscribe.bind(n)}function h(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){t.apply(void 0,n)}).catch(function(t){e&&e(t)})}}function l(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}function f(){}function p(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}function d(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(p(t,e,r)+"must be a valid firebase namespace.")}function y(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(p(t,e,r)+"must be a valid function.")}function v(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(p(t,e,r)+"must be a valid context object.")}Object.defineProperty(e,"__esModule",{value:!0});/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var m={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},g=function(t,e){if(!t)throw b(e)},b=function(t){return new Error("Firebase Database ("+m.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},_=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},w=function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var o=t[n++],a=t[n++],s=t[n++],u=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&s)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{var o=t[n++],a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")},E={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,p=63&c;u||(p=64,a||(f=64)),r.push(n[h],n[l],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(_(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):w(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length,s=a?n[t.charAt(i)]:0;++i;var u=i<t.length,c=u?n[t.charAt(i)]:64;++i;var h=i<t.length,l=h?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==c||null==l)throw Error();var f=o<<2|s>>4;if(r.push(f),64!=c){var p=s<<4&240|c>>2;if(r.push(p),64!=l){var d=c<<6&192|l;r.push(d)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},T=function(t){var e=_(t);return E.encodeByteArray(e,!0)},S=function(t){try{return E.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null},C=function(){function t(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}(),I=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""},k=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(I())},A=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},N=function(){return!0===m.NODE_CLIENT||!0===m.NODE_ADMIN},D="FirebaseError",O=Error.captureStackTrace,R=function(){function t(t,e){if(this.code=t,this.message=e,O)O(this,x.prototype.create);else try{throw Error.apply(this,arguments)}catch(t){this.name=D,Object.defineProperty(this,"stack",{get:function(){return t.stack}})}}return t}();R.prototype=Object.create(Error.prototype),R.prototype.constructor=R,R.prototype.name=D;var x=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return t.prototype.create=function(t,e){void 0===e&&(e={});var n,r=this.errors[t],i=this.service+"/"+t;n=void 0===r?"Error":r.replace(this.pattern,function(t,n){var r=e[n];return void 0!==r?r.toString():"<"+n+"?>"}),n=this.serviceName+": "+n+" ("+i+").";var o=new R(i,n);for(var a in e)e.hasOwnProperty(a)&&"_"!==a.slice(-1)&&(o[a]=e[a]);return o},t}(),P=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=s(S(o[0])||""),n=s(S(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}},L=function(t){var e,n,r=P(t).claims,i=Math.floor((new Date).getTime()/1e3);return"object"==typeof r&&(r.hasOwnProperty("nbf")?e=r.nbf:r.hasOwnProperty("iat")&&(e=r.iat),n=r.hasOwnProperty("exp")?r.exp:e+86400),i&&e&&n&&i>=e&&i<=n},M=function(t){var e=P(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},F=function(t){var e=P(t),n=e.claims;return!!n&&"object"==typeof n&&n.hasOwnProperty("iat")},U=function(t){var e=P(t).claims;return"object"==typeof e&&!0===e.admin},j=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},q=function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]},V=function(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])},B=function(t,e){return V(e,function(e,n){t[e]=n}),t},W=function(t){return B({},t)},K=function(t){return"object"==typeof t&&null!==t},Q=function(t){for(var e in t)return!1;return!0},G=function(t){var e=0;for(var n in t)e++;return e},H=function(t,e,n){var r={};for(var i in t)r[i]=e.call(n,t[i],i,t);return r},z=function(t,e,n){for(var r in t)if(e.call(n,t[r],r,t))return r},$=function(t,e,n){var r=z(t,e,n);return r&&t[r]},Y=function(t){for(var e in t)return e},X=function(t){var e=[],n=0;for(var r in t)e[n++]=t[r];return e},J=function(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&!e(n,t[n]))return!1;return!0},Z=function(t){var e=[];return V(t,function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}),e.length?"&"+e.join("&"):""},tt=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach(function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}}),e},et=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(var r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(var r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}for(var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4],r=0;r<80;r++){r<40?r<20?(o=h^u&(c^h),a=1518500249):(o=u^c^h,a=1859775393):r<60?(o=u&c|h&(u|c),a=2400959708):(o=u^c^h,a=3395469782);var i=(s<<5|s>>>27)+o+l+a+n[r]&4294967295;l=h,h=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0==o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++o,++r,o==this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++o,++r,o==this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);for(var r=0,n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}(),nt=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");r=l(t,["next","error","complete"])?t:{next:t,error:e,complete:n},void 0===r.next&&(r.next=f),void 0===r.error&&(r.error=f),void 0===r.complete&&(r.complete=f);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}(),rt=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i){var o=t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".";throw new Error(o)}},it=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,g(r<t.length,"Surrogate pair missing trail surrogate.");i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},ot=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e.CONSTANTS=m,e.Deferred=C,e.ErrorFactory=x,e.FirebaseError=R,e.Sha1=et,e.assert=g,e.assertionError=b,e.async=h,e.base64=E,e.base64Decode=S,e.base64Encode=T,e.clone=W,e.contains=j,e.createSubscribe=c,e.decode=P,e.deepCopy=r,e.deepExtend=i,e.errorPrefix=p,e.every=J,e.extend=B,e.findKey=z,e.findValue=$,e.forEach=V,e.getAnyKey=Y,e.getCount=G,e.getUA=I,e.getValues=X,e.isAdmin=U,e.isEmpty=Q,e.isMobileCordova=k,e.isNodeSdk=N,e.isNonNullObject=K,e.isReactNative=A,e.isValidFormat=F,e.isValidTimestamp=L,e.issuedAtTime=M,e.jsonEval=s,e.map=H,e.patchCapture=a,e.patchProperty=o,e.querystring=Z,e.querystringDecode=tt,e.safeGet=q,e.stringLength=ot,e.stringToByteArray=it,e.stringify=u,e.validateArgCount=rt,e.validateCallback=y,e.validateContextObject=v,e.validateNamespace=d},QYNq:function(t,e,n){var r=n("0Q51"),i=n("hcE8").WeakMap;t.exports="function"==typeof i&&/native code/.test(r.call(i))},"Qa/u":function(t,e,n){t.exports=n("uUYp")},Rgwr:function(t,e,n){n("Ld14")("dispose")},RxPu:function(t,e,n){"use strict";var r=n("i9tX"),i=n("ot7w"),o=n("wzd1"),a=n("jE8y"),s=n("GB3+"),u=n("wkr2"),c=n("+opI"),h=n("pzR0"),l=n("jAiL")("iterator"),f=n("eZ0g"),p=n("UFcy"),d=p.IteratorPrototype,y=p.BUGGY_SAFARI_ITERATORS,v=function(){return this};t.exports=function(t,e,n,p,m,g,b){i(n,e,p);var _,w,E,T=function(t){if(t===m&&A)return A;if(!y&&t in I)return I[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},S=e+" Iterator",C=!1,I=t.prototype,k=I[l]||I["@@iterator"]||m&&I[m],A=!y&&k||T(m),N="Array"==e?I.entries||k:k;if(N&&(_=o(N.call(new t)),d!==Object.prototype&&_.next&&(h||o(_)===d||(a?a(_,d):"function"!=typeof _[l]&&u(_,l,v)),s(_,S,!0,!0),h&&(f[S]=v))),"values"==m&&k&&"values"!==k.name&&(C=!0,A=function(){return k.call(this)}),h&&!b||I[l]===A||u(I,l,A),f[e]=A,m)if(w={values:T("values"),keys:g?A:T("keys"),entries:T("entries")},b)for(E in w)!y&&!C&&E in I||c(I,E,w[E]);else r({target:e,proto:!0,forced:y||C},w);return w}},SWGL:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},SldL:function(t,e){!function(e){"use strict";function n(t,e,n,r){var o=e&&e.prototype instanceof i?e:i,a=Object.create(o.prototype),s=new p(r||[]);return a._invoke=c(t,n,s),a}function r(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function i(){}function o(){}function a(){}function s(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function u(t){function e(n,i,o,a){var s=r(t[n],t,i);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&g.call(c,"__await")?Promise.resolve(c.__await).then(function(t){e("next",t,o,a)},function(t){e("throw",t,o,a)}):Promise.resolve(c).then(function(t){u.value=t,o(u)},a)}a(s.arg)}function n(t,n){function r(){return new Promise(function(r,i){e(t,n,r,i)})}return i=i?i.then(r,r):r()}var i;this._invoke=n}function c(t,e,n){var i=C;return function(o,a){if(i===k)throw new Error("Generator is already running");if(i===A){if("throw"===o)throw a;return y()}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=h(s,n);if(u){if(u===N)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===C)throw i=A,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=k;var c=r(t,e,n);if("normal"===c.type){if(i=n.done?A:I,c.arg===N)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=A,n.method="throw",n.arg=c.arg)}}}function h(t,e){var n=t.iterator[e.method];if(n===v){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=v,h(t,e),"throw"===e.method))return N;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return N}var i=r(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,N;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=v),e.delegate=null,N):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,N)}function l(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function f(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(l,this),this.reset(!0)}function d(t){if(t){var e=t[_];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(g.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=v,e.done=!0,e};return r.next=r}}return{next:y}}function y(){return{value:v,done:!0}}var v,m=Object.prototype,g=m.hasOwnProperty,b="function"==typeof Symbol?Symbol:{},_=b.iterator||"@@iterator",w=b.asyncIterator||"@@asyncIterator",E=b.toStringTag||"@@toStringTag",T="object"==typeof t,S=e.regeneratorRuntime;if(S)return void(T&&(t.exports=S));S=e.regeneratorRuntime=T?t.exports:{},S.wrap=n;var C="suspendedStart",I="suspendedYield",k="executing",A="completed",N={},D={};D[_]=function(){return this};var O=Object.getPrototypeOf,R=O&&O(O(d([])));R&&R!==m&&g.call(R,_)&&(D=R);var x=a.prototype=i.prototype=Object.create(D);o.prototype=x.constructor=a,a.constructor=o,a[E]=o.displayName="GeneratorFunction",S.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===o||"GeneratorFunction"===(e.displayName||e.name))},S.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,E in t||(t[E]="GeneratorFunction")),t.prototype=Object.create(x),t},S.awrap=function(t){return{__await:t}},s(u.prototype),u.prototype[w]=function(){return this},S.AsyncIterator=u,S.async=function(t,e,r,i){var o=new u(n(t,e,r,i));return S.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},s(x),x[E]="Generator",x[_]=function(){return this},x.toString=function(){return"[object Generator]"},S.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},S.values=d,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=v,this.done=!1,this.delegate=null,this.method="next",this.arg=v,this.tryEntries.forEach(f),!t)for(var e in this)"t"===e.charAt(0)&&g.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=v)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,r){return o.type="throw",o.arg=t,n.next=e,r&&(n.method="next",n.arg=v),!!r}if(this.done)throw t;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=g.call(i,"catchLoc"),s=g.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&g.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,N):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),N},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),f(n),N}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;f(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:d(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=v),N}}}(function(){return this}()||Function("return this")())},TToO:function(t,e,n){"use strict";function r(t,e){function n(){this.constructor=t}w(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function i(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]]);return n}function o(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function a(t,e){return function(n,r){e(n,r,t)}}function s(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function u(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})}function c(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(a=2&n[0]?o.return:n[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=e.call(t,u)}catch(t){n=[6,t],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}function h(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function l(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function f(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function p(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(f(arguments[e]));return t}function d(t){return this instanceof d?(this.v=t,this):new d(t)}function y(t,e,n){function r(t){h[t]&&(c[t]=function(e){return new Promise(function(n,r){l.push([t,e,n,r])>1||i(t,e)})})}function i(t,e){try{o(h[t](e))}catch(t){u(l[0][3],t)}}function o(t){t.value instanceof d?Promise.resolve(t.value.v).then(a,s):u(l[0][2],t)}function a(t){i("next",t)}function s(t){i("throw",t)}function u(t,e){t(e),l.shift(),l.length&&i(l[0][0],l[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c,h=n.apply(t,e||[]),l=[];return c={},r("next"),r("throw"),r("return"),c[Symbol.asyncIterator]=function(){return this},c}function v(t){function e(e,i){n[e]=t[e]?function(n){return(r=!r)?{value:d(t[e](n)),done:"return"===e}:i?i(n):n}:i}var n,r;return n={},e("next"),e("throw",function(t){throw t}),e("return"),n[Symbol.iterator]=function(){return this},n}function m(t){function e(e){r[e]=t[e]&&function(r){return new Promise(function(i,o){r=t[e](r),n(i,o,r.done,r.value)})}}function n(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t[Symbol.asyncIterator];return i?i.call(t):(t="function"==typeof l?l(t):t[Symbol.iterator](),r={},e("next"),e("throw"),e("return"),r[Symbol.asyncIterator]=function(){return this},r)}function g(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function b(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function _(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.__extends=r,n.d(e,"__assign",function(){return E}),e.__rest=i,e.__decorate=o,e.__param=a,e.__metadata=s,e.__awaiter=u,e.__generator=c,e.__exportStar=h,e.__values=l,e.__read=f,e.__spread=p,e.__await=d,e.__asyncGenerator=y,e.__asyncDelegator=v,e.__asyncValues=m,e.__makeTemplateObject=g,e.__importStar=b,e.__importDefault=_;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var w=function(t,e){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},E=function(){return E=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},E.apply(this,arguments)}},Tpsd:function(t,e,n){n("Ld14")("toStringTag")},UFcy:function(t,e,n){"use strict";var r,i,o,a=n("wzd1"),s=n("wkr2"),u=n("l/2K"),c=n("pzR0"),h=n("jAiL")("iterator"),l=!1,f=function(){return this};[].keys&&(o=[].keys(),"next"in o?(i=a(a(o)))!==Object.prototype&&(r=i):l=!0),void 0==r&&(r={}),c||u(r,h)||s(r,h,f),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:l}},VD8v:function(t,e,n){var r=n("x//u"),i=n("wXdB"),o=n("+SdG")("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},"VU/8":function(t,e){t.exports=function(t,e,n,r,i,o){var a,s=t=t||{},u=typeof t.default;"object"!==u&&"function"!==u||(a=t,s=t.default);var c="function"==typeof s?s.options:s;e&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0),n&&(c.functional=!0),i&&(c._scopeId=i);var h;if(o?(h=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=h):r&&(h=r),h){var l=c.functional,f=l?c.render:c.beforeCreate;l?(c._injectStyles=h,c.render=function(t,e){return h.call(e),f(t,e)}):c.beforeCreate=f?[].concat(f,h):[h]}return{esModule:a,exports:s,options:c}}},W2nU:function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(h===setTimeout)return setTimeout(t,0);if((h===n||!h)&&setTimeout)return h=setTimeout,setTimeout(t,0);try{return h(t,0)}catch(e){try{return h.call(null,t,0)}catch(e){return h.call(this,t,0)}}}function o(t){if(l===clearTimeout)return clearTimeout(t);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{return l(t)}catch(e){try{return l.call(null,t)}catch(e){return l.call(this,t)}}}function a(){y&&p&&(y=!1,p.length?d=p.concat(d):v=-1,d.length&&s())}function s(){if(!y){var t=i(a);y=!0;for(var e=d.length;e;){for(p=d,d=[];++v<e;)p&&p[v].run();v=-1,e=d.length}p=null,y=!1,o(t)}}function u(t,e){this.fun=t,this.array=e}function c(){}var h,l,f=t.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:n}catch(t){h=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(t){l=r}}();var p,d=[],y=!1,v=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new u(t,e)),1!==d.length||y||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.prependListener=c,f.prependOnceListener=c,f.listeners=function(t){return[]},f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},W6Rd:function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},Wdy1:function(t,e,n){var r=n("YjQv"),i=n("iANj"),o=n("3fMt"),a=n("aLzV"),s=n("x//u"),u=function(t,e,n){var c,h,l,f=t&u.F,p=t&u.G,d=t&u.S,y=t&u.P,v=t&u.B,m=t&u.W,g=p?i:i[e]||(i[e]={}),b=g.prototype,_=p?r:d?r[e]:(r[e]||{}).prototype;p&&(n=e);for(c in n)(h=!f&&_&&void 0!==_[c])&&s(g,c)||(l=h?_[c]:n[c],g[c]=p&&"function"!=typeof _[c]?n[c]:v&&h?o(l,r):m&&_[c]==l?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(l):y&&"function"==typeof l?o(Function.call,l):l,y&&((g.virtual||(g.virtual={}))[c]=l,t&u.R&&b&&!b[c]&&a(b,c,l)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},"Wk+B":function(t,e,n){"use strict";function r(){return Pe.logLevel===Ne.LogLevel.DEBUG?ke.DEBUG:Pe.logLevel===Ne.LogLevel.SILENT?ke.SILENT:ke.ERROR}function i(t){switch(t){case ke.DEBUG:Pe.logLevel=Ne.LogLevel.DEBUG;break;case ke.ERROR:Pe.logLevel=Ne.LogLevel.ERROR;break;case ke.SILENT:Pe.logLevel=Ne.LogLevel.SILENT;break;default:Pe.error("Firestore ("+xe+"): Invalid value passed to `setLogLevel`")}}function o(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(Pe.logLevel<=Ne.LogLevel.DEBUG){var i=n.map(s);Pe.debug.apply(Pe,["Firestore ("+xe+") ["+t+"]: "+e].concat(i))}}function a(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Pe.logLevel<=Ne.LogLevel.ERROR){var r=e.map(s);Pe.error.apply(Pe,["Firestore ("+xe+"): "+t].concat(r))}}function s(t){if("string"==typeof t)return t;var e=Le.getPlatform();try{return e.formatJSON(t)}catch(e){return t}}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function u(t){var e="FIRESTORE ("+xe+") INTERNAL ASSERTION FAILED: "+t;throw a(e),new Error(e)}function c(t,e){t||u(e)}function h(){return Le.getPlatform().emptyByteString}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function l(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new Fe(Me.INVALID_ARGUMENT,t)}n.prototype=t.prototype;for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function f(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function p(t,e){return void 0!==t?t:e}function d(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Number(n);isNaN(r)||e(r,t[n])}}function y(t){var e=[];return v(t,function(t,n){return e.push(n)}),e}function v(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function m(t){c(null!=t&&"object"==typeof t,"isEmpty() expects object parameter.");for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function g(t){c(t&&"object"==typeof t,"shallowCopy() expects object parameter.");var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function b(t,e){if(0!==e.length)throw new Fe(Me.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+q(e.length,"argument")+".")}function _(t,e,n){if(e.length!==n)throw new Fe(Me.INVALID_ARGUMENT,"Function "+t+"() requires "+q(n,"argument")+", but was called with "+q(e.length,"argument")+".")}function w(t,e,n){if(e.length<n)throw new Fe(Me.INVALID_ARGUMENT,"Function "+t+"() requires at least "+q(n,"argument")+", but was called with "+q(e.length,"argument")+".")}function E(t,e,n,r){if(e.length<n||e.length>r)throw new Fe(Me.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+q(e.length,"argument")+".")}function T(t,e,n,r){if(!(e instanceof Array)||e.length<r)throw new Fe(Me.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" argument to be an array with at least "+q(r,"element")+".")}function S(t,e,n,r){R(t,e,j(n)+" argument",r)}function C(t,e,n,r){void 0!==r&&S(t,e,n,r)}function I(t,e,n,r){R(t,e,n+" option",r)}function k(t,e,n,r){void 0!==r&&I(t,e,n,r)}function A(t,e,n,r,i){if(!(r instanceof Array))throw new Fe(Me.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+P(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new Fe(Me.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be "+n+", but the value at index "+o+" was: "+P(r[o]))}function N(t,e,n,r,i){void 0!==r&&A(t,e,n,r,i)}function D(t,e,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push(P(u))}var c=P(r);throw new Fe(Me.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}function O(t,e,n,r,i){void 0!==r&&D(t,e,n,r,i)}function R(t,e,n,r){if(!("object"===e?x(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=P(r);throw new Fe(Me.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function x(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function P(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=L(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":u("Unknown wrong type: "+typeof t)}function L(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/,n=e.exec(t.constructor.toString());if(n&&n.length>1)return n[1]}return null}function M(t,e,n){if(void 0===n)throw new Fe(Me.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+j(e)+" argument, but it was undefined.")}function F(t,e,n){v(e,function(e,r){if(n.indexOf(e)<0)throw new Fe(Me.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))})}function U(t,e,n,r){var i=P(r);return new Fe(Me.INVALID_ARGUMENT,"Function "+t+"() requires its "+j(n)+" argument to be a "+e+", but it was: "+i)}function j(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function q(t,e){return t+" "+e+(1===t?"":"s")}function V(t,e){return t<e?-1:t>e?1:0}function B(t,e){return null!==t&&void 0!==t?!(!e||!t.isEqual(e)):t===e}function W(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].isEqual(e[n]))return!1;return!0}function K(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Q(){if("undefined"==typeof Uint8Array)throw new Fe(Me.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function G(){if(!Le.getPlatform().base64Available)throw new Fe(Me.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}function H(t,e){return t<e?-1:t>e?1:t===e?0:isNaN(t)?isNaN(e)?0:-1:1}function z(t,e){return t===e?0!==t||1/t==1/e:t!==t&&e!==e}function $(t){return null===t||void 0===t}function Y(t){return kn(t)&&t<=In&&t>=Cn}function X(t){return t instanceof Tn?t.internalValue.slice():[]}function J(t){switch(t){case Me.OK:return u("Treated status OK as error");case Me.CANCELLED:case Me.UNKNOWN:case Me.DEADLINE_EXCEEDED:case Me.RESOURCE_EXHAUSTED:case Me.INTERNAL:case Me.UNAVAILABLE:case Me.UNAUTHENTICATED:return!1;case Me.INVALID_ARGUMENT:case Me.NOT_FOUND:case Me.ALREADY_EXISTS:case Me.PERMISSION_DENIED:case Me.FAILED_PRECONDITION:case Me.ABORTED:case Me.OUT_OF_RANGE:case Me.UNIMPLEMENTED:case Me.DATA_LOSS:return!0;default:return u("Unknown status code: "+t)}}function Z(t){return J(t)&&t!==Me.ABORTED}function tt(t){var e=Hn[t];if(void 0!==e)return et(e)}function et(t){if(void 0===t)return a("GRPC error has no .code"),Me.UNKNOWN;switch(t){case Hn.OK:return Me.OK;case Hn.CANCELLED:return Me.CANCELLED;case Hn.UNKNOWN:return Me.UNKNOWN;case Hn.DEADLINE_EXCEEDED:return Me.DEADLINE_EXCEEDED;case Hn.RESOURCE_EXHAUSTED:return Me.RESOURCE_EXHAUSTED;case Hn.INTERNAL:return Me.INTERNAL;case Hn.UNAVAILABLE:return Me.UNAVAILABLE;case Hn.UNAUTHENTICATED:return Me.UNAUTHENTICATED;case Hn.INVALID_ARGUMENT:return Me.INVALID_ARGUMENT;case Hn.NOT_FOUND:return Me.NOT_FOUND;case Hn.ALREADY_EXISTS:return Me.ALREADY_EXISTS;case Hn.PERMISSION_DENIED:return Me.PERMISSION_DENIED;case Hn.FAILED_PRECONDITION:return Me.FAILED_PRECONDITION;case Hn.ABORTED:return Me.ABORTED;case Hn.OUT_OF_RANGE:return Me.OUT_OF_RANGE;case Hn.UNIMPLEMENTED:return Me.UNIMPLEMENTED;case Hn.DATA_LOSS:return Me.DATA_LOSS;default:return u("Unknown status code: "+t)}}function nt(t){if(void 0===t)return Hn.OK;switch(t){case Me.OK:return Hn.OK;case Me.CANCELLED:return Hn.CANCELLED;case Me.UNKNOWN:return Hn.UNKNOWN;case Me.DEADLINE_EXCEEDED:return Hn.DEADLINE_EXCEEDED;case Me.RESOURCE_EXHAUSTED:return Hn.RESOURCE_EXHAUSTED;case Me.INTERNAL:return Hn.INTERNAL;case Me.UNAVAILABLE:return Hn.UNAVAILABLE;case Me.UNAUTHENTICATED:return Hn.UNAUTHENTICATED;case Me.INVALID_ARGUMENT:return Hn.INVALID_ARGUMENT;case Me.NOT_FOUND:return Hn.NOT_FOUND;case Me.ALREADY_EXISTS:return Hn.ALREADY_EXISTS;case Me.PERMISSION_DENIED:return Hn.PERMISSION_DENIED;case Me.FAILED_PRECONDITION:return Hn.FAILED_PRECONDITION;case Me.ABORTED:return Hn.ABORTED;case Me.OUT_OF_RANGE:return Hn.OUT_OF_RANGE;case Me.UNIMPLEMENTED:return Hn.UNIMPLEMENTED;case Me.DATA_LOSS:return Hn.DATA_LOSS;default:return u("Unknown status code: "+t)}}function rt(t){switch(t){case 200:return Me.OK;case 400:return Me.INVALID_ARGUMENT;case 401:return Me.UNAUTHENTICATED;case 403:return Me.PERMISSION_DENIED;case 404:return Me.NOT_FOUND;case 409:return Me.ABORTED;case 416:return Me.OUT_OF_RANGE;case 429:return Me.RESOURCE_EXHAUSTED;case 499:return Me.CANCELLED;case 500:return Me.UNKNOWN;case 501:return Me.UNIMPLEMENTED;case 503:return Me.UNAVAILABLE;case 504:return Me.DEADLINE_EXCEEDED;default:return t>=200&&t<300?Me.OK:t>=400&&t<500?Me.FAILED_PRECONDITION:t>=500&&t<600?Me.INTERNAL:Me.UNKNOWN}}function it(){return ar}function ot(){return it()}function at(){return sr}function st(){return ur}function ut(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=cr,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}function ct(){return hr}function ht(){return new en(Ye.comparator)}function lt(){return new en(Ye.comparator)}function ft(t,e){c(!$(t),e+" is missing")}function pt(t){return"number"==typeof t?t:"string"==typeof t?Number(t):u("can't parse "+t)}function dt(t,e,n){return e===n||!e&&n in t}function yt(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=mt(e)),e=vt(t.get(n),e);return mt(e)}function vt(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+=jr+Vr;break;case jr:n+=jr+Br;break;default:n+=o}}return n}function mt(t){return t+jr+qr}function gt(t){var e=t.length;if(c(e>=2,"Invalid path "+t),2===e)return c(t.charAt(0)===jr&&t.charAt(1)===qr,"Non-empty path "+t+" had length 2"),He.EMPTY_PATH;for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf(jr,o);(a<0||a>n)&&u('Invalid encoded resource path: "'+t+'"');switch(t.charAt(a+1)){case qr:var s=t.substring(o,a),h=void 0;0===i.length?h=s:(i+=s,h=i,i=""),r.push(h);break;case Vr:i+=t.substring(o,a),i+="\0";break;case Br:i+=t.substring(o,a+1);break;default:u('Invalid encoded resource path: "'+t+'"')}o=a+2}return new He(r)}function bt(t,e,n){var r=di.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return St(t).iterate({range:o,keysOnly:!0},function(t,n,r){var o=t[0],s=t[1];t[2];o===e&&s===i&&(a=!0),r.done()}).next(function(){return a})}function _t(t,e){var n=!1;return Ct(t).iterateSerial(function(r){return bt(t,r,e).next(function(t){return t&&(n=!0),Qr.resolve(!t)})}).next(function(){return n})}function wt(t,e,n){var r=t.store(pi.store),i=t.store(di.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.iterate({range:a},function(t,e,n){return s++,n.delete()});o.push(u.next(function(){c(1===s,"Dangling document-mutation reference found: Missing batch "+n.batchId)}));for(var h=[],l=0,f=n.mutations;l<f.length;l++){var p=f[l],d=di.key(e,p.key.path,n.batchId);o.push(i.delete(d)),h.push(p.key)}return Qr.waitFor(o).next(function(){return h})}function Et(t){return t instanceof Uint8Array?(c("YES"===n.i({NODE_ENV:"production"}).USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence."),t.toString()):t}function Tt(t){return Ki.getStore(t,pi.store)}function St(t){return Ki.getStore(t,di.store)}function Ct(t){return Ki.getStore(t,fi.store)}function It(t){return new Qr(function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){n(t.target.error)}})}function kt(t){return Ki.getStore(t,bi.store)}function At(t){return Ki.getStore(t,wi.store)}function Nt(t){return Yr.getStore(t,wi.store).get(wi.key).next(function(t){return c(null!==t,"Missing metadata row."),t})}function Dt(t){return Nt(t).next(function(t){return t.highestListenSequenceNumber})}function Ot(t){return Ki.getStore(t,_i.store)}function Rt(t){return Ki.getStore(t,gi.store)}function xt(t){return t.code===Me.DATA_LOSS&&t.message===ri}function Pt(t){return Ki.getStore(t,mi.store)}function Lt(t){return Ki.getStore(t,Ti.store)}function Mt(t){return t.path.toArray()}function Ft(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw u("Unknown remote document type");e=t.noDocument}return JSON.stringify(e).length}function Ut(t){return[0,yt(t)]}function jt(t){t.createObjectStore(li.store)}function qt(t){t.createObjectStore(fi.store,{keyPath:fi.keyPath}),t.createObjectStore(pi.store,{keyPath:pi.keyPath,autoIncrement:!0}).createIndex(pi.userMutationsIndex,pi.userMutationsKeyPath,{unique:!0}),t.createObjectStore(di.store)}function Vt(t,e){return e.store(pi.store).loadAll().next(function(n){t.deleteObjectStore(pi.store),t.createObjectStore(pi.store,{keyPath:pi.keyPath,autoIncrement:!0}).createIndex(pi.userMutationsIndex,pi.userMutationsKeyPath,{unique:!0});var r=e.store(pi.store),i=n.map(function(t){return r.put(t)});return Qr.waitFor(i)})}function Bt(t){t.createObjectStore(mi.store)}function Wt(t){t.createObjectStore(gi.store)}function Kt(t){t.createObjectStore(_i.store,{keyPath:_i.keyPath}).createIndex(_i.documentTargetsIndex,_i.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(bi.store,{keyPath:bi.keyPath}).createIndex(bi.queryTargetsIndexName,bi.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(wi.store)}function Qt(t){t.deleteObjectStore(_i.store),t.deleteObjectStore(bi.store),t.deleteObjectStore(wi.store)}function Gt(t){var e=t.store(wi.store),n=new wi(0,0,jn.MIN.toTimestamp(),0);return e.put(wi.key,n)}function Ht(t){t.createObjectStore(Ti.store,{keyPath:"id",autoIncrement:!0})}function zt(t){t.createObjectStore(Si.store,{keyPath:Si.keyPath})}function $t(t){return Ki.getStore(t,Ei.store)}function Yt(t){return void 0!==t.documents}/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Xt(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=V(n,i);return 0===a?V(r,o):a}function Jt(t){return t.code===Me.FAILED_PRECONDITION&&t.message===qi}function Zt(t){return De.__awaiter(this,void 0,void 0,function(){return De.__generator(this,function(e){if(!Jt(t))throw t;return o(ji,"Unexpectedly lost primary lease"),[2]})})}function te(t){return t.store(li.store)}function ee(t){return t.store(Si.store)}function ne(t){return[0,yt(t.path)]}function re(t,e){return new _i(0,yt(t.path),e)}function ie(t,e){return Ot(t).put(re(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function oe(){return new en(Ye.comparator)}function ae(t,e){var n=function(t){switch(t){case or.Added:return 1;case or.Modified:case or.Metadata:return 2;case or.Removed:return 0;default:return u("Unknown ChangeType: "+t)}};return n(t)-n(e)}function se(t){var e=Pr.INVALID;if(null!=t)try{var n=JSON.parse(t);c("number"==typeof n,"Found non-numeric sequence number"),e=n}catch(t){a(Do,"Failed to read sequence number from WebStorage",t)}return e}function ue(t){if(t.search(zo)>=0)throw new Fe(Me.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Ho.bind.apply(Ho,[void 0].concat(t.split("."))))}catch(e){throw new Fe(Me.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}function ce(t){if(!t)return new Yo;switch(t.type){case"gapi":var e=t.client;return c(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new Zo(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Fe(Me.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function he(t){return le(t,["next","error","complete"])}function le(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=e;r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}function fe(t){switch(t){case vo.Set:case vo.MergeSet:case vo.Update:return!0;case vo.Argument:return!1;default:throw u("Unexpected case for UserDataSource: "+t)}}function pe(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Be||t instanceof Ve||t instanceof je||t instanceof la||t instanceof ta)}function de(t,e,n){if(!pe(n)||!x(n)){var r=P(n);throw"an object"===r?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function ye(t,e){if(e instanceof Ho)return e._internalPath;if("string"==typeof e)return ve(t,e);throw new Fe(Me.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function ve(t,e){try{return ue(e)._internalPath}catch(e){var n=me(e);throw new Fe(Me.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}}function me(t){return t instanceof Error?t.message:t.toString()}function ge(){throw new Fe(Me.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}function be(t,e){if(void 0===e)return{merge:!1};if(F(t,e,["merge","mergeFields"]),k(t,"boolean","merge",e.merge),N(t,"mergeFields","a string or a FieldPath",e.mergeFields,function(t){return"string"==typeof t||t instanceof Ho}),void 0!==e.mergeFields&&void 0!==e.merge)throw new Fe(Me.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function _e(t,e){return void 0===e?{}:(F(t,e,["serverTimestamps"]),O(t,"options","serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function we(t,e){C(t,"object",1,e),e&&(F(t,e,["source"]),O(t,"options","source",e.source,["default","server","cache"]))}function Ee(t,e,n){if(e instanceof Ea){if(e.firestore!==n)throw new Fe(Me.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw U(t,"DocumentReference",1,e)}function Te(t,e,n){if(n.oldDocs.isEmpty()){var r,i=0;return n.docChanges.map(function(e){var o=new Ca(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key));return c(e.type===or.Added,"Invalid event type for first snapshot"),c(!r||n.query.docComparator(r,e.doc)<0,"Got added events in wrong order"),r=e.doc,{type:"added",doc:o,oldIndex:-1,newIndex:i++}})}var o=n.oldDocs;return n.docChanges.filter(function(t){return e||t.type!==or.Metadata}).map(function(e){var r=new Ca(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key)),i=-1,a=-1;return e.type!==or.Added&&(i=o.indexOf(e.doc.key),c(i>=0,"Index for document not found"),o=o.delete(e.doc.key)),e.type!==or.Removed&&(o=o.add(e.doc),a=o.indexOf(e.doc.key)),{type:Se(e.type),doc:r,oldIndex:i,newIndex:a}})}function Se(t){switch(t){case or.Added:return"added";case or.Modified:case or.Metadata:return"modified";case or.Removed:return"removed";default:return u("Unknown change type: "+t)}}function Ce(t){t.INTERNAL.registerService("firestore",function(t){return new ba(t)},g(Ua))}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ie(t){Ce(t)}Object.defineProperty(e,"__esModule",{value:!0});var ke,Ae=function(t){return t&&"object"==typeof t&&"default"in t?t.default:t}(n("O4tu")),Ne=n("fjI4"),De=n("TToO"),Oe=n("GB/M"),Re=n("Pxmi"),xe=Ae.SDK_VERSION,Pe=new Ne.Logger("@firebase/firestore");!function(t){t[t.DEBUG=0]="DEBUG",t[t.ERROR=1]="ERROR",t[t.SILENT=2]="SILENT"}(ke||(ke={}));/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Le=function(){function t(){}return t.setPlatform=function(e){t.platform&&u("Platform already defined"),t.platform=e},t.getPlatform=function(){return t.platform||u("Platform not set"),t.platform},t}(),Me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Fe=function(t){function e(e,n){var r=t.call(this,n)||this;return r.code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return De.__extends(e,t),e}(Error),Ue=function(){function t(){}return t.newId=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<20;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return c(20===e.length,"Invalid auto ID: "+e),e},t}(),je=function(){function t(t){G(),this._binaryString=t}return t.fromBase64String=function(e){_("Blob.fromBase64String",arguments,1),S("Blob.fromBase64String","string",1,e),G();try{return new t(Le.getPlatform().atob(e))}catch(t){throw new Fe(Me.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},t.fromUint8Array=function(e){if(_("Blob.fromUint8Array",arguments,1),Q(),!(e instanceof Uint8Array))throw U("Blob.fromUint8Array","Uint8Array",1,e);return new t(Array.prototype.map.call(e,function(t){return String.fromCharCode(t)}).join(""))},t.prototype.toBase64=function(){return _("Blob.toBase64",arguments,0),G(),Le.getPlatform().btoa(this._binaryString)},t.prototype.toUint8Array=function(){_("Blob.toUint8Array",arguments,0),Q();for(var t=new Uint8Array(this._binaryString.length),e=0;e<this._binaryString.length;e++)t[e]=this._binaryString.charCodeAt(e);return t},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._binaryString===t._binaryString},t.prototype._compareTo=function(t){return V(this._binaryString,t._binaryString)},t}(),qe=l(je,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),Ve=function(){function t(t,e){if(_("GeoPoint",arguments,2),S("GeoPoint","number",1,t),S("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new Fe(Me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Fe(Me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype._compareTo=function(t){return V(this._lat,t._lat)||V(this._long,t._long)},t}(),Be=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Fe(Me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Fe(Me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Fe(Me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Fe(Me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?V(this.nanoseconds,t.nanoseconds):V(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t}(),We=function(){function t(t,e,n,r){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r}return t}(),Ke="(default)",Qe=function(){function t(t,e){this.projectId=t,this.database=e||Ke}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return this.database===Ke},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.compareTo=function(t){return V(this.projectId,t.projectId)||V(this.database,t.database)},t}(),Ge=function(){function t(t,e,n){this.init(t,e,n)}return t.prototype.init=function(t,e,n){void 0===e?e=0:e>t.length&&u("offset "+e+" out of range "+t.length),void 0===n?n=t.length-e:n>t.length-e&&u("length "+n+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.len=n},t.prototype.construct=function(t,e,n){var r=Object.create(Object.getPrototypeOf(this));return r.init(t,e,n),r},Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):"string"==typeof e?n.push(e):u("Unknown parameter type for Path.child(): "+e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,c(this.length>=t,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return c(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return c(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return c(t<this.length,"Index out of range"),this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),He=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return De.__extends(e,t),e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(t){if(t.indexOf("//")>=0)throw new Fe(Me.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter(function(t){return t.length>0}))},e.EMPTY_PATH=new e([]),e}(Ge),ze=/^[_a-zA-Z][_a-zA-Z0-9]*$/,$e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return De.__extends(e,t),e.isValidIdentifier=function(t){return ze.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Fe(Me.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new Fe(Me.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Fe(Me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new Fe(Me.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.EMPTY_PATH=new e([]),e}(Ge),Ye=function(){function t(e){this.path=e,c(t.isDocumentKey(e),"Invalid DocumentKey with an odd number of segments: "+e.toArray().join("/"))}return t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===He.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return He.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new He(e.slice()))},t.fromPathString=function(e){return new t(He.fromString(e))},t.EMPTY=new t(new He([])),t}(),Xe=function(){function t(t,e){this.key=t,this.version=e}return t.compareByKey=function(t,e){return Ye.comparator(t.key,e.key)},t}(),Je=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n)||this;return a.data=r,a.proto=o,a.hasLocalMutations=!!i.hasLocalMutations,a.hasCommittedMutations=!!i.hasCommittedMutations,a}return De.__extends(e,t),e.prototype.field=function(t){return this.data.field(t)},e.prototype.fieldValue=function(t){var e=this.field(t);return e?e.value():void 0},e.prototype.value=function(){return this.data.value()},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.data.isEqual(t.data)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.compareByField=function(t,e,n){var r=e.field(t),i=n.field(t);return void 0!==r&&void 0!==i?r.compareTo(i):u("Trying to compare documents on fields that don't exist")},e}(Xe),Ze=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return De.__extends(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Xe),tn=function(t){function e(e,n){return t.call(this,e,n)||this}return De.__extends(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Xe),en=function(){function t(t,e){this.comparator=t,this.root=e||rn.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,rn.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rn.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new nn(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new nn(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new nn(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new nn(this.root,t,this.comparator,!0)},t}(),nn=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){c(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),rn=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw u("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw u("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check();if(t!==this.right.check())throw u("Black depths differ");return t+(this.isRed()?0:1)},t.EMPTY=null,t.RED=!0,t.BLACK=!1,t}(),on=function(){function t(){this.size=0}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new rn(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}();rn.EMPTY=new on;/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var an;!function(t){t[t.NullValue=0]="NullValue",t[t.BooleanValue=1]="BooleanValue",t[t.NumberValue=2]="NumberValue",t[t.TimestampValue=3]="TimestampValue",t[t.StringValue=4]="StringValue",t[t.BlobValue=5]="BlobValue",t[t.RefValue=6]="RefValue",t[t.GeoPointValue=7]="GeoPointValue",t[t.ArrayValue=8]="ArrayValue",t[t.ObjectValue=9]="ObjectValue"}(an||(an={}));var sn;!function(t){t[t.Default=0]="Default",t[t.Estimate=1]="Estimate",t[t.Previous=2]="Previous"}(sn||(sn={}));var un,cn=function(){function t(t,e){this.serverTimestampBehavior=t,this.timestampsInSnapshots=e}return t.fromSnapshotOptions=function(e,n){switch(e.serverTimestamps){case"estimate":return new t(sn.Estimate,n);case"previous":return new t(sn.Previous,n);case"none":case void 0:return new t(sn.Default,n);default:return u("fromSnapshotOptions() called with invalid options.")}},t}(),hn=function(){function t(){}return t.prototype.toString=function(){var t=this.value();return null===t?"null":t.toString()},t.prototype.defaultCompareTo=function(t){return c(this.typeOrder!==t.typeOrder,"Default compareTo should not be used for values of same type."),V(this.typeOrder,t.typeOrder)},t}(),ln=function(t){function e(){var e=t.call(this)||this;return e.typeOrder=an.NullValue,e.internalValue=null,e}return De.__extends(e,t),e.prototype.value=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e},e.prototype.compareTo=function(t){return t instanceof e?0:this.defaultCompareTo(t)},e.INSTANCE=new e,e}(hn),fn=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=an.BooleanValue,n}return De.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?V(this,t):this.defaultCompareTo(t)},e.of=function(t){return t?e.TRUE:e.FALSE},e.TRUE=new e(!0),e.FALSE=new e(!1),e}(hn),pn=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=an.NumberValue,n}return De.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.compareTo=function(t){return t instanceof e?H(this.internalValue,t.internalValue):this.defaultCompareTo(t)},e}(hn),dn=function(t){function e(e){return t.call(this,e)||this}return De.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&z(this.internalValue,t.internalValue)},e}(pn),yn=function(t){function e(e){var n=t.call(this,e)||this;return n.internalValue=e,n}return De.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&z(this.internalValue,t.internalValue)},e.NAN=new e(NaN),e.POSITIVE_INFINITY=new e(1/0),e.NEGATIVE_INFINITY=new e(-1/0),e}(pn),vn=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=an.StringValue,n}return De.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?V(this.internalValue,t.internalValue):this.defaultCompareTo(t)},e}(hn),mn=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=an.TimestampValue,n}return De.__extends(e,t),e.prototype.value=function(t){return!t||t.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):t instanceof gn?-1:this.defaultCompareTo(t)},e}(hn),gn=function(t){function e(e,n){var r=t.call(this)||this;return r.localWriteTime=e,r.previousValue=n,r.typeOrder=an.TimestampValue,r}return De.__extends(e,t),e.prototype.value=function(t){return t&&t.serverTimestampBehavior===sn.Estimate?new mn(this.localWriteTime).value(t):t&&t.serverTimestampBehavior===sn.Previous&&this.previousValue?this.previousValue.value(t):null},e.prototype.isEqual=function(t){return t instanceof e&&this.localWriteTime.isEqual(t.localWriteTime)},e.prototype.compareTo=function(t){return t instanceof e?this.localWriteTime._compareTo(t.localWriteTime):t instanceof mn?1:this.defaultCompareTo(t)},e.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},e}(hn),bn=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=an.BlobValue,n}return De.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(hn),_n=function(t){function e(e,n){var r=t.call(this)||this;return r.databaseId=e,r.key=n,r.typeOrder=an.RefValue,r}return De.__extends(e,t),e.prototype.value=function(t){return this.key},e.prototype.isEqual=function(t){return t instanceof e&&(this.key.isEqual(t.key)&&this.databaseId.isEqual(t.databaseId))},e.prototype.compareTo=function(t){if(t instanceof e){var n=this.databaseId.compareTo(t.databaseId);return 0!==n?n:Ye.comparator(this.key,t.key)}return this.defaultCompareTo(t)},e}(hn),wn=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=an.GeoPointValue,n}return De.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(hn),En=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=an.ObjectValue,n}return De.__extends(e,t),e.prototype.value=function(t){var e={};return this.internalValue.inorderTraversal(function(n,r){e[n]=r.value(t)}),e},e.prototype.forEach=function(t){this.internalValue.inorderTraversal(t)},e.prototype.isEqual=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext();if(i.key!==o.key||!i.value.isEqual(o.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext(),a=V(i.key,o.key)||i.value.compareTo(o.value);if(a)return a}return V(n.hasNext(),r.hasNext())}return this.defaultCompareTo(t)},e.prototype.set=function(t,n){if(c(!t.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===t.length)return this.setChild(t.firstSegment(),n);var r=this.child(t.firstSegment());r instanceof e||(r=e.EMPTY);var i=r.set(t.popFirst(),n);return this.setChild(t.firstSegment(),i)},e.prototype.delete=function(t){if(c(!t.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===t.length)return new e(this.internalValue.remove(t.firstSegment()));var n=this.child(t.firstSegment());if(n instanceof e){var r=n.delete(t.popFirst());return new e(this.internalValue.insert(t.firstSegment(),r))}return this},e.prototype.contains=function(t){return void 0!==this.field(t)},e.prototype.field=function(t){c(!t.isEmpty(),"Can't get field of empty path");var n=this;return t.forEach(function(t){n=n instanceof e?n.internalValue.get(t)||void 0:void 0}),n},e.prototype.toString=function(){return this.internalValue.toString()},e.prototype.child=function(t){return this.internalValue.get(t)||void 0},e.prototype.setChild=function(t,n){return new e(this.internalValue.insert(t,n))},e.EMPTY=new e(new en(V)),e}(hn),Tn=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=an.ArrayValue,n}return De.__extends(e,t),e.prototype.value=function(t){return this.internalValue.map(function(e){return e.value(t)})},e.prototype.forEach=function(t){this.internalValue.forEach(t)},e.prototype.isEqual=function(t){if(t instanceof e){if(this.internalValue.length!==t.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].isEqual(t.internalValue[n]))return!1;return!0}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=Math.min(this.internalValue.length,t.internalValue.length),r=0;r<n;r++){var i=this.internalValue[r].compareTo(t.internalValue[r]);if(i)return i}return V(this.internalValue.length,t.internalValue.length)}return this.defaultCompareTo(t)},e.prototype.toString=function(){return"["+this.internalValue.map(function(t){return t.toString()}).join(",")+"]"},e}(hn),Sn=Number,Cn=Sn.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),In=Sn.MAX_SAFE_INTEGER||Math.pow(2,53)-1,kn=Sn.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},An=function(){function t(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.memoizedCanonicalId=null,this.memoizedOrderBy=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return t.atPath=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var t=this.getInequalityFilterField(),e=this.getFirstOrderByField();if(null!==t&&null===e)t.isKeyField()?this.memoizedOrderBy=[Fn]:this.memoizedOrderBy=[new Mn(t),Fn];else{c(null===t||null!==e&&t.isEqual(e),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}if(!n){var a=this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:Pn.ASCENDING;this.memoizedOrderBy.push(a===Pn.ASCENDING?Fn:Un)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),t.prototype.addFilter=function(e){c(null==this.getInequalityFilterField()||!(e instanceof On)||!e.isInequality()||e.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),c(!this.isDocumentQuery(),"No filtering allowed for document query");var n=this.filters.concat([e]);return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),n,this.limit,this.startAt,this.endAt)},t.prototype.addOrderBy=function(e){c(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([e]);return new t(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.startAt,this.endAt)},t.prototype.withLimit=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),e,this.startAt,this.endAt)},t.prototype.withStartAt=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,e,this.endAt)},t.prototype.withEndAt=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,e)},t.prototype.asCollectionQueryAtPath=function(e){return new t(e,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,this.endAt)},t.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var t=this.path.canonicalString();this.isCollectionGroupQuery()&&(t+="|cg:"+this.collectionGroup),t+="|f:";for(var e=0,n=this.filters;e<n.length;e++){t+=n[e].canonicalId(),t+=","}t+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++){t+=i[r].canonicalId(),t+=","}$(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.memoizedCanonicalId=t}return this.memoizedCanonicalId},t.prototype.toString=function(){var t="Query("+this.path.canonicalString();return this.isCollectionGroupQuery()&&(t+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(t+=", filters: ["+this.filters.join(", ")+"]"),$(this.limit)||(t+=", limit: "+this.limit),this.explicitOrderBy.length>0&&(t+=", orderBy: ["+this.explicitOrderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),t+")"},t.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(var e=0;e<this.filters.length;e++)if(!this.filters[e].isEqual(t.filters[e]))return!1;return this.collectionGroup===t.collectionGroup&&(!!this.path.isEqual(t.path)&&(!(null!==this.startAt?!this.startAt.isEqual(t.startAt):null!==t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)))},t.prototype.docComparator=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(t,e);if(0!==a)return a;n=n||o.field.isKeyField()}return c(n,"orderBy used that doesn't compare on key field"),0},t.prototype.matches=function(t){return this.matchesPathAndCollectionGroup(t)&&this.matchesOrderBy(t)&&this.matchesFilters(t)&&this.matchesBounds(t)},t.prototype.hasLimit=function(){return!$(this.limit)},t.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},t.prototype.getInequalityFilterField=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof On&&n.isInequality())return n.field}return null},t.prototype.hasArrayContainsFilter=function(){return void 0!==this.filters.find(function(t){return t instanceof On&&t.op===Dn.ARRAY_CONTAINS})},t.prototype.isDocumentQuery=function(){return Ye.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},t.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},t.prototype.matchesPathAndCollectionGroup=function(t){var e=t.key.path;return null!==this.collectionGroup?t.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(e):Ye.isDocumentKey(this.path)?this.path.isEqual(e):this.path.isImmediateParentOf(e)},t.prototype.matchesOrderBy=function(t){for(var e=0,n=this.explicitOrderBy;e<n.length;e++){var r=n[e];if(!r.field.isKeyField()&&void 0===t.field(r.field))return!1}return!0},t.prototype.matchesFilters=function(t){for(var e=0,n=this.filters;e<n.length;e++){if(!n[e].matches(t))return!1}return!0},t.prototype.matchesBounds=function(t){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,t))&&(!this.endAt||!this.endAt.sortsBeforeDocument(this.orderBy,t))},t.prototype.assertValidBound=function(t){c(t.position.length<=this.orderBy.length,"Bound is longer than orderBy")},t}(),Nn=function(){function t(){}return t.create=function(t,e,n){if(n.isEqual(ln.INSTANCE)){if(e!==Dn.EQUAL)throw new Fe(Me.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on null.");return new Rn(t)}if(n.isEqual(yn.NAN)){if(e!==Dn.EQUAL)throw new Fe(Me.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on NaN.");return new xn(t)}return new On(t,e,n)},t}(),Dn=function(){function t(t){this.name=t}return t.fromString=function(e){switch(e){case"<":return t.LESS_THAN;case"<=":return t.LESS_THAN_OR_EQUAL;case"==":return t.EQUAL;case">=":return t.GREATER_THAN_OR_EQUAL;case">":return t.GREATER_THAN;case"array-contains":return t.ARRAY_CONTAINS;default:return u("Unknown relation: "+e)}},t.prototype.toString=function(){return this.name},t.prototype.isEqual=function(t){return this.name===t.name},t.LESS_THAN=new t("<"),t.LESS_THAN_OR_EQUAL=new t("<="),t.EQUAL=new t("=="),t.GREATER_THAN=new t(">"),t.GREATER_THAN_OR_EQUAL=new t(">="),t.ARRAY_CONTAINS=new t("array-contains"),t}(),On=function(t){function e(e,n,r){var i=t.call(this)||this;return i.field=e,i.op=n,i.value=r,i}return De.__extends(e,t),e.prototype.matches=function(t){if(this.field.isKeyField()){c(this.value instanceof _n,"Comparing on key, but filter value not a RefValue"),c(this.op!==Dn.ARRAY_CONTAINS,"array-contains queries don't make sense on document keys.");var e=this.value,n=Ye.comparator(t.key,e.key);return this.matchesComparison(n)}var r=t.field(this.field);return void 0!==r&&this.matchesValue(r)},e.prototype.matchesValue=function(t){var e=this;return this.op===Dn.ARRAY_CONTAINS?t instanceof Tn&&void 0!==t.internalValue.find(function(t){return t.isEqual(e.value)}):this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},e.prototype.matchesComparison=function(t){switch(this.op){case Dn.LESS_THAN:return t<0;case Dn.LESS_THAN_OR_EQUAL:return t<=0;case Dn.EQUAL:return 0===t;case Dn.GREATER_THAN:return t>0;case Dn.GREATER_THAN_OR_EQUAL:return t>=0;default:return u("Unknown relation op"+this.op)}},e.prototype.isInequality=function(){return this.op!==Dn.EQUAL&&this.op!==Dn.ARRAY_CONTAINS},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},e.prototype.isEqual=function(t){return t instanceof e&&(this.op.isEqual(t.op)&&this.field.isEqual(t.field)&&this.value.isEqual(t.value))},e.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},e}(Nn),Rn=function(t){function e(e){var n=t.call(this)||this;return n.field=e,n}return De.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return void 0!==e&&null===e.value()},e.prototype.canonicalId=function(){return this.field.canonicalString()+" IS null"},e.prototype.toString=function(){return this.field.canonicalString()+" IS null"},e.prototype.isEqual=function(t){return t instanceof e&&this.field.isEqual(t.field)},e}(Nn),xn=function(t){function e(e){var n=t.call(this)||this;return n.field=e,n}return De.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field),n=e&&e.value();return"number"==typeof n&&isNaN(n)},e.prototype.canonicalId=function(){return this.field.canonicalString()+" IS NaN"},e.prototype.toString=function(){return this.field.canonicalString()+" IS NaN"},e.prototype.isEqual=function(t){return t instanceof e&&this.field.isEqual(t.field)},e}(Nn),Pn=function(){function t(t){this.name=t}return t.prototype.toString=function(){return this.name},t.ASCENDING=new t("asc"),t.DESCENDING=new t("desc"),t}(),Ln=function(){function t(t,e){this.position=t,this.before=e}return t.prototype.canonicalId=function(){for(var t=this.before?"b:":"a:",e=0,n=this.position;e<n.length;e++){t+=n[e].toString()}return t},t.prototype.sortsBeforeDocument=function(t,e){c(this.position.length<=t.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=t[r],o=this.position[r];if(i.field.isKeyField())c(o instanceof _n,"Bound has a non-key value where the key path is being used."),n=Ye.comparator(o.key,e.key);else{var a=e.field(i.field);c(void 0!==a,"Field should exist since document matched the orderBy already."),n=o.compareTo(a)}if(i.dir===Pn.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},t.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++){var n=this.position[e],r=t.position[e];return n.isEqual(r)}return!0},t}(),Mn=function(){function t(t,e){this.field=t,void 0===e&&(e=Pn.ASCENDING),this.dir=e,this.isKeyOrderBy=t.isKeyField()}return t.prototype.compare=function(t,e){var n=this.isKeyOrderBy?Je.compareByKey(t,e):Je.compareByField(this.field,t,e);switch(this.dir){case Pn.ASCENDING:return n;case Pn.DESCENDING:return-1*n;default:return u("Unknown direction: "+this.dir)}},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},t.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},t.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},t}(),Fn=new Mn($e.keyField(),Pn.ASCENDING),Un=new Mn($e.keyField(),Pn.DESCENDING),jn=function(){function t(t){this.timestamp=t}return t.fromMicroseconds=function(e){var n=Math.floor(e/1e6);return new t(new Be(n,e%1e6*1e3))},t.fromTimestamp=function(e){return new t(e)},t.forDeletedDoc=function(){return t.MIN},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t.MIN=new t(new Be(0,0)),t}();!function(t){t[t.Listen=0]="Listen",t[t.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",t[t.LimboResolution=2]="LimboResolution"}(un||(un={}));var qn,Vn=function(){function t(t,e,n,r,i,o){void 0===i&&(i=jn.MIN),void 0===o&&(o=h()),this.query=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.resumeToken=o}return t.prototype.copy=function(e){return new t(this.query,this.targetId,this.purpose,void 0===e.sequenceNumber?this.sequenceNumber:e.sequenceNumber,void 0===e.snapshotVersion?this.snapshotVersion:e.snapshotVersion,void 0===e.resumeToken?this.resumeToken:e.resumeToken)},t.prototype.isEqual=function(t){return this.targetId===t.targetId&&this.purpose===t.purpose&&this.sequenceNumber===t.sequenceNumber&&this.snapshotVersion.isEqual(t.snapshotVersion)&&this.resumeToken===t.resumeToken&&this.query.isEqual(t.query)},t}(),Bn=function(){function t(t){this.comparator=t,this.data=new en(this.comparator)}return t.fromMapKeys=function(e){var n=new t(e.comparator);return e.forEach(function(t){n=n.add(t)}),n},t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();){if(!t(n.getNext().key))return}},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Wn(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Wn(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Wn=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Kn=function(){function t(t){this.fields=t}return t.fromSet=function(e){return new t(e)},t.fromArray=function(e){var n=new Bn($e.comparator);return e.forEach(function(t){return n=n.add(t)}),new t(n)},t.prototype.covers=function(t){var e=!1;return this.fields.forEach(function(n){n.isPrefixOf(t)&&(e=!0)}),e},t.prototype.applyTo=function(t){var e=En.EMPTY;return this.fields.forEach(function(n){if(n.isEmpty())return t;var r=t.field(n);void 0!==r&&(e=e.set(n,r))}),e},t.prototype.isEqual=function(t){return this.fields.isEqual(t.fields)},t}(),Qn=function(){function t(t,e){this.field=t,this.transform=e}return Object.defineProperty(t.prototype,"isIdempotent",{get:function(){return this.transform.isIdempotent},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},t}(),Gn=function(){function t(t,e){this.version=t,this.transformResults=e}return t}();!function(t){t[t.Set=0]="Set",t[t.Patch=1]="Patch",t[t.Transform=2]="Transform",t[t.Delete=3]="Delete"}(qn||(qn={}));var Hn,zn=function(){function t(t,e){this.updateTime=t,this.exists=e,c(void 0===t||void 0===e,'Precondition can specify "exists" or "updateTime" but not both')}return t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),t.prototype.isValidFor=function(t){return void 0!==this.updateTime?t instanceof Je&&t.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===t instanceof Je:(c(this.isNone,"Precondition should be empty"),!0)},t.prototype.isEqual=function(t){return B(this.updateTime,t.updateTime)&&this.exists===t.exists},t.NONE=new t,t}(),$n=function(){function t(){}return t.prototype.verifyKeyMatches=function(t){null!=t&&c(t.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},t.getPostMutationVersion=function(t){return t instanceof Je?t.version:jn.MIN},t}(),Yn=function(t){function e(e,n,r){var i=t.call(this)||this;return i.key=e,i.value=n,i.precondition=r,i.type=qn.Set,i}return De.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){this.verifyKeyMatches(t),c(null==e.transformResults,"Transform results received by SetMutation.");var n=e.version;return new Je(this.key,n,this.value,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=$n.getPostMutationVersion(t);return new Je(this.key,r,this.value,{hasLocalMutations:!0})},Object.defineProperty(e.prototype,"isIdempotent",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fieldMask",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.precondition.isEqual(t.precondition)},e}($n),Xn=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.key=e,o.data=n,o.fieldMask=r,o.precondition=i,o.type=qn.Patch,o}return De.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),c(null==e.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(t))return new tn(this.key,e.version);var n=this.patchDocument(t);return new Je(this.key,e.version,n,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=$n.getPostMutationVersion(t),i=this.patchDocument(t);return new Je(this.key,r,i,{hasLocalMutations:!0})},Object.defineProperty(e.prototype,"isIdempotent",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.fieldMask.isEqual(t.fieldMask)&&this.precondition.isEqual(t.precondition)},e.prototype.patchDocument=function(t){var e;return e=t instanceof Je?t.data:En.EMPTY,this.patchObject(e)},e.prototype.patchObject=function(t){var e=this;return this.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=e.data.field(n);t=void 0!==r?t.set(n,r):t.delete(n)}}),t},e}($n),Jn=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.fieldTransforms=n,r.type=qn.Transform,r.precondition=zn.exists(!0),r}return De.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),c(null!=e.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(t))return new tn(this.key,e.version);var n=this.requireDocument(t),r=this.serverTransformResults(t,e.transformResults),i=e.version,o=this.transformObject(n.data,r);return new Je(this.key,i,o,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=this.requireDocument(t),i=this.localTransformResults(n,e),o=this.transformObject(r.data,i);return new Je(this.key,r.version,o,{hasLocalMutations:!0})},Object.defineProperty(e.prototype,"isIdempotent",{get:function(){for(var t=0,e=this.fieldTransforms;t<e.length;t++){if(!e[t].isIdempotent)return!1}return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fieldMask",{get:function(){var t=new Bn($e.comparator);return this.fieldTransforms.forEach(function(e){return t=t.add(e.field)}),new Kn(t)},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&W(this.fieldTransforms,t.fieldTransforms)&&this.precondition.isEqual(t.precondition)},e.prototype.requireDocument=function(t){c(t instanceof Je,"Unknown MaybeDocument type "+t);var e=t;return c(e.key.isEqual(this.key),"Can only transform a document with the same key"),e},e.prototype.serverTransformResults=function(t,e){var n=[];c(this.fieldTransforms.length===e.length,"server transform result count ("+e.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;t instanceof Je&&(a=t.field(i.field)||null),n.push(o.applyToRemoteDocument(a,e[r]))}return n},e.prototype.localTransformResults=function(t,e){for(var n=[],r=0,i=this.fieldTransforms;r<i.length;r++){var o=i[r],a=o.transform,s=null;e instanceof Je&&(s=e.field(o.field)||null),n.push(a.applyToLocalView(s,t))}return n},e.prototype.transformObject=function(t,e){c(e.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n],i=r.field;t=t.set(i,e[n])}return t},e}($n),Zn=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.precondition=n,r.type=qn.Delete,r}return De.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),c(null==e.transformResults,"Transform results received by DeleteMutation."),new Ze(this.key,e.version,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){return this.verifyKeyMatches(t),this.precondition.isValidFor(t)?(t&&c(t.key.isEqual(this.key),"Can only apply mutation to document with same key"),new Ze(this.key,jn.forDeletedDoc())):t},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.precondition.isEqual(t.precondition)},Object.defineProperty(e.prototype,"isIdempotent",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fieldMask",{get:function(){return null},enumerable:!0,configurable:!0}),e}($n),tr=function(){function t(){this.isIdempotent=!0}return t.prototype.applyToLocalView=function(t,e){return new gn(e,t)},t.prototype.applyToRemoteDocument=function(t,e){return e},t.prototype.isEqual=function(e){return e instanceof t},t.instance=new t,t}(),er=function(){function t(t){this.elements=t,this.isIdempotent=!0}return t.prototype.applyToLocalView=function(t,e){return this.apply(t)},t.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=X(t),n=0,r=this.elements;n<r.length;n++){var i=r[n];!function(t){e.find(function(e){return e.isEqual(t)})||e.push(t)}(i)}return new Tn(e)},t.prototype.isEqual=function(e){return e instanceof t&&W(e.elements,this.elements)},t}(),nr=function(){function t(t){this.elements=t,this.isIdempotent=!0}return t.prototype.applyToLocalView=function(t,e){return this.apply(t)},t.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=X(t),n=0,r=this.elements;n<r.length;n++){var i=r[n];!function(t){e=e.filter(function(e){return!e.isEqual(t)})}(i)}return new Tn(e)},t.prototype.isEqual=function(e){return e instanceof t&&W(e.elements,this.elements)},t}(),rr=function(){function t(t){this.operand=t,this.isIdempotent=!1}return t.prototype.applyToLocalView=function(t,e){if(t instanceof dn&&this.operand instanceof dn){var n=t.internalValue+this.operand.internalValue;return new dn(n)}if(t instanceof pn){var n=t.internalValue+this.operand.internalValue;return new yn(n)}return this.operand},t.prototype.applyToRemoteDocument=function(t,e){return c(null!==e,"Didn't receive transformResult for NUMERIC_ADD transform"),e},t.prototype.isEqual=function(e){return e instanceof t&&this.operand.isEqual(e.operand)},t}(),ir=function(){function t(t){this.count=t}return t.prototype.isEqual=function(t){return t&&t.count===this.count},t}();!function(t){t[t.OK=0]="OK",t[t.CANCELLED=1]="CANCELLED",t[t.UNKNOWN=2]="UNKNOWN",t[t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",t[t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",t[t.NOT_FOUND=5]="NOT_FOUND",t[t.ALREADY_EXISTS=6]="ALREADY_EXISTS",t[t.PERMISSION_DENIED=7]="PERMISSION_DENIED",t[t.UNAUTHENTICATED=16]="UNAUTHENTICATED",t[t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",t[t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",t[t.ABORTED=10]="ABORTED",t[t.OUT_OF_RANGE=11]="OUT_OF_RANGE",t[t.UNIMPLEMENTED=12]="UNIMPLEMENTED",t[t.INTERNAL=13]="INTERNAL",t[t.UNAVAILABLE=14]="UNAVAILABLE",t[t.DATA_LOSS=15]="DATA_LOSS"}(Hn||(Hn={}));/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var or,ar=new en(Ye.comparator),sr=new en(Ye.comparator),ur=new en(Ye.comparator),cr=new Bn(Ye.comparator),hr=new Bn(V),lr=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Ye.comparator(e.key,n.key)}:function(t,e){return Ye.comparator(t.key,e.key)},this.keyedMap=at(),this.sortedSet=new en(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}();!function(t){t[t.Added=0]="Added",t[t.Removed=1]="Removed",t[t.Modified=2]="Modified",t[t.Metadata=3]="Metadata"}(or||(or={}));var fr;!function(t){t[t.Local=0]="Local",t[t.Synced=1]="Synced"}(fr||(fr={}));var pr,dr=function(){function t(){this.changeMap=new en(Ye.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.changeMap.get(e);if(!n)return void(this.changeMap=this.changeMap.insert(e,t));t.type!==or.Added&&n.type===or.Metadata?this.changeMap=this.changeMap.insert(e,t):t.type===or.Metadata&&n.type!==or.Removed?this.changeMap=this.changeMap.insert(e,{type:n.type,doc:t.doc}):t.type===or.Modified&&n.type===or.Modified?this.changeMap=this.changeMap.insert(e,{type:or.Modified,doc:t.doc}):t.type===or.Modified&&n.type===or.Added?this.changeMap=this.changeMap.insert(e,{type:or.Added,doc:t.doc}):t.type===or.Removed&&n.type===or.Added?this.changeMap=this.changeMap.remove(e):t.type===or.Removed&&n.type===or.Modified?this.changeMap=this.changeMap.insert(e,{type:or.Removed,doc:n.doc}):t.type===or.Added&&n.type===or.Removed?this.changeMap=this.changeMap.insert(e,{type:or.Modified,doc:t.doc}):u("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(n))},t.prototype.getChanges=function(){var t=[];return this.changeMap.inorderTraversal(function(e,n){t.push(n)}),t},t}(),yr=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:or.Added,doc:t})}),new t(e,n,lr.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),vr=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r,i=(r={},r[e]=mr.createSynthesizedTargetChangeForCurrentChange(e,n),r);return new t(jn.MIN,i,ct(),it(),ut())},t}(),mr=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(h(),n,ut(),ut(),ut())},t}(),gr=function(){function t(t,e,n,r){this.updatedTargetIds=t,this.removedTargetIds=e,this.key=n,this.newDoc=r}return t}(),br=function(){function t(t,e){this.targetId=t,this.existenceFilter=e}return t}();!function(t){t[t.NoChange=0]="NoChange",t[t.Added=1]="Added",t[t.Removed=2]="Removed",t[t.Current=3]="Current",t[t.Reset=4]="Reset"}(pr||(pr={}));var _r=function(){function t(t,e,n,r){void 0===n&&(n=h()),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}return t}(),wr=function(){function t(){this.pendingResponses=0,this.documentChanges=lt(),this._resumeToken=h(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),t.prototype.updateResumeToken=function(t){t.length>0&&(this._hasPendingChanges=!0,this._resumeToken=t)},t.prototype.toTargetChange=function(){var t=ut(),e=ut(),n=ut();return this.documentChanges.forEach(function(r,i){switch(i){case or.Added:t=t.add(r);break;case or.Modified:e=e.add(r);break;case or.Removed:n=n.add(r);break;default:u("Encountered invalid change type: "+i)}}),new mr(this._resumeToken,this._current,t,e,n)},t.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=lt()},t.prototype.addDocumentChange=function(t,e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(t,e)},t.prototype.removeDocumentChange=function(t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(t)},t.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},t.prototype.recordTargetResponse=function(){this.pendingResponses-=1},t.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},t}(),Er=function(){function t(t){this.metadataProvider=t,this.targetStates={},this.pendingDocumentUpdates=it(),this.pendingDocumentTargetMapping=ht(),this.pendingTargetResets=new Bn(V)}return t.prototype.handleDocumentChange=function(t){for(var e=0,n=t.updatedTargetIds;e<n.length;e++){var r=n[e];t.newDoc instanceof Je?this.addDocumentToTarget(r,t.newDoc):t.newDoc instanceof Ze&&this.removeDocumentFromTarget(r,t.key,t.newDoc)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var r=o[i];this.removeDocumentFromTarget(r,t.key,t.newDoc)}},t.prototype.handleTargetChange=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.ensureTargetState(n);switch(t.state){case pr.NoChange:e.isActiveTarget(n)&&r.updateResumeToken(t.resumeToken);break;case pr.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(t.resumeToken);break;case pr.Removed:r.recordTargetResponse(),r.isPending||e.removeTarget(n),c(!t.cause,"WatchChangeAggregator does not handle errored targets");break;case pr.Current:e.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(t.resumeToken));break;case pr.Reset:e.isActiveTarget(n)&&(e.resetTarget(n),r.updateResumeToken(t.resumeToken));break;default:u("Unknown target watch change state: "+t.state)}})},t.prototype.forEachTarget=function(t,e){t.targetIds.length>0?t.targetIds.forEach(e):d(this.targetStates,e)},t.prototype.handleExistenceFilter=function(t){var e=t.targetId,n=t.existenceFilter.count,r=this.queryDataForActiveTarget(e);if(r){var i=r.query;if(i.isDocumentQuery())if(0===n){var o=new Ye(i.path);this.removeDocumentFromTarget(e,o,new Ze(o,jn.forDeletedDoc()))}else c(1===n,"Single document existence filter with count: "+n);else{this.getCurrentDocumentCountForTarget(e)!==n&&(this.resetTarget(e),this.pendingTargetResets=this.pendingTargetResets.add(e))}}},t.prototype.createRemoteEvent=function(t){var e=this,n={};d(this.targetStates,function(r,i){var o=e.queryDataForActiveTarget(r);if(o){if(i.current&&o.query.isDocumentQuery()){var a=new Ye(o.query.path);null!==e.pendingDocumentUpdates.get(a)||e.targetContainsDocument(r,a)||e.removeDocumentFromTarget(r,a,new Ze(a,t))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}});var r=ut();this.pendingDocumentTargetMapping.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.queryDataForActiveTarget(t);return!n||n.purpose===un.LimboResolution||(i=!1,!1)}),i&&(r=r.add(t))});var i=new vr(t,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=it(),this.pendingDocumentTargetMapping=ht(),this.pendingTargetResets=new Bn(V),i},t.prototype.addDocumentToTarget=function(t,e){if(this.isActiveTarget(t)){var n=this.targetContainsDocument(t,e.key)?or.Modified:or.Added;this.ensureTargetState(t).addDocumentChange(e.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e.key,e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e.key,this.ensureDocumentTargetMapping(e.key).add(t))}},t.prototype.removeDocumentFromTarget=function(t,e,n){if(this.isActiveTarget(t)){var r=this.ensureTargetState(t);this.targetContainsDocument(t,e)?r.addDocumentChange(e,or.Removed):r.removeDocumentChange(e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,this.ensureDocumentTargetMapping(e).delete(t)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e,n))}},t.prototype.removeTarget=function(t){delete this.targetStates[t]},t.prototype.getCurrentDocumentCountForTarget=function(t){var e=this.ensureTargetState(t),n=e.toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size},t.prototype.recordPendingTargetRequest=function(t){this.ensureTargetState(t).recordPendingTargetRequest()},t.prototype.ensureTargetState=function(t){return this.targetStates[t]||(this.targetStates[t]=new wr),this.targetStates[t]},t.prototype.ensureDocumentTargetMapping=function(t){var e=this.pendingDocumentTargetMapping.get(t);return e||(e=new Bn(V),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,e)),e},t.prototype.isActiveTarget=function(t){return null!==this.queryDataForActiveTarget(t)},t.prototype.queryDataForActiveTarget=function(t){var e=this.targetStates[t];return e&&e.isPending?null:this.metadataProvider.getQueryDataForTarget(t)},t.prototype.resetTarget=function(t){var e=this;c(!this.targetStates[t].isPending,"Should only reset active targets"),this.targetStates[t]=new wr,this.metadataProvider.getRemoteKeysForTarget(t).forEach(function(n){e.removeDocumentFromTarget(t,n,null)})},t.prototype.targetContainsDocument=function(t,e){return this.metadataProvider.getRemoteKeysForTarget(t).has(e)},t}(),Tr=function(){var t={};return t[Pn.ASCENDING.name]="ASCENDING",t[Pn.DESCENDING.name]="DESCENDING",t}(),Sr=function(){var t={};return t[Dn.LESS_THAN.name]="LESS_THAN",t[Dn.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",t[Dn.GREATER_THAN.name]="GREATER_THAN",t[Dn.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",t[Dn.EQUAL.name]="EQUAL",t[Dn.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",t}(),Cr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/),Ir=function(){function t(t,e){this.databaseId=t,this.options=e}return t.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},t.prototype.unsafeCastProtoByteString=function(t){return t},t.prototype.fromRpcStatus=function(t){var e=void 0===t.code?Me.UNKNOWN:et(t.code);return new Fe(e,t.message||"")},t.prototype.toInt32Value=function(t){return $(t)?void 0:{value:t}},t.prototype.fromInt32Value=function(t){var e;return e="object"==typeof t?t.value:t,$(e)?null:e},t.prototype.toTimestamp=function(t){return{seconds:t.seconds,nanos:t.nanoseconds}},t.prototype.fromTimestamp=function(t){if("string"==typeof t)return this.fromIso8601String(t);c(!!t,"Cannot deserialize null or undefined timestamp.");var e=pt(t.seconds||"0"),n=t.nanos||0;return new Be(e,n)},t.prototype.fromIso8601String=function(t){var e=0,n=Cr.exec(t);if(c(!!n,"invalid timestamp: "+t),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t),o=Math.floor(i.getTime()/1e3);return new Be(o,e)},t.prototype.toBytes=function(t){return this.options.useProto3Json?t.toBase64():this.unsafeCastProtoByteString(t.toUint8Array())},t.prototype.fromBlob=function(t){return"string"==typeof t?(c(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),je.fromBase64String(t)):(c(!this.options.useProto3Json,"Expected bytes to be passed in as string, but got something else instead."),je.fromUint8Array(t))},t.prototype.toVersion=function(t){return this.toTimestamp(t.toTimestamp())},t.prototype.fromVersion=function(t){return c(!!t,"Trying to deserialize version that isn't set"),jn.fromTimestamp(this.fromTimestamp(t))},t.prototype.toResourceName=function(t,e){return this.fullyQualifiedPrefixPath(t).child("documents").child(e).canonicalString()},t.prototype.fromResourceName=function(t){var e=He.fromString(t);return c(this.isValidResourceName(e),"Tried to deserialize invalid key "+e.toString()),e},t.prototype.toName=function(t){return this.toResourceName(this.databaseId,t.path)},t.prototype.fromName=function(t){var e=this.fromResourceName(t);return c(e.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+e.get(1)+" vs "+this.databaseId.projectId),c(!e.get(3)&&!this.databaseId.database||e.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+e.get(3)+" vs "+this.databaseId.database),new Ye(this.extractLocalPathFromResourceName(e))},t.prototype.toQueryPath=function(t){return this.toResourceName(this.databaseId,t)},t.prototype.fromQueryPath=function(t){var e=this.fromResourceName(t);return 4===e.length?He.EMPTY_PATH:this.extractLocalPathFromResourceName(e)},Object.defineProperty(t.prototype,"encodedDatabaseId",{get:function(){return new He(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),t.prototype.fullyQualifiedPrefixPath=function(t){return new He(["projects",t.projectId,"databases",t.database])},t.prototype.extractLocalPathFromResourceName=function(t){return c(t.length>4&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.popFirst(5)},t.prototype.isValidResourceName=function(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)},t.prototype.toValue=function(t){if(t instanceof ln)return{nullValue:"NULL_VALUE"};if(t instanceof fn)return{booleanValue:t.value()};if(t instanceof dn)return{integerValue:""+t.value()};if(t instanceof yn){var e=t.value();if(this.options.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:t.value()}}return t instanceof vn?{stringValue:t.value()}:t instanceof En?{mapValue:this.toMapValue(t)}:t instanceof Tn?{arrayValue:this.toArrayValue(t)}:t instanceof mn?{timestampValue:this.toTimestamp(t.internalValue)}:t instanceof wn?{geoPointValue:{latitude:t.value().latitude,longitude:t.value().longitude}}:t instanceof bn?{bytesValue:this.toBytes(t.value())}:t instanceof _n?{referenceValue:this.toResourceName(t.databaseId,t.key.path)}:u("Unknown FieldValue "+JSON.stringify(t))},t.prototype.fromValue=function(t){var e=this,n=t.value_type;if(dt(t,n,"nullValue"))return ln.INSTANCE;if(dt(t,n,"booleanValue"))return fn.of(t.booleanValue);if(dt(t,n,"integerValue"))return new dn(pt(t.integerValue));if(dt(t,n,"doubleValue")){if(this.options.useProto3Json){if("NaN"===t.doubleValue)return yn.NAN;if("Infinity"===t.doubleValue)return yn.POSITIVE_INFINITY;if("-Infinity"===t.doubleValue)return yn.NEGATIVE_INFINITY}return new yn(t.doubleValue)}if(dt(t,n,"stringValue"))return new vn(t.stringValue);if(dt(t,n,"mapValue"))return this.fromFields(t.mapValue.fields||{});if(dt(t,n,"arrayValue")){ft(t.arrayValue,"arrayValue");var r=t.arrayValue.values||[];return new Tn(r.map(function(t){return e.fromValue(t)}))}if(dt(t,n,"timestampValue"))return ft(t.timestampValue,"timestampValue"),new mn(this.fromTimestamp(t.timestampValue));if(dt(t,n,"geoPointValue")){ft(t.geoPointValue,"geoPointValue");var i=t.geoPointValue.latitude||0,o=t.geoPointValue.longitude||0;return new wn(new Ve(i,o))}if(dt(t,n,"bytesValue")){ft(t.bytesValue,"bytesValue");var a=this.fromBlob(t.bytesValue);return new bn(a)}if(dt(t,n,"referenceValue")){ft(t.referenceValue,"referenceValue");var s=this.fromResourceName(t.referenceValue),c=new Qe(s.get(1),s.get(3)),h=new Ye(this.extractLocalPathFromResourceName(s));return new _n(c,h)}return u("Unknown Value proto "+JSON.stringify(t))},t.prototype.toMutationDocument=function(t,e){return{name:this.toName(t),fields:this.toFields(e)}},t.prototype.toDocument=function(t){return c(!t.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(t.key),fields:this.toFields(t.data),updateTime:this.toTimestamp(t.version.toTimestamp())}},t.prototype.fromDocument=function(t,e){return new Je(this.fromName(t.name),this.fromVersion(t.updateTime),this.fromFields(t.fields||{}),{hasCommittedMutations:!!e})},t.prototype.toFields=function(t){var e=this,n={};return t.forEach(function(t,r){n[t]=e.toValue(r)}),n},t.prototype.fromFields=function(t){var e=this,n=t,r=En.EMPTY;return v(n,function(t,n){r=r.set(new $e([t]),e.fromValue(n))}),r},t.prototype.toMapValue=function(t){return{fields:this.toFields(t)}},t.prototype.toArrayValue=function(t){var e=this,n=[];return t.forEach(function(t){n.push(e.toValue(t))}),{values:n}},t.prototype.fromFound=function(t){c(!!t.found,"Tried to deserialize a found document from a missing document."),ft(t.found.name,"doc.found.name"),ft(t.found.updateTime,"doc.found.updateTime");var e=this.fromName(t.found.name),n=this.fromVersion(t.found.updateTime),r=this.fromFields(t.found.fields||{});return new Je(e,n,r,{},t.found)},t.prototype.fromMissing=function(t){c(!!t.missing,"Tried to deserialize a missing document from a found document."),c(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.fromName(t.missing),n=this.fromVersion(t.readTime);return new Ze(e,n)},t.prototype.fromMaybeDocument=function(t){var e=t.result;return dt(t,e,"found")?this.fromFound(t):dt(t,e,"missing")?this.fromMissing(t):u("invalid batch get response: "+JSON.stringify(t))},t.prototype.toWatchTargetChangeState=function(t){switch(t){case pr.Added:return"ADD";case pr.Current:return"CURRENT";case pr.NoChange:return"NO_CHANGE";case pr.Removed:return"REMOVE";case pr.Reset:return"RESET";default:return u("Unknown WatchTargetChangeState: "+t)}},t.prototype.toTestWatchChange=function(t){if(t instanceof br)return{filter:{count:t.existenceFilter.count,targetId:t.targetId}};if(t instanceof gr){if(t.newDoc instanceof Je){var e=t.newDoc;return{documentChange:{document:{name:this.toName(e.key),fields:this.toFields(e.data),updateTime:this.toVersion(e.version)},targetIds:t.updatedTargetIds,removedTargetIds:t.removedTargetIds}}}if(t.newDoc instanceof Ze){var e=t.newDoc;return{documentDelete:{document:this.toName(e.key),readTime:this.toVersion(e.version),removedTargetIds:t.removedTargetIds}}}if(null===t.newDoc)return{documentRemove:{document:this.toName(t.key),removedTargetIds:t.removedTargetIds}}}if(t instanceof _r){var n=void 0;return t.cause&&(n={code:nt(t.cause.code),message:t.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(t.state),targetIds:t.targetIds,resumeToken:this.unsafeCastProtoByteString(t.resumeToken),cause:n}}}return u("Unrecognized watch change: "+JSON.stringify(t))},t.prototype.fromWatchChange=function(t){var e,n=t.response_type;if(dt(t,n,"targetChange")){ft(t.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=t.targetChange.resumeToken||this.emptyByteString(),a=t.targetChange.cause,s=a&&this.fromRpcStatus(a);e=new _r(r,i,o,s||null)}else if(dt(t,n,"documentChange")){ft(t.documentChange,"documentChange"),ft(t.documentChange.document,"documentChange.name"),ft(t.documentChange.document.name,"documentChange.document.name"),ft(t.documentChange.document.updateTime,"documentChange.document.updateTime");var c=t.documentChange,h=this.fromName(c.document.name),l=this.fromVersion(c.document.updateTime),f=this.fromFields(c.document.fields||{}),p=new Je(h,l,f,{},c.document),d=c.targetIds||[],y=c.removedTargetIds||[];e=new gr(d,y,p.key,p)}else if(dt(t,n,"documentDelete")){ft(t.documentDelete,"documentDelete"),ft(t.documentDelete.document,"documentDelete.document");var v=t.documentDelete,h=this.fromName(v.document),l=v.readTime?this.fromVersion(v.readTime):jn.forDeletedDoc(),p=new Ze(h,l),y=v.removedTargetIds||[];e=new gr([],y,p.key,p)}else if(dt(t,n,"documentRemove")){ft(t.documentRemove,"documentRemove"),ft(t.documentRemove.document,"documentRemove");var m=t.documentRemove,h=this.fromName(m.document),y=m.removedTargetIds||[];e=new gr([],y,h,null)}else{if(!dt(t,n,"filter"))return u("Unknown change type "+JSON.stringify(t));ft(t.filter,"filter"),ft(t.filter.targetId,"filter.targetId");var g=t.filter,b=g.count||0,_=new ir(b),w=g.targetId;e=new br(w,_)}return e},t.prototype.fromWatchTargetChangeState=function(t){return"NO_CHANGE"===t?pr.NoChange:"ADD"===t?pr.Added:"REMOVE"===t?pr.Removed:"CURRENT"===t?pr.Current:"RESET"===t?pr.Reset:u("Got unexpected TargetChange.state: "+t)},t.prototype.versionFromListenResponse=function(t){if(!dt(t,t.response_type,"targetChange"))return jn.MIN;var e=t.targetChange;return e.targetIds&&e.targetIds.length?jn.MIN:e.readTime?this.fromVersion(e.readTime):jn.MIN},t.prototype.toMutation=function(t){var e,n=this;if(t instanceof Yn)e={update:this.toMutationDocument(t.key,t.value)};else if(t instanceof Zn)e={delete:this.toName(t.key)};else if(t instanceof Xn)e={update:this.toMutationDocument(t.key,t.data),updateMask:this.toDocumentMask(t.fieldMask)};else{if(!(t instanceof Jn))return u("Unknown mutation type "+t.type);e={transform:{document:this.toName(t.key),fieldTransforms:t.fieldTransforms.map(function(t){return n.toFieldTransform(t)})}}}return t.precondition.isNone||(e.currentDocument=this.toPrecondition(t.precondition)),e},t.prototype.fromMutation=function(t){var e=this,n=t.currentDocument?this.fromPrecondition(t.currentDocument):zn.NONE;if(t.update){ft(t.update.name,"name");var r=this.fromName(t.update.name),i=this.fromFields(t.update.fields||{});if(t.updateMask){var o=this.fromDocumentMask(t.updateMask);return new Xn(r,i,o,n)}return new Yn(r,i,n)}if(t.delete){var r=this.fromName(t.delete);return new Zn(r,n)}if(t.transform){var r=this.fromName(t.transform.document),a=t.transform.fieldTransforms.map(function(t){return e.fromFieldTransform(t)});return c(!0===n.exists,'Transforms only support precondition "exists == true"'),new Jn(r,a)}return u("unknown mutation proto: "+JSON.stringify(t))},t.prototype.toPrecondition=function(t){return c(!t.isNone,"Can't serialize an empty precondition"),void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:u("Unknown precondition")},t.prototype.fromPrecondition=function(t){return void 0!==t.updateTime?zn.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?zn.exists(t.exists):zn.NONE},t.prototype.fromWriteResult=function(t,e){var n=this,r=t.updateTime?this.fromVersion(t.updateTime):this.fromVersion(e),i=null;return t.transformResults&&t.transformResults.length>0&&(i=t.transformResults.map(function(t){return n.fromValue(t)})),new Gn(r,i)},t.prototype.fromWriteResults=function(t,e){var n=this;return t&&t.length>0?(c(void 0!==e,"Received a write result without a commit time"),t.map(function(t){return n.fromWriteResult(t,e)})):[]},t.prototype.toFieldTransform=function(t){var e=this,n=t.transform;if(n instanceof tr)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof er)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements.map(function(t){return e.toValue(t)})}};if(n instanceof nr)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements.map(function(t){return e.toValue(t)})}};if(n instanceof rr)return{fieldPath:t.field.canonicalString(),increment:this.toValue(n.operand)};throw u("Unknown transform: "+t.transform)},t.prototype.fromFieldTransform=function(t){var e=this,n=t.transform_type,r=null;if(dt(t,n,"setToServerValue"))c("REQUEST_TIME"===t.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(t)),r=tr.instance;else if(dt(t,n,"appendMissingElements")){var i=t.appendMissingElements.values||[];r=new er(i.map(function(t){return e.fromValue(t)}))}else if(dt(t,n,"removeAllFromArray")){var i=t.removeAllFromArray.values||[];r=new nr(i.map(function(t){return e.fromValue(t)}))}else if(dt(t,n,"increment")){var o=this.fromValue(t.increment);c(o instanceof pn,"NUMERIC_ADD transform requires a NumberValue"),r=new rr(o)}else u("Unknown transform proto: "+JSON.stringify(t));var a=$e.fromServerFormat(t.fieldPath);return new Qn(a,r)},t.prototype.toDocumentsTarget=function(t){return{documents:[this.toQueryPath(t.path)]}},t.prototype.fromDocumentsTarget=function(t){var e=t.documents.length;c(1===e,"DocumentsTarget contained other than 1 document: "+e);var n=t.documents[0];return An.atPath(this.fromQueryPath(n))},t.prototype.toQueryTarget=function(t){var e={structuredQuery:{}},n=t.path;null!==t.collectionGroup?(c(n.length%2==0,"Collection Group queries should be within a document path or root."),e.parent=this.toQueryPath(n),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(c(n.length%2!=0,"Document queries with filters are not supported."),e.parent=this.toQueryPath(n.popLast()),e.structuredQuery.from=[{collectionId:n.lastSegment()}]);var r=this.toFilter(t.filters);r&&(e.structuredQuery.where=r);var i=this.toOrder(t.orderBy);i&&(e.structuredQuery.orderBy=i);var o=this.toInt32Value(t.limit);return void 0!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.toCursor(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.toCursor(t.endAt)),e},t.prototype.fromQueryTarget=function(t){var e=this.fromQueryPath(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){c(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=this.fromFilter(n.where));var s=[];n.orderBy&&(s=this.fromOrder(n.orderBy));var u=null;n.limit&&(u=this.fromInt32Value(n.limit));var h=null;n.startAt&&(h=this.fromCursor(n.startAt));var l=null;return n.endAt&&(l=this.fromCursor(n.endAt)),new An(e,i,s,a,u,h,l)},t.prototype.toListenRequestLabels=function(t){var e=this.toLabel(t.purpose);return null==e?null:{"goog-listen-tags":e}},t.prototype.toLabel=function(t){switch(t){case un.Listen:return null;case un.ExistenceFilterMismatch:return"existence-filter-mismatch";case un.LimboResolution:return"limbo-document";default:return u("Unrecognized query purpose: "+t)}},t.prototype.toTarget=function(t){var e,n=t.query;return e=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)},e.targetId=t.targetId,t.resumeToken.length>0&&(e.resumeToken=this.unsafeCastProtoByteString(t.resumeToken)),e},t.prototype.toFilter=function(t){var e=this;if(0!==t.length){var n=t.map(function(t){return t instanceof On?e.toRelationFilter(t):e.toUnaryFilter(t)});return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},t.prototype.fromFilter=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.fromUnaryFilter(t)]:void 0!==t.fieldFilter?[this.fromRelationFilter(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e.fromFilter(t)}).reduce(function(t,e){return t.concat(e)}):u("Unknown filter: "+JSON.stringify(t)):[]},t.prototype.toOrder=function(t){var e=this;if(0!==t.length)return t.map(function(t){return e.toPropertyOrder(t)})},t.prototype.fromOrder=function(t){var e=this;return t.map(function(t){return e.fromPropertyOrder(t)})},t.prototype.toCursor=function(t){var e=this;return{before:t.before,values:t.position.map(function(t){return e.toValue(t)})}},t.prototype.fromCursor=function(t){var e=this,n=!!t.before,r=t.values.map(function(t){return e.fromValue(t)});return new Ln(r,n)},t.prototype.toDirection=function(t){return Tr[t.name]},t.prototype.fromDirection=function(t){switch(t){case"ASCENDING":return Pn.ASCENDING;case"DESCENDING":return Pn.DESCENDING;default:return}},t.prototype.toOperatorName=function(t){return Sr[t.name]},t.prototype.fromOperatorName=function(t){switch(t){case"EQUAL":return Dn.EQUAL;case"GREATER_THAN":return Dn.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return Dn.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return Dn.LESS_THAN;case"LESS_THAN_OR_EQUAL":return Dn.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return Dn.ARRAY_CONTAINS;case"OPERATOR_UNSPECIFIED":return u("Unspecified relation");default:return u("Unknown relation")}},t.prototype.toFieldPathReference=function(t){return{fieldPath:t.canonicalString()}},t.prototype.fromFieldPathReference=function(t){return $e.fromServerFormat(t.fieldPath)},t.prototype.toPropertyOrder=function(t){return{field:this.toFieldPathReference(t.field),direction:this.toDirection(t.dir)}},t.prototype.fromPropertyOrder=function(t){return new Mn(this.fromFieldPathReference(t.field),this.fromDirection(t.direction))},t.prototype.toRelationFilter=function(t){return t instanceof On?{fieldFilter:{field:this.toFieldPathReference(t.field),op:this.toOperatorName(t.op),value:this.toValue(t.value)}}:u("Unrecognized filter: "+JSON.stringify(t))},t.prototype.fromRelationFilter=function(t){return new On(this.fromFieldPathReference(t.fieldFilter.field),this.fromOperatorName(t.fieldFilter.op),this.fromValue(t.fieldFilter.value))},t.prototype.toUnaryFilter=function(t){return t instanceof xn?{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NAN"}}:t instanceof Rn?{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NULL"}}:u("Unrecognized filter: "+JSON.stringify(t))},t.prototype.fromUnaryFilter=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.fromFieldPathReference(t.unaryFilter.field);return new xn(e);case"IS_NULL":var n=this.fromFieldPathReference(t.unaryFilter.field);return new Rn(n);case"OPERATOR_UNSPECIFIED":return u("Unspecified filter");default:return u("Unknown filter")}},t.prototype.toDocumentMask=function(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}},t.prototype.fromDocumentMask=function(t){var e=t.fieldPaths||[],n=e.map(function(t){return $e.fromServerFormat(t)});return Kn.fromArray(n)},t}(),kr=function(){function t(t){this.sendFn=t.sendFn,this.closeFn=t.closeFn}return t.prototype.onOpen=function(t){c(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=t},t.prototype.onClose=function(t){c(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=t},t.prototype.onMessage=function(t){c(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=t},t.prototype.close=function(){this.closeFn()},t.prototype.send=function(t){this.sendFn(t)},t.prototype.callOnOpen=function(){c(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},t.prototype.callOnClose=function(t){c(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(t)},t.prototype.callOnMessage=function(t){c(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(t)},t}(),Ar="Connection",Nr={BatchGetDocuments:"batchGet",Commit:"commit"},Dr="gl-js/ fire/"+xe,Or=function(){function t(t){this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.baseUrl=e+"://"+t.host}return t.prototype.modifyHeadersForRequest=function(t,e){if(e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n]);t["X-Goog-Api-Client"]=Dr},t.prototype.invokeRPC=function(t,e,n){var r=this,i=this.makeUrl(t);return new Promise(function(a,s){var c=new Oe.XhrIo;c.listenOnce(Oe.EventType.COMPLETE,function(){try{switch(c.getLastErrorCode()){case Oe.ErrorCode.NO_ERROR:var e=c.getResponseJson();o(Ar,"XHR received:",JSON.stringify(e)),a(e);break;case Oe.ErrorCode.TIMEOUT:o(Ar,'RPC "'+t+'" timed out'),s(new Fe(Me.DEADLINE_EXCEEDED,"Request time out"));break;case Oe.ErrorCode.HTTP_ERROR:var n=c.getStatus();o(Ar,'RPC "'+t+'" failed with status:',n,"response text:",c.getResponseText()),n>0?s(new Fe(rt(n),"Server responded with status "+c.getStatusText())):(o(Ar,'RPC "'+t+'" failed'),s(new Fe(Me.UNAVAILABLE,"Connection failed.")));break;default:u('RPC "'+t+'" failed with unanticipated webchannel error '+c.getLastErrorCode()+": "+c.getLastError()+", giving up.")}}finally{o(Ar,'RPC "'+t+'" completed.')}});var h=JSON.stringify(e);o(Ar,"XHR sending: ",i+" "+h);var l={"Content-Type":"text/plain"};r.modifyHeadersForRequest(l,n),c.send(i,"POST",h,l,15)})},t.prototype.invokeStreamingRPC=function(t,e,n){return this.invokeRPC(t,e,n)},t.prototype.openStream=function(t,e){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=Oe.createWebChannelTransport(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5}};this.modifyHeadersForRequest(i.initMessageHeaders,e),Re.isReactNative()||(i.httpHeadersOverwriteParam="$httpHeaders");var a=n.join("");o(Ar,"Creating WebChannel: "+a+" "+i);var s=r.createWebChannel(a,i),u=!1,h=!1,l=new kr({sendFn:function(t){h?o(Ar,"Not sending because WebChannel is closed:",t):(u||(o(Ar,"Opening WebChannel transport."),s.open(),u=!0),o(Ar,"WebChannel sending:",t),s.send(t))},closeFn:function(){return s.close()}}),f=function(t,e){s.listen(t,function(t){try{e(t)}catch(t){setTimeout(function(){throw t},0)}})};return f(Oe.WebChannel.EventType.OPEN,function(){h||o(Ar,"WebChannel transport opened.")}),f(Oe.WebChannel.EventType.CLOSE,function(){h||(h=!0,o(Ar,"WebChannel transport closed"),l.callOnClose())}),f(Oe.WebChannel.EventType.ERROR,function(t){h||(h=!0,o(Ar,"WebChannel transport errored:",t),l.callOnClose(new Fe(Me.UNAVAILABLE,"The operation could not be completed")))}),f(Oe.WebChannel.EventType.MESSAGE,function(t){if(!h){var e=t.data[0];c(!!e,"Got a webchannel message without data.");var n=e.error||e[0]&&e[0].error;if(n){o(Ar,"WebChannel received error:",n);var r=n.status,i=tt(r),a=n.message;void 0===i&&(i=Me.INTERNAL,a="Unknown error status: "+r+" with message "+n.message),h=!0,l.callOnClose(new Fe(i,a)),s.close()}else o(Ar,"WebChannel received:",e),l.callOnMessage(e)}}),setTimeout(function(){l.callOnOpen()},0),l},t.prototype.makeUrl=function(t){var e=Nr[t];c(void 0!==e,"Unknown REST mapping for: "+t);var n=[this.baseUrl,"/","v1"];return n.push("/projects/"),n.push(this.databaseId.projectId),n.push("/databases/"),n.push(this.databaseId.database),n.push("/documents"),n.push(":"),n.push(e),n.join("")},t}(),Rr=function(){function t(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}return Object.defineProperty(t.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),t.prototype.loadConnection=function(t){return Promise.resolve(new Or(t))},t.prototype.newSerializer=function(t){return new Ir(t,{useProto3Json:!0})},t.prototype.formatJSON=function(t){return JSON.stringify(t)},t.prototype.atob=function(t){return atob(t)},t.prototype.btoa=function(t){return btoa(t)},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Le.setPlatform(new Rr);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var xr,Pr=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.setPreviousValue(t)},this.writeNewSequenceNumber=function(t){return e.writeSequenceNumber(t)})}return t.prototype.setPreviousValue=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(t),t},t.INVALID=-1,t}(),Lr=function(){function t(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t}();!function(t){t.All="all",t.ListenStreamIdle="listen_stream_idle",t.ListenStreamConnectionBackoff="listen_stream_connection_backoff",t.WriteStreamIdle="write_stream_idle",t.WriteStreamConnectionBackoff="write_stream_connection_backoff",t.OnlineStateTimeout="online_state_timeout",t.ClientMetadataRefresh="client_metadata_refresh",t.LruGarbageCollection="lru_garbage_collection"}(xr||(xr={}));var Mr,Fr=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var a=Date.now()+r,s=new t(e,n,a,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Fe(Me.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}(),Ur=function(){function t(){this.tail=Promise.resolve(),this.delayedOperations=[],this.operationInProgress=!1}return t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueue=function(t){var e=this;this.verifyNotFailed();var n=this.tail.then(function(){return e.operationInProgress=!0,t().catch(function(t){e.failure=t,e.operationInProgress=!1;var n=t.stack||t.message||"";throw a("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout(function(){throw t},0),t}).then(function(t){return e.operationInProgress=!1,t})});return this.tail=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.verifyNotFailed(),c(e>=0,"Attempted to schedule an operation with a negative delay of "+e),c(!this.containsDelayedOperation(t),"Attempted to schedule multiple operations with timer id "+t+".");var i=Fr.createAndSchedule(this,t,e,n,function(t){return r.removeDelayedOperation(t)});return this.delayedOperations.push(i),i},t.prototype.verifyNotFailed=function(){this.failure&&u("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},t.prototype.verifyOperationInProgress=function(){c(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},t.prototype.drain=function(){return this.enqueue(function(){return Promise.resolve()})},t.prototype.containsDelayedOperation=function(t){for(var e=0,n=this.delayedOperations;e<n.length;e++){if(n[e].timerId===t)return!0}return!1},t.prototype.runDelayedOperationsEarly=function(t){var e=this;return this.drain().then(function(){c(t===xr.All||e.containsDelayedOperation(t),"Attempted to drain to missing operation "+t),e.delayedOperations.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),t!==xr.All&&i.timerId===t)break}return e.drain()})},t.prototype.removeDelayedOperation=function(t){var e=this.delayedOperations.indexOf(t);c(e>=0,"Delayed operation not found."),this.delayedOperations.splice(e,1)},t}(),jr="",qr="",Vr="",Br="",Wr=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r,c(r.length>0,"Cannot create an empty mutation batch")}return t.prototype.applyToRemoteDocument=function(t,e,n){e&&c(e.key.isEqual(t),"applyToRemoteDocument: key "+t+" should match maybeDoc key\n        "+e.key);var r=n.mutationResults;c(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(t)){var a=r[i];e=o.applyToRemoteDocument(e,a)}}return e},t.prototype.applyToLocalView=function(t,e){e&&c(e.key.isEqual(t),"applyToLocalDocument: key "+t+" should match maybeDoc key\n        "+e.key);for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=i.applyToLocalView(e,e,this.localWriteTime))}for(var o=e,a=0,s=this.mutations;a<s.length;a++){var i=s[a];i.key.isEqual(t)&&(e=i.applyToLocalView(e,o,this.localWriteTime))}return e},t.prototype.applyToLocalDocumentSet=function(t){var e=this,n=t;return this.mutations.forEach(function(r){var i=e.applyToLocalView(r.key,t.get(r.key));i&&(n=n.insert(r.key,i))}),n},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},ut())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&W(this.mutations,t.mutations)&&W(this.baseMutations,t.baseMutations)},t}(),Kr=function(){function t(t,e,n,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.streamToken=r,this.docVersions=i}return t.from=function(e,n,r,i){c(e.mutations.length===r.length,"Mutations sent "+e.mutations.length+" must equal results received "+r.length);for(var o=st(),a=e.mutations,s=0;s<a.length;s++)o=o.insert(a[s].key,r[s].version);return new t(e,n,r,i,o)},t}(),Qr=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&u("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=0,i=e;r<i.length;r++){var o=i[r];!function(e){n=n.next(function(n){return n?t.resolve(n):e()})}(o)}return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),Gr=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}return t.forUser=function(e,n,r,i){return c(""!==e.uid,"UserID must not be an empty string."),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Tt(t).iterate({index:pi.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.acknowledgeBatch=function(t,e,n){return this.getMutationQueueMetadata(t).next(function(e){return e.lastStreamToken=Et(n),Ct(t).put(e)})},t.prototype.getLastStreamToken=function(t){return this.getMutationQueueMetadata(t).next(function(t){return t.lastStreamToken})},t.prototype.setLastStreamToken=function(t,e){return this.getMutationQueueMetadata(t).next(function(n){return n.lastStreamToken=Et(e),Ct(t).put(n)})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=St(t),a=Tt(t);return a.add({}).next(function(s){c("number"==typeof s,"Auto-generated key is not a number");var u=new Wr(s,e,n,r),h=i.serializer.toDbMutationBatch(i.userId,u);i.documentKeysByBatchId[s]=u.keys();for(var l=[],f=0,p=r;f<p.length;f++){var d=p[f],y=di.key(i.userId,d.key.path,s);l.push(a.put(h)),l.push(o.put(y,di.PLACEHOLDER)),l.push(i.indexManager.addToCollectionParentIndex(t,d.key.path.popLast()))}return Qr.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Tt(t).get(e).next(function(t){return t?(c(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),n.serializer.fromDbMutationBatch(t)):null})},t.prototype.lookupMutationKeys=function(t,e){var n=this;return this.documentKeysByBatchId[e]?Qr.resolve(this.documentKeysByBatchId[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.documentKeysByBatchId[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this;return this.getMutationQueueMetadata(t).next(function(r){var i=e+1,o=IDBKeyRange.lowerBound([n.userId,i]),a=null;return Tt(t).iterate({index:pi.userMutationsIndex,range:o},function(t,e,r){e.userId===n.userId&&(c(e.batchId>=i,"Should have found mutation after "+i),a=n.serializer.fromDbMutationBatch(e)),r.done()}).next(function(){return a})})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Tt(t).loadAll(pi.userMutationsIndex,n).next(function(t){return t.map(function(t){return e.serializer.fromDbMutationBatch(t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=di.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return St(t).iterate({range:i},function(r,i,a){var s=r[0],h=r[1],l=r[2],f=gt(h);return s===n.userId&&e.path.isEqual(f)?Tt(t).get(l).next(function(t){if(!t)throw u("Dangling document-mutation reference found: "+r+" which points to "+l);c(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+l),o.push(n.serializer.fromDbMutationBatch(t))}):void a.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Bn(V),i=[];return e.forEach(function(e){var o=di.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=St(t).iterate({range:a},function(t,i,o){var a=t[0],s=t[1],u=t[2],c=gt(s);if(a!==n.userId||!e.path.isEqual(c))return void o.done();r=r.add(u)});i.push(s)}),Qr.waitFor(i).next(function(){return n.lookupMutationBatches(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this;c(!e.isDocumentQuery(),"Document queries shouldn't go down this path"),c(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=e.path,i=r.length+1,o=di.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new Bn(V);return St(t).iterate({range:a},function(t,e,o){var a=t[0],u=t[1],c=t[2],h=gt(u);if(a!==n.userId||!r.isPrefixOf(h))return void o.done();h.length===i&&(s=s.add(c))}).next(function(){return n.lookupMutationBatches(t,s)})},t.prototype.lookupMutationBatches=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(Tt(t).get(e).next(function(t){if(null===t)throw u("Dangling document-mutation reference found, which points to "+e);c(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),r.push(n.serializer.fromDbMutationBatch(t))}))}),Qr.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return wt(t.simpleDbTransaction,this.userId,e).next(function(r){return n.removeCachedMutationKeys(e.batchId),Qr.forEach(r,function(e){return n.referenceDelegate.removeMutationReference(t,e)})})},t.prototype.removeCachedMutationKeys=function(t){delete this.documentKeysByBatchId[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Qr.resolve();var r=IDBKeyRange.lowerBound(di.prefixForUser(e.userId)),i=[];return St(t).iterate({range:r},function(t,n,r){if(t[0]!==e.userId)return void r.done();var o=gt(t[1]);i.push(o)}).next(function(){c(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map(function(t){return t.canonicalString()}))})})},t.prototype.containsKey=function(t,e){return bt(t,this.userId,e)},t.prototype.getMutationQueueMetadata=function(t){var e=this;return Ct(t).get(this.userId).next(function(t){return t||new fi(e.userId,-1,"")})},t}(),Hr=1;!function(t){t[t.QueryCache=0]="QueryCache",t[t.SyncEngine=1]="SyncEngine"}(Mr||(Mr={}));var zr,$r=function(){function t(t,e){this.generatorId=t,c((t&Hr)===t,"Generator ID "+t+" contains more than "+Hr+" reserved bits"),this.seek(void 0!==e?e:this.generatorId)}return t.prototype.next=function(){var t=this.nextId;return this.nextId+=1<<Hr,t},t.prototype.after=function(t){return this.seek(t+(1<<Hr)),this.next()},t.prototype.seek=function(t){c((t&Hr)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=t},t.forQueryCache=function(){return new t(Mr.QueryCache,2)},t.forSyncEngine=function(){return new t(Mr.SyncEngine)},t}(),Yr=function(){function t(t){this.db=t}return t.openOrCreate=function(e,n,r){return c(t.isAvailable(),"IndexedDB not supported in current environment."),o("SimpleDb","Opening database:",e),new Qr(function(i,a){var s=window.indexedDB.open(e,n);s.onsuccess=function(e){var n=e.target.result;i(new t(n))},s.onblocked=function(){a(new Fe(Me.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=function(t){var e=t.target.error;a("VersionError"===e.name?new Fe(Me.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):e)},s.onupgradeneeded=function(t){o("SimpleDb",'Database "'+e+'" requires upgrade from version:',t.oldVersion);var n=t.target.result,i=new Jr(s.transaction);r.createOrUpgrade(n,i,t.oldVersion,ui).next(function(){o("SimpleDb","Database upgrade to version "+ui+" complete")})}}).toPromise()},t.delete=function(t){return o("SimpleDb","Removing database:",t),It(window.indexedDB.deleteDatabase(t)).toPromise()},t.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(void 0===window.navigator)return"YES"===n.i({NODE_ENV:"production"}).USE_MOCK_PERSISTENCE;var t=window.navigator.userAgent;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0)},t.getStore=function(t,e){return t.store(e)},t.prototype.runTransaction=function(t,e,n){var r=Jr.open(this.db,t,e),i=n(r).catch(function(t){return r.abort(t),Qr.reject(t)}).toPromise();return i.catch(function(){}),r.completionPromise.then(function(){return i})},t.prototype.close=function(){this.db.close()},t}(),Xr=function(){function t(t){this.dbCursor=t,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.dbCursor=t},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.shouldStop=!0},t.prototype.skip=function(t){this.nextKey=t},t.prototype.delete=function(){return It(this.dbCursor.delete())},t}(),Jr=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.completionDeferred=new Lr,this.transaction.oncomplete=function(){e.completionDeferred.resolve()},this.transaction.onabort=function(){t.error?e.completionDeferred.reject(t.error):e.completionDeferred.resolve()},this.transaction.onerror=function(t){e.completionDeferred.reject(t.target.error)}}return t.open=function(e,n,r){return new t(e.transaction(r,n))},Object.defineProperty(t.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){t&&this.completionDeferred.reject(t),this.aborted||(o("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return c(!!e,"Object store not part of transaction: "+t),new Zr(e)},t}(),Zr=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(o("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(o("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),It(n)},t.prototype.add=function(t){return o("SimpleDb","ADD",this.store.name,t,t),It(this.store.add(t))},t.prototype.get=function(t){var e=this;return It(this.store.get(t)).next(function(n){return void 0===n&&(n=null),o("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return o("SimpleDb","DELETE",this.store.name,t),It(this.store.delete(t))},t.prototype.count=function(){return o("SimpleDb","COUNT",this.store.name),It(this.store.count())},t.prototype.loadAll=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.iterateCursor(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.deleteAll=function(t,e){o("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,function(t,e,n){return n.delete()})},t.prototype.iterate=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.iterateCursor(r,e)},t.prototype.iterateSerial=function(t){var e=this.cursor({});return new Qr(function(n,r){e.onerror=function(t){r(t.target.error)},e.onsuccess=function(e){var r=e.target.result;if(!r)return void n();t(r.primaryKey,r.value).next(function(t){t?r.continue():n()})}})},t.prototype.iterateCursor=function(t,e){var n=[];return new Qr(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(!i)return void r();var o=new Xr(i),a=e(i.primaryKey,i.value,o);if(a instanceof Qr){var s=a.catch(function(t){return o.done(),Qr.reject(t)});n.push(s)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}}).next(function(){return Qr.waitFor(n)})},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:(c(void 0===e,"3rd argument must not be defined if 2nd is a range."),e=t)),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.keysOnly?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}(),ti=function(){function t(t,e){this.referenceDelegate=t,this.serializer=e,this.targetIdGenerator=$r.forQueryCache()}return t.prototype.allocateTargetId=function(t){var e=this;return this.retrieveMetadata(t).next(function(n){return n.highestTargetId=e.targetIdGenerator.after(n.highestTargetId),e.saveMetadata(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.retrieveMetadata(t).next(function(t){return jn.fromTimestamp(new Be(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return Dt(t.simpleDbTransaction)},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.retrieveMetadata(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.saveMetadata(t,i)})},t.prototype.addQueryData=function(t,e){var n=this;return this.saveQueryData(t,e).next(function(){return n.retrieveMetadata(t).next(function(r){return r.targetCount+=1,n.updateMetadataFromQueryData(e,r),n.saveMetadata(t,r)})})},t.prototype.updateQueryData=function(t,e){return this.saveQueryData(t,e)},t.prototype.removeQueryData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return kt(t).delete(e.targetId)}).next(function(){return n.retrieveMetadata(t)}).next(function(e){return c(e.targetCount>0,"Removing from an empty query cache"),e.targetCount-=1,n.saveMetadata(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return kt(t).iterate(function(a,s){var u=r.serializer.fromDbTarget(s);u.sequenceNumber<=e&&void 0===n[u.targetId]&&(i++,o.push(r.removeQueryData(t,u)))}).next(function(){return Qr.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){var n=this;return kt(t).iterate(function(t,r){var i=n.serializer.fromDbTarget(r);e(i)})},t.prototype.retrieveMetadata=function(t){return Nt(t.simpleDbTransaction)},t.prototype.saveMetadata=function(t,e){return At(t).put(wi.key,e)},t.prototype.saveQueryData=function(t,e){return kt(t).put(this.serializer.toDbTarget(e))},t.prototype.updateMetadataFromQueryData=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getQueryCount=function(t){return this.retrieveMetadata(t).next(function(t){return t.targetCount})},t.prototype.getQueryData=function(t,e){var n=this,r=e.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return kt(t).iterate({range:i,index:bi.queryTargetsIndexName},function(t,r,i){var a=n.serializer.fromDbTarget(r);e.isEqual(a.query)&&(o=a,i.done())}).next(function(){return o})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Ot(t);return e.forEach(function(e){var a=yt(e.path);i.push(o.put(new _i(n,a))),i.push(r.referenceDelegate.addReference(t,e))}),Qr.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Ot(t);return Qr.forEach(e,function(e){var o=yt(e.path);return Qr.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Ot(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Ot(t),i=ut();return r.iterate({range:n,keysOnly:!0},function(t,e,n){var r=gt(t[1]),o=new Ye(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=yt(e.path),r=IDBKeyRange.bound([n],[K(n)],!1,!0),i=0;return Ot(t).iterate({index:_i.documentTargetsIndex,keysOnly:!0,range:r},function(t,e,n){var r=t[0];t[1];0!==r&&(i++,n.done())}).next(function(){return i>0})},t.prototype.getQueryDataForTarget=function(t,e){var n=this;return kt(t).get(e).next(function(t){return t?n.serializer.fromDbTarget(t):null})},t}(),ei=function(){function t(t){this.mapKeyFn=t,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(a.isEqual(t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0===r)return void(this.inner[n]=[[t,e]]);for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){v(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}})},t.prototype.isEmpty=function(){return m(this.inner)},t}(),ni=function(){function t(){this.changes=it(),this.documentSizes=new ei(function(t){return t.toString()})}return t.prototype.addEntry=function(t){var e=this.assertChanges();this.changes=e.insert(t.key,t)},t.prototype.getEntry=function(t,e){var n=this,r=this.assertChanges(),i=r.get(e);return i?Qr.resolve(i):this.getFromCache(t,e).next(function(t){return null===t?(n.documentSizes.set(e,0),null):(n.documentSizes.set(e,t.size),t.maybeDocument)})},t.prototype.getEntries=function(t,e){var n=this;return this.getAllFromCache(t,e).next(function(t){var e=t.maybeDocuments;return t.sizeMap.forEach(function(t,e){n.documentSizes.set(t,e)}),e})},t.prototype.apply=function(t){var e=this.applyChanges(t);return this.changes=null,e},t.prototype.assertChanges=function(){return c(null!==this.changes,"Changes have already been applied."),this.changes},t}(),ri="The remote document changelog no longer contains all changes for all local query views. It may be necessary to rebuild these views.",ii=function(){function t(t,e,n){this.serializer=t,this.indexManager=e,this.keepDocumentChangeLog=n,this._lastProcessedDocumentChangeId=0}return Object.defineProperty(t.prototype,"lastProcessedDocumentChangeId",{get:function(){return this._lastProcessedDocumentChangeId},enumerable:!0,configurable:!0}),t.prototype.start=function(t){var e=Yr.getStore(t,Ti.store);return this.synchronizeLastDocumentChangeId(e)},t.prototype.addEntries=function(t,e,n){var r=[];if(e.length>0){for(var i=Pt(t),o=ut(),a=0,s=e;a<s.length;a++){var u=s[a],c=u.key,h=u.doc;r.push(i.put(Mt(c),h)),o=o.add(c),r.push(this.indexManager.addToCollectionParentIndex(t,c.path.popLast()))}this.keepDocumentChangeLog&&r.push(Lt(t).put({changes:this.serializer.toDbResourcePaths(o)})),r.push(this.updateSize(t,n))}return Qr.waitFor(r)},t.prototype.removeEntry=function(t,e){var n=Pt(t),r=Mt(e);return n.get(r).next(function(t){return t?n.delete(r).next(function(){return Ft(t)}):Qr.resolve(0)})},t.prototype.getEntry=function(t,e){var n=this;return Pt(t).get(Mt(e)).next(function(t){return t?n.serializer.fromDbRemoteDocument(t):null})},t.prototype.getSizedEntry=function(t,e){var n=this;return Pt(t).get(Mt(e)).next(function(t){return t?{maybeDocument:n.serializer.fromDbRemoteDocument(t),size:Ft(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,r=ot();return this.forEachDbEntry(t,e,function(t,e){r=e?r.insert(t,n.serializer.fromDbRemoteDocument(e)):r.insert(t,null)}).next(function(){return r})},t.prototype.getSizedEntries=function(t,e){var n=this,r=ot(),i=new en(Ye.comparator);return this.forEachDbEntry(t,e,function(t,e){e?(r=r.insert(t,n.serializer.fromDbRemoteDocument(e)),i=i.insert(t,Ft(e))):(r=r.insert(t,null),i=i.insert(t,0))}).next(function(){return{maybeDocuments:r,sizeMap:i}})},t.prototype.forEachDbEntry=function(t,e,n){if(e.isEmpty())return Qr.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Pt(t).iterate({range:r},function(t,e,r){for(var a=Ye.fromSegments(t);o&&Ye.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.skip(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e){var n=this;c(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=at(),i=e.path.length+1,o=e.path.toArray(),a=IDBKeyRange.lowerBound(o);return Pt(t).iterate({range:a},function(t,o,a){if(t.length===i){var s=n.serializer.fromDbRemoteDocument(o);e.path.isPrefixOf(s.key.path)?s instanceof Je&&e.matches(s)&&(r=r.insert(s.key,s)):a.done()}}).next(function(){return r})},t.prototype.getNewDocumentChanges=function(t){var e=this;c(this.keepDocumentChangeLog,"Can only call getNewDocumentChanges() when document change log is enabled");var n=ut(),r=it(),i=IDBKeyRange.lowerBound(this._lastProcessedDocumentChangeId+1),o=!0,a=Lt(t);return a.iterate({range:i},function(t,r){if(o&&(o=!1,e._lastProcessedDocumentChangeId+1!==r.id))return e.synchronizeLastDocumentChangeId(a).next(function(){return Qr.reject(new Fe(Me.DATA_LOSS,ri))});n=n.unionWith(e.serializer.fromDbResourcePaths(r.changes)),e._lastProcessedDocumentChangeId=r.id}).next(function(){var i=[];return n.forEach(function(n){i.push(e.getEntry(t,n).next(function(t){var e=t||new Ze(n,jn.forDeletedDoc());r=r.insert(n,e)}))}),Qr.waitFor(i)}).next(function(){return r})},t.prototype.removeDocumentChangesThroughChangeId=function(t,e){var n=IDBKeyRange.upperBound(e);return Lt(t).delete(n)},t.prototype.synchronizeLastDocumentChangeId=function(t){var e=this;return this._lastProcessedDocumentChangeId=0,t.iterate({keysOnly:!0,reverse:!0},function(t,n,r){e._lastProcessedDocumentChangeId=t,r.done()})},t.prototype.newChangeBuffer=function(){return new oi(this)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Rt(t).get(gi.key).next(function(t){return c(!!t,"Missing document cache metadata"),t})},t.prototype.setMetadata=function(t,e){return Rt(t).put(gi.key,e)},t.prototype.updateSize=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.setMetadata(t,r)})},t}(),oi=function(t){function e(e){var n=t.call(this)||this;return n.documentCache=e,n}return De.__extends(e,t),e.prototype.applyChanges=function(t){var e=this,n=this.assertChanges(),r=0,i=[];return n.forEach(function(t,n){var o=e.documentCache.serializer.toDbRemoteDocument(n),a=e.documentSizes.get(t);c(void 0!==a,"Attempting to change document "+t.toString()+" without having read it first");var s=Ft(o);r+=s-a,i.push({key:t,doc:o})}),this.documentCache.addEntries(t,i,r)},e.prototype.getFromCache=function(t,e){return this.documentCache.getSizedEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.documentCache.getSizedEntries(t,e)},e}(ni),ai=function(){function t(){this.collectionParentIndex=new si}return t.prototype.addToCollectionParentIndex=function(t,e){return this.collectionParentIndex.add(e),Qr.resolve()},t.prototype.getCollectionParents=function(t,e){return Qr.resolve(this.collectionParentIndex.getEntries(e))},t}(),si=function(){function t(){this.index={}}return t.prototype.add=function(t){c(t.length%2==1,"Expected a collection path.");var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Bn(He.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.getEntries=function(t){return(this.index[t]||new Bn(He.comparator)).toArray()},t}(),ui=8,ci=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;c(n<r&&n>=0&&r<=ui,"Unexpected schema upgrade from v"+n+" to v{toVersion}."),n<1&&r>=1&&(jt(t),qt(t),Kt(t),Bt(t));var o=Qr.resolve();return n<3&&r>=3&&(0!==n&&(Qt(t),Kt(t)),o=o.next(function(){return Gt(e)})),n<4&&r>=4&&(0!==n&&(o=o.next(function(){return Vt(t,e)})),o=o.next(function(){zt(t),Ht(t)})),n<5&&r>=5&&(o=o.next(function(){return i.removeAcknowledgedMutations(e)})),n<6&&r>=6&&(o=o.next(function(){return Wt(t),i.addDocumentGlobal(e)})),n<7&&r>=7&&(o=o.next(function(){return i.ensureSequenceNumbers(e)})),n<8&&r>=8&&(o=o.next(function(){return i.createCollectionParentIndex(t,e)})),o},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(mi.store).iterate(function(t,n){e+=Ft(n)}).next(function(){var n=new gi(e);return t.store(gi.store).put(gi.key,n)})},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(fi.store),r=t.store(pi.store);return n.loadAll().next(function(n){return Qr.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(pi.userMutationsIndex,i).next(function(r){return Qr.forEach(r,function(r){c(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=e.serializer.fromDbMutationBatch(r);return wt(t,n.userId,i).next(function(){})})})})})},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(_i.store),n=t.store(mi.store);return Dt(t).next(function(t){var r=function(n){return e.put(new _i(0,yt(n),t))},i=[];return n.iterate(function(t,n){var o=new He(t),a=Ut(o);i.push(e.get(a).next(function(t){return t?Qr.resolve():r(o)}))}).next(function(){return Qr.waitFor(i)})})},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(Ei.store,{keyPath:Ei.keyPath});var n=e.store(Ei.store),r=new si,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:yt(i)})}};return e.store(mi.store).iterate({keysOnly:!0},function(t,e){var n=new He(t);return i(n.popLast())}).next(function(){return e.store(di.store).iterate({keysOnly:!0},function(t,e){var n=(t[0],t[1]),r=(t[2],gt(n));return i(r.popLast())})})},t}(),hi=function(){function t(t,e){this.seconds=t,this.nanoseconds=e}return t}(),li=function(){function t(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}return t.store="owner",t.key="owner",t}(),fi=function(){function t(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}return t.store="mutationQueues",t.keyPath="userId",t}(),pi=function(){function t(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}return t.store="mutations",t.keyPath="batchId",t.userMutationsIndex="userMutationsIndex",t.userMutationsKeyPath=["userId","batchId"],t}(),di=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,yt(e)]},t.key=function(t,e,n){return[t,yt(e),n]},t.store="documentMutations",t.PLACEHOLDER=new t,t}(),yi=function(){function t(t,e){this.path=t,this.readTime=e}return t}(),vi=function(){function t(t,e){this.path=t,this.version=e}return t}(),mi=function(){function t(t,e,n,r){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r}return t.store="remoteDocuments",t}(),gi=function(){function t(t){this.byteSize=t}return t.store="remoteDocumentGlobal",t.key="remoteDocumentGlobalKey",t}(),bi=function(){function t(t,e,n,r,i,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.query=o}return t.store="targets",t.keyPath="targetId",t.queryTargetsIndexName="queryTargetsIndex",t.queryTargetsKeyPath=["canonicalId","targetId"],t}(),_i=function(){function t(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n,c(0===t==(void 0!==n),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return t.store="targetDocuments",t.keyPath=["targetId","path"],t.documentTargetsIndex="documentTargetsIndex",t.documentTargetsKeyPath=["path","targetId"],t}(),wi=function(){function t(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return t.key="targetGlobalKey",t.store="targetGlobal",t}(),Ei=function(){function t(t,e){this.collectionId=t,this.parent=e}return t.store="collectionParents",t.keyPath=["collectionId","parent"],t}(),Ti=function(){function t(t){this.changes=t}return t.store="remoteDocumentChanges",t.keyPath="id",t}(),Si=function(){function t(t,e,n,r,i){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r,this.lastProcessedDocumentChangeId=i}return t.store="clientMetadata",t.keyPath="clientId",t}(),Ci=[fi.store,pi.store,di.store,mi.store,bi.store,li.store,wi.store,_i.store],Ii=Ci,ki=Ii.concat([Si.store,Ti.store]),Ai=ki.concat([gi.store]),Ni=Ai.concat([Ei.store]),Di=Ni,Oi=function(){function t(){this.collectionParentsCache=new si}return t.prototype.addToCollectionParentIndex=function(t,e){if(c(e.length%2==1,"Expected a collection path."),this.collectionParentsCache.add(e)){c(e.length>=1,"Invalid collection path.");var n=e.lastSegment(),r=e.popLast();return $t(t).put({collectionId:n,parent:yt(r)})}return Qr.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[K(e),""],!1,!0);return $t(t).loadAll(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(gt(o.parent))}return n})},t}(),Ri=function(){function t(t){this.remoteSerializer=t}return t.prototype.fromDbRemoteDocument=function(t){if(t.document)return this.remoteSerializer.fromDocument(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=Ye.fromSegments(t.noDocument.path),n=this.fromDbTimestamp(t.noDocument.readTime);return new Ze(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})}if(t.unknownDocument){var e=Ye.fromSegments(t.unknownDocument.path),n=this.fromDbTimestamp(t.unknownDocument.version);return new tn(e,n)}return u("Unexpected DbRemoteDocument")},t.prototype.toDbRemoteDocument=function(t){if(t instanceof Je){var e=t.proto?t.proto:this.remoteSerializer.toDocument(t),n=t.hasCommittedMutations;return new mi(null,null,e,n)}if(t instanceof Ze){var r=t.key.path.toArray(),i=this.toDbTimestamp(t.version),n=t.hasCommittedMutations;return new mi(null,new yi(r,i),null,n)}if(t instanceof tn){var r=t.key.path.toArray(),i=this.toDbTimestamp(t.version);return new mi(new vi(r,i),null,null,!0)}return u("Unexpected MaybeDocumment")},t.prototype.toDbTimestamp=function(t){var e=t.toTimestamp();return new hi(e.seconds,e.nanoseconds)},t.prototype.fromDbTimestamp=function(t){var e=new Be(t.seconds,t.nanoseconds);return jn.fromTimestamp(e)},t.prototype.toDbMutationBatch=function(t,e){var n=this,r=e.baseMutations.map(function(t){return n.remoteSerializer.toMutation(t)}),i=e.mutations.map(function(t){return n.remoteSerializer.toMutation(t)});return new pi(t,e.batchId,e.localWriteTime.toMillis(),r,i)},t.prototype.fromDbMutationBatch=function(t){var e=this,n=(t.baseMutations||[]).map(function(t){return e.remoteSerializer.fromMutation(t)}),r=t.mutations.map(function(t){return e.remoteSerializer.fromMutation(t)}),i=Be.fromMillis(t.localWriteTimeMs);return new Wr(t.batchId,i,n,r)},t.prototype.toDbResourcePaths=function(t){var e=[];return t.forEach(function(t){e.push(yt(t.path))}),e},t.prototype.fromDbResourcePaths=function(t){for(var e=ut(),n=0,r=t;n<r.length;n++){var i=r[n];e=e.add(new Ye(gt(i)))}return e},t.prototype.fromDbTarget=function(t){var e,n=this.fromDbTimestamp(t.readTime);return e=Yt(t.query)?this.remoteSerializer.fromDocumentsTarget(t.query):this.remoteSerializer.fromQueryTarget(t.query),new Vn(e,t.targetId,un.Listen,t.lastListenSequenceNumber,n,t.resumeToken)},t.prototype.toDbTarget=function(t){c(un.Listen===t.purpose,"Only queries with purpose "+un.Listen+" may be stored, got "+t.purpose);var e,r=this.toDbTimestamp(t.snapshotVersion);e=t.query.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(t.query):this.remoteSerializer.toQueryTarget(t.query);var i;return t.resumeToken instanceof Uint8Array?(c("YES"===n.i({NODE_ENV:"production"}).USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence ."),i=t.resumeToken.toString()):i=t.resumeToken,new bi(t.targetId,t.query.canonicalId(),r,i,t.sequenceNumber,e)},t}(),xi=function(){function t(t){this.maxElements=t,this.buffer=new Bn(Xt),this.previousIndex=0}return t.prototype.nextIndex=function(){return++this.previousIndex},t.prototype.addElement=function(t){var e=[t,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Xt(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),t}(),Pi={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Li=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t.COLLECTION_DISABLED=-1,t.MINIMUM_CACHE_SIZE_BYTES=1048576,t.DEFAULT_CACHE_SIZE_BYTES=41943040,t.DEFAULT_COLLECTION_PERCENTILE=10,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,t.DEFAULT=new t(t.DEFAULT_CACHE_SIZE_BYTES,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),t.DISABLED=new t(t.COLLECTION_DISABLED,0,0),t}(),Mi=function(){function t(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.gcTask=null}return t.prototype.start=function(){c(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==Li.COLLECTION_DISABLED&&this.scheduleGC()},t.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),t.prototype.scheduleGC=function(){var t=this;c(null===this.gcTask,"Cannot schedule GC while a task is pending");var e=this.hasRun?3e5:6e4;o("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(xr.LruGarbageCollection,e,function(){return t.gcTask=null,t.hasRun=!0,t.localStore.collectGarbage(t.garbageCollector).then(function(){return t.scheduleGC()}).catch(Zt)})},t}(),Fi=function(){function t(t,e){this.delegate=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.delegate.getSequenceNumberCount(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Qr.resolve(Pr.INVALID);var r=new xi(e);return this.delegate.forEachTarget(t,function(t){return r.addElement(t.sequenceNumber)}).next(function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(t,function(t){return r.addElement(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.delegate.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.delegate.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return this.params.cacheSizeCollectionThreshold===Li.COLLECTION_DISABLED?(o("LruGarbageCollector","Garbage collection skipped; disabled"),Qr.resolve(Pi)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(o("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Pi):n.runGarbageCollection(t,e)})},t.prototype.getCacheSize=function(t){return this.delegate.getCacheSize(t)},t.prototype.runGarbageCollection=function(t,e){var n,i,a,s,u,c,h,l,f=this;return s=Date.now(),this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>f.params.maximumSequenceNumbersToCollect?(o("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+f.params.maximumSequenceNumbersToCollect+" from "+e),i=f.params.maximumSequenceNumbersToCollect):i=e,u=Date.now(),f.nthSequenceNumber(t,i)}).next(function(r){return n=r,c=Date.now(),f.removeTargets(t,n,e)}).next(function(e){return a=e,h=Date.now(),f.removeOrphanedDocuments(t,n)}).next(function(t){if(l=Date.now(),r()<=ke.DEBUG){o("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(u-s)+"ms\n\tDetermined least recently used "+i+" in "+(c-u)+"ms\n\tRemoved "+a+" targets in "+(h-c)+"ms\n\tRemoved "+t+" documents in "+(l-h)+"ms\nTotal Duration: "+(l-s)+"ms")}return Qr.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:t})})},t}(),Ui=function(){function t(){}return t}(),ji="IndexedDbPersistence",qi="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Vi="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `experimentalTabSynchronization:true` in all tabs.",Bi="This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.",Wi=function(t){function e(e,n){var r=t.call(this)||this;return r.simpleDbTransaction=e,r.currentSequenceNumber=n,r}return De.__extends(e,t),e}(Ui),Ki=function(){function t(e,n,r,i,o,a,s){if(this.persistenceKey=e,this.clientId=n,this.queue=i,this.multiClientParams=s,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.inForeground=!1,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(t){return Promise.resolve()},!t.isAvailable())throw new Fe(Me.UNIMPLEMENTED,Bi);if(this.referenceDelegate=new Qi(this,a),this.dbName=e+t.MAIN_DATABASE,this.serializer=new Ri(o),this.document=r.document,this.allowTabSynchronization=void 0!==s,this.queryCache=new ti(this.referenceDelegate,this.serializer),this.indexManager=new Oi,this.remoteDocumentCache=new ii(this.serializer,this.indexManager,this.allowTabSynchronization),!r.window||!r.window.localStorage)throw new Fe(Me.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=r.window,this.webStorage=this.window.localStorage}return t.getStore=function(t,e){if(t instanceof Wi)return Yr.getStore(t.simpleDbTransaction,e);throw u("IndexedDbPersistence must use instances of IndexedDbTransaction")},t.createIndexedDbPersistence=function(e,n,r,i,o,a){return De.__awaiter(this,void 0,void 0,function(){var s;return De.__generator(this,function(u){switch(u.label){case 0:return s=new t(e,n,r,i,o,a),[4,s.start()];case 1:return u.sent(),[2,s]}})})},t.createMultiClientIndexedDbPersistence=function(e,n,r,i,o,a,s){return De.__awaiter(this,void 0,void 0,function(){var u;return De.__generator(this,function(c){switch(c.label){case 0:return u=new t(e,n,r,i,o,a,s),[4,u.start()];case 1:return c.sent(),[2,u]}})})},t.prototype.start=function(){var t=this;return c(!this.started,"IndexedDbPersistence double-started!"),c(null!==this.window,"Expected 'window' to be defined"),Yr.openOrCreate(this.dbName,ui,new ci(this.serializer)).then(function(e){return t.simpleDb=e,t.updateClientMetadataAndTryBecomePrimary()}).then(function(){return t.attachVisibilityHandler(),t.attachWindowUnloadHook(),t.scheduleClientMetadataAndPrimaryLeaseRefreshes(),t.startRemoteDocumentCache()}).then(function(){return t.simpleDb.runTransaction("readonly",[wi.store],function(e){return Dt(e).next(function(e){var n=t.multiClientParams?t.multiClientParams.sequenceNumberSyncer:void 0;t.listenSequence=new Pr(e,n)})})}).then(function(){t._started=!0}).catch(function(e){return t.simpleDb&&t.simpleDb.close(),Promise.reject(e)})},t.prototype.startRemoteDocumentCache=function(){var t=this;return this.simpleDb.runTransaction("readonly",Di,function(e){return t.remoteDocumentCache.start(e)})},t.prototype.setPrimaryStateListener=function(t){var e=this;return this.primaryStateListener=function(n){return De.__awaiter(e,void 0,void 0,function(){return De.__generator(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.queue.enqueueAndForget(function(){return De.__awaiter(e,void 0,void 0,function(){return De.__generator(this,function(t){switch(t.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.updateClientMetadataAndTryBecomePrimary=function(){var t=this;return this.simpleDb.runTransaction("readwrite",Di,function(e){return ee(e).put(new Si(t.clientId,Date.now(),t.networkEnabled,t.inForeground,t.remoteDocumentCache.lastProcessedDocumentChangeId)).next(function(){if(t.isPrimary)return t.verifyPrimaryLease(e).next(function(e){e||(t.isPrimary=!1,t.queue.enqueueAndForget(function(){return t.primaryStateListener(!1)}))})}).next(function(){return t.canActAsPrimary(e)}).next(function(n){var r=t.isPrimary;return t.isPrimary=n,r!==t.isPrimary&&t.queue.enqueueAndForget(function(){return t.primaryStateListener(t.isPrimary)}),r&&!t.isPrimary?t.releasePrimaryLeaseIfHeld(e):t.isPrimary?t.acquireOrExtendPrimaryLease(e):void 0})})},t.prototype.verifyPrimaryLease=function(t){var e=this;return te(t).get(li.key).next(function(t){return Qr.resolve(e.isLocalClient(t))})},t.prototype.removeClientMetadata=function(t){return ee(t).delete(this.clientId)},t.prototype.maybeGarbageCollectMultiClientState=function(){return De.__awaiter(this,void 0,void 0,function(){var e,n,r=this;return De.__generator(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),n=[],[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(i){var o=t.getStore(i,Si.store);return o.loadAll().next(function(t){e=r.filterActiveClients(t,18e5),n=t.filter(function(t){return-1===e.indexOf(t)})}).next(function(){return Qr.forEach(n,function(t){return o.delete(t.clientId)})}).next(function(){if(e=e.filter(function(t){return t.clientId!==r.clientId}),e.length>0){var t=e.map(function(t){return t.lastProcessedDocumentChangeId||0}),n=Math.min.apply(Math,t);return r.remoteDocumentCache.removeDocumentChangesThroughChangeId(i,n)}})})]);case 1:i.sent(),n.forEach(function(t){r.window.localStorage.removeItem(r.zombiedClientLocalStorageKey(t.clientId))}),i.label=2;case 2:return[2]}})})},t.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var t=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(xr.ClientMetadataRefresh,4e3,function(){return t.updateClientMetadataAndTryBecomePrimary().then(function(){return t.maybeGarbageCollectMultiClientState()}).then(function(){return t.scheduleClientMetadataAndPrimaryLeaseRefreshes()})})},t.prototype.isLocalClient=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.canActAsPrimary=function(t){var e=this;return te(t).get(li.key).next(function(n){if(null!==n&&e.isWithinAge(n.leaseTimestampMs,5e3)&&!e.isClientZombied(n.ownerId)){if(e.isLocalClient(n)&&e.networkEnabled)return!0;if(!e.isLocalClient(n)){if(!n.allowTabSynchronization)throw new Fe(Me.FAILED_PRECONDITION,Vi);return!1}}return!(!e.networkEnabled||!e.inForeground)||ee(t).loadAll().next(function(t){return void 0===e.filterActiveClients(t,5e3).find(function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1})})}).next(function(t){return e.isPrimary!==t&&o(ji,"Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(t){return De.__awaiter(this,void 0,void 0,function(){var e=this;return De.__generator(this,function(n){switch(n.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&this.clientMetadataRefresher.cancel(),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite",[li.store,Si.store],function(t){return e.releasePrimaryLeaseIfHeld(t).next(function(){return e.removeClientMetadata(t)})})];case 1:return n.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),t?[4,Yr.delete(this.dbName)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.filterActiveClients=function(t,e){var n=this;return t.filter(function(t){return n.isWithinAge(t.updateTimeMs,e)&&!n.isClientZombied(t.clientId)})},t.prototype.getActiveClients=function(){var t=this;return this.simpleDb.runTransaction("readonly",[Si.store],function(e){return ee(e).loadAll().next(function(e){return t.filterActiveClients(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.getMutationQueue=function(t){return c(this.started,"Cannot initialize MutationQueue before persistence is started."),Gr.forUser(t,this.serializer,this.indexManager,this.referenceDelegate)},t.prototype.getQueryCache=function(){return c(this.started,"Cannot initialize QueryCache before persistence is started."),this.queryCache},t.prototype.getRemoteDocumentCache=function(){return c(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},t.prototype.getIndexManager=function(){return c(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},t.prototype.runTransaction=function(t,e,n){var r=this;return o(ji,"Starting transaction:",t),this.simpleDb.runTransaction("readonly"===e?"readonly":"readwrite",Di,function(i){return"readwrite-primary"===e?r.verifyPrimaryLease(i).next(function(e){if(!e)throw a("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.queue.enqueueAndForget(function(){return r.primaryStateListener(!1)}),new Fe(Me.FAILED_PRECONDITION,qi);return n(new Wi(i,r.listenSequence.next()))}).next(function(t){return r.acquireOrExtendPrimaryLease(i).next(function(){return t})}):r.verifyAllowTabSynchronization(i).next(function(){return n(new Wi(i,r.listenSequence.next()))})})},t.prototype.verifyAllowTabSynchronization=function(t){var e=this;return te(t).get(li.key).next(function(t){if(null!==t&&e.isWithinAge(t.leaseTimestampMs,5e3)&&!e.isClientZombied(t.ownerId)&&!e.isLocalClient(t)&&!t.allowTabSynchronization)throw new Fe(Me.FAILED_PRECONDITION,Vi)})},t.prototype.acquireOrExtendPrimaryLease=function(t){var e=new li(this.clientId,this.allowTabSynchronization,Date.now());return te(t).put(li.key,e)},t.isAvailable=function(){return Yr.isAvailable()},t.buildStoragePrefix=function(t){var e=t.databaseId.projectId;return t.databaseId.isDefaultDatabase||(e+="."+t.databaseId.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.releasePrimaryLeaseIfHeld=function(t){var e=this,n=te(t);return n.get(li.key).next(function(t){return e.isLocalClient(t)?(o(ji,"Releasing primary lease."),n.delete(li.key)):Qr.resolve()})},t.prototype.isWithinAge=function(t,e){var n=Date.now(),r=n-e,i=n;return!(t<r)&&(!(t>i)||(a("Detected an update time that is in the future: "+t+" > "+i),!1))},t.prototype.attachVisibilityHandler=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){t.queue.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.updateClientMetadataAndTryBecomePrimary()})},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},t.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(c(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},t.prototype.attachWindowUnloadHook=function(){var t=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){t.markClientZombied(),t.queue.enqueueAndForget(function(){return t.shutdown()})},this.window.addEventListener("unload",this.windowUnloadHandler))},t.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(c("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},t.prototype.isClientZombied=function(t){try{var e=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(t));return o(ji,"Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return a(ji,"Failed to get zombied client id.",t),!1}},t.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(t){a("Failed to set zombie client id.",t)}},t.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(t){}},t.prototype.zombiedClientLocalStorageKey=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t.MAIN_DATABASE="main",t}(),Qi=function(){function t(t,e){this.db=t,this.garbageCollector=new Fi(this,e)}return t.prototype.getSequenceNumberCount=function(t){var e=this.orphanedDocmentCount(t);return this.db.getQueryCache().getQueryCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.orphanedDocmentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getQueryCache().forEachTarget(t,e)},t.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){return this.forEachOrphanedDocument(t,function(t,n){return e(n)})},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return ie(t,e)},t.prototype.removeReference=function(t,e){return ie(t,e)},t.prototype.removeTargets=function(t,e,n){return this.db.getQueryCache().removeTargets(t,e,n)},t.prototype.removeMutationReference=function(t,e){return ie(t,e)},t.prototype.isPinned=function(t,e){return this.inMemoryPins.containsKey(e)?Qr.resolve(!0):_t(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=0,i=0,o=[];return this.forEachOrphanedDocument(t,function(a,s){if(s<=e){var u=n.isPinned(t,a).next(function(e){if(!e)return r++,n.removeOrphanedDocument(t,a).next(function(t){i+=t})});o.push(u)}}).next(function(){return Qr.waitFor(o)}).next(function(){return n.db.getRemoteDocumentCache().updateSize(t,-i)}).next(function(){return r})},t.prototype.removeOrphanedDocument=function(t,e){var n=0,r=this.db.getRemoteDocumentCache();return Qr.waitFor([Ot(t).delete(ne(e)),r.removeEntry(t,e).next(function(t){n+=t})]).next(function(){return n})},t.prototype.removeTarget=function(t,e){var n=e.copy({sequenceNumber:t.currentSequenceNumber});return this.db.getQueryCache().updateQueryData(t,n)},t.prototype.updateLimboDocument=function(t,e){return ie(t,e)},t.prototype.forEachOrphanedDocument=function(t,e){var n,r=Ot(t),i=Pr.INVALID;return r.iterate({index:_i.documentTargetsIndex},function(t,r){var o=t[0],a=(t[1],r.path),s=r.sequenceNumber;0===o?(i!==Pr.INVALID&&e(new Ye(gt(n)),i),i=s,n=a):i=Pr.INVALID}).next(function(){i!==Pr.INVALID&&e(new Ye(gt(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}(),Gi=function(){function t(t,e,n){this.remoteDocumentCache=t,this.mutationQueue=e,this.indexManager=n}return t.prototype.getDocument=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.getDocumentInternal(t,e,r)})},t.prototype.getDocumentInternal=function(t,e,n){return this.remoteDocumentCache.getEntry(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++){t=i[r].applyToLocalView(e,t)}return t})},t.prototype.applyLocalMutationsToDocuments=function(t,e,n){var r=ot();return e.forEach(function(t,e){for(var i=0,o=n;i<o.length;i++){e=o[i].applyToLocalView(t,e)}r=r.insert(t,e)}),r},t.prototype.getDocuments=function(t,e){var n=this;return this.remoteDocumentCache.getEntries(t,e).next(function(e){return n.getLocalViewOfDocuments(t,e)})},t.prototype.getLocalViewOfDocuments=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(r){var i=n.applyLocalMutationsToDocuments(t,e,r),o=it();return i.forEach(function(t,e){e||(e=new Ze(t,jn.forDeletedDoc())),o=o.insert(t,e)}),o})},t.prototype.getDocumentsMatchingQuery=function(t,e){return e.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(t,e.path):e.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(t,e):this.getDocumentsMatchingCollectionQuery(t,e)},t.prototype.getDocumentsMatchingDocumentQuery=function(t,e){return this.getDocument(t,new Ye(e)).next(function(t){var e=at();return t instanceof Je&&(e=e.insert(t.key,t)),e})},t.prototype.getDocumentsMatchingCollectionGroupQuery=function(t,e){var n=this;c(e.path.isEmpty(),"Currently we only support collection group queries at the root.");var r=e.collectionGroup,i=at();return this.indexManager.getCollectionParents(t,r).next(function(o){return Qr.forEach(o,function(o){var a=e.asCollectionQueryAtPath(o.child(r));return n.getDocumentsMatchingCollectionQuery(t,a).next(function(t){t.forEach(function(t,e){i=i.insert(t,e)})})}).next(function(){return i})})},t.prototype.getDocumentsMatchingCollectionQuery=function(t,e){var n,r=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(t,e).next(function(i){return n=i,r.mutationQueue.getAllMutationBatchesAffectingQuery(t,e)}).next(function(t){for(var r=0,i=t;r<i.length;r++)for(var o=i[r],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key;if(e.path.isImmediateParentOf(c.path)){var h=n.get(c),l=u.applyToLocalView(h,h,o.localWriteTime);n=l instanceof Je?n.insert(c,l):n.remove(c)}}}).next(function(){return n.forEach(function(t,r){e.matches(r)||(n=n.remove(t))}),n})},t}(),Hi=function(){function t(){this.refsByKey=new Bn(zi.compareByKey),this.refsByTarget=new Bn(zi.compareByTargetId)}return t.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},t.prototype.addReference=function(t,e){var n=new zi(t,e);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},t.prototype.addReferences=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.removeRef(new zi(t,e))},t.prototype.removeReferences=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.removeReferencesForId=function(t){var e=this,n=Ye.EMPTY,r=new zi(n,t),i=new zi(n,t+1),o=[];return this.refsByTarget.forEachInRange([r,i],function(t){e.removeRef(t),o.push(t.key)}),o},t.prototype.removeAllReferences=function(){var t=this;this.refsByKey.forEach(function(e){return t.removeRef(e)})},t.prototype.removeRef=function(t){this.refsByKey=this.refsByKey.delete(t),this.refsByTarget=this.refsByTarget.delete(t)},t.prototype.referencesForId=function(t){var e=Ye.EMPTY,n=new zi(e,t),r=new zi(e,t+1),i=ut();return this.refsByTarget.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new zi(t,0),n=this.refsByKey.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),zi=function(){function t(t,e){this.key=t,this.targetOrBatchId=e}return t.compareByKey=function(t,e){return Ye.comparator(t.key,e.key)||V(t.targetOrBatchId,e.targetOrBatchId)},t.compareByTargetId=function(t,e){return V(t.targetOrBatchId,e.targetOrBatchId)||Ye.comparator(t.key,e.key)},t}(),$i=function(){function t(t,e){this.persistence=t,this.localViewReferences=new Hi,this.queryDataByTarget={},c(t.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=t.getMutationQueue(e),this.remoteDocuments=t.getRemoteDocumentCache(),this.queryCache=t.getQueryCache(),this.localDocuments=new Gi(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager())}return t.prototype.handleUserChange=function(t){var e=this;return this.persistence.runTransaction("Handle user change","readonly",function(n){var r;return e.mutationQueue.getAllMutationBatches(n).next(function(i){return r=i,e.mutationQueue=e.persistence.getMutationQueue(t),e.localDocuments=new Gi(e.remoteDocuments,e.mutationQueue,e.persistence.getIndexManager()),e.mutationQueue.getAllMutationBatches(n)}).next(function(t){for(var i=[],o=[],a=ut(),s=0,u=r;s<u.length;s++){var c=u[s];i.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var f=l[h];a=a.add(f.key)}}for(var p=0,d=t;p<d.length;p++){var c=d[p];o.push(c.batchId);for(var y=0,v=c.mutations;y<v.length;y++){var f=v[y];a=a.add(f.key)}}return e.localDocuments.getDocuments(n,a).next(function(t){return{affectedDocuments:t,removedBatchIds:i,addedBatchIds:o}})})})},t.prototype.localWrite=function(t){var e=this,n=Be.now(),r=t.reduce(function(t,e){return t.add(e.key)},ut());return this.persistence.runTransaction("Locally write mutations","readwrite",function(i){return e.localDocuments.getDocuments(i,r).next(function(r){for(var o=[],a=0,s=t;a<s.length;a++){var u=s[a],c=r.get(u.key);if(!u.isIdempotent){var h=u.fieldMask;if(h){var l=c instanceof Je?h.applyTo(c.data):En.EMPTY;o.push(new Xn(u.key,l,h,zn.exists(!0)))}}}return e.mutationQueue.addMutationBatch(i,n,o,t).next(function(t){var e=t.applyToLocalDocumentSet(r);return{batchId:t.batchId,changes:e}})})})},t.prototype.lookupMutationDocuments=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",function(n){return e.mutationQueue.lookupMutationKeys(n,t).next(function(t){return t?e.localDocuments.getDocuments(n,t):Qr.resolve(null)})})},t.prototype.acknowledgeBatch=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(n){var r=t.batch.keys(),i=e.remoteDocuments.newChangeBuffer();return e.mutationQueue.acknowledgeBatch(n,t.batch,t.streamToken).next(function(){return e.applyWriteToRemoteDocuments(n,t,i)}).next(function(){return i.apply(n)}).next(function(){return e.mutationQueue.performConsistencyCheck(n)}).next(function(){return e.localDocuments.getDocuments(n,r)})})},t.prototype.rejectBatch=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",function(n){var r;return e.mutationQueue.lookupMutationBatch(n,t).next(function(t){return c(null!==t,"Attempt to reject nonexistent batch!"),r=t.keys(),e.mutationQueue.removeMutationBatch(n,t)}).next(function(){return e.mutationQueue.performConsistencyCheck(n)}).next(function(){return e.localDocuments.getDocuments(n,r)})})},t.prototype.getLastStreamToken=function(){var t=this;return this.persistence.runTransaction("Get last stream token","readonly",function(e){return t.mutationQueue.getLastStreamToken(e)})},t.prototype.setLastStreamToken=function(t){var e=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary",function(n){return e.mutationQueue.setLastStreamToken(n,t)})},t.prototype.getLastRemoteSnapshotVersion=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",function(e){return t.queryCache.getLastRemoteSnapshotVersion(e)})},t.prototype.applyRemoteEvent=function(e){var n=this,r=this.remoteDocuments.newChangeBuffer();return this.persistence.runTransaction("Apply remote event","readwrite-primary",function(i){var a=[],s=ut();d(e.targetChanges,function(r,o){var u=n.queryDataByTarget[r];if(u){o.addedDocuments.forEach(function(t){s=s.add(t)}),o.modifiedDocuments.forEach(function(t){s=s.add(t)}),a.push(n.queryCache.removeMatchingKeys(i,o.removedDocuments,r).next(function(){return n.queryCache.addMatchingKeys(i,o.addedDocuments,r)}));var c=o.resumeToken;if(c.length>0){var h=u;u=u.copy({resumeToken:c,snapshotVersion:e.snapshotVersion}),n.queryDataByTarget[r]=u,t.shouldPersistQueryData(h,u,o)&&a.push(n.queryCache.updateQueryData(i,u))}}});var u=it(),h=ut();e.documentUpdates.forEach(function(t,e){h=h.add(t)}),a.push(r.getEntries(i,h).next(function(t){e.documentUpdates.forEach(function(c,h){var l=t.get(c);null==l||h.version.isEqual(jn.MIN)||s.has(h.key)&&!l.hasPendingWrites||h.version.compareTo(l.version)>=0?(r.addEntry(h),u=u.insert(c,h)):o("LocalStore","Ignoring outdated watch update for ",c,". Current version:",l.version," Watch version:",h.version),e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,c))})}));var l=e.snapshotVersion;if(!l.isEqual(jn.MIN)){var f=n.queryCache.getLastRemoteSnapshotVersion(i).next(function(t){return c(l.compareTo(t)>=0,"Watch stream reverted to previous snapshot?? "+l+" < "+t),n.queryCache.setTargetsMetadata(i,i.currentSequenceNumber,l)});a.push(f)}return Qr.waitFor(a).next(function(){return r.apply(i)}).next(function(){return n.localDocuments.getLocalViewOfDocuments(i,u)})})},t.shouldPersistQueryData=function(t,e,n){return 0!==e.resumeToken.length&&(0===t.resumeToken.length||(e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0))},t.prototype.notifyLocalViewChanges=function(t){var e=this;return this.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return Qr.forEach(t,function(t){return e.localViewReferences.addReferences(t.addedKeys,t.targetId),e.localViewReferences.removeReferences(t.removedKeys,t.targetId),Qr.forEach(t.removedKeys,function(t){return e.persistence.referenceDelegate.removeReference(n,t)})})})},t.prototype.nextMutationBatch=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly",function(n){return void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t)})},t.prototype.readDocument=function(t){var e=this;return this.persistence.runTransaction("read document","readonly",function(n){return e.localDocuments.getDocument(n,t)})},t.prototype.allocateQuery=function(t){var e=this;return this.persistence.runTransaction("Allocate query","readwrite",function(n){var r;return e.queryCache.getQueryData(n,t).next(function(i){return i?(r=i,Qr.resolve()):e.queryCache.allocateTargetId(n).next(function(i){return r=new Vn(t,i,un.Listen,n.currentSequenceNumber),e.queryCache.addQueryData(n,r)})}).next(function(){return c(!e.queryDataByTarget[r.targetId],"Tried to allocate an already allocated query: "+t),e.queryDataByTarget[r.targetId]=r,r})})},t.prototype.releaseQuery=function(t,e){var n=this,r=e?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release query",r,function(r){return n.queryCache.getQueryData(r,t).next(function(i){c(null!=i,"Tried to release nonexistent query: "+t);var o=i.targetId,a=n.queryDataByTarget[o],s=n.localViewReferences.removeReferencesForId(o);return delete n.queryDataByTarget[o],e?Qr.resolve():Qr.forEach(s,function(t){return n.persistence.referenceDelegate.removeReference(r,t)}).next(function(){return n.persistence.referenceDelegate.removeTarget(r,a)})})})},t.prototype.executeQuery=function(t){var e=this;return this.persistence.runTransaction("Execute query","readonly",function(n){return e.localDocuments.getDocumentsMatchingQuery(n,t)})},t.prototype.remoteDocumentKeys=function(t){var e=this;return this.persistence.runTransaction("Remote document keys","readonly",function(n){return e.queryCache.getMatchingKeysForTargetId(n,t)})},t.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},t.prototype.removeCachedMutationBatchMetadata=function(t){this.mutationQueue.removeCachedMutationKeys(t)},t.prototype.setNetworkEnabled=function(t){this.persistence.setNetworkEnabled(t)},t.prototype.applyWriteToRemoteDocuments=function(t,e,n){var r=this,i=e.batch,o=i.keys(),a=Qr.resolve();return o.forEach(function(r){a=a.next(function(){return n.getEntry(t,r)}).next(function(t){var o=t,a=e.docVersions.get(r);c(null!==a,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(a)<0)&&(o=i.applyToRemoteDocument(r,o,e),o?n.addEntry(o):c(!t,"Mutation batch "+i+" applied to document "+t+" resulted in null"))})}),a.next(function(){return r.mutationQueue.removeMutationBatch(t,i)})},t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.queryDataByTarget)})},t.prototype.getQueryForTarget=function(t){var e=this;return this.queryDataByTarget[t]?Promise.resolve(this.queryDataByTarget[t].query):this.persistence.runTransaction("Get query data","readonly",function(n){return e.queryCache.getQueryDataForTarget(n,t).next(function(t){return t?t.query:null})})},t.prototype.getNewDocumentChanges=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly",function(e){return t.remoteDocuments.getNewDocumentChanges(e)})},t.RESUME_TOKEN_MAX_AGE_MICROS=3e8,t}(),Yi=function(){function t(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=h(),this.batchesByDocumentKey=new Bn(zi.compareByKey)}return t.prototype.checkEmpty=function(t){return Qr.resolve(0===this.mutationQueue.length)},t.prototype.acknowledgeBatch=function(t,e,n){var r=e.batchId,i=this.indexOfExistingBatchId(r,"acknowledged");c(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return c(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,Qr.resolve()},t.prototype.getLastStreamToken=function(t){return Qr.resolve(this.lastStreamToken)},t.prototype.setLastStreamToken=function(t,e){return this.lastStreamToken=e,Qr.resolve()},t.prototype.addMutationBatch=function(t,e,n,r){c(0!==r.length,"Mutation batches should not be empty");var i=this.nextBatchId;if(this.nextBatchId++,this.mutationQueue.length>0){c(this.mutationQueue[this.mutationQueue.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order")}var o=new Wr(i,e,n,r);this.mutationQueue.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new zi(u.key,i)),this.indexManager.addToCollectionParentIndex(t,u.key.path.popLast())}return Qr.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Qr.resolve(this.findMutationBatch(e))},t.prototype.lookupMutationKeys=function(t,e){var n=this.findMutationBatch(e);return c(null!=n,"Failed to find local mutation batch."),Qr.resolve(n.keys())},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.indexOfBatchId(n),i=r<0?0:r;return Qr.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)},t.prototype.getAllMutationBatches=function(t){return Qr.resolve(this.mutationQueue.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new zi(e,0),i=new zi(e,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],function(t){c(e.isEqual(t.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(t.targetOrBatchId);c(null!==r,"Batches in the index must exist in the main table"),o.push(r)}),Qr.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Bn(V);return e.forEach(function(t){var e=new zi(t,0),i=new zi(t,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([e,i],function(e){c(t.isEqual(e.key),"For each key, should only iterate over a single key's batches"),r=r.add(e.targetOrBatchId)})}),Qr.resolve(this.findMutationBatches(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){c(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=e.path,r=n.length+1,i=n;Ye.isDocumentKey(i)||(i=i.child(""));var o=new zi(new Ye(i),0),a=new Bn(V);return this.batchesByDocumentKey.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.targetOrBatchId)),!0)},o),Qr.resolve(this.findMutationBatches(a))},t.prototype.findMutationBatches=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.findMutationBatch(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;c(0===this.indexOfExistingBatchId(e.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return Qr.forEach(e.mutations,function(i){var o=new zi(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.removeMutationReference(t,i.key)}).next(function(){n.batchesByDocumentKey=r})},t.prototype.removeCachedMutationKeys=function(t){},t.prototype.containsKey=function(t,e){var n=new zi(e,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return Qr.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return 0===this.mutationQueue.length&&c(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),Qr.resolve()},t.prototype.indexOfExistingBatchId=function(t,e){var n=this.indexOfBatchId(t);return c(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+e),n},t.prototype.indexOfBatchId=function(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId},t.prototype.findMutationBatch=function(t){var e=this.indexOfBatchId(t);if(e<0||e>=this.mutationQueue.length)return null;var n=this.mutationQueue[e];return c(n.batchId===t,"If found batch must match"),n},t}(),Xi=function(){function t(t){this.persistence=t,this.queries=new ei(function(t){return t.canonicalId()}),this.lastRemoteSnapshotVersion=jn.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new Hi,this.targetCount=0,this.targetIdGenerator=$r.forQueryCache()}return t.prototype.getTargetCount=function(t){return Qr.resolve(this.targetCount)},t.prototype.forEachTarget=function(t,e){return this.queries.forEach(function(t,n){return e(n)}),Qr.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Qr.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Qr.resolve(this.highestSequenceNumber)},t.prototype.allocateTargetId=function(t){var e=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=e,Qr.resolve(e)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.highestSequenceNumber&&(this.highestSequenceNumber=e),Qr.resolve()},t.prototype.saveQueryData=function(t){this.queries.set(t.query,t);var e=t.targetId;e>this.highestTargetId&&(this.highestTargetId=e),t.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=t.sequenceNumber)},t.prototype.addQueryData=function(t,e){return c(!this.queries.has(e.query),"Adding a query that already exists"),this.saveQueryData(e),this.targetCount+=1,Qr.resolve()},t.prototype.updateQueryData=function(t,e){return c(this.queries.has(e.query),"Updating a non-existent query"),this.saveQueryData(e),Qr.resolve()},t.prototype.removeQueryData=function(t,e){return c(this.targetCount>0,"Removing a target from an empty cache"),c(this.queries.has(e.query),"Removing a non-existent target from the cache"),this.queries.delete(e.query),this.references.removeReferencesForId(e.targetId),this.targetCount-=1,Qr.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.queries.forEach(function(a,s){s.sequenceNumber<=e&&!n[s.targetId]&&(r.queries.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)}),Qr.waitFor(o).next(function(){return i})},t.prototype.getQueryCount=function(t){return Qr.resolve(this.targetCount)},t.prototype.getQueryData=function(t,e){var n=this.queries.get(e)||null;return Qr.resolve(n)},t.prototype.getQueryDataForTarget=function(t,e){return u("Not yet implemented.")},t.prototype.addMatchingKeys=function(t,e,n){this.references.addReferences(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.addReference(t,e))}),Qr.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){this.references.removeReferences(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.removeReference(t,e))}),Qr.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this.references.removeReferencesForId(e),Qr.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.references.referencesForId(e);return Qr.resolve(n)},t.prototype.containsKey=function(t,e){return Qr.resolve(this.references.containsKey(e))},t}(),Ji=function(){function t(t,e){this.indexManager=t,this.sizer=e,this.docs=oe(),this.newDocumentChanges=ut(),this.size=0}return t.prototype.addEntries=function(t,e,n){for(var r=[],i=0,o=e;i<o.length;i++){var a=o[i],s=a.maybeDocument.key;this.docs=this.docs.insert(s,a),this.newDocumentChanges=this.newDocumentChanges.add(s),r.push(this.indexManager.addToCollectionParentIndex(t,s.path.popLast()))}return this.size+=n,Qr.waitFor(r)},t.prototype.removeEntry=function(t,e){var n=this.docs.get(e);return n?(this.docs=this.docs.remove(e),this.size-=n.size,Qr.resolve(n.size)):Qr.resolve(0)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Qr.resolve(n?n.maybeDocument:null)},t.prototype.getSizedEntry=function(t,e){return Qr.resolve(this.docs.get(e))},t.prototype.getEntries=function(t,e){var n=this,r=ot();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null)}),Qr.resolve(r)},t.prototype.getSizedEntries=function(t,e){var n=this,r=ot(),i=new en(Ye.comparator);return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null),i=i.insert(t,e?e.size:0)}),Qr.resolve({maybeDocuments:r,sizeMap:i})},t.prototype.getDocumentsMatchingQuery=function(t,e){c(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var n=at(),r=new Ye(e.path.child("")),i=this.docs.getIteratorFrom(r);i.hasNext();){var o=i.getNext(),a=o.key,s=o.value.maybeDocument;if(!e.path.isPrefixOf(a.path))break;s instanceof Je&&e.matches(s)&&(n=n.insert(s.key,s))}return Qr.resolve(n)},t.prototype.forEachDocumentKey=function(t,e){return Qr.forEach(this.docs,function(t){return e(t)})},t.prototype.getNewDocumentChanges=function(t){var e=this,n=it();return this.newDocumentChanges.forEach(function(t){var r=e.docs.get(t),i=r?r.maybeDocument:new Ze(t,jn.forDeletedDoc());n=n.insert(t,i)}),this.newDocumentChanges=ut(),Qr.resolve(n)},t.prototype.newChangeBuffer=function(){return new Zi(this.sizer,this)},t.prototype.getSize=function(t){return Qr.resolve(this.size)},t}(),Zi=function(t){function e(e,n){var r=t.call(this)||this;return r.sizer=e,r.documentCache=n,r}return De.__extends(e,t),e.prototype.applyChanges=function(t){var e=this,n=this.assertChanges(),r=0,i=[];return n.forEach(function(t,n){var o=e.documentSizes.get(t);c(void 0!==o,"Attempting to change document "+t.toString()+" without having read it first");var a=e.sizer(n);r+=a-o,i.push({maybeDocument:n,size:a})}),this.documentCache.addEntries(t,i,r)},e.prototype.getFromCache=function(t,e){return this.documentCache.getSizedEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.documentCache.getSizedEntries(t,e)},e}(ni),to=function(){function t(t,e){var n=this;this.clientId=t,this.mutationQueues={},this.listenSequence=new Pr(0),this._started=!1,this._started=!0,this.referenceDelegate=e(this),this.queryCache=new Xi(this);var r=function(t){return n.referenceDelegate.documentSize(t)};this.indexManager=new ai,this.remoteDocumentCache=new Ji(this.indexManager,r)}return t.createLruPersistence=function(e,n,r){return new t(e,function(t){return new ro(t,new Ri(n),r)})},t.createEagerPersistence=function(e){return new t(e,function(t){return new no(t)})},t.prototype.shutdown=function(t){return this._started=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.getActiveClients=function(){return De.__awaiter(this,void 0,void 0,function(){return De.__generator(this,function(t){return[2,[this.clientId]]})})},t.prototype.setPrimaryStateListener=function(t){return t(!0)},t.prototype.setNetworkEnabled=function(t){},t.prototype.getIndexManager=function(){return this.indexManager},t.prototype.getMutationQueue=function(t){var e=this.mutationQueues[t.toKey()];return e||(e=new Yi(this.indexManager,this.referenceDelegate),this.mutationQueues[t.toKey()]=e),e},t.prototype.getQueryCache=function(){return this.queryCache},t.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},t.prototype.runTransaction=function(t,e,n){var r=this;o("MemoryPersistence","Starting transaction:",t);var i=new eo(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next(function(t){return r.referenceDelegate.onTransactionCommitted(i).next(function(){return t})}).toPromise()},t.prototype.mutationQueuesContainKey=function(t,e){return Qr.or(y(this.mutationQueues).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),eo=function(){function t(t){this.currentSequenceNumber=t}return t}(),no=function(){function t(t){this.persistence=t}return t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return this.orphanedDocuments.delete(e),Qr.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedDocuments.add(e),Qr.resolve()},t.prototype.removeMutationReference=function(t,e){return this.orphanedDocuments.add(e),Qr.resolve()},t.prototype.removeTarget=function(t,e){var n=this,r=this.persistence.getQueryCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.orphanedDocuments.add(t)})}).next(function(){return r.removeQueryData(t,e)})},t.prototype.onTransactionStarted=function(){this.orphanedDocuments=new Set},t.prototype.onTransactionCommitted=function(t){var e=this,n=this.persistence.getRemoteDocumentCache();return Qr.forEach(this.orphanedDocuments,function(r){return e.isReferenced(t,r).next(function(e){return e?Qr.resolve():n.removeEntry(t,r).next(function(){})})})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.isReferenced(t,e).next(function(t){t?n.orphanedDocuments.delete(e):n.orphanedDocuments.add(e)})},t.prototype.documentSize=function(t){return 0},t.prototype.isReferenced=function(t,e){var n=this;return Qr.or([function(){return n.persistence.getQueryCache().containsKey(t,e)},function(){return n.persistence.mutationQueuesContainKey(t,e)},function(){return Qr.resolve(n.inMemoryPins.containsKey(e))}])},t}(),ro=function(){function t(t,e,n){this.persistence=t,this.serializer=e,this.orphanedSequenceNumbers=new ei(function(t){return yt(t.path)}),this.garbageCollector=new Fi(this,n)}return t.prototype.onTransactionStarted=function(){},t.prototype.onTransactionCommitted=function(t){return Qr.resolve()},t.prototype.forEachTarget=function(t,e){return this.persistence.getQueryCache().forEachTarget(t,e)},t.prototype.getSequenceNumberCount=function(t){var e=this.orphanedDocumentCount(t);return this.persistence.getQueryCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.orphanedDocumentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,function(t){e++}).next(function(){return e})},t.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){var n=this;return Qr.forEach(this.orphanedSequenceNumbers,function(r,i){return n.isPinned(t,r,i).next(function(t){return t?Qr.resolve():e(i)})})},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.removeTargets=function(t,e,n){return this.persistence.getQueryCache().removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=0,i=this.persistence.getRemoteDocumentCache();return i.forEachDocumentKey(t,function(o){return n.isPinned(t,o,e).next(function(e){return e?Qr.resolve():(r++,i.removeEntry(t,o).next())})}).next(function(){return r})},t.prototype.removeMutationReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Qr.resolve()},t.prototype.removeTarget=function(t,e){var n=e.copy({sequenceNumber:t.currentSequenceNumber});return this.persistence.getQueryCache().updateQueryData(t,n)},t.prototype.addReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Qr.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Qr.resolve()},t.prototype.updateLimboDocument=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Qr.resolve()},t.prototype.documentSize=function(t){var e,n=this.serializer.toDbRemoteDocument(t);if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw u("Unknown remote document type");e=n.noDocument}return JSON.stringify(e).length},t.prototype.isPinned=function(t,e,n){var r=this;return Qr.or([function(){return r.persistence.mutationQueuesContainKey(t,e)},function(){return Qr.resolve(r.inMemoryPins.containsKey(e))},function(){return r.persistence.getQueryCache().containsKey(t,e)},function(){var t=r.orphanedSequenceNumbers.get(e);return Qr.resolve(void 0!==t&&t>n)}])},t.prototype.getCacheSize=function(t){return this.persistence.getRemoteDocumentCache().getSize(t)},t}(),io=function(){function t(t,e,n,r,i){this.queue=t,this.timerId=e,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return t.prototype.reset=function(){this.currentBaseMs=0},t.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},t.prototype.backoffAndRun=function(t){var e=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);this.currentBaseMs>0&&o("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,function(){return e.lastAttemptTime=Date.now(),t()}),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},t.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},t.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},t}();!function(t){t[t.Initial=0]="Initial",t[t.Starting=1]="Starting",t[t.Open=2]="Open",t[t.Error=3]="Error",t[t.Backoff=4]="Backoff"}(zr||(zr={}));var oo,ao=1e3,so=6e4,uo=1.5,co=function(){function t(t,e,n,r,i,o){this.queue=t,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=zr.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new io(t,e,ao,uo,so)}return t.prototype.isStarted=function(){return this.state===zr.Starting||this.state===zr.Open||this.state===zr.Backoff},t.prototype.isOpen=function(){return this.state===zr.Open},t.prototype.start=function(){if(this.state===zr.Error)return void this.performBackoff();c(this.state===zr.Initial,"Already started"),this.auth()},t.prototype.stop=function(){return De.__awaiter(this,void 0,void 0,function(){return De.__generator(this,function(t){switch(t.label){case 0:return this.isStarted()?[4,this.close(zr.Initial)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.inhibitBackoff=function(){c(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=zr.Initial,this.backoff.reset()},t.prototype.markIdle=function(){var t=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,function(){return t.handleIdleCloseTimer()}))},t.prototype.sendRequest=function(t){this.cancelIdleCheck(),this.stream.send(t)},t.prototype.handleIdleCloseTimer=function(){return De.__awaiter(this,void 0,void 0,function(){return De.__generator(this,function(t){return this.isOpen()?[2,this.close(zr.Initial)]:[2]})})},t.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},t.prototype.close=function(t,e){return De.__awaiter(this,void 0,void 0,function(){return De.__generator(this,function(n){switch(n.label){case 0:return c(this.isStarted(),"Only started streams should be closed."),c(t===zr.Error||$(e),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,t!==zr.Error?this.backoff.reset():e&&e.code===Me.RESOURCE_EXHAUSTED?(a(e.toString()),a("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):e&&e.code===Me.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.onClose(e)];case 1:return n.sent(),[2]}})})},t.prototype.tearDown=function(){},t.prototype.auth=function(){var t=this;c(this.state===zr.Initial,"Must be in initial state to auth"),this.state=zr.Starting;var e=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then(function(e){t.closeCount===n&&t.startStream(e)},function(n){e(function(){var e=new Fe(Me.UNKNOWN,"Fetching auth token failed: "+n.message);return t.handleStreamClose(e)})})},t.prototype.startStream=function(t){var e=this;c(this.state===zr.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(t),this.stream.onOpen(function(){n(function(){return c(e.state===zr.Starting,"Expected stream to be in state Starting, but was "+e.state),e.state=zr.Open,e.listener.onOpen()})}),this.stream.onClose(function(t){n(function(){return e.handleStreamClose(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.performBackoff=function(){var t=this;c(this.state===zr.Error,"Should only perform backoff when in Error state"),this.state=zr.Backoff,this.backoff.backoffAndRun(function(){return De.__awaiter(t,void 0,void 0,function(){return De.__generator(this,function(t){return c(this.state===zr.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=zr.Initial,this.start(),c(this.isStarted(),"PersistentStream should have started"),[2]})})})},t.prototype.handleStreamClose=function(t){return c(this.isStarted(),"Can't handle server close on non-started stream"),o("PersistentStream","close with error: "+t),this.stream=null,this.close(zr.Error,t)},t.prototype.getCloseGuardedDispatcher=function(t){var e=this;return function(n){e.queue.enqueueAndForget(function(){return e.closeCount===t?n():(o("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),ho=function(t){function e(e,n,r,i,o){var a=t.call(this,e,xr.ListenStreamConnectionBackoff,xr.ListenStreamIdle,n,r,o)||this;return a.serializer=i,a}return De.__extends(e,t),e.prototype.startRpc=function(t){return this.connection.openStream("Listen",t)},e.prototype.onMessage=function(t){this.backoff.reset();var e=this.serializer.fromWatchChange(t),n=this.serializer.versionFromListenResponse(t);return this.listener.onWatchChange(e,n)},e.prototype.watch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.addTarget=this.serializer.toTarget(t);var n=this.serializer.toListenRequestLabels(t);n&&(e.labels=n),this.sendRequest(e)},e.prototype.unwatch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.removeTarget=t,this.sendRequest(e)},e}(co),lo=function(t){function e(e,n,r,i,o){var a=t.call(this,e,xr.WriteStreamConnectionBackoff,xr.WriteStreamIdle,n,r,o)||this;return a.serializer=i,a.handshakeComplete_=!1,a}return De.__extends(e,t),Object.defineProperty(e.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.handshakeComplete_=!1,t.prototype.start.call(this)},e.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},e.prototype.startRpc=function(t){return this.connection.openStream("Write",t)},e.prototype.onMessage=function(t){if(c(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=t.streamToken,this.handshakeComplete_){this.backoff.reset();var e=this.serializer.fromWriteResults(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime);return this.listener.onMutationResult(n,e)}return c(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},e.prototype.writeHandshake=function(){c(this.isOpen(),"Writing handshake requires an opened stream"),c(!this.handshakeComplete_,"Handshake already completed");var t={};t.database=this.serializer.encodedDatabaseId,this.sendRequest(t)},e.prototype.writeMutations=function(t){var e=this;c(this.isOpen(),"Writing mutations requires an opened stream"),c(this.handshakeComplete_,"Handshake must be complete before writing mutations"),c(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:t.map(function(t){return e.serializer.toMutation(t)})};this.sendRequest(n)},e}(co),fo=function(){function t(t,e,n,r){this.queue=t,this.connection=e,this.credentials=n,this.serializer=r}return t.prototype.newPersistentWriteStream=function(t){return new lo(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.newPersistentWatchStream=function(t){return new ho(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.commit=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,writes:t.map(function(t){return e.serializer.toMutation(t)})};return this.invokeRPC("Commit",n).then(function(t){return e.serializer.fromWriteResults(t.writeResults,t.commitTime)})},t.prototype.lookup=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,documents:t.map(function(t){return e.serializer.toName(t)})};return this.invokeStreamingRPC("BatchGetDocuments",n).then(function(n){var r=it();n.forEach(function(t){var n=e.serializer.fromMaybeDocument(t);r=r.insert(n.key,n)});var i=[];return t.forEach(function(t){var e=r.get(t);c(!!e,"Missing entity in write response for "+t),i.push(e)}),i})},t.prototype.invokeRPC=function(t,e){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeRPC(t,e,r)}).catch(function(t){throw t.code===Me.UNAUTHENTICATED&&n.credentials.invalidateToken(),t})},t.prototype.invokeStreamingRPC=function(t,e){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeStreamingRPC(t,e,r)}).catch(function(t){throw t.code===Me.UNAUTHENTICATED&&n.credentials.invalidateToken(),t})},t}(),po=function(){function t(t){this.datastore=t,this.readVersions=st(),this.mutations=[],this.committed=!1}return t.prototype.recordVersion=function(t){var e;if(t instanceof Je)e=t.version;else{if(!(t instanceof Ze))throw u("Document in a transaction was a "+t.constructor.name);e=jn.forDeletedDoc()}var n=this.readVersions.get(t.key);if(null!==n){if(!e.isEqual(n))throw new Fe(Me.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(t.key,e)},t.prototype.lookup=function(t){var e=this;return this.committed?Promise.reject("Transaction has already completed."):this.mutations.length>0?Promise.reject("Transactions lookups are invalid after writes."):this.datastore.lookup(t).then(function(t){return t.forEach(function(t){t instanceof Ze||t instanceof Je?e.recordVersion(t):u("Document in a transaction was a "+t.constructor.name)}),t})},t.prototype.write=function(t){if(this.committed)throw new Fe(Me.FAILED_PRECONDITION,"Transaction has already completed.");this.mutations=this.mutations.concat(t)},t.prototype.precondition=function(t){var e=this.readVersions.get(t);return e?zn.updateTime(e):zn.NONE},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t);if(e&&e.isEqual(jn.forDeletedDoc()))throw new Fe(Me.FAILED_PRECONDITION,"Can't update a document that doesn't exist.");return e?zn.updateTime(e):zn.exists(!0)},t.prototype.set=function(t,e){this.write(e.toMutations(t,this.precondition(t)))},t.prototype.update=function(t,e){this.write(e.toMutations(t,this.preconditionForUpdate(t)))},t.prototype.delete=function(t){this.write([new Zn(t,this.precondition(t))]),this.readVersions=this.readVersions.insert(t,jn.forDeletedDoc())},t.prototype.commit=function(){var t=this,e=this.readVersions;return this.mutations.forEach(function(t){e=e.remove(t.key)}),e.isEmpty()?this.datastore.commit(this.mutations).then(function(){t.committed=!0}):Promise.reject(Error("Every document read in a transaction must also be written."))},t}();!function(t){t[t.Unknown=0]="Unknown",t[t.Online=1]="Online",t[t.Offline=2]="Offline"}(oo||(oo={}));var yo;!function(t){t[t.RemoteStore=0]="RemoteStore",t[t.SharedClientState=1]="SharedClientState"}(yo||(yo={}));/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var vo,mo=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state=oo.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return t.prototype.handleWatchStreamStart=function(){var t=this;0===this.watchStreamFailures&&(this.setAndBroadcast(oo.Unknown),c(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(xr.OnlineStateTimeout,1e4,function(){return t.onlineStateTimer=null,c(t.state===oo.Unknown,"Timer should be canceled if we transitioned to a different state."),t.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),t.setAndBroadcast(oo.Offline),Promise.resolve()}))},t.prototype.handleWatchStreamFailure=function(t){this.state===oo.Online?(this.setAndBroadcast(oo.Unknown),c(0===this.watchStreamFailures,"watchStreamFailures must be 0"),c(null===this.onlineStateTimer,"onlineStateTimer must be null")):++this.watchStreamFailures>=1&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+t.toString()),this.setAndBroadcast(oo.Offline))},t.prototype.set=function(t){this.clearOnlineStateTimer(),this.watchStreamFailures=0,t===oo.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(t)},t.prototype.setAndBroadcast=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.logClientOfflineWarningIfNecessary=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(a(e),this.shouldWarnClientIsOffline=!1):o("OnlineStateTracker",e)},t.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},t}(),go=function(){function t(t,e,n,r){this.localStore=t,this.datastore=e,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.onlineStateTracker=new mo(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return De.__awaiter(this,void 0,void 0,function(){var t;return De.__generator(this,function(e){switch(e.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(t=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return t.lastStreamToken=e.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(oo.Unknown),[4,this.fillWritePipeline()];case 2:e.sent(),e.label=3;case 3:return[2]}})})},t.prototype.disableNetwork=function(){return De.__awaiter(this,void 0,void 0,function(){return De.__generator(this,function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(oo.Offline),[2]}})})},t.prototype.disableNetworkInternal=function(){return De.__awaiter(this,void 0,void 0,function(){return De.__generator(this,function(t){switch(t.label){case 0:return[4,this.writeStream.stop()];case 1:return t.sent(),[4,this.watchStream.stop()];case 2:return t.sent(),this.writePipeline.length>0&&(o("RemoteStore","Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}})})},t.prototype.shutdown=function(){return De.__awaiter(this,void 0,void 0,function(){return De.__generator(this,function(t){switch(t.label){case 0:return o("RemoteStore","RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(oo.Unknown),[2]}})})},t.prototype.listen=function(t){c(!f(this.listenTargets,t.targetId),"listen called with duplicate targetId!"),this.listenTargets[t.targetId]=t,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(t)},t.prototype.unlisten=function(t){c(f(this.listenTargets,t),"unlisten called without assigned target ID!"),delete this.listenTargets[t],this.watchStream.isOpen()&&this.sendUnwatchRequest(t),m(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(oo.Unknown))},t.prototype.getQueryDataForTarget=function(t){return this.listenTargets[t]||null},t.prototype.getRemoteKeysForTarget=function(t){return this.syncEngine.getRemoteKeysForTarget(t)},t.prototype.sendWatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t.targetId),this.watchStream.watch(t)},t.prototype.sendUnwatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t),this.watchStream.unwatch(t)},t.prototype.startWatchStream=function(){c(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new Er(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},t.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!m(this.listenTargets)},t.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},t.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},t.prototype.onWatchStreamOpen=function(){return De.__awaiter(this,void 0,void 0,function(){var t=this;return De.__generator(this,function(e){return d(this.listenTargets,function(e,n){t.sendWatchRequest(n)}),[2]})})},t.prototype.onWatchStreamClose=function(t){return De.__awaiter(this,void 0,void 0,function(){return De.__generator(this,function(e){return void 0===t&&c(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(t),this.startWatchStream()):this.onlineStateTracker.set(oo.Unknown),[2]})})},t.prototype.onWatchStreamChange=function(t,e){return De.__awaiter(this,void 0,void 0,function(){var n;return De.__generator(this,function(r){switch(r.label){case 0:return this.onlineStateTracker.set(oo.Online),t instanceof _r&&t.state===pr.Removed&&t.cause?[2,this.handleTargetError(t)]:(t instanceof gr?this.watchChangeAggregator.handleDocumentChange(t):t instanceof br?this.watchChangeAggregator.handleExistenceFilter(t):(c(t instanceof _r,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(t)),e.isEqual(jn.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),e.compareTo(n)>=0?[4,this.raiseWatchSnapshot(e)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}})})},t.prototype.raiseWatchSnapshot=function(t){var e=this;c(!t.isEqual(jn.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(t);return d(n.targetChanges,function(n,r){if(r.resumeToken.length>0){var i=e.listenTargets[n];i&&(e.listenTargets[n]=i.copy({resumeToken:r.resumeToken,snapshotVersion:t}))}}),n.targetMismatches.forEach(function(t){var n=e.listenTargets[t];if(n){e.listenTargets[t]=n.copy({resumeToken:h()}),e.sendUnwatchRequest(t);var r=new Vn(n.query,t,un.ExistenceFilterMismatch,n.sequenceNumber);e.sendWatchRequest(r)}}),this.syncEngine.applyRemoteEvent(n)},t.prototype.handleTargetError=function(t){var e=this;c(!!t.cause,"Handling target error without a cause");var n=t.cause,r=Promise.resolve();return t.targetIds.forEach(function(t){r=r.then(function(){return De.__awaiter(e,void 0,void 0,function(){return De.__generator(this,function(e){return f(this.listenTargets,t)?(delete this.listenTargets[t],this.watchChangeAggregator.removeTarget(t),[2,this.syncEngine.rejectListen(t,n)]):[2]})})})}),r},t.prototype.fillWritePipeline=function(){return De.__awaiter(this,void 0,void 0,function(){var t,e;return De.__generator(this,function(n){switch(n.label){case 0:return this.canAddToWritePipeline()?(t=this.writePipeline.length>0?this.writePipeline[this.writePipeline.length-1].batchId:-1,[4,this.localStore.nextMutationBatch(t)]):[3,4];case 1:return null!==(e=n.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(e),[4,this.fillWritePipeline()];case 3:n.sent(),n.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}})})},t.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},t.prototype.outstandingWrites=function(){return this.writePipeline.length},t.prototype.addToWritePipeline=function(t){c(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(t),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(t.mutations)},t.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&this.writePipeline.length>0},t.prototype.startWriteStream=function(){c(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},t.prototype.onWriteStreamOpen=function(){return De.__awaiter(this,void 0,void 0,function(){return De.__generator(this,function(t){return this.writeStream.writeHandshake(),[2]})})},t.prototype.onWriteHandshakeComplete=function(){var t=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function(){for(var e=0,n=t.writePipeline;e<n.length;e++){var r=n[e];t.writeStream.writeMutations(r.mutations)}}).catch(Zt)},t.prototype.onMutationResult=function(t,e){var n=this;c(this.writePipeline.length>0,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=Kr.from(r,t,e,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then(function(){return n.fillWritePipeline()})},t.prototype.onWriteStreamClose=function(t){return De.__awaiter(this,void 0,void 0,function(){var e,n=this;return De.__generator(this,function(r){return void 0===t&&c(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),t&&this.writePipeline.length>0?(e=void 0,e=this.writeStream.handshakeComplete?this.handleWriteError(t):this.handleHandshakeError(t),[2,e.then(function(){n.shouldStartWriteStream()&&n.startWriteStream()})]):[2]})})},t.prototype.handleHandshakeError=function(t){return De.__awaiter(this,void 0,void 0,function(){return De.__generator(this,function(e){return J(t.code)?(o("RemoteStore","RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=h(),[2,this.localStore.setLastStreamToken(h()).catch(Zt)]):[2]})})},t.prototype.handleWriteError=function(t){return De.__awaiter(this,void 0,void 0,function(){var e,n=this;return De.__generator(this,function(r){return Z(t.code)?(e=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(e.batchId,t).then(function(){return n.fillWritePipeline()})]):[2]})})},t.prototype.createTransaction=function(){return new po(this.datastore)},t.prototype.handleCredentialChange=function(){return De.__awaiter(this,void 0,void 0,function(){return De.__generator(this,function(t){switch(t.label){case 0:return this.canUseNetwork()?(o("RemoteStore","RemoteStore restarting streams for new credential"),this.networkEnabled=!1,[4,this.disableNetworkInternal()]):[3,3];case 1:return t.sent(),this.onlineStateTracker.set(oo.Unknown),[4,this.enableNetwork()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},t.prototype.applyPrimaryState=function(t){return De.__awaiter(this,void 0,void 0,function(){return De.__generator(this,function(e){switch(e.label){case 0:return this.isPrimary=t,t&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return e.sent(),[3,4];case 2:return t?[3,4]:[4,this.disableNetworkInternal()];case 3:e.sent(),this.onlineStateTracker.set(oo.Unknown),e.label=4;case 4:return[2]}})})},t}(),bo=function(){function t(){this.listeners=[]}return t}(),_o=function(){function t(t){this.syncEngine=t,this.queries=new ei(function(t){return t.canonicalId()}),this.onlineState=oo.Unknown,this.syncEngine.subscribe(this)}return t.prototype.listen=function(t){var e=t.query,n=!1,r=this.queries.get(e);return r||(n=!0,r=new bo,this.queries.set(e,r)),r.listeners.push(t),t.applyOnlineStateChange(this.onlineState),r.viewSnap&&t.onViewSnapshot(r.viewSnap),n?this.syncEngine.listen(e).then(function(t){return r.targetId=t,t}):Promise.resolve(r.targetId)},t.prototype.unlisten=function(t){return De.__awaiter(this,void 0,void 0,function(){var e,n,r,i;return De.__generator(this,function(o){return e=t.query,n=!1,r=this.queries.get(e),r&&(i=r.listeners.indexOf(t))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(e),[2,this.syncEngine.unlisten(e)]):[2]})})},t.prototype.onWatchChange=function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e],i=r.query,o=this.queries.get(i);if(o){for(var a=0,s=o.listeners;a<s.length;a++){s[a].onViewSnapshot(r)}o.viewSnap=r}}},t.prototype.onWatchError=function(t,e){var n=this.queries.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++){var o=i[r];o.onError(e)}this.queries.delete(t)},t.prototype.onOnlineStateChange=function(t){this.onlineState=t,this.queries.forEach(function(e,n){for(var r=0,i=n.listeners;r<i.length;r++){i[r].applyOnlineStateChange(t)}})},t}(),wo=function(){function t(t,e,n){this.query=t,this.queryObserver=e,this.raisedInitialEvent=!1,this.onlineState=oo.Unknown,this.options=n||{}}return t.prototype.onViewSnapshot=function(t){if(c(t.docChanges.length>0||t.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];i.type!==or.Metadata&&e.push(i)}t=new yr(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}this.raisedInitialEvent?this.shouldRaiseEvent(t)&&this.queryObserver.next(t):this.shouldRaiseInitialEvent(t,this.onlineState)&&this.raiseInitialEvent(t),this.snap=t},t.prototype.onError=function(t){this.queryObserver.error(t)},t.prototype.applyOnlineStateChange=function(t){this.onlineState=t,this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,t)&&this.raiseInitialEvent(this.snap)},t.prototype.shouldRaiseInitialEvent=function(t,e){if(c(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!t.fromCache)return!0;var n=e!==oo.Offline;return this.options.waitForSyncWhenOnline&&n?(c(t.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!t.docs.isEmpty()||e===oo.Offline},t.prototype.shouldRaiseEvent=function(t){if(t.docChanges.length>0)return!0;var e=this.snap&&this.snap.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.raiseInitialEvent=function(t){c(!this.raisedInitialEvent,"Trying to raise initial events for second time"),t=yr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(t)},t}(),Eo=function(){function t(t,e,n){this.targetId=t,this.addedKeys=e,this.removedKeys=n}return t.fromSnapshot=function(e,n){for(var r=ut(),i=ut(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case or.Added:r=r.add(s.doc.key);break;case or.Removed:i=i.add(s.doc.key)}}return new t(e,r,i)},t}(),To=function(){function t(t){this.key=t}return t}(),So=function(){function t(t){this.key=t}return t}(),Co=function(){function t(t,e){this.query=t,this._syncedDocuments=e,this.syncState=null,this.current=!1,this.limboDocuments=ut(),this.mutatedKeys=ut(),this.documentSet=new lr(t.docComparator.bind(t))}return Object.defineProperty(t.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),t.prototype.computeDocChanges=function(t,e){var n=this,r=e?e.changeSet:new dr,i=e?e.documentSet:this.documentSet,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=this.query.hasLimit()&&i.size===this.query.limit?i.last():null;if(t.inorderTraversal(function(t,e){var h=i.get(t),l=e instanceof Je?e:null;l&&(c(t.isEqual(l.key),"Mismatching keys found in document changes: "+t+" != "+l.key),l=n.query.matches(l)?l:null);var f=!!h&&n.mutatedKeys.has(h.key),p=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),d=!1;if(h&&l){h.data.isEqual(l.data)?f!==p&&(r.track({type:or.Metadata,doc:l}),d=!0):n.shouldWaitForSyncedDocument(h,l)||(r.track({type:or.Modified,doc:l}),d=!0,u&&n.query.docComparator(l,u)>0&&(s=!0))}else!h&&l?(r.track({type:or.Added,doc:l}),d=!0):h&&!l&&(r.track({type:or.Removed,doc:h}),d=!0,u&&(s=!0));d&&(l?(a=a.add(l),o=p?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))}),this.query.hasLimit())for(;a.size>this.query.limit;){var h=a.last();a=a.delete(h.key),o=o.delete(h.key),r.track({type:or.Removed,doc:h})}return c(!s||!e,"View was refilled using docs that themselves needed refilling."),{documentSet:a,changeSet:r,needsRefill:s,mutatedKeys:o}},t.prototype.shouldWaitForSyncedDocument=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this;c(!t.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=t.documentSet,this.mutatedKeys=t.mutatedKeys;var o=t.changeSet.getChanges();o.sort(function(t,e){return ae(t.type,e.type)||r.query.docComparator(t.doc,e.doc)}),this.applyTargetChange(n);var a=e?this.updateLimboDocuments():[],s=0===this.limboDocuments.size&&this.current,u=s?fr.Synced:fr.Local,h=u!==this.syncState;if(this.syncState=u,0!==o.length||h){return{snapshot:new yr(this.query,t.documentSet,i,o,t.mutatedKeys,u===fr.Local,h,!1),limboChanges:a}}return{limboChanges:a}},t.prototype.applyOnlineStateChange=function(t){return this.current&&t===oo.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new dr,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},t.prototype.shouldBeInLimbo=function(t){return!this._syncedDocuments.has(t)&&(!!this.documentSet.has(t)&&!this.documentSet.get(t).hasLocalMutations)},t.prototype.applyTargetChange=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e._syncedDocuments=e._syncedDocuments.add(t)}),t.modifiedDocuments.forEach(function(t){return c(e._syncedDocuments.has(t),"Modified document "+t+" not found in view.")}),t.removedDocuments.forEach(function(t){return e._syncedDocuments=e._syncedDocuments.delete(t)}),this.current=t.current)},t.prototype.updateLimboDocuments=function(){var t=this;if(!this.current)return[];var e=this.limboDocuments;this.limboDocuments=ut(),this.documentSet.forEach(function(e){t.shouldBeInLimbo(e.key)&&(t.limboDocuments=t.limboDocuments.add(e.key))});var n=[];return e.forEach(function(e){t.limboDocuments.has(e)||n.push(new So(e))}),this.limboDocuments.forEach(function(t){e.has(t)||n.push(new To(t))}),n},t.prototype.synchronizeWithPersistedState=function(t,e){this._syncedDocuments=e,this.limboDocuments=ut();var n=this.computeDocChanges(t);return this.applyChanges(n,!0)},t.prototype.computeInitialSnapshot=function(){return yr.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===fr.Local)},t}(),Io=function(){function t(t,e,n){this.query=t,this.targetId=e,this.view=n}return t}(),ko=function(){function t(t){this.key=t}return t}(),Ao=function(){function t(t,e,n,r){this.localStore=t,this.remoteStore=e,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new ei(function(t){return t.canonicalId()}),this.queryViewsByTarget={},this.limboTargetsByKey=new en(Ye.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new Hi,this.mutationUserCallbacks={},this.limboTargetIdGenerator=$r.forSyncEngine(),this.isPrimary=void 0,this.onlineState=oo.Unknown}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t){c(null!==t,"SyncEngine listener cannot be null"),c(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=t},t.prototype.listen=function(t){return De.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o;return De.__generator(this,function(a){switch(a.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(t))?(e=r.targetId,this.sharedClientState.addLocalQueryTarget(e),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateQuery(t)];case 2:return i=a.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),e=i.targetId,[4,this.initializeViewAndComputeSnapshot(i,"current"===o)];case 3:n=a.sent(),this.isPrimary&&this.remoteStore.listen(i),a.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,e]}})})},t.prototype.initializeViewAndComputeSnapshot=function(t,e){var n=this,r=t.query;return this.localStore.executeQuery(r).then(function(i){return n.localStore.remoteDocumentKeys(t.targetId).then(function(o){var a=new Co(r,o),s=a.computeDocChanges(i),u=mr.createSynthesizedTargetChangeForCurrentChange(t.targetId,e&&n.onlineState!==oo.Offline),h=a.applyChanges(s,!0===n.isPrimary,u);c(0===h.limboChanges.length,"View returned limbo docs before target ack from the server."),c(!!h.snapshot,"applyChanges for new view should always return a snapshot");var l=new Io(r,t.targetId,a);return n.queryViewsByQuery.set(r,l),n.queryViewsByTarget[t.targetId]=l,h.snapshot})})},t.prototype.synchronizeViewAndComputeSnapshot=function(t){var e=this;return this.localStore.executeQuery(t.query).then(function(n){return e.localStore.remoteDocumentKeys(t.targetId).then(function(r){return De.__awaiter(e,void 0,void 0,function(){var e;return De.__generator(this,function(i){return e=t.view.synchronizeWithPersistedState(n,r),this.isPrimary&&this.updateTrackedLimbos(t.targetId,e.limboChanges),[2,e]})})})})},t.prototype.unlisten=function(t){return De.__awaiter(this,void 0,void 0,function(){var e,n,r=this;return De.__generator(this,function(i){switch(i.label){case 0:return this.assertSubscribed("unlisten()"),(e=this.queryViewsByQuery.get(t),c(!!e,"Trying to unlisten on query not found:"+t),this.isPrimary)?(this.sharedClientState.removeLocalQueryTarget(e.targetId),n=this.sharedClientState.isActiveQueryTarget(e.targetId),n?[3,2]:[4,this.localStore.releaseQuery(t,!1).then(function(){r.sharedClientState.clearQueryState(e.targetId),r.remoteStore.unlisten(e.targetId),r.removeAndCleanupQuery(e)}).catch(Zt)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupQuery(e),[4,this.localStore.releaseQuery(t,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}})})},t.prototype.write=function(t,e){var n=this;return this.assertSubscribed("write()"),this.localStore.localWrite(t).then(function(t){return n.sharedClientState.addPendingMutation(t.batchId),n.addMutationCallback(t.batchId,e),n.emitNewSnapsAndNotifyLocalStore(t.changes)}).then(function(){return n.remoteStore.fillWritePipeline()})},t.prototype.wrapUpdateFunctionError=function(t){return t},t.prototype.runTransaction=function(t,e){var n=this;void 0===e&&(e=5),c(e>=0,"Got negative number of retries for transaction.");var r=this.remoteStore.createTransaction();return function(){try{var e=t(r);return!$(e)&&e.catch&&e.then?e.catch(function(t){return Promise.reject(n.wrapUpdateFunctionError(t))}):Promise.reject(Error("Transaction callback must return a Promise"))}catch(t){return Promise.reject(n.wrapUpdateFunctionError(t))}}().then(function(i){return r.commit().then(function(){return i}).catch(function(r){return 0===e?Promise.reject(r):n.runTransaction(t,e-1)})})},t.prototype.applyRemoteEvent=function(t){var e=this;return this.assertSubscribed("applyRemoteEvent()"),this.localStore.applyRemoteEvent(t).then(function(n){return v(t.targetChanges,function(t,n){var r=e.limboResolutionsByTarget[t];r&&(c(n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),n.addedDocuments.size>0?r.receivedDocument=!0:n.modifiedDocuments.size>0?c(r.receivedDocument,"Received change for limbo target document without add."):n.removedDocuments.size>0&&(c(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))}),e.emitNewSnapsAndNotifyLocalStore(n,t)}).catch(Zt)},t.prototype.applyOnlineStateChange=function(t,e){if(this.isPrimary&&e===yo.RemoteStore||!this.isPrimary&&e===yo.SharedClientState){var n=[];this.queryViewsByQuery.forEach(function(e,r){var i=r.view.applyOnlineStateChange(t);c(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)}),this.syncEngineListener.onOnlineStateChange(t),this.syncEngineListener.onWatchChange(n),this.onlineState=t,this.isPrimary&&this.sharedClientState.setOnlineState(t)}},t.prototype.rejectListen=function(t,e){return De.__awaiter(this,void 0,void 0,function(){var n,r,i,o,a,s,u=this;return De.__generator(this,function(h){switch(h.label){case 0:return this.assertSubscribed("rejectListens()"),(this.sharedClientState.updateQueryState(t,"rejected",e),n=this.limboResolutionsByTarget[t],r=n&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[t],i=new en(Ye.comparator),i=i.insert(r,new Ze(r,jn.forDeletedDoc())),o=ut().add(r),a=new vr(jn.MIN,{},new Bn(V),i,o),[2,this.applyRemoteEvent(a)]):[3,1];case 1:return s=this.queryViewsByTarget[t],c(!!s,"Unknown targetId: "+t),[4,this.localStore.releaseQuery(s.query,!1).then(function(){return u.removeAndCleanupQuery(s)}).catch(Zt)];case 2:h.sent(),this.syncEngineListener.onWatchError(s.query,e),h.label=3;case 3:return[2]}})})},t.prototype.applyBatchState=function(t,e,n){return De.__awaiter(this,void 0,void 0,function(){var r;return De.__generator(this,function(i){switch(i.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(t)];case 1:return r=i.sent(),null===r?(o("SyncEngine","Cannot apply mutation batch with id: "+t),[2]):"pending"!==e?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this.processUserCallback(t,n||null),this.localStore.removeCachedMutationBatchMetadata(t)):u("Unknown batchState: "+e),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}})})},t.prototype.applySuccessfulWrite=function(t){var e=this;this.assertSubscribed("applySuccessfulWrite()");var n=t.batch.batchId;return this.processUserCallback(n,null),this.localStore.acknowledgeBatch(t).then(function(t){return e.sharedClientState.updateMutationState(n,"acknowledged"),e.emitNewSnapsAndNotifyLocalStore(t)}).catch(Zt)},t.prototype.rejectFailedWrite=function(t,e){var n=this;return this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(t,e),this.localStore.rejectBatch(t).then(function(r){return n.sharedClientState.updateMutationState(t,"rejected",e),n.emitNewSnapsAndNotifyLocalStore(r)}).catch(Zt)},t.prototype.addMutationCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new en(V)),n=n.insert(t,e),this.mutationUserCallbacks[this.currentUser.toKey()]=n},t.prototype.processUserCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(t);r&&(c(t===n.minKey(),"Mutation callbacks processed out-of-order?"),e?r.reject(e):r.resolve(),n=n.remove(t)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},t.prototype.removeAndCleanupQuery=function(t){var e=this;if(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.queryViewsByQuery.delete(t.query),delete this.queryViewsByTarget[t.targetId],this.isPrimary){var n=this.limboDocumentRefs.referencesForId(t.targetId);this.limboDocumentRefs.removeReferencesForId(t.targetId),n.forEach(function(t){e.limboDocumentRefs.containsKey(t)||e.removeLimboTarget(t)})}},t.prototype.removeLimboTarget=function(t){var e=this.limboTargetsByKey.get(t);null!==e&&(this.remoteStore.unlisten(e),this.limboTargetsByKey=this.limboTargetsByKey.remove(t),delete this.limboResolutionsByTarget[e])},t.prototype.updateTrackedLimbos=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i instanceof To)this.limboDocumentRefs.addReference(i.key,t),this.trackLimboChange(i);else if(i instanceof So){o("SyncEngine","Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,t);var a=this.limboDocumentRefs.containsKey(i.key);a||this.removeLimboTarget(i.key)}else u("Unknown limbo change: "+JSON.stringify(i))}},t.prototype.trackLimboChange=function(t){var e=t.key;if(!this.limboTargetsByKey.get(e)){o("SyncEngine","New document in limbo: "+e);var n=this.limboTargetIdGenerator.next(),r=An.atPath(e.path);this.limboResolutionsByTarget[n]=new ko(e),this.remoteStore.listen(new Vn(r,n,un.LimboResolution,Pr.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(e,n)}},t.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},t.prototype.emitNewSnapsAndNotifyLocalStore=function(t,e){return De.__awaiter(this,void 0,void 0,function(){var n,r,i,o=this;return De.__generator(this,function(a){switch(a.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach(function(a,s){i.push(Promise.resolve().then(function(){var e=s.view.computeDocChanges(t);return e.needsRefill?o.localStore.executeQuery(s.query).then(function(t){return s.view.computeDocChanges(t,e)}):e}).then(function(t){var i=e&&e.targetChanges[s.targetId],a=s.view.applyChanges(t,!0===o.isPrimary,i);if(o.updateTrackedLimbos(s.targetId,a.limboChanges),a.snapshot){o.isPrimary&&o.sharedClientState.updateQueryState(s.targetId,a.snapshot.fromCache?"not-current":"current"),n.push(a.snapshot);var u=Eo.fromSnapshot(s.targetId,a.snapshot);r.push(u)}}))}),[4,Promise.all(i)];case 1:return a.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return a.sent(),[2]}})})},t.prototype.assertSubscribed=function(t){c(null!==this.syncEngineListener,"Trying to call "+t+" before calling subscribe().")},t.prototype.handleCredentialChange=function(t){return De.__awaiter(this,void 0,void 0,function(){var e,n;return De.__generator(this,function(r){switch(r.label){case 0:return e=!this.currentUser.isEqual(t),this.currentUser=t,e?[4,this.localStore.handleUserChange(t)]:[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}})})},t.prototype.applyPrimaryState=function(t){return De.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o,a,s,u=this;return De.__generator(this,function(c){switch(c.label){case 0:return!0!==t||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return c.sent(),e=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(e.toArray())];case 2:for(n=c.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.remoteStore.listen(o);return[3,7];case 3:return!1!==t||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,a=[],s=Promise.resolve(),d(this.queryViewsByTarget,function(t,e){u.sharedClientState.isLocalQueryTarget(t)?a.push(t):s=s.then(function(){return u.unlisten(e.query)}),u.remoteStore.unlisten(e.targetId)}),[4,s]);case 4:return c.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(a)];case 5:return c.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})},t.prototype.resetLimboDocuments=function(){var t=this;d(this.limboResolutionsByTarget,function(e){t.remoteStore.unlisten(e)}),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new en(Ye.comparator)},t.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(t){for(var e=this,n=Promise.resolve(),r=[],i=[],o=0,a=t;o<a.length;o++){var s=a[o];!function(t){n=n.then(function(){return De.__awaiter(e,void 0,void 0,function(){var e,n,o,a;return De.__generator(this,function(s){switch(s.label){case 0:return n=this.queryViewsByTarget[t],n?[4,this.localStore.releaseQuery(n.query,!0)]:[3,4];case 1:return s.sent(),[4,this.localStore.allocateQuery(n.query)];case 2:return e=s.sent(),[4,this.synchronizeViewAndComputeSnapshot(n)];case 3:return o=s.sent(),o.snapshot&&i.push(o.snapshot),[3,8];case 4:return c(!0===this.isPrimary,"A secondary tab should never have an active query without an active view."),[4,this.localStore.getQueryForTarget(t)];case 5:return a=s.sent(),c(!!a,"Query data for target "+t+" not found"),[4,this.localStore.allocateQuery(a)];case 6:return e=s.sent(),[4,this.initializeViewAndComputeSnapshot(e,!1)];case 7:s.sent(),s.label=8;case 8:return r.push(e),[2]}})})})}(s)}return n.then(function(){return e.syncEngineListener.onWatchChange(i),r})},t.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},t.prototype.applyTargetState=function(t,e,n){return De.__awaiter(this,void 0,void 0,function(){var r,i,a=this;return De.__generator(this,function(s){switch(s.label){case 0:if(this.isPrimary)return o("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.queryViewsByTarget[t])return[3,5];switch(r=e){case"current":case"not-current":return[3,1];case"rejected":return[3,2]}return[3,4];case 1:return[2,this.localStore.getNewDocumentChanges().then(function(n){return De.__awaiter(a,void 0,void 0,function(){var r;return De.__generator(this,function(i){switch(i.label){case 0:return r=vr.createSynthesizedRemoteEventForCurrentChange(t,"current"===e),[4,this.emitNewSnapsAndNotifyLocalStore(n,r)];case 1:return i.sent(),[2]}})})},function(t){return De.__awaiter(a,void 0,void 0,function(){var e;return De.__generator(this,function(n){switch(n.label){case 0:return xt(t)?(e=[],d(this.queryViewsByTarget,function(t){return e.push(t)}),[4,this.synchronizeQueryViewsAndRaiseSnapshots(e)]):[3,2];case 1:return n.sent(),[3,3];case 2:throw t;case 3:return[2]}})})})];case 2:return i=this.queryViewsByTarget[t],this.removeAndCleanupQuery(i),[4,this.localStore.releaseQuery(i.query,!0)];case 3:return s.sent(),this.syncEngineListener.onWatchError(i.query,n),[3,5];case 4:u("Unexpected target state: "+e),s.label=5;case 5:return[2]}})})},t.prototype.applyActiveTargetsChange=function(t,e){return De.__awaiter(this,void 0,void 0,function(){var n,r,i,o,a,s,u,h,l,i,f=this;return De.__generator(this,function(p){switch(p.label){case 0:if(!this.isPrimary)return[2];n=0,r=t,p.label=1;case 1:return n<r.length?(i=r[n],c(!this.queryViewsByTarget[i],"Trying to add an already active target"),[4,this.localStore.getQueryForTarget(i)]):[3,6];case 2:return o=p.sent(),c(!!o,"Query data for active target "+i+" not found"),[4,this.localStore.allocateQuery(o)];case 3:return a=p.sent(),[4,this.initializeViewAndComputeSnapshot(a,!1)];case 4:p.sent(),this.remoteStore.listen(a),p.label=5;case 5:return n++,[3,1];case 6:s=function(t){var e;return De.__generator(this,function(n){switch(n.label){case 0:return e=u.queryViewsByTarget[t],e?[4,u.localStore.releaseQuery(e.query,!1).then(function(){f.remoteStore.unlisten(t),f.removeAndCleanupQuery(e)}).catch(Zt)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})},u=this,h=0,l=e,p.label=7;case 7:return h<l.length?(i=l[h],[5,s(i)]):[3,10];case 8:p.sent(),p.label=9;case 9:return h++,[3,7];case 10:return[2]}})})},t.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},t.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},t.prototype.getRemoteKeysForTarget=function(t){var e=this.limboResolutionsByTarget[t];return e&&e.receivedDocument?ut().add(e.key):this.queryViewsByTarget[t]?this.queryViewsByTarget[t].view.syncedDocuments:ut()},t}(),No=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t.UNAUTHENTICATED=new t(null),t.GOOGLE_CREDENTIALS=new t("google-credentials-uid"),t.FIRST_PARTY=new t("first-party-uid"),t}(),Do="SharedClientState",Oo="firestore_clients",Ro="firestore_mutations",xo="firestore_targets",Po="firestore_online_state",Lo="firestore_sequence_number",Mo=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r,c(void 0!==r==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return t.fromWebStorageEntry=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new Fe(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(a(Do,"Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Fo=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n,c(void 0!==n==("rejected"===e),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return t.fromWebStorageEntry=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new Fe(r.error.code,r.error.message)),i?new t(e,r.state,o):(a(Do,"Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Uo=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.fromWebStorageEntry=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=ct(),s=0;i&&s<r.activeTargetIds.length;++s)i=Y(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(a(Do,"Failed to parse client data for instance '"+e+"': "+n),null)},t}(),jo=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.fromWebStorageEntry=function(e){var n=JSON.parse(e);return"object"==typeof n&&void 0!==oo[n.onlineState]&&"string"==typeof n.clientId?new t(n.clientId,oo[n.onlineState]):(a(Do,"Failed to parse online state: "+e),null)},t}(),qo=function(){function t(){this.activeTargetIds=ct()}return t.prototype.addQueryTarget=function(t){c(!this.activeTargetIds.has(t),"Target with ID '"+t+"' already active."),this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.removeQueryTarget=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.toWebStorageJSON=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Vo=function(){function t(e,n,r,i,o){if(this.queue=e,this.platform=n,this.persistenceKey=r,this.localClientId=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!t.isAvailable(this.platform))throw new Fe(Me.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.localClientStorageKey=this.toWebStorageClientStateKey(this.localClientId),this.sequenceNumberKey=Lo+"_"+r,this.activeClients[this.localClientId]=new qo,this.clientStateKeyRe=new RegExp("^"+Oo+"_"+a+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+Ro+"_"+a+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+xo+"_"+a+"_(\\d+)$"),this.onlineStateKey=Po+"_"+r,this.platform.window.addEventListener("storage",this.storageListener)}return t.isAvailable=function(t){return!(!t.window||null==t.window.localStorage)},t.prototype.start=function(){return De.__awaiter(this,void 0,void 0,function(){var t,e,n,r,i,o,a,s,u,h,l,f=this;return De.__generator(this,function(p){switch(p.label){case 0:return c(!this.started,"WebStorageSharedClientState already started"),c(null!==this.syncEngine,"syncEngine property must be set before calling start()"),c(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(t=p.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.localClientId&&(i=this.getItem(this.toWebStorageClientStateKey(r)))&&(o=Uo.fromWebStorageEntry(r,i))&&(this.activeClients[o.clientId]=o);for(this.persistClientState(),a=this.storage.getItem(this.onlineStateKey),a&&(s=this.fromWebStorageOnlineState(a))&&this.handleOnlineStateEvent(s),u=0,h=this.earlyEvents;u<h.length;u++)l=h[u],this.handleWebStorageEvent(l);return this.earlyEvents=[],this.platform.window.addEventListener("unload",function(){return f.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.sequenceNumberKey,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){var t=ct();return v(this.activeClients,function(e,n){t=t.unionWith(n.activeTargetIds)}),t},t.prototype.isActiveQueryTarget=function(t){for(var e in this.activeClients)if(this.activeClients.hasOwnProperty(e)&&this.activeClients[e].activeTargetIds.has(t))return!0;return!1},t.prototype.addPendingMutation=function(t){this.persistMutationState(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.persistMutationState(t,e,n),this.removeMutationState(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(this.toWebStorageQueryTargetMetadataKey(t));if(n){var r=Fo.fromWebStorageEntry(t,n);r&&(e=r.state)}}return this.localClientState.addQueryTarget(t),this.persistClientState(),e},t.prototype.removeLocalQueryTarget=function(t){this.localClientState.removeQueryTarget(t),this.persistClientState()},t.prototype.isLocalQueryTarget=function(t){return this.localClientState.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(this.toWebStorageQueryTargetMetadataKey(t))},t.prototype.updateQueryState=function(t,e,n){this.persistQueryTargetState(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.removeMutationState(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.persistOnlineState(t)},t.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return o(Do,"READ",t,e),e},t.prototype.setItem=function(t,e){o(Do,"SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){o(Do,"REMOVE",t),this.storage.removeItem(t)},t.prototype.handleWebStorageEvent=function(t){var e=this;if(t.storageArea===this.storage){if(o(Do,"EVENT",t.key,t.newValue),t.key===this.localClientStorageKey)return void a("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget(function(){return De.__awaiter(e,void 0,void 0,function(){var e,n,r,i,o,a;return De.__generator(this,function(s){if(!this.started)return this.earlyEvents.push(t),[2];if(null===t.key)return[2];if(this.clientStateKeyRe.test(t.key)){if(null==t.newValue)return n=this.fromWebStorageClientStateKey(t.key),[2,this.handleClientStateEvent(n,null)];if(e=this.fromWebStorageClientState(t.key,t.newValue))return[2,this.handleClientStateEvent(e.clientId,e)]}else if(this.mutationBatchKeyRe.test(t.key)){if(null!==t.newValue&&(r=this.fromWebStorageMutationMetadata(t.key,t.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(t.key)){if(null!==t.newValue&&(i=this.fromWebStorageQueryTargetMetadata(t.key,t.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(t.key===this.onlineStateKey){if(null!==t.newValue&&(o=this.fromWebStorageOnlineState(t.newValue)))return[2,this.handleOnlineStateEvent(o)]}else t.key===this.sequenceNumberKey&&(c(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(a=se(t.newValue))!==Pr.INVALID&&this.sequenceNumberHandler(a));return[2]})})})}},Object.defineProperty(t.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),t.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},t.prototype.persistMutationState=function(t,e,n){var r=new Mo(this.currentUser,t,e,n),i=this.toWebStorageMutationBatchKey(t);this.setItem(i,r.toWebStorageJSON())},t.prototype.removeMutationState=function(t){var e=this.toWebStorageMutationBatchKey(t);this.removeItem(e)},t.prototype.persistOnlineState=function(t){var e={clientId:this.localClientId,onlineState:oo[t]};this.storage.setItem(this.onlineStateKey,JSON.stringify(e))},t.prototype.persistQueryTargetState=function(t,e,n){var r=this.toWebStorageQueryTargetMetadataKey(t),i=new Fo(t,e,n);this.setItem(r,i.toWebStorageJSON())},t.prototype.toWebStorageClientStateKey=function(t){return c(-1===t.indexOf("_"),"Client key cannot contain '_', but was '"+t+"'"),Oo+"_"+this.persistenceKey+"_"+t},t.prototype.toWebStorageQueryTargetMetadataKey=function(t){return xo+"_"+this.persistenceKey+"_"+t},t.prototype.toWebStorageMutationBatchKey=function(t){var e=Ro+"_"+this.persistenceKey+"_"+t;return this.currentUser.isAuthenticated()&&(e+="_"+this.currentUser.uid),e},t.prototype.fromWebStorageClientStateKey=function(t){var e=this.clientStateKeyRe.exec(t);return e?e[1]:null},t.prototype.fromWebStorageClientState=function(t,e){var n=this.fromWebStorageClientStateKey(t);return c(null!==n,"Cannot parse client state key '"+t+"'"),Uo.fromWebStorageEntry(n,e)},t.prototype.fromWebStorageMutationMetadata=function(t,e){var n=this.mutationBatchKeyRe.exec(t);c(null!==n,"Cannot parse mutation batch key '"+t+"'");var r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Mo.fromWebStorageEntry(new No(i),r,e)},t.prototype.fromWebStorageQueryTargetMetadata=function(t,e){var n=this.queryTargetKeyRe.exec(t);c(null!==n,"Cannot parse query target key '"+t+"'");var r=Number(n[1]);return Fo.fromWebStorageEntry(r,e)},t.prototype.fromWebStorageOnlineState=function(t){return jo.fromWebStorageEntry(t)},t.prototype.handleMutationBatchEvent=function(t){return De.__awaiter(this,void 0,void 0,function(){return De.__generator(this,function(e){return t.user.uid!==this.currentUser.uid?(o(Do,"Ignoring mutation for non-active user "+t.user.uid),[2]):[2,this.syncEngine.applyBatchState(t.batchId,t.state,t.error)]})})},t.prototype.handleQueryTargetEvent=function(t){return this.syncEngine.applyTargetState(t.targetId,t.state,t.error)},t.prototype.handleClientStateEvent=function(t,e){var n=this,r=this.getAllActiveQueryTargets();e?this.activeClients[t]=e:delete this.activeClients[t];var i=this.getAllActiveQueryTargets(),o=[],a=[];return i.forEach(function(t){return De.__awaiter(n,void 0,void 0,function(){return De.__generator(this,function(e){return r.has(t)||o.push(t),[2]})})}),r.forEach(function(t){return De.__awaiter(n,void 0,void 0,function(){return De.__generator(this,function(e){return i.has(t)||a.push(t),[2]})})}),this.syncEngine.applyActiveTargetsChange(o,a)},t.prototype.handleOnlineStateEvent=function(t){this.activeClients[t.clientId]&&this.onlineStateHandler(t.onlineState)},t}(),Bo=function(){function t(){this.localState=new qo,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.localState.addQueryTarget(t),this.queryState[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.queryState[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.localState.removeQueryTarget(t)},t.prototype.isLocalQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.queryState[t]},t.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.start=function(){return this.localState=new qo,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t}(),Wo=function(){function t(t,e){this.cacheSizeBytes=t,this.experimentalTabSynchronization=e}return t.prototype.lruParams=function(){return Li.withCacheSize(this.cacheSizeBytes)},t}(),Ko=function(){function t(){}return t}(),Qo=function(){function t(t,e,n,r){this.platform=t,this.databaseInfo=e,this.credentials=n,this.asyncQueue=r,this.clientId=Ue.newId()}return t.prototype.start=function(t){var e=this,n=new Lr,r=new Lr,i=!1;return this.credentials.setChangeListener(function(o){i?e.asyncQueue.enqueueAndForget(function(){return e.handleCredentialChange(o)}):(i=!0,e.initializePersistence(t,r,o).then(function(t){return e.initializeRest(o,t)}).then(n.resolve,n.reject))}),this.asyncQueue.enqueueAndForget(function(){return n.promise}),r.promise},t.prototype.enableNetwork=function(){var t=this;return this.asyncQueue.enqueue(function(){return t.syncEngine.enableNetwork()})},t.prototype.initializePersistence=function(t,e,n){var r=this;return t instanceof Wo?this.startIndexedDbPersistence(n,t).then(function(t){return e.resolve(),t}).catch(function(t){if(e.reject(t),!r.canFallback(t))throw t;return console.warn("Error enabling offline storage. Falling back to storage disabled: "+t),r.startMemoryPersistence()}):(e.resolve(),this.startMemoryPersistence())},t.prototype.canFallback=function(t){return t instanceof Fe?t.code===Me.FAILED_PRECONDITION||t.code===Me.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||(22===t.code||20===t.code)},t.prototype.startIndexedDbPersistence=function(t,e){var n=this,r=Ki.buildStoragePrefix(this.databaseInfo),i=new Ir(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then(function(){return De.__awaiter(n,void 0,void 0,function(){var n,o;return De.__generator(this,function(a){switch(a.label){case 0:if(e.experimentalTabSynchronization&&!Vo.isAvailable(this.platform))throw new Fe(Me.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return o=e.lruParams(),e.experimentalTabSynchronization?(this.sharedClientState=new Vo(this.asyncQueue,this.platform,r,this.clientId,t),[4,Ki.createMultiClientIndexedDbPersistence(r,this.clientId,this.platform,this.asyncQueue,i,o,{sequenceNumberSyncer:this.sharedClientState})]):[3,2];case 1:return n=a.sent(),[3,4];case 2:return this.sharedClientState=new Bo,[4,Ki.createIndexedDbPersistence(r,this.clientId,this.platform,this.asyncQueue,i,o)];case 3:n=a.sent(),a.label=4;case 4:return this.persistence=n,[2,n.referenceDelegate.garbageCollector]}})})})},t.prototype.startMemoryPersistence=function(){return this.persistence=to.createEagerPersistence(this.clientId),this.sharedClientState=new Bo,Promise.resolve(null)},t.prototype.initializeRest=function(t,e){var n=this;return o("FirestoreClient","Initializing. user=",t.uid),this.platform.loadConnection(this.databaseInfo).then(function(r){return De.__awaiter(n,void 0,void 0,function(){var n,i,o,a,s=this;return De.__generator(this,function(u){switch(u.label){case 0:return this.localStore=new $i(this.persistence,t),e&&(this.lruScheduler=new Mi(e,this.asyncQueue,this.localStore)),n=this.platform.newSerializer(this.databaseInfo.databaseId),i=new fo(this.asyncQueue,r,this.credentials,n),o=function(t){return s.syncEngine.applyOnlineStateChange(t,yo.RemoteStore)},a=function(t){return s.syncEngine.applyOnlineStateChange(t,yo.SharedClientState)},this.remoteStore=new go(this.localStore,i,this.asyncQueue,o),this.syncEngine=new Ao(this.localStore,this.remoteStore,this.sharedClientState,t),this.sharedClientState.onlineStateHandler=a,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new _o(this.syncEngine),[4,this.sharedClientState.start()];case 1:return u.sent(),[4,this.remoteStore.start()];case 2:return u.sent(),[4,this.persistence.setPrimaryStateListener(function(t){return De.__awaiter(s,void 0,void 0,function(){return De.__generator(this,function(e){switch(e.label){case 0:return[4,this.syncEngine.applyPrimaryState(t)];case 1:return e.sent(),this.lruScheduler&&(t&&!this.lruScheduler.started?this.lruScheduler.start():t||this.lruScheduler.stop()),[2]}})})})];case 3:return u.sent(),[2]}})})})},t.prototype.handleCredentialChange=function(t){return this.asyncQueue.verifyOperationInProgress(),o("FirestoreClient","Credential Changed. Current user: "+t.uid),this.syncEngine.handleCredentialChange(t)},t.prototype.disableNetwork=function(){var t=this;return this.asyncQueue.enqueue(function(){return t.syncEngine.disableNetwork()})},t.prototype.shutdown=function(t){var e=this;return this.asyncQueue.enqueue(function(){return De.__awaiter(e,void 0,void 0,function(){return De.__generator(this,function(e){switch(e.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return e.sent(),[4,this.sharedClientState.shutdown()];case 2:return e.sent(),[4,this.persistence.shutdown(t&&t.purgePersistenceWithDataLoss)];case 3:return e.sent(),this.credentials.removeChangeListener(),[2]}})})})},t.prototype.listen=function(t,e,n){var r=this,i=new wo(t,e,n);return this.asyncQueue.enqueueAndForget(function(){return r.eventMgr.listen(i)}),i},t.prototype.unlisten=function(t){var e=this;this.asyncQueue.enqueueAndForget(function(){return e.eventMgr.unlisten(t)})},t.prototype.getDocumentFromLocalCache=function(t){var e=this;return this.asyncQueue.enqueue(function(){return e.localStore.readDocument(t)}).then(function(t){if(t instanceof Je)return t;if(t instanceof Ze)return null;throw new Fe(Me.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")})},t.prototype.getDocumentsFromLocalCache=function(t){var e=this;return this.asyncQueue.enqueue(function(){return e.localStore.executeQuery(t)}).then(function(e){var n=ut(),r=new Co(t,n),i=r.computeDocChanges(e);return r.applyChanges(i,!1).snapshot})},t.prototype.write=function(t){var e=this,n=new Lr;return this.asyncQueue.enqueueAndForget(function(){return e.syncEngine.write(t,n)}),n.promise},t.prototype.databaseId=function(){return this.databaseInfo.databaseId},t.prototype.transaction=function(t){var e=this;return this.asyncQueue.enqueue(function(){return De.__awaiter(e,void 0,void 0,function(){return De.__generator(this,function(t){return[2]})})}).then(function(){return e.syncEngine.runTransaction(t)})},t}(),Go=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.scheduleEvent(this.observer.next,t)},t.prototype.error=function(t){this.scheduleEvent(this.observer.error,t)},t.prototype.mute=function(){this.muted=!0},t.prototype.scheduleEvent=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Ho=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];T("FieldPath",t,"fieldNames",1);for(var n=0;n<t.length;++n)if(S("FieldPath","string",n,t[n]),0===t[n].length)throw new Fe(Me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $e(t)}return t.documentId=function(){return t._DOCUMENT_ID},t.prototype.isEqual=function(e){if(!(e instanceof t))throw U("isEqual","FieldPath",1,e);return this._internalPath.isEqual(e._internalPath)},t._DOCUMENT_ID=new t($e.keyField().canonicalString()),t}(),zo=new RegExp("[~\\*/\\[\\]]"),$o=function(){function t(t,e){this.user=e,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+t}}return t}(),Yo=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){c(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,t(No.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){c(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},t}(),Xo=function(){function t(t){var e=this;this.app=t,this.tokenListener=null,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){e.tokenCounter++,e.currentUser=e.getUser(),e.changeListener&&e.changeListener(e.currentUser)},this.tokenCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}return t.prototype.getToken=function(){var t=this;c(null!=this.tokenListener,"getToken cannot be called after listener removed.");var e=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.app.INTERNAL.getToken(n).then(function(n){if(t.tokenCounter!==e)throw new Fe(Me.ABORTED,"getToken aborted due to token change.");return n?(c("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new $o(n.accessToken,t.currentUser)):null})},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){c(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,this.currentUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){c(null!=this.tokenListener,"removeChangeListener() called twice"),c(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},t.prototype.getUser=function(){var t=this.app.INTERNAL.getUid();return c(null===t||"string"==typeof t,"Received invalid UID: "+t),new No(t)},t}(),Jo=function(){function t(t,e){this.gapi=t,this.sessionIndex=e,this.type="FirstParty",this.user=No.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.sessionIndex},e=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!0,configurable:!0}),t}(),Zo=function(){function t(t,e){this.gapi=t,this.sessionIndex=e}return t.prototype.getToken=function(){return Promise.resolve(new Jo(this.gapi,this.sessionIndex))},t.prototype.setChangeListener=function(t){t(No.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}(),ta=function(){function t(t){this._methodName=t}return t.delete=function(){return b("FieldValue.delete",arguments),ea.instance},t.serverTimestamp=function(){return b("FieldValue.serverTimestamp",arguments),na.instance},t.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return w("FieldValue.arrayUnion",arguments,1),new ra(t)},t.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return w("FieldValue.arrayRemove",arguments,1),new ia(t)},t.increment=function(t){return S("FieldValue.increment","number",1,t),_("FieldValue.increment",arguments,1),new oa(t)},t.prototype.isEqual=function(t){return this===t},t}(),ea=function(t){function e(){return t.call(this,"FieldValue.delete")||this}return De.__extends(e,t),e.instance=new e,e}(ta),na=function(t){function e(){return t.call(this,"FieldValue.serverTimestamp")||this}return De.__extends(e,t),e.instance=new e,e}(ta),ra=function(t){function e(e){var n=t.call(this,"FieldValue.arrayUnion")||this;return n._elements=e,n}return De.__extends(e,t),e}(ta),ia=function(t){function e(e){var n=t.call(this,"FieldValue.arrayRemove")||this;return n._elements=e,n}return De.__extends(e,t),e}(ta),oa=function(t){function e(e){var n=t.call(this,"FieldValue.increment")||this;return n._operand=e,n}return De.__extends(e,t),e}(ta),aa=l(ta,"Use FieldValue.<field>() instead."),sa=/^__.*__$/,ua=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[];return null!==this.fieldMask?n.push(new Xn(t,this.data,this.fieldMask,e)):n.push(new Yn(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new Jn(t,this.fieldTransforms)),n},t}(),ca=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[new Xn(t,this.data,this.fieldMask,e)];return this.fieldTransforms.length>0&&n.push(new Jn(t,this.fieldTransforms)),n},t}();!function(t){t[t.Set=0]="Set",t[t.Update=1]="Update",t[t.MergeSet=2]="MergeSet",t[t.Argument=3]="Argument"}(vo||(vo={}));var ha=function(){function t(t,e,n,r,i,o){this.dataSource=t,this.methodName=e,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}return t.prototype.childContextForField=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(e),r},t.prototype.childContextForFieldPath=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},t.prototype.childContextForArray=function(e){return new t(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},t.prototype.createError=function(t){var e=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new Fe(Me.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.validatePath=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))},t.prototype.validatePathSegment=function(t){if(fe(this.dataSource)&&sa.test(t))throw this.createError("Document fields cannot begin and end with __")},t}(),la=function(){function t(t,e){this.databaseId=t,this.key=e}return t}(),fa=function(){function t(t){this.preConverter=t}return t.prototype.parseSetData=function(t,e){var n=new ha(vo.Set,t,$e.EMPTY_PATH);de("Data must be an object, but it was:",n,e);var r=this.parseData(e,n);return new ua(r,null,n.fieldTransforms)},t.prototype.parseMergeData=function(t,e,n){var r=new ha(vo.MergeSet,t,$e.EMPTY_PATH);de("Data must be an object, but it was:",r,e);var i,o,a=this.parseData(e,r);if(n){for(var s=new Bn($e.comparator),c=0,h=n;c<h.length;c++){var l=h[c],f=void 0;if(l instanceof Ho)f=l._internalPath;else{if("string"!=typeof l)throw u("Expected stringOrFieldPath to be a string or a FieldPath");f=ve(t,l)}if(!r.contains(f))throw new Fe(Me.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");s=s.add(f)}i=Kn.fromSet(s),o=r.fieldTransforms.filter(function(t){return i.covers(t.field)})}else i=Kn.fromArray(r.fieldMask),o=r.fieldTransforms;return new ua(a,i,o)},t.prototype.parseUpdateData=function(t,e){var n=this,r=new ha(vo.Update,t,$e.EMPTY_PATH);de("Data must be an object, but it was:",r,e);var i=new Bn($e.comparator),o=En.EMPTY;v(e,function(e,a){var s=ve(t,e),u=r.childContextForFieldPath(s);if((a=n.runPreConverter(a,u))instanceof ea)i=i.add(s);else{var c=n.parseData(a,u);null!=c&&(i=i.add(s),o=o.set(s,c))}});var a=Kn.fromSet(i);return new ca(o,a,r.fieldTransforms)},t.prototype.parseUpdateVarargs=function(t,e,n,r){var i=new ha(vo.Update,t,$e.EMPTY_PATH),o=[ye(t,e)],a=[n];if(r.length%2!=0)throw new Fe(Me.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(ye(t,r[s])),a.push(r[s+1]);for(var u=new Bn($e.comparator),c=En.EMPTY,s=0;s<o.length;++s){var h=o[s],l=i.childContextForFieldPath(h),f=this.runPreConverter(a[s],l);if(f instanceof ea)u=u.add(h);else{var p=this.parseData(f,l);null!=p&&(u=u.add(h),c=c.set(h,p))}}var d=Kn.fromSet(u);return new ca(c,d,i.fieldTransforms)},t.prototype.parseQueryValue=function(t,e){var n=new ha(vo.Argument,t,$e.EMPTY_PATH),r=this.parseData(e,n);return c(null!=r,"Parsed data should not be null."),c(0===n.fieldTransforms.length,"Field transforms should have been disallowed."),r},t.prototype.runPreConverter=function(t,e){try{return this.preConverter(t)}catch(t){var n=me(t);throw e.createError(n)}},t.prototype.parseData=function(t,e){if(t=this.runPreConverter(t,e),pe(t))return de("Unsupported field value:",e,t),this.parseObject(t,e);if(t instanceof ta)return this.parseSentinelFieldValue(t,e),null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.arrayElement)throw e.createError("Nested arrays are not supported");return this.parseArray(t,e)}return this.parseScalarValue(t,e)},t.prototype.parseObject=function(t,e){var n=this,r=new en(V);return m(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):v(t,function(t,i){var o=n.parseData(i,e.childContextForField(t));null!=o&&(r=r.insert(t,o))}),new En(r)},t.prototype.parseArray=function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=o[i],s=this.parseData(a,e.childContextForArray(r));null==s&&(s=ln.INSTANCE),n.push(s),r++}return new Tn(n)},t.prototype.parseSentinelFieldValue=function(t,e){if(!fe(e.dataSource))throw e.createError(t._methodName+"() can only be used with update() and set()");if(null===e.path)throw e.createError(t._methodName+"() is not currently supported inside arrays");if(t instanceof ea){if(e.dataSource!==vo.MergeSet)throw e.dataSource===vo.Update?(c(e.path.length>0,"FieldValue.delete() at the top level should have already been handled."),e.createError("FieldValue.delete() can only appear at the top level of your update data")):e.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");e.fieldMask.push(e.path)}else if(t instanceof na)e.fieldTransforms.push(new Qn(e.path,tr.instance));else if(t instanceof ra){var n=this.parseArrayTransformElements(t._methodName,t._elements),r=new er(n);e.fieldTransforms.push(new Qn(e.path,r))}else if(t instanceof ia){var n=this.parseArrayTransformElements(t._methodName,t._elements),i=new nr(n);e.fieldTransforms.push(new Qn(e.path,i))}else if(t instanceof oa){var o=this.parseQueryValue("FieldValue.increment",t._operand),a=new rr(o);e.fieldTransforms.push(new Qn(e.path,a))}else u("Unknown FieldValue type: "+t)},t.prototype.parseScalarValue=function(t,e){if(null===t)return ln.INSTANCE;if("number"==typeof t)return Y(t)?new dn(t):new yn(t);if("boolean"==typeof t)return fn.of(t);if("string"==typeof t)return new vn(t);if(t instanceof Date)return new mn(Be.fromDate(t));if(t instanceof Be)return new mn(new Be(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)));if(t instanceof Ve)return new wn(t);if(t instanceof je)return new bn(t);if(t instanceof la)return new _n(t.databaseId,t.key);throw e.createError("Unsupported field value: "+P(t))},t.prototype.parseArrayTransformElements=function(t,e){var n=this;return e.map(function(e,r){var i=new ha(vo.Argument,t,$e.EMPTY_PATH);return n.parseData(e,i.childContextForArray(r))})},t}(),pa="firestore.googleapis.com",da=!0,ya=!0,va=Li.COLLECTION_DISABLED,ma=function(){function t(t){if(void 0===t.host){if(void 0!==t.ssl)throw new Fe(Me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=pa,this.ssl=da}else I("settings","non-empty string","host",t.host),this.host=t.host,k("settings","boolean","ssl",t.ssl),this.ssl=p(t.ssl,da);if(F("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes"]),k("settings","object","credentials",t.credentials),this.credentials=t.credentials,k("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),!0===t.timestampsInSnapshots?a("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===t.timestampsInSnapshots&&a("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=p(t.timestampsInSnapshots,ya),k("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=Li.DEFAULT_CACHE_SIZE_BYTES;else{if(t.cacheSizeBytes!==va&&t.cacheSizeBytes<Li.MINIMUM_CACHE_SIZE_BYTES)throw new Fe(Me.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Li.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=t.cacheSizeBytes}}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes},t}(),ga=function(){function t(){}return t}(),ba=function(){function t(e){var n=this;this._queue=new Ur,this.INTERNAL={delete:function(t){return De.__awaiter(n,void 0,void 0,function(){return De.__generator(this,function(e){return this._firestoreClient?[2,this._firestoreClient.shutdown(t)]:[2]})})}};var r=new ga;if("object"==typeof e.options){var i=e;r.firebaseApp=i,r.databaseId=t.databaseIdFromApp(i),r.persistenceKey=r.firebaseApp.name,r.credentials=new Xo(i)}else{var o=e;if(!o.projectId)throw new Fe(Me.INVALID_ARGUMENT,"Must provide projectId");r.databaseId=new Qe(o.projectId,o.database),r.persistenceKey="[DEFAULT]",r.credentials=new Yo}r.settings=new ma({}),this._config=r,this._databaseId=r.databaseId}return t.prototype.settings=function(t){if(_("Firestore.settings",arguments,1),S("Firestore.settings","object",1,t),f(t,"persistence"))throw new Fe(Me.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var e=new ma(t);if(this._firestoreClient&&!this._config.settings.isEqual(e))throw new Fe(Me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._config.settings=e,void 0!==e.credentials&&(this._config.credentials=ce(e.credentials))},t.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},t.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},t.prototype.enablePersistence=function(t){if(this._firestoreClient)throw new Fe(Me.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");return this.configureClient(new Wo(this._config.settings.cacheSizeBytes,void 0!==t&&p(t.experimentalTabSynchronization,!1)))},t.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new Ko),this._firestoreClient},t.prototype.configureClient=function(t){var e=this;c(!!this._config.settings.host,"FirestoreSettings.host cannot be falsey"),c(!this._firestoreClient,"configureClient() called multiple times");var n=new We(this._config.databaseId,this._config.persistenceKey,this._config.settings.host,this._config.settings.ssl),r=function(t){if(t instanceof Ea){var n=e._config.databaseId,r=t.firestore._config.databaseId;if(!r.isEqual(n))throw new Fe(Me.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new la(e._config.databaseId,t._key)}return t};return this._dataConverter=new fa(r),this._firestoreClient=new Qo(Le.getPlatform(),n,this._config.credentials,this._queue),this._firestoreClient.start(t)},t.databaseIdFromApp=function(t){var e=t.options;if(!f(e,"projectId"))throw new Fe(Me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=e.projectId;if(!n||"string"!=typeof n)throw new Fe(Me.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new Qe(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this._config.firebaseApp)throw new Fe(Me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._config.firebaseApp},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){return _("Firestore.collection",arguments,1),S("Firestore.collection","non-empty string",1,t),this.ensureClientConfigured(),new Aa(He.fromString(t),this)},t.prototype.doc=function(t){return _("Firestore.doc",arguments,1),S("Firestore.doc","non-empty string",1,t),this.ensureClientConfigured(),Ea.forPath(He.fromString(t),this)},t.prototype._collectionGroup=function(t){if(_("Firestore.collectionGroup",arguments,1),S("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new Fe(Me.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new Ia(new An(He.EMPTY_PATH,t),this)},t.prototype.runTransaction=function(t){var e=this;return _("Firestore.runTransaction",arguments,1),S("Firestore.runTransaction","function",1,t),this.ensureClientConfigured().transaction(function(n){return t(new _a(e,n))})},t.prototype.batch=function(){return this.ensureClientConfigured(),new wa(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(r()){case ke.DEBUG:return"debug";case ke.ERROR:return"error";case ke.SILENT:return"silent";default:return u("Unknown log level: "+r())}},enumerable:!0,configurable:!0}),t.setLogLevel=function(t){switch(_("Firestore.setLogLevel",arguments,1),S("Firestore.setLogLevel","non-empty string",1,t),t){case"debug":i(ke.DEBUG);break;case"error":i(ke.ERROR);break;case"silent":i(ke.SILENT);break;default:throw new Fe(Me.INVALID_ARGUMENT,"Invalid log level: "+t)}},t.prototype._areTimestampsInSnapshotsEnabled=function(){return this._config.settings.timestampsInSnapshots},t}(),_a=function(){function t(t,e){this._firestore=t,this._transaction=e}return t.prototype.get=function(t){var e=this;_("Transaction.get",arguments,1);var n=Ee("Transaction.get",t,this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return u("Mismatch in docs returned from document lookup.");var r=t[0];if(r instanceof Ze)return new Sa(e._firestore,n._key,null,!1,!1);if(r instanceof Je)return new Sa(e._firestore,n._key,r,!1,!1);throw u("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)})},t.prototype.set=function(t,e,n){E("Transaction.set",arguments,2,3);var r=Ee("Transaction.set",t,this._firestore);n=be("Transaction.set",n);var i=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("Transaction.set",e,n.mergeFields):this._firestore._dataConverter.parseSetData("Transaction.set",e);return this._transaction.set(r._key,i),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,a;return"string"==typeof e||e instanceof Ho?(w("Transaction.update",arguments,3),o=Ee("Transaction.update",t,this._firestore),a=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",e,n,r)):(_("Transaction.update",arguments,2),o=Ee("Transaction.update",t,this._firestore),a=this._firestore._dataConverter.parseUpdateData("Transaction.update",e)),this._transaction.update(o._key,a),this},t.prototype.delete=function(t){_("Transaction.delete",arguments,1);var e=Ee("Transaction.delete",t,this._firestore);return this._transaction.delete(e._key),this},t}(),wa=function(){function t(t){this._firestore=t,this._mutations=[],this._committed=!1}return t.prototype.set=function(t,e,n){E("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=Ee("WriteBatch.set",t,this._firestore);n=be("WriteBatch.set",n);var i=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("WriteBatch.set",e,n.mergeFields):this._firestore._dataConverter.parseSetData("WriteBatch.set",e);return this._mutations=this._mutations.concat(i.toMutations(r._key,zn.NONE)),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.verifyNotCommitted();var o,a;return"string"==typeof e||e instanceof Ho?(w("WriteBatch.update",arguments,3),o=Ee("WriteBatch.update",t,this._firestore),a=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",e,n,r)):(_("WriteBatch.update",arguments,2),o=Ee("WriteBatch.update",t,this._firestore),a=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",e)),this._mutations=this._mutations.concat(a.toMutations(o._key,zn.exists(!0))),this},t.prototype.delete=function(t){_("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var e=Ee("WriteBatch.delete",t,this._firestore);return this._mutations=this._mutations.concat(new Zn(e._key,zn.NONE)),this},t.prototype.commit=function(){return De.__awaiter(this,void 0,void 0,function(){return De.__generator(this,function(t){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]})})},t.prototype.verifyNotCommitted=function(){if(this._committed)throw new Fe(Me.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),Ea=function(){function t(t,e){this._key=t,this.firestore=e,this._firestoreClient=this.firestore.ensureClientConfigured()}return t.forPath=function(e,n){if(e.length%2!=0)throw new Fe(Me.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(new Ye(e),n)},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Aa(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(_("DocumentReference.collection",arguments,1),S("DocumentReference.collection","non-empty string",1,t),!t)throw new Fe(Me.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=He.fromString(t);return new Aa(this._key.path.child(e),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw U("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this._key.isEqual(e._key)},t.prototype.set=function(t,e){E("DocumentReference.set",arguments,1,2),e=be("DocumentReference.set",e);var n=e.merge||e.mergeFields?this.firestore._dataConverter.parseMergeData("DocumentReference.set",t,e.mergeFields):this.firestore._dataConverter.parseSetData("DocumentReference.set",t);return this._firestoreClient.write(n.toMutations(this._key,zn.NONE))},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i;return"string"==typeof t||t instanceof Ho?(w("DocumentReference.update",arguments,2),i=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",t,e,n)):(_("DocumentReference.update",arguments,1),i=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",t)),this._firestoreClient.write(i.toMutations(this._key,zn.exists(!0)))},t.prototype.delete=function(){return _("DocumentReference.delete",arguments,0),this._firestoreClient.write([new Zn(this._key,zn.NONE)])},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];E("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||he(t[i])||(r=t[i],F("DocumentReference.onSnapshot",r,["includeMetadataChanges"]),k("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return he(t[i])?n=t[i]:(S("DocumentReference.onSnapshot","function",i,t[i]),C("DocumentReference.onSnapshot","function",i+1,t[i+1]),C("DocumentReference.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(o,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Go({next:function(t){if(e.next){c(t.docs.size<=1,"Too many documents returned on a document query");var r=t.docs.get(n._key);e.next(new Sa(n.firestore,n._key,r,t.fromCache,t.hasPendingWrites))}},error:r}),o=this._firestoreClient.listen(An.atPath(this._key.path),i,t);return function(){i.mute(),n._firestoreClient.unlisten(o)}},t.prototype.get=function(t){var e=this;return E("DocumentReference.get",arguments,0,1),we("DocumentReference.get",t),new Promise(function(n,r){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentFromLocalCache(e._key).then(function(t){n(new Sa(e.firestore,e._key,t,!0,t instanceof Je&&t.hasLocalMutations))},r):e.getViaSnapshotListener(n,r,t)})},t.prototype.getViaSnapshotListener=function(t,e,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?e(new Fe(Me.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?e(new Fe(Me.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):t(i)},error:e})},t}(),Ta=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Sa=function(){function t(t,e,n,r,i){this._firestore=t,this._key=e,this._document=n,this._fromCache=r,this._hasPendingWrites=i}return t.prototype.data=function(t){return E("DocumentSnapshot.data",arguments,0,1),t=_e("DocumentSnapshot.data",t),this._document?this.convertObject(this._document.data,cn.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled())):void 0},t.prototype.get=function(t,e){if(E("DocumentSnapshot.get",arguments,1,2),e=_e("DocumentSnapshot.get",e),this._document){var n=this._document.data.field(ye("DocumentSnapshot.get",t));if(void 0!==n)return this.convertValue(n,cn.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Ea(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new Ta(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw U("isEqual","DocumentSnapshot",1,e);return this._firestore===e._firestore&&this._fromCache===e._fromCache&&this._key.isEqual(e._key)&&(null===this._document?null===e._document:this._document.isEqual(e._document))},t.prototype.convertObject=function(t,e){var n=this,r={};return t.forEach(function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertValue=function(t,e){if(t instanceof En)return this.convertObject(t,e);if(t instanceof Tn)return this.convertArray(t,e);if(t instanceof _n){var n=t.value(e),r=this._firestore.ensureClientConfigured().databaseId();return t.databaseId.isEqual(r)||a("Document "+this._key.path+" contains a document reference within a different database ("+t.databaseId.projectId+"/"+t.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new Ea(n,this._firestore)}return t.value(e)},t.prototype.convertArray=function(t,e){var n=this;return t.internalValue.map(function(t){return n.convertValue(t,e)})},t}(),Ca=function(t){function e(e,n,r,i,o){return t.call(this,e,n,r,i,o)||this}return De.__extends(e,t),e.prototype.data=function(e){var n=t.prototype.data.call(this,e);return c("object"==typeof n,"Document in a QueryDocumentSnapshot should exist"),n},e}(Sa),Ia=function(){function t(t,e){this._query=t,this.firestore=e}return t.prototype.where=function(e,n,r){_("Query.where",arguments,3),S("Query.where","non-empty string",2,n),M("Query.where",3,r);var i,o=ye("Query.where",e),a=Dn.fromString(n);if(o.isKeyField()){if(a===Dn.ARRAY_CONTAINS)throw new Fe(Me.INVALID_ARGUMENT,"Invalid Query. You can't perform array-contains queries on FieldPath.documentId() since document IDs are not arrays.");if("string"==typeof r){if(""===r)throw new Fe(Me.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==r.indexOf("/"))throw new Fe(Me.INVALID_ARGUMENT,"Invalid third parameter to Query.where(). When querying a collection by FieldPath.documentId(), the value provided must be a plain document ID, but '"+r+"' contains a slash.");var s=this._query.path.child(He.fromString(r));if(!Ye.isDocumentKey(s))throw new Fe(Me.INVALID_ARGUMENT,"Invalid third parameter to Query.where(). When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+s+"' is not because it has an odd number of segments ("+s.length+").");i=new _n(this.firestore._databaseId,new Ye(s))}else{if(!(r instanceof Ea))throw new Fe(Me.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a string or a DocumentReference if the first parameter is FieldPath.documentId(), but it was: "+P(r)+".");var u=r;i=new _n(this.firestore._databaseId,u._key)}}else i=this.firestore._dataConverter.parseQueryValue("Query.where",r);var c=Nn.create(o,a,i);return this.validateNewFilter(c),new t(this._query.addFilter(c),this.firestore)},t.prototype.orderBy=function(e,n){E("Query.orderBy",arguments,1,2),C("Query.orderBy","non-empty string",2,n);var r;if(void 0===n||"asc"===n)r=Pn.ASCENDING;else{if("desc"!==n)throw new Fe(Me.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=Pn.DESCENDING}if(null!==this._query.startAt)throw new Fe(Me.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new Fe(Me.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=ye("Query.orderBy",e),o=new Mn(i,r);return this.validateNewOrderBy(o),new t(this._query.addOrderBy(o),this.firestore)},t.prototype.limit=function(e){if(_("Query.limit",arguments,1),S("Query.limit","number",1,e),e<=0)throw new Fe(Me.INVALID_ARGUMENT,"Invalid Query. Query limit ("+e+") is invalid. Limit must be positive.");return new t(this._query.withLimit(e),this.firestore)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];w("Query.startAt",arguments,1);var i=this.boundFromDocOrFields("Query.startAt",e,n,!0);return new t(this._query.withStartAt(i),this.firestore)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];w("Query.startAfter",arguments,1);var i=this.boundFromDocOrFields("Query.startAfter",e,n,!1);return new t(this._query.withStartAt(i),this.firestore)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];w("Query.endBefore",arguments,1);var i=this.boundFromDocOrFields("Query.endBefore",e,n,!0);return new t(this._query.withEndAt(i),this.firestore)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];w("Query.endAt",arguments,1);var i=this.boundFromDocOrFields("Query.endAt",e,n,!1);return new t(this._query.withEndAt(i),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw U("isEqual","Query",1,e);return this.firestore===e.firestore&&this._query.isEqual(e._query)},t.prototype.boundFromDocOrFields=function(t,e,n,r){if(M(t,1,e),e instanceof Sa){if(n.length>0)throw new Fe(Me.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var i=e;if(!i.exists)throw new Fe(Me.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this.boundFromDocument(t,i._document,r)}var o=[e].concat(n);return this.boundFromFields(t,o,r)},t.prototype.boundFromDocument=function(t,e,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var a=o[i];if(a.field.isKeyField())r.push(new _n(this.firestore._databaseId,e.key));else{var s=e.field(a.field);if(s instanceof gn)throw new Fe(Me.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(void 0===s){var u=a.field.canonicalString();throw new Fe(Me.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(s)}}return new Ln(r,n)},t.prototype.boundFromFields=function(t,e,n){var r=this._query.explicitOrderBy;if(e.length>r.length)throw new Fe(Me.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var a=e[o];if(r[o].field.isKeyField()){if("string"!=typeof a)throw new Fe(Me.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof a);if(!this._query.isCollectionGroupQuery()&&-1!==a.indexOf("/"))throw new Fe(Me.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+a+"' contains a slash.");var s=this._query.path.child(He.fromString(a));if(!Ye.isDocumentKey(s))throw new Fe(Me.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+s+"' is not because it contains an odd number of segments.");var u=new Ye(s);i.push(new _n(this.firestore._databaseId,u))}else{var c=this.firestore._dataConverter.parseQueryValue(t,a);i.push(c)}}return new Ln(i,n)},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];E("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||he(t[i])||(r=t[i],F("Query.onSnapshot",r,["includeMetadataChanges"]),k("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),he(t[i])?n=t[i]:(S("Query.onSnapshot","function",i,t[i]),C("Query.onSnapshot","function",i+1,t[i+1]),C("Query.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(r,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Go({next:function(t){e.next&&e.next(new ka(n.firestore,n._query,t))},error:r}),o=this.firestore.ensureClientConfigured(),a=o.listen(this._query,i,t);return function(){i.mute(),o.unlisten(a)}},t.prototype.get=function(t){var e=this;return E("Query.get",arguments,0,1),we("Query.get",t),new Promise(function(n,r){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentsFromLocalCache(e._query).then(function(t){n(new ka(e.firestore,e._query,t))},r):e.getViaSnapshotListener(n,r,t)})},t.prototype.getViaSnapshotListener=function(t,e,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?e(new Fe(Me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):t(i)},error:e})},t.prototype.validateNewFilter=function(t){if(t instanceof On)if(t.isInequality()){var e=this._query.getInequalityFilterField();if(null!==e&&!e.isEqual(t.field))throw new Fe(Me.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+e.toString()+"' and '"+t.field.toString()+"'");var n=this._query.getFirstOrderByField();null!==n&&this.validateOrderByAndInequalityMatch(t.field,n)}else if(t.op===Dn.ARRAY_CONTAINS&&this._query.hasArrayContainsFilter())throw new Fe(Me.INVALID_ARGUMENT,"Invalid query. Queries only support a single array-contains filter.")},t.prototype.validateNewOrderBy=function(t){if(null===this._query.getFirstOrderByField()){var e=this._query.getInequalityFilterField();null!==e&&this.validateOrderByAndInequalityMatch(e,t.field)}},t.prototype.validateOrderByAndInequalityMatch=function(t,e){if(!e.isEqual(t))throw new Fe(Me.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}(),ka=function(){function t(t,e,n){this._firestore=t,this._originalQuery=e,this._snapshot=n,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new Ta(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;E("QuerySnapshot.forEach",arguments,1,2),S("QuerySnapshot.forEach","function",1,t),this._snapshot.docs.forEach(function(r){t.call(e,n.convertToDocumentImpl(r))})},Object.defineProperty(t.prototype,"query",{get:function(){return new Ia(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),t.prototype.docChanges=function(t){t&&(F("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),k("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this._snapshot.excludesMetadataChanges)throw new Fe(Me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=Te(this._firestore,e,this._snapshot),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t.prototype.isEqual=function(e){if(!(e instanceof t))throw U("isEqual","QuerySnapshot",1,e);return this._firestore===e._firestore&&this._originalQuery.isEqual(e._originalQuery)&&this._snapshot.isEqual(e._snapshot)},t.prototype.convertToDocumentImpl=function(t){return new Ca(this._firestore,t.key,t,this.metadata.fromCache,this._snapshot.mutatedKeys.has(t.key))},t}();["length","forEach","map"].concat("undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach(function(t){try{Object.defineProperty(ka.prototype.docChanges,t,{get:function(){return ge()}})}catch(t){}});var Aa=function(t){function e(e,n){var r=t.call(this,An.atPath(e),n)||this;if(e.length%2!=1)throw new Fe(Me.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.canonicalString()+" has "+e.length);return r}return De.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._query.path.popLast();return t.isEmpty()?null:new Ea(new Ye(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.doc=function(t){if(E("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=Ue.newId()),S("CollectionReference.doc","non-empty string",1,t),""===t)throw new Fe(Me.INVALID_ARGUMENT,"Document path must be a non-empty string");var e=He.fromString(t);return Ea.forPath(this._query.path.child(e),this.firestore)},e.prototype.add=function(t){_("CollectionReference.add",arguments,1),S("CollectionReference.add","object",1,t);var e=this.doc();return e.set(t).then(function(){return e})},e}(Ia),Na=l(ba,"Use firebase.firestore() instead."),Da=l(_a,"Use firebase.firestore().runTransaction() instead."),Oa=l(wa,"Use firebase.firestore().batch() instead."),Ra=l(Ea,"Use firebase.firestore().doc() instead."),xa=l(Sa),Pa=l(Ca),La=l(Ia),Ma=l(ka),Fa=l(Aa,"Use firebase.firestore().collection() instead."),Ua={Firestore:Na,GeoPoint:Ve,Timestamp:Be,Blob:qe,Transaction:Da,WriteBatch:Oa,DocumentReference:Ra,DocumentSnapshot:xa,Query:La,QueryDocumentSnapshot:Pa,QuerySnapshot:Ma,CollectionReference:Fa,FieldPath:Ho,FieldValue:aa,setLogLevel:ba.setLogLevel,CACHE_SIZE_UNLIMITED:va};Ie(Ae),e.registerFirestore=Ie},WvIn:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},Xo5R:function(t,e,n){var r=n("WvIn");t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},Xxa5:function(t,e,n){t.exports=n("jyFz")},YTz9:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},YjQv:function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},YveC:function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"a/OS":function(t,e,n){var r=n("iANj"),i=n("YjQv"),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n("c8Kh")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},"a/rO":function(t,e,n){"use strict";var r=n("9mDF"),i=n("HLWT"),o=n("eZ0g"),a=n("I1z2"),s=n("RxPu"),u=a.set,c=a.getterFor("Array Iterator");t.exports=s(Array,"Array",function(t,e){u(this,{type:"Array Iterator",target:r(t),index:0,kind:e})},function(){var t=c(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},aEs4:function(t,e,n){"use strict";function r(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function i(t,e,n){var i=r(t),o=i,a=void 0;try{var s=e.error;if(s){var u=s.status;if("string"==typeof u){if(!l[u])return new f("internal","internal");i=l[u]}o=u;var c=s.message;"string"==typeof c&&(o=c),a=s.details,void 0!==a&&(a=n.decode(a))}}catch(t){}return"ok"===i?null:new f(i,o,a)}function o(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function a(t){return new Promise(function(e,n){setTimeout(function(){n(new f("deadline-exceeded","deadline-exceeded"))},t)})}function s(t,e,n){return new y(t,n)}function u(t){var e={Functions:y};t.INTERNAL.registerService(v,s,e,void 0,!0)}Object.defineProperty(e,"__esModule",{value:!0});var c=function(t){return t&&"object"==typeof t&&"default"in t?t.default:t}(n("O4tu")),h=n("TToO"),l={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},f=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return h.__extends(e,t),e}(Error),p=function(){function t(t){this.app=t}return t.prototype.getAuthToken=function(){return h.__awaiter(this,void 0,void 0,function(){var t,e;return h.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.app.INTERNAL.getToken()];case 1:return t=n.sent(),t?[2,t.accessToken]:[2,void 0];case 2:return e=n.sent(),[2,void 0];case 3:return[2]}})})},t.prototype.getInstanceIdToken=function(){return h.__awaiter(this,void 0,void 0,function(){var t,e,n;return h.__generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),this.app.messaging?(t=this.app.messaging(),[4,t.getToken()]):[2,void 0];case 1:return e=r.sent(),e?[2,e]:[2,void 0];case 2:return n=r.sent(),[2,void 0];case 3:return[2]}})})},t.prototype.getContext=function(){return h.__awaiter(this,void 0,void 0,function(){var t,e;return h.__generator(this,function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}})})},t}(),d=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null===t||void 0===t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map(function(t){return e.encode(t)});if("function"==typeof t||"object"==typeof t)return o(t,function(t){return e.encode(t)});throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null===t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=parseFloat(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(t){return e.decode(t)}):"function"==typeof t||"object"==typeof t?o(t,function(t){return e.decode(t)}):t},t}(),y=function(){function t(t,e){void 0===e&&(e="us-central1"),this.app_=t,this.region_=e,this.serializer=new d,this.emulatorOrigin=null,this.contextProvider=new p(t)}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId,n=this.region_;if(null!==this.emulatorOrigin){return this.emulatorOrigin+"/"+e+"/"+n+"/"+t}return"https://"+n+"-"+e+".cloudfunctions.net/"+t},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return h.__awaiter(this,void 0,void 0,function(){var r,i,o,a;return h.__generator(this,function(s){switch(s.label){case 0:n.append("Content-Type","application/json"),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,fetch(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 2:return r=s.sent(),[3,4];case 3:return i=s.sent(),[2,{status:0,json:null}];case 4:o=null,s.label=5;case 5:return s.trys.push([5,7,,8]),[4,r.json()];case 6:return o=s.sent(),[3,8];case 7:return a=s.sent(),[3,8];case 8:return[2,{status:r.status,json:o}]}})})},t.prototype.call=function(t,e,n){return h.__awaiter(this,void 0,void 0,function(){var r,o,s,u,c,l,p,d,y;return h.__generator(this,function(h){switch(h.label){case 0:return r=this._url(t),e=this.serializer.encode(e),o={data:e},s=new Headers,[4,this.contextProvider.getContext()];case 1:return u=h.sent(),u.authToken&&s.append("Authorization","Bearer "+u.authToken),u.instanceIdToken&&s.append("Firebase-Instance-ID-Token",u.instanceIdToken),c=n.timeout||7e4,[4,Promise.race([this.postJSON(r,o,s),a(c)])];case 2:if(l=h.sent(),p=i(l.status,l.json,this.serializer))throw p;if(!l.json)throw new f("internal","Response is not valid JSON object.");if(d=l.json.data,void 0===d&&(d=l.json.result),void 0===d)throw new f("internal","Response is missing data field.");return y=this.serializer.decode(d),[2,{data:y}]}})})},t}(),v="functions";u(c),e.registerFunctions=u},aLzV:function(t,e,n){var r=n("GCs6"),i=n("YTz9");t.exports=n("qs+f")?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},abPz:function(t,e,n){"use strict";var r=n("Aq0r"),i=n("beh1"),o=n("yYxz"),a=n("ksFB");t.exports=n("4dmN")(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):"keys"==e?i(0,n):"values"==e?i(0,t[n]):i(0,[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},ajkC:function(t,e,n){n("nbYV"),t.exports=n("flBj")("String","startsWith")},aske:function(t,e,n){var r=n("gLsf"),i=n("fTzd"),o=n("5+O3"),a=n("hcE8").Reflect;t.exports=a&&a.ownKeys||function(t){var e=r.f(o(t)),n=i.f;return n?e.concat(n(t)):e}},beh1:function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},c8Kh:function(t,e){t.exports=!0},dqyG:function(t,e,n){"use strict";/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function r(t,e){if(null==t||null==e)return!1;if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(var n=new DataView(t),r=new DataView(e),i=0;i<t.byteLength;i++)if(n.getUint8(i)!==r.getUint8(i))return!1;return!0}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function i(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,n.i(T.__spread)(e)))}function o(t){return i(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function a(t){for(var e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length),o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}function s(t){if(t.objectStoreNames.contains(R)){var e=t.transaction(R),n=e.objectStore(R),r=new D,i=n.openCursor();i.onerror=function(t){console.warn("Unable to cleanup old IDB.",t)},i.onsuccess=function(){var e=i.result;if(e){var n=e.value;r.deleteToken(n.fcmSenderId,n.fcmToken,n.fcmPushSet),e.continue()}else t.close(),indexedDB.deleteDatabase(O)}}}function u(){var t=indexedDB.open(O);t.onerror=function(t){},t.onsuccess=function(e){s(t.result)}}function c(t){return new Promise(function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function h(t){if(t.fcmToken&&("string"!=typeof t.fcmToken||0===t.fcmToken.length))throw I.create("bad-token");if(t.swScope&&("string"!=typeof t.swScope||0===t.swScope.length))throw I.create("bad-scope");if(t.vapidKey&&(!(t.vapidKey instanceof Uint8Array)||65!==t.vapidKey.length))throw I.create("bad-vapid-key");if(t.endpoint&&("string"!=typeof t.endpoint||0===t.endpoint.length))throw I.create("bad-subscription");if(t.auth&&!(t.auth instanceof ArrayBuffer))throw I.create("bad-subscription");if(t.p256dh&&!(t.p256dh instanceof ArrayBuffer))throw I.create("bad-subscription");if(t.fcmSenderId&&("string"!=typeof t.fcmSenderId||0===t.fcmSenderId.length))throw I.create("bad-sender-id");if(t.fcmPushSet&&("string"!=typeof t.fcmPushSet||0===t.fcmPushSet.length))throw I.create("bad-push-set")}function l(t,e,n){if(!n.vapidKey||!r(e.buffer,n.vapidKey.buffer))return!1;var i=t.endpoint===n.endpoint,o=r(t.getKey("auth"),n.auth),a=r(t.getKey("p256dh"),n.p256dh);return i&&o&&a}function f(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function p(t,e){var n;return n={},n[_.TYPE_OF_MSG]=t,n[_.DATA]=e,n}function d(){return n.i(T.__awaiter)(this,void 0,void 0,function(){var t,e,r,i;return n.i(T.__generator)(this,function(n){switch(n.label){case 0:if(!(t=document.querySelector('link[rel="manifest"]')))return[2];n.label=1;case 1:return n.trys.push([1,4,,5]),[4,fetch(t.href)];case 2:return r=n.sent(),[4,r.json()];case 3:return e=n.sent(),[3,5];case 4:return i=n.sent(),[2];case 5:if(!e||!e.gcm_sender_id)return[2];if("103953800507"!==e.gcm_sender_id)throw I.create("incorrect-gcm-sender-id");return[2]}})})}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function y(t){var e=function(t){if(!v())throw I.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new U(t):new j(t)},n={isSupported:v};t.INTERNAL.registerService("messaging",e,n)}function v(){return self&&"ServiceWorkerGlobalScope"in self?g():m()}function m(){return navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function g(){return"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"isSupported",function(){return v}),n.d(e,"registerMessaging",function(){return y});var b,_,w=n("O4tu"),E=n.n(w),T=n("TToO"),S=n("Pxmi"),C=(n.n(S),b={},b["only-available-in-window"]="This method is available in a Window context.",b["only-available-in-sw"]="This method is available in a service worker context.",b["should-be-overriden"]="This method should be overriden by extended classes.",b["bad-sender-id"]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",b["permission-default"]="The required permissions were not granted and dismissed instead.",b["permission-blocked"]="The required permissions were not granted and blocked instead.",b["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",b["notifications-blocked"]="Notifications have been blocked.",b["failed-serviceworker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",b["sw-registration-expected"]="A service worker registration was the expected input.",b["get-subscription-failed"]="There was an error when trying to get any existing Push Subscriptions.",b["invalid-saved-token"]="Unable to access details of the saved token.",b["sw-reg-redundant"]="The service worker being used for push was made redundant.",b["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$message}",b["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",b["token-subscribe-no-push-set"]="FCM returned an invalid response when getting an FCM token.",b["token-unsubscribe-failed"]="A problem occured while unsubscribing the user from FCM: {$message}",b["token-update-failed"]="A problem occured while updating the user from FCM: {$message}",b["token-update-no-token"]="FCM returned no token when updating the user to push.",b["use-sw-before-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",b["invalid-delete-token"]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",b["delete-token-not-found"]="The deletion attempt for token could not be performed as the token was not found.",b["delete-scope-not-found"]="The deletion attempt for service worker scope could not be performed as the scope was not found.",b["bg-handler-function-expected"]="The input to setBackgroundMessageHandler() must be a function.",b["no-window-client-to-msg"]="An attempt was made to message a non-existant window client.",b["unable-to-resubscribe"]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$message}",b["no-fcm-token-for-resubscribe"]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",b["failed-to-delete-token"]="Unable to delete the currently saved token.",b["no-sw-in-reg"]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",b["incorrect-gcm-sender-id"]="Please change your web app manifest's 'gcm_sender_id' value to '103953800507' to use Firebase messaging.",b["bad-scope"]="The service worker scope must be a string with at least one character.",b["bad-vapid-key"]="The public VAPID key is not a Uint8Array with 65 bytes.",b["bad-subscription"]="The subscription must be a valid PushSubscription.",b["bad-token"]="The FCM Token used for storage / lookup was not a valid token string.",b["bad-push-set"]="The FCM push set used for storage / lookup was not not a valid push set string.",b["failed-delete-vapid-key"]="The VAPID key could not be deleted.",b["invalid-public-vapid-key"]="The public VAPID key must be a string.",b["use-public-key-before-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",b["public-vapid-key-decryption-failed"]="The public VAPID key did not equal 65 bytes when decrypted.",b),I=new S.ErrorFactory("messaging","Messaging",C),k=new Uint8Array([4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110]),A="https://fcm.googleapis.com";!function(t){t.TYPE_OF_MSG="firebase-messaging-msg-type",t.DATA="firebase-messaging-msg-data"}(_||(_={}));var N;!function(t){t.PUSH_MSG_RECEIVED="push-msg-received",t.NOTIFICATION_CLICKED="notification-clicked"}(N||(N={}));/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var D=function(){function t(){}return t.prototype.getToken=function(t,e,i){return n.i(T.__awaiter)(this,void 0,void 0,function(){var a,s,u,c,h,l,f,p,d,y;return n.i(T.__generator)(this,function(n){switch(n.label){case 0:a=o(e.getKey("p256dh")),s=o(e.getKey("auth")),u="authorized_entity="+t+"&endpoint="+e.endpoint+"&encryption_key="+a+"&encryption_auth="+s,r(i.buffer,k.buffer)||(c=o(i),u+="&application_pub_key="+c),h=new Headers,h.append("Content-Type","application/x-www-form-urlencoded"),l={method:"POST",headers:h,body:u},n.label=1;case 1:return n.trys.push([1,4,,5]),[4,fetch(A+"/fcm/connect/subscribe",l)];case 2:return p=n.sent(),[4,p.json()];case 3:return f=n.sent(),[3,5];case 4:throw d=n.sent(),I.create("token-subscribe-failed");case 5:if(f.error)throw y=f.error.message,I.create("token-subscribe-failed",{message:y});if(!f.token)throw I.create("token-subscribe-no-token");if(!f.pushSet)throw I.create("token-subscribe-no-push-set");return[2,{token:f.token,pushSet:f.pushSet}]}})})},t.prototype.updateToken=function(t,e,i,a,s){return n.i(T.__awaiter)(this,void 0,void 0,function(){var u,c,h,l,f,p,d,y,v,m;return n.i(T.__generator)(this,function(n){switch(n.label){case 0:u=o(a.getKey("p256dh")),c=o(a.getKey("auth")),h="push_set="+i+"&token="+e+"&authorized_entity="+t+"&endpoint="+a.endpoint+"&encryption_key="+u+"&encryption_auth="+c,r(s.buffer,k.buffer)||(l=o(s),h+="&application_pub_key="+l),f=new Headers,f.append("Content-Type","application/x-www-form-urlencoded"),p={method:"POST",headers:f,body:h},n.label=1;case 1:return n.trys.push([1,4,,5]),[4,fetch(A+"/fcm/connect/subscribe",p)];case 2:return y=n.sent(),[4,y.json()];case 3:return d=n.sent(),[3,5];case 4:throw v=n.sent(),I.create("token-update-failed");case 5:if(d.error)throw m=d.error.message,I.create("token-update-failed",{message:m});if(!d.token)throw I.create("token-update-no-token");return[2,d.token]}})})},t.prototype.deleteToken=function(t,e,r){return n.i(T.__awaiter)(this,void 0,void 0,function(){var i,o,a,s,u,c,h;return n.i(T.__generator)(this,function(n){switch(n.label){case 0:i="authorized_entity="+t+"&token="+e+"&pushSet="+r,o=new Headers,o.append("Content-Type","application/x-www-form-urlencoded"),a={method:"POST",headers:o,body:i},n.label=1;case 1:return n.trys.push([1,4,,5]),[4,fetch(A+"/fcm/connect/unsubscribe",a)];case 2:return s=n.sent(),[4,s.json()];case 3:if(u=n.sent(),u.error)throw c=u.error.message,I.create("token-unsubscribe-failed",{message:c});return[3,5];case 4:throw h=n.sent(),I.create("token-unsubscribe-failed");case 5:return[2]}})})},t}(),O="undefined",R="fcm_token_object_Store",x=function(){function t(){this.dbPromise=null}return t.prototype.get=function(t){return this.createTransaction(function(e){return e.get(t)})},t.prototype.getIndex=function(t,e){function n(n){return n.index(t).get(e)}return this.createTransaction(n)},t.prototype.put=function(t){return this.createTransaction(function(e){return e.put(t)},"readwrite")},t.prototype.delete=function(t){return this.createTransaction(function(e){return e.delete(t)},"readwrite")},t.prototype.closeDatabase=function(){return n.i(T.__awaiter)(this,void 0,void 0,function(){var t;return n.i(T.__generator)(this,function(e){switch(e.label){case 0:return this.dbPromise?[4,this.dbPromise]:[3,2];case 1:t=e.sent(),t.close(),this.dbPromise=null,e.label=2;case 2:return[2]}})})},t.prototype.createTransaction=function(t,e){return void 0===e&&(e="readonly"),n.i(T.__awaiter)(this,void 0,void 0,function(){var r,i,o,a;return n.i(T.__generator)(this,function(n){switch(n.label){case 0:return[4,this.getDb()];case 1:return r=n.sent(),i=r.transaction(this.objectStoreName,e),o=i.objectStore(this.objectStoreName),[4,c(t(o))];case 2:return a=n.sent(),[2,new Promise(function(t,e){i.oncomplete=function(){t(a)},i.onerror=function(){e(i.error)}})]}})})},t.prototype.getDb=function(){var t=this;return this.dbPromise||(this.dbPromise=new Promise(function(e,n){var r=indexedDB.open(t.dbName,t.dbVersion);r.onsuccess=function(){e(r.result)},r.onerror=function(){t.dbPromise=null,n(r.error)},r.onupgradeneeded=function(e){return t.onDbUpgrade(r,e)}})),this.dbPromise},t}(),P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dbName="fcm_token_details_db",e.dbVersion=3,e.objectStoreName="fcm_token_object_Store",e}return n.i(T.__extends)(e,t),e.prototype.onDbUpgrade=function(t,e){var r=t.result;switch(e.oldVersion){case 0:var i=r.createObjectStore(this.objectStoreName,{keyPath:"swScope"});i.createIndex("fcmSenderId","fcmSenderId",{unique:!1}),i.createIndex("fcmToken","fcmToken",{unique:!0});case 1:u();case 2:var i=t.transaction.objectStore(this.objectStoreName),o=i.openCursor();o.onsuccess=function(){var t=o.result;if(t){var e=t.value,r=n.i(T.__assign)({},e);e.createTime||(r.createTime=Date.now()),"string"==typeof e.vapidKey&&(r.vapidKey=a(e.vapidKey)),"string"==typeof e.auth&&(r.auth=a(e.auth).buffer),"string"==typeof e.auth&&(r.p256dh=a(e.p256dh).buffer),t.update(r),t.continue()}}}},e.prototype.getTokenDetailsFromToken=function(t){return n.i(T.__awaiter)(this,void 0,void 0,function(){return n.i(T.__generator)(this,function(e){if(!t)throw I.create("bad-token");return h({fcmToken:t}),[2,this.getIndex("fcmToken",t)]})})},e.prototype.getTokenDetailsFromSWScope=function(t){return n.i(T.__awaiter)(this,void 0,void 0,function(){return n.i(T.__generator)(this,function(e){if(!t)throw I.create("bad-scope");return h({swScope:t}),[2,this.get(t)]})})},e.prototype.saveTokenDetails=function(t){return n.i(T.__awaiter)(this,void 0,void 0,function(){return n.i(T.__generator)(this,function(e){if(!t.swScope)throw I.create("bad-scope");if(!t.vapidKey)throw I.create("bad-vapid-key");if(!t.endpoint||!t.auth||!t.p256dh)throw I.create("bad-subscription");if(!t.fcmSenderId)throw I.create("bad-sender-id");if(!t.fcmToken)throw I.create("bad-token");if(!t.fcmPushSet)throw I.create("bad-push-set");return h(t),[2,this.put(t)]})})},e.prototype.deleteToken=function(t){return n.i(T.__awaiter)(this,void 0,void 0,function(){var e;return n.i(T.__generator)(this,function(n){switch(n.label){case 0:return"string"!=typeof t||0===t.length?[2,Promise.reject(I.create("invalid-delete-token"))]:[4,this.getTokenDetailsFromToken(t)];case 1:if(!(e=n.sent()))throw I.create("delete-token-not-found");return[4,this.delete(e.swScope)];case 2:return n.sent(),[2,e]}})})},e}(x),L=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dbName="fcm_vapid_details_db",e.dbVersion=1,e.objectStoreName="fcm_vapid_object_Store",e}return n.i(T.__extends)(e,t),e.prototype.onDbUpgrade=function(t){t.result.createObjectStore(this.objectStoreName,{keyPath:"swScope"})},e.prototype.getVapidFromSWScope=function(t){return n.i(T.__awaiter)(this,void 0,void 0,function(){var e;return n.i(T.__generator)(this,function(n){switch(n.label){case 0:if("string"!=typeof t||0===t.length)throw I.create("bad-scope");return[4,this.get(t)];case 1:return e=n.sent(),[2,e?e.vapidKey:void 0]}})})},e.prototype.saveVapidDetails=function(t,e){return n.i(T.__awaiter)(this,void 0,void 0,function(){var r;return n.i(T.__generator)(this,function(n){if("string"!=typeof t||0===t.length)throw I.create("bad-scope");if(null===e||65!==e.length)throw I.create("bad-vapid-key");return r={swScope:t,vapidKey:e},[2,this.put(r)]})})},e.prototype.deleteVapidDetails=function(t){return n.i(T.__awaiter)(this,void 0,void 0,function(){var e;return n.i(T.__generator)(this,function(n){switch(n.label){case 0:return[4,this.getVapidFromSWScope(t)];case 1:if(!(e=n.sent()))throw I.create("delete-scope-not-found");return[4,this.delete(t)];case 2:return n.sent(),[2,e]}})})},e}(x),M="messagingSenderId",F=function(){function t(t){var e=this;if(!t.options[M]||"string"!=typeof t.options[M])throw I.create("bad-sender-id");this.messagingSenderId=t.options[M],this.tokenDetailsModel=new P,this.vapidDetailsModel=new L,this.iidModel=new D,this.app=t,this.INTERNAL={delete:function(){return e.delete()}}}return t.prototype.getToken=function(){return n.i(T.__awaiter)(this,void 0,void 0,function(){var t,e,r,i,o;return n.i(T.__generator)(this,function(n){switch(n.label){case 0:if("denied"===(t=this.getNotificationPermission_()))throw I.create("notifications-blocked");return"granted"!==t?[2,null]:[4,this.getSWRegistration_()];case 1:return e=n.sent(),[4,this.getPublicVapidKey_()];case 2:return r=n.sent(),[4,this.getPushSubscription(e,r)];case 3:return i=n.sent(),[4,this.tokenDetailsModel.getTokenDetailsFromSWScope(e.scope)];case 4:return o=n.sent(),o?[2,this.manageExistingToken(e,i,r,o)]:[2,this.getNewToken(e,i,r)]}})})},t.prototype.manageExistingToken=function(t,e,r,i){return n.i(T.__awaiter)(this,void 0,void 0,function(){var o,a;return n.i(T.__generator)(this,function(n){switch(n.label){case 0:return o=l(e,r,i),o?(a=Date.now(),a<i.createTime+6048e5?[2,i.fcmToken]:[2,this.updateToken(t,e,r,i)]):[4,this.deleteTokenFromDB(i.fcmToken)];case 1:return n.sent(),[2,this.getNewToken(t,e,r)]}})})},t.prototype.updateToken=function(t,e,r,i){return n.i(T.__awaiter)(this,void 0,void 0,function(){var o,a,s;return n.i(T.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,4,,6]),[4,this.iidModel.updateToken(this.messagingSenderId,i.fcmToken,i.fcmPushSet,e,r)];case 1:return o=n.sent(),a={swScope:t.scope,vapidKey:r,fcmSenderId:this.messagingSenderId,fcmToken:o,fcmPushSet:i.fcmPushSet,createTime:Date.now(),endpoint:e.endpoint,auth:e.getKey("auth"),p256dh:e.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(a)];case 2:return n.sent(),[4,this.vapidDetailsModel.saveVapidDetails(t.scope,r)];case 3:return n.sent(),[2,o];case 4:return s=n.sent(),[4,this.deleteToken(i.fcmToken)];case 5:throw n.sent(),s;case 6:return[2]}})})},t.prototype.getNewToken=function(t,e,r){return n.i(T.__awaiter)(this,void 0,void 0,function(){var i,o;return n.i(T.__generator)(this,function(n){switch(n.label){case 0:return[4,this.iidModel.getToken(this.messagingSenderId,e,r)];case 1:return i=n.sent(),o={swScope:t.scope,vapidKey:r,fcmSenderId:this.messagingSenderId,fcmToken:i.token,fcmPushSet:i.pushSet,createTime:Date.now(),endpoint:e.endpoint,auth:e.getKey("auth"),p256dh:e.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(o)];case 2:return n.sent(),[4,this.vapidDetailsModel.saveVapidDetails(t.scope,r)];case 3:return n.sent(),[2,i.token]}})})},t.prototype.deleteToken=function(t){return n.i(T.__awaiter)(this,void 0,void 0,function(){var e,r;return n.i(T.__generator)(this,function(n){switch(n.label){case 0:return[4,this.deleteTokenFromDB(t)];case 1:return n.sent(),[4,this.getSWRegistration_()];case 2:return e=n.sent(),e?[4,e.pushManager.getSubscription()]:[3,4];case 3:if(r=n.sent())return[2,r.unsubscribe()];n.label=4;case 4:return[2,!0]}})})},t.prototype.deleteTokenFromDB=function(t){return n.i(T.__awaiter)(this,void 0,void 0,function(){var e;return n.i(T.__generator)(this,function(n){switch(n.label){case 0:return[4,this.tokenDetailsModel.deleteToken(t)];case 1:return e=n.sent(),[4,this.iidModel.deleteToken(e.fcmSenderId,e.fcmToken,e.fcmPushSet)];case 2:return n.sent(),[2]}})})},t.prototype.getPushSubscription=function(t,e){return t.pushManager.getSubscription().then(function(n){return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:e})})},t.prototype.requestPermission=function(){throw I.create("only-available-in-window")},t.prototype.useServiceWorker=function(t){throw I.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){throw I.create("only-available-in-window")},t.prototype.onMessage=function(t,e,n){throw I.create("only-available-in-window")},t.prototype.onTokenRefresh=function(t,e,n){throw I.create("only-available-in-window")},t.prototype.setBackgroundMessageHandler=function(t){throw I.create("only-available-in-sw")},t.prototype.delete=function(){return n.i(T.__awaiter)(this,void 0,void 0,function(){return n.i(T.__generator)(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.tokenDetailsModel.closeDatabase(),this.vapidDetailsModel.closeDatabase()])];case 1:return t.sent(),[2]}})})},t.prototype.getNotificationPermission_=function(){return Notification.permission},t.prototype.getTokenDetailsModel=function(){return this.tokenDetailsModel},t.prototype.getVapidDetailsModel=function(){return this.vapidDetailsModel},t.prototype.getIidModel=function(){return this.iidModel},t}(),U=function(t){function e(e){var n=t.call(this,e)||this;return n.bgMessageHandler=null,self.addEventListener("push",function(t){n.onPush(t)}),self.addEventListener("pushsubscriptionchange",function(t){n.onSubChange(t)}),self.addEventListener("notificationclick",function(t){n.onNotificationClick(t)}),n}return n.i(T.__extends)(e,t),e.prototype.onPush=function(t){t.waitUntil(this.onPush_(t))},e.prototype.onSubChange=function(t){t.waitUntil(this.onSubChange_(t))},e.prototype.onNotificationClick=function(t){t.waitUntil(this.onNotificationClick_(t))},e.prototype.onPush_=function(t){return n.i(T.__awaiter)(this,void 0,void 0,function(){var e,r,i,o,a,s,u;return n.i(T.__generator)(this,function(n){switch(n.label){case 0:if(!t.data)return[2];try{e=t.data.json()}catch(t){return[2]}return[4,this.hasVisibleClients_()];case 1:return(r=n.sent())?[2,this.sendMessageToWindowClients_(e)]:(i=this.getNotificationData_(e))?(o=i.title||"",[4,this.getSWRegistration_()]):[3,3];case 2:return a=n.sent(),s=i.actions,u=Notification.maxActions,s&&u&&s.length>u&&console.warn("This browser only supports "+u+" actions.The remaining actions will not be displayed."),[2,a.showNotification(o,i)];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(e)]:[3,5];case 4:return n.sent(),[2];case 5:return[2]}})})},e.prototype.onSubChange_=function(t){return n.i(T.__awaiter)(this,void 0,void 0,function(){var t,e,r,i,o;return n.i(T.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.getSWRegistration_()];case 1:return t=n.sent(),[3,3];case 2:throw e=n.sent(),I.create("unable-to-resubscribe",{message:e});case 3:return n.trys.push([3,5,,8]),[4,t.pushManager.getSubscription()];case 4:return n.sent(),[3,8];case 5:return r=n.sent(),i=this.getTokenDetailsModel(),[4,i.getTokenDetailsFromSWScope(t.scope)];case 6:if(!(o=n.sent()))throw r;return[4,this.deleteToken(o.fcmToken)];case 7:throw n.sent(),r;case 8:return[2]}})})},e.prototype.onNotificationClick_=function(t){return n.i(T.__awaiter)(this,void 0,void 0,function(){var e,r,i,o;return n.i(T.__generator)(this,function(n){switch(n.label){case 0:return t.notification&&t.notification.data&&t.notification.data.FCM_MSG?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),e=t.notification.data.FCM_MSG,e.notification?(r=e.fcmOptions&&e.fcmOptions.link||e.notification.click_action,r?[4,this.getWindowClient_(r)]:[2]):[2]):[2];case 1:return i=n.sent(),i?[3,3]:[4,self.clients.openWindow(r)];case 2:return i=n.sent(),[3,5];case 3:return[4,i.focus()];case 4:i=n.sent(),n.label=5;case 5:return i?(delete e.notification,delete e.fcmOptions,o=p(N.NOTIFICATION_CLICKED,e),[2,this.attemptToMessageClient_(i,o)]):[2]}})})},e.prototype.getNotificationData_=function(t){var e;if(t&&"object"==typeof t.notification){var r=n.i(T.__assign)({},t.notification);return r.data=n.i(T.__assign)({},t.notification.data,(e={},e.FCM_MSG=t,e)),r}},e.prototype.setBackgroundMessageHandler=function(t){if(!t||"function"!=typeof t)throw I.create("bg-handler-function-expected");this.bgMessageHandler=t},e.prototype.getWindowClient_=function(t){return n.i(T.__awaiter)(this,void 0,void 0,function(){var e,r,i,o,a;return n.i(T.__generator)(this,function(n){switch(n.label){case 0:return e=new URL(t,self.location.href).href,[4,f()];case 1:for(r=n.sent(),i=null,o=0;o<r.length;o++)if((a=new URL(r[o].url,self.location.href).href)===e){i=r[o];break}return[2,i]}})})},e.prototype.attemptToMessageClient_=function(t,e){return n.i(T.__awaiter)(this,void 0,void 0,function(){return n.i(T.__generator)(this,function(n){if(!t)throw I.create("no-window-client-to-msg");return t.postMessage(e),[2]})})},e.prototype.hasVisibleClients_=function(){return n.i(T.__awaiter)(this,void 0,void 0,function(){var t;return n.i(T.__generator)(this,function(e){switch(e.label){case 0:return[4,f()];case 1:return t=e.sent(),[2,t.some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")})]}})})},e.prototype.sendMessageToWindowClients_=function(t){return n.i(T.__awaiter)(this,void 0,void 0,function(){var e,r,i=this;return n.i(T.__generator)(this,function(n){switch(n.label){case 0:return[4,f()];case 1:return e=n.sent(),r=p(N.PUSH_MSG_RECEIVED,t),[4,Promise.all(e.map(function(t){return i.attemptToMessageClient_(t,r)}))];case 2:return n.sent(),[2]}})})},e.prototype.getSWRegistration_=function(){return n.i(T.__awaiter)(this,void 0,void 0,function(){return n.i(T.__generator)(this,function(t){return[2,self.registration]})})},e.prototype.getPublicVapidKey_=function(){return n.i(T.__awaiter)(this,void 0,void 0,function(){var t,e;return n.i(T.__generator)(this,function(n){switch(n.label){case 0:return[4,this.getSWRegistration_()];case 1:if(!(t=n.sent()))throw I.create("sw-registration-expected");return[4,this.getVapidDetailsModel().getVapidFromSWScope(t.scope)];case 2:return e=n.sent(),null==e?[2,k]:[2,e]}})})},e}(F),j=function(t){function e(e){var r=t.call(this,e)||this;return r.registrationToUse=null,r.publicVapidKeyToUse=null,r.manifestCheckPromise=null,r.messageObserver=null,r.tokenRefreshObserver=null,r.onMessageInternal=n.i(S.createSubscribe)(function(t){r.messageObserver=t}),r.onTokenRefreshInternal=n.i(S.createSubscribe)(function(t){r.tokenRefreshObserver=t}),r.setupSWMessageListener_(),r}return n.i(T.__extends)(e,t),e.prototype.getToken=function(){return n.i(T.__awaiter)(this,void 0,void 0,function(){return n.i(T.__generator)(this,function(e){switch(e.label){case 0:return this.manifestCheckPromise||(this.manifestCheckPromise=d()),[4,this.manifestCheckPromise];case 1:return e.sent(),[2,t.prototype.getToken.call(this)]}})})},e.prototype.requestPermission=function(){return n.i(T.__awaiter)(this,void 0,void 0,function(){var t;return n.i(T.__generator)(this,function(e){switch(e.label){case 0:return"granted"===this.getNotificationPermission_()?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw"denied"===t?I.create("permission-blocked"):I.create("permission-default")}})})},e.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw I.create("sw-registration-expected");if(null!=this.registrationToUse)throw I.create("use-sw-before-get-token");this.registrationToUse=t},e.prototype.usePublicVapidKey=function(t){if("string"!=typeof t)throw I.create("invalid-public-vapid-key");if(null!=this.publicVapidKeyToUse)throw I.create("use-public-key-before-get-token");var e=a(t);if(65!==e.length)throw I.create("public-vapid-key-decryption-failed");this.publicVapidKeyToUse=e},e.prototype.onMessage=function(t,e,n){return"function"==typeof t?this.onMessageInternal(t,e,n):this.onMessageInternal(t)},e.prototype.onTokenRefresh=function(t,e,n){return"function"==typeof t?this.onTokenRefreshInternal(t,e,n):this.onTokenRefreshInternal(t)},e.prototype.waitForRegistrationToActivate_=function(t){var e=t.installing||t.waiting||t.active;return new Promise(function(n,r){if(!e)return void r(I.create("no-sw-in-reg"));if("activated"===e.state)return void n(t);if("redundant"===e.state)return void r(I.create("sw-reg-redundant"));var i=function(){if("activated"===e.state)n(t);else{if("redundant"!==e.state)return;r(I.create("sw-reg-redundant"))}e.removeEventListener("statechange",i)};e.addEventListener("statechange",i)})},e.prototype.getSWRegistration_=function(){var t=this;return this.registrationToUse?this.waitForRegistrationToActivate_(this.registrationToUse):(this.registrationToUse=null,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}).catch(function(t){throw I.create("failed-serviceworker-registration",{browserErrorMessage:t.message})}).then(function(e){return t.waitForRegistrationToActivate_(e).then(function(){return t.registrationToUse=e,e.update(),e})}))},e.prototype.getPublicVapidKey_=function(){return n.i(T.__awaiter)(this,void 0,void 0,function(){return n.i(T.__generator)(this,function(t){return this.publicVapidKeyToUse?[2,this.publicVapidKeyToUse]:[2,k]})})},e.prototype.setupSWMessageListener_=function(){var t=this;navigator.serviceWorker.addEventListener("message",function(e){if(e.data&&e.data[_.TYPE_OF_MSG]){var n=e.data;switch(n[_.TYPE_OF_MSG]){case N.PUSH_MSG_RECEIVED:case N.NOTIFICATION_CLICKED:var r=n[_.DATA];t.messageObserver&&t.messageObserver.next(r)}}},!1)},e}(F);y(E.a)},dudK:function(t,e,n){var r=n("3fMt"),i=n("tn1D"),o=n("yuYM"),a=n("FKWp"),s=n("GhAV"),u=n("1yV6"),c={},h={},e=t.exports=function(t,e,n,l,f){var p,d,y,v,m=f?function(){return t}:u(t),g=r(n,l,e?2:1),b=0;if("function"!=typeof m)throw TypeError(t+" is not iterable!");if(o(m)){for(p=s(t.length);p>b;b++)if((v=e?g(a(d=t[b])[0],d[1]):g(t[b]))===c||v===h)return v}else for(y=m.call(t);!(d=y.next()).done;)if((v=i(y,g,d.value,e))===c||v===h)return v};e.BREAK=c,e.RETURN=h},eTT4:function(t,e,n){"use strict";var r=n("jgJS"),i=n("jAiL")("toStringTag"),o={};o[i]="z",t.exports="[object z]"!==String(o)?function(){return"[object "+r(this)+"]"}:o.toString},eZ0g:function(t,e){t.exports={}},eg8w:function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},er2X:function(t,e,n){t.exports=n("CwNI")},exGp:function(t,e,n){"use strict";e.__esModule=!0;var r=n("//Fk"),i=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(t){return function(){var e=t.apply(this,arguments);return new i.default(function(t,n){function r(o,a){try{var s=e[o](a),u=s.value}catch(t){return void n(t)}if(!s.done)return i.default.resolve(u).then(function(t){r("next",t)},function(t){r("throw",t)});t(u)}return r("next")})}}},f9UU:function(t,e,n){var r=n("65ot");n("i9tX")({target:"Object",stat:!0,forced:Object.assign!==r},{assign:r})},fC4T:function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},fRlm:function(t,e,n){n("Ld14")("match")},fTzd:function(t,e){e.f=Object.getOwnPropertySymbols},fjI4:function(t,e,n){"use strict";/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function r(t){o.forEach(function(e){e.logLevel=t})}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"LogLevel",function(){return i}),n.d(e,"Logger",function(){return u}),n.d(e,"setLogLevel",function(){return r});/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var i,o=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(i||(i={}));var a=i.INFO,s=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var o=(new Date).toISOString();switch(e){case i.DEBUG:case i.VERBOSE:console.log.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case i.INFO:console.info.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case i.WARN:console.warn.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case i.ERROR:console.error.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}},u=function(){function t(t){this.name=t,this._logLevel=a,this._logHandler=s,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in i))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.DEBUG].concat(t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.VERBOSE].concat(t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.INFO].concat(t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.WARN].concat(t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.ERROR].concat(t))},t}()},fkET:function(t,e,n){var r=n("r54x"),i=n("raVe"),o="".split;t.exports=r(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==i(t)?o.call(t,""):Object(t)}:Object},flBj:function(t,e,n){var r=n("hcE8"),i=n("Xo5R"),o=Function.call;t.exports=function(t,e,n){return i(o,r[t].prototype[e],n)}},fqSz:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var e=n("O4tu"),r=n.n(e);(function(){function t(t){return"string"==typeof t}function e(t){return"boolean"==typeof t}function n(){}function i(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function o(t){return null===t}function a(t){return"array"==i(t)}function s(t){var e=i(t);return"array"==e||"object"==e&&"number"==typeof t.length}function u(t){return"function"==i(t)}function c(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function h(t,e,n){return t.call.apply(t.bind,arguments)}function l(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function f(t,e,n){return f=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?h:l,f.apply(null,arguments)}function p(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function d(t,e){function n(){}n.prototype=e.prototype,t.pb=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.gd=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function y(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function v(t){if(Error.captureStackTrace)Error.captureStackTrace(this,v);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function m(t,e){t=t.split("%s");for(var n="",r=t.length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");v.call(this,n+t[r])}function g(t,e){throw new m("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function b(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function _(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function w(){this.b=this.a=null}function E(){var t=fc,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function T(){this.next=this.b=this.a=null}function S(e,n){var r=e.length,i=t(e)?e.split(""):e;for(--r;0<=r;--r)r in i&&n.call(void 0,i[r],r,e)}function C(e){t:{for(var n=Jr,r=e.length,i=t(e)?e.split(""):e,o=0;o<r;o++)if(o in i&&n.call(void 0,i[o],o,e)){n=o;break t}n=-1}return 0>n?null:t(e)?e.charAt(n):e[n]}function I(t,e){return 0<=zu(t,e)}function k(t,e){e=zu(t,e);var n;return(n=0<=e)&&Array.prototype.splice.call(t,e,1),n}function A(t,e){var n=0;S(t,function(r,i){e.call(void 0,r,i,t)&&1==Array.prototype.splice.call(t,i,1).length&&n++})}function N(t){return Array.prototype.concat.apply([],arguments)}function D(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function O(t,e){return-1!=t.indexOf(e)}function R(t,e){return t<e?-1:t>e?1:0}function x(t){return O(Hu,t)}function P(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function L(t){for(var e in t)return!1;return!0}function M(t){var e,n={};for(e in t)n[e]=t[e];return n}function F(t,e){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(var o=0;o<hc.length;o++)n=hc[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function U(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function j(t){return oc.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(Zu,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(tc,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(ec,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(nc,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(rc,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(ic,"&#0;"))),t}function q(t){qu.setTimeout(function(){throw t},0)}function V(){var t=qu.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!x("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",t.src="",document.documentElement.appendChild(t);var e=t.contentWindow;t=e.document,t.open(),t.write(""),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=f(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!x("Trident")&&!x("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){n=n.next;var t=n.xb;n.xb=null,t()}},function(t){r.next={xb:t},r=r.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){qu.setTimeout(t,0)}}function B(t,e){cc||W(),lc||(cc(),lc=!0),fc.add(t,e)}function W(){if(qu.Promise&&qu.Promise.resolve){var t=qu.Promise.resolve(void 0);cc=function(){t.then(K)}}else cc=function(){var t=K;!u(qu.setImmediate)||qu.Window&&qu.Window.prototype&&!x("Edge")&&qu.Window.prototype.setImmediate==qu.setImmediate?(uc||(uc=V()),uc(t)):qu.setImmediate(t)}}function K(){for(var t;t=E();){try{t.a.call(t.b)}catch(t){q(t)}_(Gu,t)}lc=!1}function Q(t,e){if(this.a=pc,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=n)try{var r=this;t.call(e,function(t){nt(r,dc,t)},function(t){if(!(t instanceof ht))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}nt(r,yc,t)})}catch(t){nt(this,yc,t)}}function G(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}function H(t,e,n){var r=vc.get();return r.g=t,r.b=e,r.f=n,r}function z(t){if(t instanceof Q)return t;var e=new Q(n);return nt(e,dc,t),e}function $(t){return new Q(function(e,n){n(t)})}function Y(t,e,n){rt(t,e,n,null)||B(p(e,t))}function X(t){return new Q(function(e,n){var r=t.length,i=[];if(r)for(var o,a=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},u=0;u<t.length;u++)o=t[u],Y(o,p(a,u),s);else e(i)})}function J(t){return new Q(function(e){var n=t.length,r=[];if(n)for(var i,o=function(t,i,o){n--,r[t]=i?{Eb:!0,value:o}:{Eb:!1,reason:o},0==n&&e(r)},a=0;a<t.length;a++)i=t[a],Y(i,p(o,a,!0),p(o,a,!1));else e(r)})}function Z(t,e){if(t.a==pc)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==t&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==pc&&1==r?Z(n,e):(o?(r=o,r.next==n.f&&(n.f=r),r.next=r.next.next):at(n),st(n,i,yc,e)))}t.c=null}else nt(t,yc,e)}function tt(t,e){t.b||t.a!=dc&&t.a!=yc||ot(t),t.f?t.f.next=e:t.b=e,t.f=e}function et(t,e,n,r){var i=H(null,null,null);return i.a=new Q(function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof ht?o(e):t(i)}catch(t){o(t)}}:o}),i.a.c=t,tt(t,i),i.a}function nt(t,e,n){t.a==pc&&(t===n&&(e=yc,n=new TypeError("Promise cannot resolve to itself")),t.a=1,rt(n,t.Pc,t.Qc,t)||(t.i=n,t.a=e,t.c=null,ot(t),e!=yc||n instanceof ht||ct(t,n)))}function rt(t,e,r,i){if(t instanceof Q)return tt(t,H(e||n,r||null,i)),!0;if(y(t))return t.then(e,r,i),!0;if(c(t))try{var o=t.then;if(u(o))return it(t,o,e,r,i),!0}catch(t){return r.call(i,t),!0}return!1}function it(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}function a(t){s||(s=!0,n.call(i,t))}var s=!1;try{e.call(t,a,o)}catch(t){o(t)}}function ot(t){t.h||(t.h=!0,B(t.Yb,t))}function at(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function st(t,e,n,r){if(n==yc&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,ut(e,n,r);else try{e.c?e.g.call(e.f):ut(e,n,r)}catch(t){mc.call(null,t)}_(vc,e)}function ut(t,e,n){e==dc?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}function ct(t,e){t.g=!0,B(function(){t.g&&mc.call(null,e)})}function ht(t){v.call(this,t)}function lt(){0!=gc&&(bc[this[Wu]||(this[Wu]=++Ku)]=this),this.qa=this.qa,this.ja=this.ja}function ft(t){if(!t.qa&&(t.qa=!0,t.va(),0!=gc)){var e=t[Wu]||(t[Wu]=++Ku);if(0!=gc&&t.ja&&0<t.ja.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete bc[e]}}function pt(t){return pt[" "](t),t}function dt(t,e){var n=Oc;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}function yt(){var t=qu.document;return t?t.documentMode:void 0}function vt(t){return dt(t,function(){for(var e=0,n=Ju(String(_c)).split("."),r=Ju(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=R(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||R(0==a[2].length,0==s[2].length)||R(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e})}function mt(t,e){this.type=t,this.b=this.target=e,this.Kb=!0}function gt(e,n){if(mt.call(this,e?e.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var r=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.b=n,n=e.relatedTarget){if(Cc){t:{try{pt(n.nodeName);var o=!0;break t}catch(t){}o=!1}o||(n=null)}}else"mouseover"==r?n=e.fromElement:"mouseout"==r&&(n=e.toElement);this.relatedTarget=n,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=t(e.pointerType)?e.pointerType:Fc[e.pointerType]||"",this.a=e,e.defaultPrevented&&this.preventDefault()}}function bt(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ma=i,this.key=++jc,this.oa=this.Ia=!1}function _t(t){t.oa=!0,t.listener=null,t.proxy=null,t.src=null,t.Ma=null}function wt(t){this.src=t,this.a={},this.b=0}function Et(t,e){var n=e.type;n in t.a&&k(t.a[n],e)&&(_t(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function Tt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.oa&&o.listener==e&&o.capture==!!n&&o.Ma==r)return i}return-1}function St(t,e,n,r,i){if(r&&r.once)kt(t,e,n,r,i);else if(a(e))for(var o=0;o<e.length;o++)St(t,e[o],n,r,i);else n=Lt(n),t&&t[Uc]?Ft(t,e,n,c(r)?!!r.capture:!!r,i):Ct(t,e,n,!1,r,i)}function Ct(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=c(i)?!!i.capture:!!i,s=Pt(t);if(s||(t[qc]=s=new wt(t)),n=s.add(e,n,r,a,o),!n.proxy){if(r=It(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Mc||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Dt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}Bc++}}function It(){var t=xt,e=Pc?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}function kt(t,e,n,r,i){if(a(e))for(var o=0;o<e.length;o++)kt(t,e[o],n,r,i);else n=Lt(n),t&&t[Uc]?Ut(t,e,n,c(r)?!!r.capture:!!r,i):Ct(t,e,n,!0,r,i)}function At(t,e,n,r,i){if(a(e))for(var o=0;o<e.length;o++)At(t,e[o],n,r,i);else r=c(r)?!!r.capture:!!r,n=Lt(n),t&&t[Uc]?(t=t.o,(e=String(e).toString())in t.a&&(o=t.a[e],-1<(n=Tt(o,n,r,i))&&(_t(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=Pt(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Tt(e,n,r,i)),(n=-1<t?e[t]:null)&&Nt(n))}function Nt(t){if("number"!=typeof t&&t&&!t.oa){var e=t.src;if(e&&e[Uc])Et(e.o,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Dt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),Bc--,(n=Pt(e))?(Et(n,t),0==n.b&&(n.src=null,e[qc]=null)):_t(t)}}}function Dt(t){return t in Vc?Vc[t]:Vc[t]="on"+t}function Ot(t,e,n,r){var i=!0;if((t=Pt(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.oa&&(o=Rt(o,r),i=i&&!1!==o)}return i}function Rt(t,e){var n=t.listener,r=t.Ma||t.src;return t.Ia&&Nt(t),n.call(r,e)}function xt(t,e){if(t.oa)return!0;if(!Pc){if(!e)t:{e=["window","event"];for(var n=qu,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(r=e,e=new gt(r,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=Ot(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=Ot(r[i],t,!1,e),n=n&&o}return n}return Rt(t,new gt(e,this))}function Pt(t){return t=t[qc],t instanceof wt?t:null}function Lt(t){return u(t)?t:(t[Wc]||(t[Wc]=function(e){return t.handleEvent(e)}),t[Wc])}function Mt(){lt.call(this),this.o=new wt(this),this.Rb=this,this.Wa=null}function Ft(t,e,n,r,i){t.o.add(String(e),n,!1,r,i)}function Ut(t,e,n,r,i){t.o.add(String(e),n,!0,r,i)}function jt(t,e,n,r){if(!(e=t.o.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.oa&&a.capture==n){var s=a.listener,u=a.Ma||a.src;a.Ia&&Et(t.o,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Kb}function qt(t,e,n){if(u(t))n&&(t=f(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=f(t.handleEvent,t)}return 2147483647<Number(e)?-1:qu.setTimeout(t,e||0)}function Vt(t){var e=null;return new Q(function(n,r){-1==(e=qt(function(){n(void 0)},t))&&r(Error("Failed to schedule timer."))}).s(function(t){throw qu.clearTimeout(e),t})}function Bt(e){if(e.S&&"function"==typeof e.S)return e.S();if(t(e))return e.split("");if(s(e)){for(var n=[],r=e.length,i=0;i<r;i++)n.push(e[i]);return n}n=[],r=0;for(i in e)n[r++]=e[i];return n}function Wt(e){if(e.U&&"function"==typeof e.U)return e.U();if(!e.S||"function"!=typeof e.S){if(s(e)||t(e)){var n=[];e=e.length;for(var r=0;r<e;r++)n.push(r);return n}n=[],r=0;for(var i in e)n[r++]=i;return n}}function Kt(e,n){if(e.forEach&&"function"==typeof e.forEach)e.forEach(n,void 0);else if(s(e)||t(e))$u(e,n,void 0);else for(var r=Wt(e),i=Bt(e),o=i.length,a=0;a<o;a++)n.call(void 0,i[a],r&&r[a],e)}function Qt(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Qt)for(n=t.U(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Gt(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ht(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)r=t.a[e],Ht(i,r)||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Ht(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function zt(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function $t(t,e){if(this.b=this.o=this.c="",this.i=null,this.h=this.g="",this.f=!1,t instanceof $t){this.f=void 0!==e?e:t.f,Yt(this,t.c),this.o=t.o,this.b=t.b,Xt(this,t.i),this.g=t.g,e=t.a;var n=new ae;n.c=e.c,e.a&&(n.a=new Qt(e.a),n.b=e.b),Jt(this,n),this.h=t.h}else t&&(n=String(t).match(Kc))?(this.f=!!e,Yt(this,n[1]||"",!0),this.o=re(n[2]||""),this.b=re(n[3]||"",!0),Xt(this,n[4]),this.g=re(n[5]||"",!0),Jt(this,n[6]||"",!0),this.h=re(n[7]||"")):(this.f=!!e,this.a=new ae(null,this.f))}function Yt(t,e,n){t.c=n?re(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Xt(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.i=e}else t.i=null}function Jt(t,e,n){e instanceof ae?(t.a=e,pe(t.a,t.f)):(n||(e=ie(e,zc)),t.a=new ae(e,t.f))}function Zt(t,e,n){t.a.set(e,n)}function te(t,e){return t.a.get(e)}function ee(t){return t instanceof $t?new $t(t):new $t(t,void 0)}function ne(t,e){var n=new $t(null,void 0);return Yt(n,"https"),t&&(n.b=t),e&&(n.g=e),n}function re(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ie(e,n,r){return t(e)?(e=encodeURI(e).replace(n,oe),r&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function oe(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(15&t).toString(16)}function ae(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function se(t){t.a||(t.a=new Qt,t.b=0,t.c&&zt(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function ue(t){var e=Wt(t);if(void 0===e)throw Error("Keys are undefined");var n=new ae(null,void 0);t=Bt(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];a(o)?le(n,i,o):n.add(i,o)}return n}function ce(t,e){se(t),e=fe(t,e),Ht(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,t=t.a,Ht(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Gt(t)))}function he(t,e){return se(t),e=fe(t,e),Ht(t.a.b,e)}function le(t,e,n){ce(t,e),0<n.length&&(t.c=null,t.a.set(fe(t,e),D(n)),t.b+=n.length)}function fe(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function pe(t,e){e&&!t.f&&(se(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(ce(this,e),le(this,n,t))},t)),t.f=e}function de(t,e){this.a=t===Jc&&e||"",this.b=Xc}function ye(t){return t instanceof de&&t.constructor===de&&t.b===Xc?t.a:(g("expected object of type Const, got '"+t+"'"),"type_error:Const")}function ve(){this.a="",this.b=eh}function me(t){return t instanceof ve&&t.constructor===ve&&t.b===eh?t.a:(g("expected object of type TrustedResourceUrl, got '"+t+"' of type "+i(t)),"type_error:TrustedResourceUrl")}function ge(t,e){var n=ye(t);if(!th.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return t=n.replace(Zc,function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return t=e[r],t instanceof de?ye(t):encodeURIComponent(String(t))}),be(t)}function be(t){var e=new ve;return e.a=t,e}function _e(){this.a="",this.b=rh}function we(t){return t instanceof _e&&t.constructor===_e&&t.b===rh?t.a:(g("expected object of type SafeUrl, got '"+t+"' of type "+i(t)),"type_error:SafeUrl")}function Ee(t){return t instanceof _e?t:(t="object"==typeof t&&t.na?t.ma():String(t),nh.test(t)||(t="about:invalid#zClosurez"),Te(t))}function Te(t){var e=new _e;return e.a=t,e}function Se(){this.a="",this.b=ih}function Ce(t){return t instanceof Se&&t.constructor===Se&&t.b===ih?t.a:(g("expected object of type SafeHtml, got '"+t+"' of type "+i(t)),"type_error:SafeHtml")}function Ie(t){var e=new Se;return e.a=t,e}function ke(t,e){t.src=me(e),null===Bu&&(e=qu.document,Bu=(e=e.querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&Vu.test(e)?e:""),(e=Bu)&&t.setAttribute("nonce",e)}function Ae(e){var n=document;return t(e)?n.getElementById(e):e}function Ne(t,e){P(e,function(e,n){e&&"object"==typeof e&&e.na&&(e=e.ma()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:oh.hasOwnProperty(n)?t.setAttribute(oh[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e})}function De(e,n,r){var i=arguments,o=document,s=String(i[0]),u=i[1];if(!Yc&&u&&(u.name||u.type)){if(s=["<",s],u.name&&s.push(' name="',j(u.name),'"'),u.type){s.push(' type="',j(u.type),'"');var c={};F(c,u),delete c.type,u=c}s.push(">"),s=s.join("")}return s=o.createElement(s),u&&(t(u)?s.className=u:a(u)?s.className=u.join(" "):Ne(s,u)),2<i.length&&Oe(o,s,i),s}function Oe(e,n,r){function i(r){r&&n.appendChild(t(r)?e.createTextNode(r):r)}for(var o=2;o<r.length;o++){var a=r[o];!s(a)||c(a)&&0<a.nodeType?i(a):$u(Re(a)?D(a):a,i)}}function Re(t){if(t&&"number"==typeof t.length){if(c(t))return"function"==typeof t.item||"string"==typeof t.item;if(u(t))return"function"==typeof t.item}return!1}function xe(t){var e=[];return Le(new Pe,t,e),e.join("")}function Pe(){}function Le(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(a(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),Le(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){n.push("{"),i="";for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&"function"!=typeof(o=e[r])&&(n.push(i),Me(r,n),n.push(":"),Le(t,o,n),i=",");return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":Me(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}function Me(t,e){e.push('"',t.replace(sh,function(t){var e=ah[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),ah[t]=e),e}),'"')}function Fe(){var t=nn();return Ec&&!!Dc&&11==Dc||/Edge\/\d+/.test(t)}function Ue(){return qu.window&&qu.window.location.href||self&&self.location&&self.location.href||""}function je(t,e){e=e||qu.window;var n="about:blank";t&&(n=we(Ee(t))),e.location.href=n}function qe(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<qe(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function Ve(){var t=nn();return!((t=tn(t)!=lh?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t)&&(!Ec||!Dc||9<Dc)}function Be(t){return t=(t||nn()).toLowerCase(),!!(t.match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function We(t){t=t||qu.window;try{t.close()}catch(t){}}function Ke(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=nn().toLowerCase(),r&&(e.target=r,O(n,"crios/")&&(e.target="_blank")),tn(nn())==hh&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof _e?n:Ee(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[];for(a in t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((x("iPhone")&&!x("iPod")&&!x("iPad")||x("iPad")||x("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(a=r.document.createElement("A"),e instanceof _e||e instanceof _e||(e="object"==typeof e&&e.na?e.ma():String(e),nh.test(e)||(e="about:invalid#zClosurez"),e=Te(e)),a.href=we(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),t=document.createEvent("MouseEvent"),t.initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=r.open("",n,a),t=we(e),a&&(Sc&&O(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t=Ie('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+j(t)+'">'),a.document.write(Ce(t)),a.document.close())):(a=r.open(we(e),n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}function Qe(t){return new Q(function(e){function n(){Vt(2e3).then(function(){if(t&&!t.closed)return n();e()})}return n()})}function Ge(){var t=null;return new Q(function(e){"complete"==qu.document.readyState?e():(t=function(){e()},kt(window,"load",t))}).s(function(e){throw At(window,"load",t),e})}function He(){return ze(void 0)?Ge().then(function(){return new Q(function(t,e){var n=qu.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):$(Error("Cordova must run in an Android or iOS file scheme."))}function ze(t){return t=t||nn(),!("file:"!==un()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function $e(){var t=qu.window;try{return!(!t||t==t.top)}catch(t){return!1}}function Ye(){return"object"!=typeof qu.window&&"function"==typeof qu.importScripts}function Xe(){return r.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":r.a.INTERNAL.hasOwnProperty("node")?"Node":Ye()?"Worker":"Browser"}function Je(){var t=Xe();return"ReactNative"===t||"Node"===t}function Ze(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}function tn(t){var e=t.toLowerCase();return O(e,"opera/")||O(e,"opr/")||O(e,"opios/")?"Opera":O(e,"iemobile")?"IEMobile":O(e,"msie")||O(e,"trident/")?"IE":O(e,"edge/")?"Edge":O(e,"firefox/")?hh:O(e,"silk/")?"Silk":O(e,"blackberry")?"Blackberry":O(e,"webos")?"Webos":!O(e,"safari/")||O(e,"chrome/")||O(e,"crios/")||O(e,"android")?!O(e,"chrome/")&&!O(e,"crios/")||O(e,"edge/")?O(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":lh:"Safari"}function en(t,e){e=e||[];var n,r=[],i={};for(n in fh)i[fh[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),e=r,e.length||(e=["FirebaseCore-web"]),r=Xe(),"Browser"===r?(i=nn(),r=tn(i)):"Worker"===r&&(i=nn(),r=tn(i)+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function nn(){return qu.navigator&&qu.navigator.userAgent||""}function rn(t,e){t=t.split("."),e=e||qu;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function on(){try{var t=qu.localStorage,e=pn();if(t)return t.setItem(e,"1"),t.removeItem(e),!Fe()||!!qu.indexedDB}catch(t){return Ye()&&!!qu.indexedDB}return!1}function an(){return(sn()||"chrome-extension:"===un()||ze())&&!Je()&&on()&&!Ye()}function sn(){return"http:"===un()||"https:"===un()}function un(){return qu.location&&qu.location.protocol||null}function cn(t){return t=t||nn(),!Be(t)&&tn(t)!=hh}function hn(t){return void 0===t?null:xe(t)}function ln(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function fn(t){if(null!==t)return JSON.parse(t)}function pn(t){return t||Math.floor(1e9*Math.random()).toString()}function dn(t){return t=t||nn(),"Safari"!=tn(t)&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function yn(){var t=qu.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function vn(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=nn(),e=Xe(),this.b=Be(t)||"ReactNative"===e}function mn(){var t=qu.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function gn(){var t=qu.document,e=null;return mn()||!t?z():new Q(function(n){e=function(){mn()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)}).s(function(n){throw t.removeEventListener("visibilitychange",e,!1),n})}function bn(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function _n(){return!(!rn("fireauth.oauthhelper",qu)&&!rn("fireauth.iframe",qu))}function wn(){var t=qu.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}function En(){var t=qu.navigator;return t&&t.serviceWorker?z().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).s(function(){return null}):z(null)}function Tn(t){dh[t]||(dh[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}function Sn(t,e,n){ph?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Cn(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Sn(t,n,e[n])}function In(t){var e={};return Cn(e,t),e}function kn(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function An(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(void 0===r||null===r||""===r)return!1}return!0}function Nn(t){var e=t;if("object"==typeof t&&null!=t){e="length"in t?[]:{};for(var n in t)Sn(e,n,Nn(t[n]))}return e}function Dn(t){var e={},n=t[mh],r=t[gh];if(!(t=t[bh])||t!=vh&&!n)throw Error("Invalid provider user info!");e[wh]=r||null,e[_h]=n||null,Sn(this,Th,t),Sn(this,Eh,Nn(e))}function On(t,e){this.code=Sh+t,this.message=e||Ch[t]||""}function Rn(t){var e=t&&t.code;return e?new On(e.substring(Sh.length),t.message):null}function xn(t){var e=t[Dh];if(void 0===e)throw new On("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new On("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Ih];if(n&&"object"==typeof n){e=n[xh];var r=n[Oh];if(n=n[Rh],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new On("argument-error",Oh+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new On("argument-error",Rh+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new On("argument-error",xh+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new On("missing-android-pkg-name")}}else if(void 0!==n)throw new On("argument-error",Ih+" property must be a non null object when specified.");if(this.f=null,(e=t[Nh])&&"object"==typeof e){if("string"==typeof(e=e[Ph])&&e.length)this.f=e;else if(void 0!==e)throw new On("argument-error",Ph+" property must be a non empty string when specified.")}else if(void 0!==e)throw new On("argument-error",Nh+" property must be a non null object when specified.");if(void 0!==(e=t[Ah])&&"boolean"!=typeof e)throw new On("argument-error",Ah+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[kh])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new On("argument-error",kh+" property must be a non empty string when specified.");this.i=t||null}function Pn(t){var e={};e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i;for(var n in e)null===e[n]&&delete e[n];return e}function Ln(t){return Yu(t,function(t){return t=t.toString(16),1<t.length?t:"0"+t}).join("")}function Mn(t){var e="";return Fn(t,function(t){e+=String.fromCharCode(t)}),e}function Fn(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Mh[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}Un();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}function Un(){if(!Lh){Lh={},Mh={};for(var t=0;65>t;t++)Lh[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t),Mh[Lh[t]]=t,62<=t&&(Mh["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(t)]=t)}}function jn(t){this.c=t.sub,Qu(),this.a=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.b=!!t.is_anonymous||"anonymous"==this.a}function qn(t){return(t=Vn(t))&&t.sub&&t.iss&&t.aud&&t.exp?new jn(t):null}function Vn(t){if(!t)return null;if(t=t.split("."),3!=t.length)return null;t=t[1];for(var e=(4-t.length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(Mn(t))}catch(t){}return null}function Bn(t){for(var e in Uh)if(Uh[e].id===t)return t=Uh[e],{firebaseEndpoint:t.bb,secureTokenEndpoint:t.jb};return null}function Wn(t){for(var e in Vh)if(Vh[e].Oa==t)return Vh[e];return null}function Kn(t){var e={};e["facebook.com"]=Hn,e["google.com"]=$n,e["github.com"]=zn,e["twitter.com"]=Yn;var n=t&&t[Wh];try{if(n)return e[n]?new e[n](t):new Gn(t);if(void 0!==t[Bh])return new Qn(t)}catch(t){}return null}function Qn(t){var e=t[Wh];if(!e&&t[Bh]){var n=qn(t[Bh]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Sn(this,"providerId",e),Sn(this,"isNewUser",n)}function Gn(t){Qn.call(this,t),t=fn(t.rawUserInfo||"{}"),Sn(this,"profile",Nn(t||{}))}function Hn(t){if(Gn.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function zn(t){if(Gn.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Sn(this,"username",this.profile&&this.profile.login||null)}function $n(t){if(Gn.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Yn(t){if(Gn.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Sn(this,"username",t.screenName||null)}function Xn(t){this.a=ee(t)}function Jn(t){var e=ee(t),n=te(e,"link"),r=te(ee(n),"link");return e=te(e,"deep_link_id"),te(ee(e),"link")||e||r||n||t}function Zn(t,e){return t.then(function(t){if(t[sl]){var n=qn(t[sl]);if(!n||e!=n.c)throw new On("user-mismatch");return t}throw new On("user-mismatch")}).s(function(t){throw t&&t.code&&t.code==Sh+"user-not-found"?new On("user-mismatch"):t})}function tr(t,e){if(!e)throw new On("internal-error","failed to construct a credential");this.a=e,Sn(this,"providerId",t),Sn(this,"signInMethod",t)}function er(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function nr(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Sn(this,"idToken",e.idToken),e.accessToken&&Sn(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Sn(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new On("internal-error","failed to construct a credential");Sn(this,"accessToken",e.oauthToken),Sn(this,"secret",e.oauthTokenSecret)}Sn(this,"providerId",t),Sn(this,"signInMethod",n)}function rr(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:ue(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function ir(t,e){this.Fc=e||[],Cn(this,{providerId:t,isOAuthProvider:!0}),this.zb={},this.eb=(Wn(t)||{}).Na||null,this.ab=null}function or(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new On("argument-error",'SAML provider IDs must be prefixed with "saml."');ir.call(this,t,[])}function ar(t){ir.call(this,t,qh),this.a=[]}function sr(){ar.call(this,"facebook.com")}function ur(t){if(!t)throw new On("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return c(t)&&(e=t.accessToken),(new sr).credential(null,e)}function cr(){ar.call(this,"github.com")}function hr(t){if(!t)throw new On("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return c(t)&&(e=t.accessToken),(new cr).credential(null,e)}function lr(){ar.call(this,"google.com"),this.ua("profile")}function fr(t,e){var n=t;return c(t)&&(n=t.idToken,e=t.accessToken),(new lr).credential(n,e)}function pr(){ir.call(this,"twitter.com",jh)}function dr(t,e){var n=t;if(c(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new On("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new nr("twitter.com",n,"twitter.com")}function yr(t,e,n){this.a=t,this.c=e,Sn(this,"providerId","password"),Sn(this,"signInMethod",n===vr.EMAIL_LINK_SIGN_IN_METHOD?vr.EMAIL_LINK_SIGN_IN_METHOD:vr.EMAIL_PASSWORD_SIGN_IN_METHOD)}function vr(){Cn(this,{providerId:"password",isOAuthProvider:!1})}function mr(t,e){if(!(e=gr(e)))throw new On("argument-error","Invalid email link!");return new yr(t,e,vr.EMAIL_LINK_SIGN_IN_METHOD)}function gr(t){t=Jn(t),t=new Xn(t);var e=te(t.a,"oobCode")||null;return"signIn"===(te(t.a,"mode")||null)&&e?e:null}function br(t){if(!(t.Ua&&t.Ta||t.Fa&&t.$))throw new On("internal-error");this.a=t,Sn(this,"providerId","phone"),Sn(this,"signInMethod","phone")}function _r(t){return t.a.Fa&&t.a.$?{temporaryProof:t.a.Fa,phoneNumber:t.a.$}:{sessionInfo:t.a.Ua,code:t.a.Ta}}function wr(t){try{this.a=t||r.a.auth()}catch(t){throw new On("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Cn(this,{providerId:"phone",isOAuthProvider:!1})}function Er(t,e){if(!t)throw new On("missing-verification-id");if(!e)throw new On("missing-verification-code");return new br({Ua:t,Ta:e})}function Tr(t){if(t.temporaryProof&&t.phoneNumber)return new br({Fa:t.temporaryProof,$:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return fr(o,n);case"facebook.com":return ur(n);case"github.com":return hr(n);case"twitter.com":return dr(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new tr(e,a):new nr(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new ar(e).credential(o,n,i):null}}catch(t){return null}}function Sr(t){if(!t.isOAuthProvider)throw new On("invalid-oauth-provider")}function Cr(t,e,n,r,i,o){if(this.b=t,this.c=e||null,this.f=n||null,this.g=r||null,this.h=o||null,this.a=i||null,!this.f&&!this.a)throw new On("invalid-auth-event");if(this.f&&this.a)throw new On("invalid-auth-event");if(this.f&&!this.g)throw new On("invalid-auth-event")}function Ir(t){return t=t||{},t.type?new Cr(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&Rn(t.error),t.postBody):null}function kr(){this.b=null,this.a=[]}function Ar(t){var e="unauthorized-domain",n=void 0,r=ee(t);t=r.b,r=r.c,"chrome-extension"==r?n=U("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=U("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",On.call(this,e,n)}function Nr(t,e,n){On.call(this,t,n),t=e||{},t.Ab&&Sn(this,"email",t.Ab),t.$&&Sn(this,"phoneNumber",t.$),t.credential&&Sn(this,"credential",t.credential)}function Dr(t){if(t.code){var e=t.code||"";0==e.indexOf(Sh)&&(e=e.substring(Sh.length));var n={credential:Tr(t)};if(t.email)n.Ab=t.email;else if(t.phoneNumber)n.$=t.phoneNumber;else if(!n.credential)return new On(e,t.message||void 0);return new Nr(e,n,t.message)}return null}function Or(){}function Rr(t){return t.c||(t.c=t.b())}function xr(){}function Pr(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Lr(){}function Mr(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=f(this.fc,this),this.a.onerror=f(this.Gb,this),this.a.onprogress=f(this.gc,this),this.a.ontimeout=f(this.kc,this)}function Fr(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Ur(t,e,n){this.reset(t,e,n,void 0,void 0)}function jr(t){this.f=t,this.b=this.c=this.a=null}function qr(t,e){this.name=t,this.value=e}function Vr(t){return t.c?t.c:t.a?Vr(t.a):(g("Root logger has no level set."),null)}function Br(t){Jh||(Jh=new jr(""),Xh[""]=Jh,Jh.c=$h);var e;if(!(e=Xh[t])){e=new jr(t);var n=t.lastIndexOf("."),r=t.substr(n+1);n=Br(t.substr(0,n)),n.b||(n.b={}),n.b[r]=e,e.a=n,Xh[t]=e}return e}function Wr(t,e){t&&t.log(Yh,e,void 0)}function Kr(t){this.f=t}function Qr(t){Mt.call(this),this.u=t,this.readyState=Zh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=Br("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}function Gr(t){t.c.read().then(t.ec.bind(t)).catch(t.La.bind(t))}function Hr(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,zr(t)}function zr(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function $r(t){Mt.call(this),this.headers=new Qt,this.D=t||null,this.c=!1,this.w=this.a=null,this.h=this.N=this.l="",this.f=this.I=this.i=this.G=!1,this.g=0,this.u=null,this.m=tl,this.v=this.O=!1}function Yr(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.N=n,t.G=!1,t.c=!0,t.a=t.D?t.D.a():Qh.a(),t.w=Rr(t.D?t.D:Qh),t.a.onreadystatechange=f(t.Jb,t);try{Wr(t.b,si(t,"Opening Xhr")),t.I=!0,t.a.open(n,String(e),!0),t.I=!1}catch(e){return Wr(t.b,si(t,"Error opening Xhr: "+e.message)),void Zr(t,e)}e=r||"";var o=new Qt(t.headers);i&&Kt(i,function(t,e){o.set(e,t)}),i=C(o.U()),r=qu.FormData&&e instanceof qu.FormData,!I(nl,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.O&&(t.a.withCredentials=t.O);try{ri(t),0<t.g&&(t.v=Xr(t.a),Wr(t.b,si(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.v)),t.v?(t.a.timeout=t.g,t.a.ontimeout=f(t.Ga,t)):t.u=qt(t.Ga,t.g,t)),Wr(t.b,si(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){Wr(t.b,si(t,"Send error: "+e.message)),Zr(t,e)}}function Xr(t){return Ec&&vt(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}function Jr(t){return"content-type"==t.toLowerCase()}function Zr(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,ti(t),ni(t)}function ti(t){t.G||(t.G=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ei(t){if(t.c&&void 0!==ju)if(t.w[1]&&4==ii(t)&&2==oi(t))Wr(t.b,si(t,"Local request error detected and ignored"));else if(t.i&&4==ii(t))qt(t.Jb,0,t);else if(t.dispatchEvent("readystatechange"),4==ii(t)){Wr(t.b,si(t,"Request complete")),t.c=!1;try{var e=oi(t);t:switch(e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break t;default:n=!1}var r;if(!(r=n)){var i;if(i=0===e){var o=String(t.l).match(Kc)[1]||null;if(!o&&qu.self&&qu.self.location){var a=qu.self.location.protocol;o=a.substr(0,a.length-1)}i=!el.test(o?o.toLowerCase():"")}r=i}if(r)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var s=2<ii(t)?t.a.statusText:""}catch(e){Wr(t.b,"Can not get status: "+e.message),s=""}t.h=s+" ["+oi(t)+"]",ti(t)}}finally{ni(t)}}}function ni(t,e){if(t.a){ri(t);var r=t.a,i=t.w[0]?n:null;t.a=null,t.w=null,e||t.dispatchEvent("ready");try{r.onreadystatechange=i}catch(e){(t=t.b)&&t.log(Hh,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function ri(t){t.a&&t.v&&(t.a.ontimeout=null),t.u&&(qu.clearTimeout(t.u),t.u=null)}function ii(t){return t.a?t.a.readyState:0}function oi(t){try{return 2<ii(t)?t.a.status:-1}catch(t){return-1}}function ai(t){try{return t.a?t.a.responseText:""}catch(e){return Wr(t.b,"Can not get responseText: "+e.message),""}}function si(t,e){return e+" ["+t.N+" "+t.l+" "+oi(t)+"]"}function ui(t){var e=_i;this.g=[],this.v=e,this.u=t||null,this.f=this.a=!1,this.c=void 0,this.l=this.w=this.i=!1,this.h=0,this.b=null,this.o=0}function ci(t,e,n){t.a=!0,t.c=n,t.f=!e,di(t)}function hi(t){if(t.a){if(!t.l)throw new yi(t);t.l=!1}}function li(t,e){fi(t,null,e,void 0)}function fi(t,e,n,r){t.g.push([e,n,r]),t.a&&di(t)}function pi(t){return Xu(t.g,function(t){return u(t[1])})}function di(t){if(t.h&&t.a&&pi(t)){var e=t.h,n=rl[e];n&&(qu.clearTimeout(n.a),delete rl[e]),t.h=0}t.b&&(t.b.o--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var s=o.call(i||t.u,e);void 0!==s&&(t.f=t.f&&(s==e||s instanceof Error),t.c=e=s),(y(e)||"function"==typeof qu.Promise&&e instanceof qu.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,pi(t)||(n=!0)}}t.c=e,r&&(s=f(t.m,t,!0),r=f(t.m,t,!1),e instanceof ui?(fi(e,s,r),e.w=!0):e.then(s,r)),n&&(e=new mi(e),rl[e.a]=e,t.h=e.a)}function yi(){v.call(this)}function vi(){v.call(this)}function mi(t){this.a=qu.setTimeout(f(this.c,this),0),this.b=t}function gi(t){var e={},n=e.document||document,r=me(t),i=document.createElement("SCRIPT"),o={Lb:i,Ga:void 0},a=new ui(o),s=null,u=null!=e.timeout?e.timeout:5e3;return 0<u&&(s=window.setTimeout(function(){wi(i,!0);var t=new Ei(ol,"Timeout reached for loading script "+r);hi(a),ci(a,!1,t)},u),o.Ga=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(wi(i,e.hd||!1,s),hi(a),ci(a,!0,null))},i.onerror=function(){wi(i,!0,s);var t=new Ei(il,"Error while loading script "+r);hi(a),ci(a,!1,t)},o=e.attributes||{},F(o,{type:"text/javascript",charset:"UTF-8"}),Ne(i,o),ke(i,t),bi(n).appendChild(i),a}function bi(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}function _i(){if(this&&this.Lb){var t=this.Lb;t&&"SCRIPT"==t.tagName&&wi(t,!0,this.Ga)}}function wi(t,e,r){null!=r&&qu.clearTimeout(r),t.onload=n,t.onerror=n,t.onreadystatechange=n,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}function Ei(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),v.call(this,n),this.code=t}function Ti(t){this.f=t}function Si(t,e,n){if(this.b=t,t=e||{},this.i=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.o=t.secureTokenTimeout||ul,this.f=M(t.secureTokenHeaders||cl),this.g=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.h=t.firebaseTimeout||hl,this.a=M(t.firebaseHeaders||ll),n&&(this.a["X-Client-Version"]=n,this.f["X-Client-Version"]=n),n="Node"==Xe(),!(n=qu.XMLHttpRequest||n&&r.a.INTERNAL.node&&r.a.INTERNAL.node.XMLHttpRequest)&&!Ye())throw new On("internal-error","The XMLHttpRequest compatibility library was not found.");this.c=void 0,Ye()?this.c=new Kr(self):Je()?this.c=new Ti(n):this.c=new Lr}function Ci(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Ii(t,e){e?(t.a["X-Client-Version"]=e,t.f["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.f["X-Client-Version"])}function ki(t,e,n,r,i,o,a){Ve()||Ye()?t=f(t.m,t):(al||(al=new Q(function(t,e){Ai(t,e)})),t=f(t.l,t)),t(e,n,r,i,o,a)}function Ai(t,e){if(((window.gapi||{}).client||{}).request)t();else{qu[pl]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))};li(gi(ge(fl,{onload:pl})),function(){e(Error("CORS_UNSUPPORTED"))})}}function Ni(t,e){return new Q(function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?ki(t,t.i+"?key="+encodeURIComponent(t.b),function(t){t?t.error?r($i(t)):t.access_token&&t.refresh_token?n(t):r(new On("internal-error")):r(new On("network-request-failed"))},"POST",ue(e).toString(),t.f,t.o.get()):r(new On("internal-error"))})}function Di(t,e,n,r,i,o){var a=ee(t.g+e);Zt(a,"key",t.b),o&&Zt(a,"cb",Qu().toString());var s="GET"==n;if(s)for(var u in r)r.hasOwnProperty(u)&&Zt(a,u,r[u]);return new Q(function(e,o){ki(t,a.toString(),function(t){t?t.error?o($i(t,i||{})):e(t):o(new On("network-request-failed"))},n,s?void 0:xe(ln(r)),t.a,t.h.get())})}function Oi(e){if(e=e.email,!t(e)||!ch.test(e))throw new On("invalid-email")}function Ri(t){"email"in t&&Oi(t)}function xi(t,e){return Hi(t,gl,{identifier:e,continueUri:sn()?Ue():"http://localhost"}).then(function(t){return t.allProviders||[]})}function Pi(t,e){return Hi(t,gl,{identifier:e,continueUri:sn()?Ue():"http://localhost"}).then(function(t){return t.signinMethods||[]})}function Li(t){return Hi(t,kl,{}).then(function(t){return t.authorizedDomains||[]})}function Mi(t){if(!t[sl])throw new On("internal-error")}function Fi(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new On("internal-error")}else{if(!t.sessionInfo)throw new On("missing-verification-id");if(!t.code)throw new On("missing-verification-code")}}function Ui(t,e){return Hi(t,Dl,e)}function ji(t,e,n){return Hi(t,_l,{idToken:e,deleteProvider:n})}function qi(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new On("internal-error")}function Vi(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(t=new ae(t.postBody),he(t,"nonce")&&(e.nonce=t.get("nonce")))),e}function Bi(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Dr(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Dr(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Dr(t)):t.errorMessage&&(e=zi(t.errorMessage)),e)throw e;if(!t[sl])throw new On("internal-error")}function Wi(t,e){return e.returnIdpCredential=!0,Hi(t,Pl,e)}function Ki(t,e){return e.returnIdpCredential=!0,Hi(t,Ml,e)}function Qi(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Hi(t,Ll,e)}function Gi(t){if(!t.oobCode)throw new On("invalid-action-code")}function Hi(t,e,n){if(!An(n,e.T))return $(new On("internal-error"));var r,i=e.Ib||"POST";return z(n).then(e.B).then(function(){return e.R&&(n.returnSecureToken=!0),Di(t,e.endpoint,i,n,e.Xb,e.vb||!1)}).then(function(t){return r=t,e.Pa?e.Pa(n,r):r}).then(e.J).then(function(){if(!e.da)return r;if(!(e.da in r))throw new On("internal-error");return r[e.da]})}function zi(t){return $i({error:{errors:[{message:t}],code:400,message:t}})}function $i(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new On(r[n]):null)return n;n=t.error&&t.error.message||"",r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash"},F(r,e||{}),e=(e=n.match(/^[^\s]+\s*:\s*(.*)$/))&&1<e.length?e[1]:void 0;for(var i in r)if(0===n.indexOf(i))return new On(r[i],e);return!e&&t&&(e=hn(t)),new On("internal-error",e)}function Yi(t){this.b=t,this.a=null,this.gb=Xi(this)}function Xi(t){return to().then(function(){return new Q(function(e,n){rn("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:rn("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},Kl.get());r.ping(i).then(i,function(){n(Error("Network Error"))})})})})}function Ji(t,e){return t.gb.then(function(){return new Q(function(n){t.a.send(e.type,e,n,rn("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}function Zi(t,e){t.gb.then(function(){t.a.register("authEvent",e,rn("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}function to(){return Ql||(Ql=new Q(function(t,e){function n(){yn(),rn("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){yn(),e(Error("Network Error"))},timeout:Wl.get()})}if(rn("gapi.iframes.Iframe"))t();else if(rn("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();qu[r]=function(){rn("gapi.load")?n():e(Error("Network Error"))},r=ge(Bl,{onload:r}),z(gi(r)).s(function(){e(Error("Network Error"))})}}).s(function(t){throw Ql=null,t}))}function eo(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=ne(this.i,"/__/auth/iframe"),Zt(this.a,"apiKey",this.g),Zt(this.a,"appName",this.h),this.b=null,this.c=[]}function no(t,e,n,r,i){this.m=t,this.l=e,this.c=n,this.o=r,this.h=this.g=this.i=null,this.a=i,this.f=null}function ro(t){try{return r.a.app(t).auth().ya()}catch(t){return[]}}function io(t,e,n,r,i){this.l=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.m=this.u=this.v=null,this.g=[],this.o=this.a=null}function oo(t){var e=Ue();return Li(t).then(function(t){t:{var n=ee(e),r=n.c;n=n.b;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=ee(o).b==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:uh.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Ar(Ue())})}function ao(t){return t.o?t.o:(t.o=Ge().then(function(){if(!t.u){var e=t.c,n=t.h,r=ro(t.b),i=new eo(t.l,t.f,t.b);i.f=e,i.b=n,i.c=D(r||[]),t.u=i.toString()}t.i=new Yi(t.u),co(t)}),t.o)}function so(t){return t.m||(t.v=t.c?en(t.c,ro(t.b)):null,t.m=new Si(t.f,Bn(t.h),t.v)),t.m}function uo(t,e,n,r,i,o,a,s,u,c){return t=new no(t,e,n,r,i),t.i=o,t.g=a,t.h=s,t.b=M(u||null),t.f=c,t.toString()}function co(t){if(!t.i)throw Error("IfcHandler must be initialized!");Zi(t.i,function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Ir(e.authEvent),n=0;n<t.g.length;n++)r=t.g[n](e)||r;return n={},n.status=r?"ACK":"ERROR",z(n)}return n.status="ERROR",z(n)})}function ho(t){var e={type:"webStorageSupport"};return ao(t).then(function(){return Ji(t.i,e)}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})}function lo(t){if(this.a=t||r.a.INTERNAL.reactNative&&r.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new On("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function fo(t){this.b=t,this.a={},this.c=f(this.f,this)}function po(){var t=Ye()?self:null;if($u(Gl,function(n){n.b==t&&(e=n)}),!e){var e=new fo(t);Gl.push(e)}return e}function yo(t){this.a=t}function vo(t){this.c=t,this.b=!1,this.a=[]}function mo(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return $(Error("connection_unavailable"));var h=r?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new Q(function(n,r){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),a=setTimeout(function(){r(Error("unsupported_event"))},h),o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout(function(){r(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))},c={messageChannel:l,onMessage:o},t.a.push(c),l.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[l.port2])):r(Error("connection_unavailable"))}).then(function(e){return go(t,c),e}).s(function(e){throw go(t,c),e})}function go(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),A(t.a,function(t){return t==e})}}function bo(){if(!To())throw new On("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.l=qu.indexedDB,this.type="indexedDB",this.g=this.o=this.f=this.i=null,this.u=!1,this.h=null;var t=this;Ye()&&self?(this.o=po(),this.o.subscribe("keyChanged",function(e,n){return Ao(t).then(function(e){return 0<e.length&&$u(t.a,function(t){t(e)}),{keyProcessed:I(e,n.key)}})}),this.o.subscribe("ping",function(){return z(["keyChanged"])})):En().then(function(e){(t.h=e)&&(t.g=new vo(new yo(e)),mo(t.g,"ping",null,!0).then(function(e){e[0].fulfilled&&I(e[0].value,"keyChanged")&&(t.u=!0)}).s(function(){}))})}function _o(t){return new Q(function(e,n){var r=t.l.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}})}function wo(t){return new Q(function(e,n){var r=t.l.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){r=r.target.result,r.objectStoreNames.contains("firebaseLocalStorage")?e(r):_o(t).then(function(){return wo(t)}).then(function(t){e(t)}).s(function(t){n(t)})}})}function Eo(t){return t.m||(t.m=wo(t)),t.m}function To(){try{return!!qu.indexedDB}catch(t){return!1}}function So(t){return t.objectStore("firebaseLocalStorage")}function Co(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Io(t){return new Q(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function ko(t,e){return t.g&&t.h&&wn()===t.h?mo(t.g,"keyChanged",{key:e},t.u).then(function(){}).s(function(){}):z()}function Ao(t){return Eo(t).then(function(t){var e=So(Co(t,!1));return e.getAll?Io(e.getAll()):new Q(function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}})}).then(function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=qe(t.c,n),t.c=n}return r})}function No(t){function e(){t.f=setTimeout(function(){t.i=Ao(t).then(function(e){0<e.length&&$u(t.a,function(t){t(e)})}).then(function(){e()}).s(function(t){"STOP_EVENT"!=t.message&&e()})},800)}Do(t),e()}function Do(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Oo(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=z().then(function(){if(To()){var t=pn(),r="__sak"+t;return Hl||(Hl=new bo),n=Hl,n.set(r,t).then(function(){return n.get(r)}).then(function(e){if(e!==t)throw Error("indexedDB not supported!");return n.P(r)}).then(function(){return n}).s(function(){return e.c})}return e.c}).then(function(t){return e.type=t.type,t.Y(function(t){$u(e.a,function(e){e(t)})}),t})}function Ro(){this.a={},this.type="inMemory"}function xo(){if(!Lo()){if("Node"==Xe())throw new On("internal-error","The LocalStorage compatibility library was not found.");throw new On("web-storage-unsupported")}this.a=Po()||r.a.INTERNAL.node.localStorage,this.type="localStorage"}function Po(){try{var t=qu.localStorage,e=pn();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Lo(){var t="Node"==Xe();if(!(t=Po()||t&&r.a.INTERNAL.node&&r.a.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}function Mo(){this.type="nullStorage"}function Fo(){if(!jo()){if("Node"==Xe())throw new On("internal-error","The SessionStorage compatibility library was not found.");throw new On("web-storage-unsupported")}this.a=Uo()||r.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Uo(){try{var t=qu.sessionStorage,e=pn();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function jo(){var t="Node"==Xe();if(!(t=Uo()||t&&r.a.INTERNAL.node&&r.a.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}function qo(){var t={};t.Browser=Yl,t.Node=Xl,t.ReactNative=Jl,t.Worker=Zl,this.a=t[Xe()]}function Vo(t){var e=new On("invalid-persistence-type"),n=new On("unsupported-persistence-type");t:{for(r in tf)if(tf[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(Xe()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;default:if(!on()&&"none"!==t)throw n}}function Bo(){var t=!(dn(nn())||!$e()),e=cn(),n=on();this.m=t,this.h=e,this.o=n,this.a={},zl||(zl=new qo),t=zl;try{this.g=!Fe()&&_n()||!qu.indexedDB?new t.a.A:new Oo(Ye()?new Ro:new t.a.A)}catch(t){this.g=new Ro,this.h=!0}try{this.i=new t.a.Sa}catch(t){this.i=new Ro}this.l=new Ro,this.f=f(this.Pb,this),this.b={}}function Wo(){return $l||($l=new Bo),$l}function Ko(t,e){switch(e){case"session":return t.i;case"none":return t.l;default:return t.g}}function Qo(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Go(t,e,n){var r=Qo(e,n),i=Ko(t,e.A);return t.get(e,n).then(function(o){var a=null;try{a=fn(qu.localStorage.getItem(r))}catch(t){}if(a&&!o)return qu.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&qu.localStorage.removeItem(r)})}function Ho(t,e,n){return n=Qo(e,n),"local"==e.A&&(t.b[n]=null),Ko(t,e.A).P(n)}function zo(t){$o(t),t.c=setInterval(function(){for(var e in t.a){var n=qu.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new gt({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Pb(n))}},1e3)}function $o(t){t.c&&(clearInterval(t.c),t.c=null)}function Yo(t){this.a=t,this.b=Wo()}function Xo(t){return t.b.get(nf,t.a).then(function(t){return Ir(t)})}function Jo(){this.a=Wo()}function Zo(){this.b=-1}function ta(t,e){this.b=rf,this.f=qu.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.o=qu.Int32Array?new Int32Array(64):Array(64),void 0!==ef||(ef=qu.Int32Array?new Int32Array(cf):cf),this.reset()}function ea(t){for(var e=t.f,n=t.o,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=c&h^~c&l,o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0,a=a+(0|ef[e])|0,a=o+(a+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function na(e,n,r){void 0===r&&(r=n.length);var i=0,o=e.c;if(t(n))for(;i<r;)e.f[o++]=n.charCodeAt(i++),o==e.b&&(ea(e),o=0);else{if(!s(n))throw Error("message must be string or array");for(;i<r;){var a=n[i++];if(!("number"==typeof a&&0<=a&&255>=a&&a==(0|a)))throw Error("message must be a byte array");e.f[o++]=a,o==e.b&&(ea(e),o=0)}}e.c=o,e.g+=r}function ra(){ta.call(this,8,hf)}function ia(t,e,n,r,i){this.l=t,this.i=e,this.o=n,this.m=r||null,this.u=i||null,this.h=e+":"+n,this.v=new Jo,this.g=new Yo(this.h),this.f=null,this.b=[],this.a=this.c=null}function oa(t){return new On("invalid-cordova-configuration",t)}function aa(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}function sa(t){var e=new ra;na(e,t),t=[];var n=8*e.g;56>e.c?na(e,uf,56-e.c):na(e,uf,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(ea(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return Ln(t)}function ua(t,e,n,r){var i=aa(),o=new Cr(e,r,null,i,new On("no-auth-event")),a=rn("BuildInfo.packageName",qu);if("string"!=typeof a)throw new On("invalid-cordova-configuration");var s=rn("BuildInfo.displayName",qu),u={};if(nn().toLowerCase().match(/iphone|ipad|ipod/))u.ibi=a;else{if(!nn().toLowerCase().match(/android/))return $(new On("operation-not-supported-in-this-environment"));u.apn=a}s&&(u.appDisplayName=s),i=sa(i),u.sessionId=i;var c=uo(t.l,t.i,t.o,e,n,null,r,t.m,u,t.u);return t.ga().then(function(){var e=t.h;return t.v.a.set(nf,o.C(),e)}).then(function(){var e=rn("cordova.plugins.browsertab.isAvailable",qu);if("function"!=typeof e)throw new On("invalid-cordova-configuration");var n=null;e(function(e){if(e){if("function"!=typeof(n=rn("cordova.plugins.browsertab.openUrl",qu)))throw new On("invalid-cordova-configuration");n(c)}else{if("function"!=typeof(n=rn("cordova.InAppBrowser.open",qu)))throw new On("invalid-cordova-configuration");e=nn(),e=!(!e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)&&!e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)),t.a=n(c,e?"_blank":"_system","location=yes")}})})}function ca(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function ha(t){return t.f||(t.f=t.ga().then(function(){return new Q(function(e){function n(r){return e(r),t.Ka(n),!1}t.wa(n),fa(t)})})),t.f}function la(t){var e=null;return Xo(t.g).then(function(n){return e=n,n=t.g,Ho(n.b,nf,n.a)}).then(function(){return e})}function fa(t){function e(e){r=!0,i&&i.cancel(),la(t).then(function(r){var i=n;if(r&&e&&e.url){var o=null;i=Jn(e.url),-1!=i.indexOf("/__/auth/callback")&&(o=ee(i),o=fn(te(o,"firebaseError")||null),o=(o="object"==typeof o?Rn(o):null)?new Cr(r.b,r.c,null,null,o):new Cr(r.b,r.c,i,r.g)),i=o||n}ca(t,i)})}var n=new Cr("unknown",null,null,null,new On("no-auth-event")),r=!1,i=Vt(500).then(function(){return la(t).then(function(){r||ca(t,n)})}),o=qu.handleOpenURL;qu.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(rn("BuildInfo.packageName",qu).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},Kh||(Kh=new kr),Kh.subscribe(e)}function pa(t){this.a=t,this.b=Wo()}function da(t){return t.b.set(lf,"pending",t.a)}function ya(t){return Ho(t.b,lf,t.a)}function va(t){return t.b.get(lf,t.a).then(function(t){return"pending"==t})}function ma(t,e,n){this.u=t,this.o=e,this.l=n,this.h=[],this.f=!1,this.i=f(this.cb,this),this.b=new Sa,this.m=new Oa,this.g=new pa(this.o+":"+this.l),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.m,this.c.linkViaPopup=this.m,this.c.reauthViaPopup=this.m,this.a=ga(this.u,this.o,this.l,Fh)}function ga(t,e,n,i){var o=r.a.SDK_VERSION||null;return ze()?new ia(t,e,n,o,i):new io(t,e,n,o,i)}function ba(t){t.f||(t.f=!0,t.a.wa(t.i));var e=t.a;return t.a.ga().s(function(n){throw t.a==e&&t.reset(),n})}function _a(t){t.a.Mb()&&ba(t).s(function(e){var n=new Cr("unknown",null,null,null,new On("operation-not-supported-in-this-environment"));Ea(e)&&t.cb(n)}),t.a.Hb()||Ca(t.b)}function wa(t,e,n,r,i,o){return t.a.Db(e,n,r,function(){t.f||(t.f=!0,t.a.wa(t.i))},function(){t.reset()},i,o)}function Ea(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Ta(t,e,n){var r=e+":"+n;return df[r]||(df[r]=new ma(t,e,n)),df[r]}function Sa(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Ca(t){t.g||(t.g=!0,Na(t,!1,null,null))}function Ia(t,e,n){n=n.xa(e.b,e.c);var r=e.f,i=e.g,o=e.h,a=!!e.b.match(/Redirect$/);n(r,i,o).then(function(e){Na(t,a,e,null)}).s(function(e){Na(t,a,null,e)})}function ka(t,e){if(t.b=function(){return $(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}function Aa(t,e){if(t.b=function(){return z(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Na(t,e,n,r){e?r?ka(t,r):Aa(t,n):Aa(t,{user:null}),t.f=[],t.c=[]}function Da(t){var e=new On("timeout");t.a&&t.a.cancel(),t.a=Vt(pf.get()).then(function(){t.b||(t.g=!0,Na(t,!0,null,e))})}function Oa(){}function Ra(t,e){var n=t.c,r=t.b;e.xa(r,n)(t.f,t.g,t.h).then(function(t){e.ha(r,t,null,n)}).s(function(t){e.ha(r,null,t,n)})}function xa(){this.tb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.tb},set:function(t){this.tb=t},enumerable:!1})}function Pa(t,e){this.a=e,Sn(this,"verificationId",t)}function La(t,e,n,r){return new wr(t).Va(e,n).then(function(t){return new Pa(t,r)})}function Ma(t){var e=Vn(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new On("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Cn(this,{token:t,expirationTime:bn(1e3*e.exp),authTime:bn(1e3*e.auth_time),issuedAtTime:bn(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,claims:e})}function Fa(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Ua(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}function ja(t,e){t.stop(),t.b=Vt(Ua(t,e)).then(function(){return gn()}).then(function(){return t.h()}).then(function(){ja(t,!0)}).s(function(e){t.i(e)&&ja(t,!1)})}function qa(t){this.f=t,this.b=this.a=null,this.c=0}function Va(t,e){var n=e[sl],r=e.refreshToken;e=Wa(e.expiresIn),t.b=n,t.c=e,t.a=r}function Ba(t,e){t.b=e.b,t.a=e.a,t.c=e.c}function Wa(t){return Qu()+1e3*parseInt(t,10)}function Ka(t,e){return Ni(t.f,e).then(function(e){return t.b=e.access_token,t.c=Wa(e.expires_in),t.a=e.refresh_token,{accessToken:t.b,expirationTime:t.c,refreshToken:t.a}}).s(function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e})}function Qa(t,e){this.a=t||null,this.b=e||null,Cn(this,{lastSignInTime:bn(e||null),creationTime:bn(t||null)})}function Ga(t){return new Qa(t.a,t.b)}function Ha(t,e,n,r,i,o){Cn(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function za(t,e){mt.call(this,t);for(var n in e)this[n]=e[n]}function $a(t,e,n){this.G=[],this.l=t.apiKey,this.m=t.appName,this.u=t.authDomain||null,t=r.a.SDK_VERSION?en(r.a.SDK_VERSION):null,this.b=new Si(this.l,Bn(Fh),t),this.h=new qa(this.b),rs(this,e[sl]),Va(this.h,e),Sn(this,"refreshToken",this.h.a),ss(this,n||{}),Mt.call(this),this.I=!1,this.u&&an()&&(this.a=Ta(this.u,this.l,this.m)),this.N=[],this.i=null,this.w=ts(this),this.V=f(this.Ha,this);var i=this;this.ka=null,this.ta=function(t){i.pa(t.g)},this.X=null,this.O=[],this.sa=function(t){Xa(i,t.c)},this.W=null}function Ya(t,e){t.X&&At(t.X,"languageCodeChanged",t.ta),(t.X=e)&&St(e,"languageCodeChanged",t.ta)}function Xa(t,e){t.O=e,Ii(t.b,r.a.SDK_VERSION?en(r.a.SDK_VERSION,t.O):null)}function Ja(t,e){t.W&&At(t.W,"frameworkChanged",t.sa),(t.W=e)&&St(e,"frameworkChanged",t.sa)}function Za(t){try{return r.a.app(t.m).auth()}catch(e){throw new On("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function ts(t){return new Fa(function(){return t.F(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var e=t.h.c-Qu()-3e5;return 0<e?e:0})}function es(t){t.D||t.w.b||(t.w.start(),At(t,"tokenChanged",t.V),St(t,"tokenChanged",t.V))}function ns(t){At(t,"tokenChanged",t.V),t.w.stop()}function rs(t,e){t.ra=e,Sn(t,"_lat",e)}function is(t,e){A(t.N,function(t){return t==e})}function os(t){for(var e=[],n=0;n<t.N.length;n++)e.push(t.N[n](t));return J(e).then(function(){return t})}function as(t){t.a&&!t.I&&(t.I=!0,t.a.subscribe(t))}function ss(t,e){Cn(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,metadata:new Qa(e.createdAt,e.lastLoginAt),providerData:[]})}function us(){}function cs(t){return z().then(function(){if(t.D)throw new On("app-deleted")})}function hs(t){return Yu(t.providerData,function(t){return t.providerId})}function ls(t,e){e&&(fs(t,e.providerId),t.providerData.push(e))}function fs(t,e){A(t.providerData,function(t){return t.providerId==e})}function ps(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Sn(t,e,n)}function ds(t,e){t!=e&&(Cn(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,providerData:[]}),e.metadata?Sn(t,"metadata",Ga(e.metadata)):Sn(t,"metadata",new Qa),$u(e.providerData,function(e){ls(t,e)}),Ba(t.h,e.h),Sn(t,"refreshToken",t.h.a))}function ys(t){return t.F().then(function(e){var n=t.isAnonymous;return ms(t,e).then(function(){return n||ps(t,"isAnonymous",!1),e})})}function vs(t,e){e[sl]&&t.ra!=e[sl]&&(Va(t.h,e),t.dispatchEvent(new za("tokenChanged")),rs(t,e[sl]),ps(t,"refreshToken",t.h.a))}function ms(t,e){return Hi(t.b,Tl,{idToken:e}).then(f(t.zc,t))}function gs(t){return(t=t.providerUserInfo)&&t.length?Yu(t,function(t){return new Ha(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[]}function bs(t,e){return ys(t).then(function(){if(I(hs(t),e))return os(t).then(function(){throw new On("provider-already-linked")})})}function _s(t,e,n){var r=Tr(e);return e=Kn(e),In({user:t,credential:r,additionalUserInfo:e,operationType:n})}function ws(t,e){return vs(t,e),t.reload().then(function(){return t})}function Es(t,e,n,i,o){if(!an())return $(new On("operation-not-supported-in-this-environment"));if(t.i&&!o)return $(t.i);var a=Wn(n.providerId),s=pn(t.uid+":::"),u=null;(!cn()||$e())&&t.u&&n.isOAuthProvider&&(u=uo(t.u,t.l,t.m,e,n,null,s,r.a.SDK_VERSION||null));var c=Ke(u,a&&a.Ba,a&&a.Aa);return i=i().then(function(){if(Ss(t),!o)return t.F().then(function(){})}).then(function(){return wa(t.a,c,e,n,s,!!u)}).then(function(){return new Q(function(n,r){t.ha(e,null,new On("cancelled-popup-request"),t.g||null),t.f=n,t.v=r,t.g=s,t.c=t.a.Ea(t,e,c,s)})}).then(function(t){return c&&We(c),t?In(t):null}).s(function(t){throw c&&We(c),t}),Cs(t,i,o)}function Ts(t,e,n,r,i){if(!an())return $(new On("operation-not-supported-in-this-environment"));if(t.i&&!i)return $(t.i);var o=null,a=pn(t.uid+":::");return r=r().then(function(){if(Ss(t),!i)return t.F().then(function(){})}).then(function(){return t.aa=a,os(t)}).then(function(e){return t.ba&&(e=t.ba,e=e.b.set(yf,t.C(),e.a)),e}).then(function(){return t.a.Ca(e,n,a)}).s(function(e){if(o=e,t.ba)return Os(t.ba);throw o}).then(function(){if(o)throw o}),Cs(t,r,i)}function Ss(t){if(!t.a||!t.I){if(t.a&&!t.I)throw new On("internal-error");throw new On("auth-domain-config-required")}}function Cs(t,e,n){var r=Is(t,e,n);return t.G.push(r),r.ia(function(){k(t.G,r)}),r}function Is(t,e,n){return t.i&&!n?(e.cancel(),$(t.i)):e.s(function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new za("userInvalidated")),t.i=e),e})}function ks(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!(t.stsTokenManager&&t.stsTokenManager.accessToken&&t.stsTokenManager.expirationTime))return null;n[sl]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null,n.expiresIn=(t.stsTokenManager.expirationTime-Qu())/1e3;var r=new $a(e,n,t);return t.providerData&&$u(t.providerData,function(t){t&&ls(r,In(t))}),t.redirectEventId&&(r.aa=t.redirectEventId),r}function As(t,e,n,r){var i=new $a(t,e);return n&&(i.ba=n),r&&Xa(i,r),i.reload().then(function(){return i})}function Ns(t,e,n,r){e=e||{apiKey:t.l,authDomain:t.u,appName:t.m};var i=t.h,o={};return o[sl]=i.b,o.refreshToken=i.a,o.expiresIn=(i.c-Qu())/1e3,e=new $a(e,o),n&&(e.ba=n),r&&Xa(e,r),ds(e,t),e}function Ds(t){this.a=t,this.b=Wo()}function Os(t){return Ho(t.b,yf,t.a)}function Rs(t,e){return t.b.get(yf,t.a).then(function(t){return t&&e&&(t.authDomain=e),ks(t||{})})}function xs(t){this.a=t,this.b=Wo(),this.c=null,this.f=Ls(this),this.b.addListener(Ms("local"),this.a,f(this.g,this))}function Ps(t,e){var n,r=[];for(n in tf)tf[n]!==e&&r.push(Ho(t.b,Ms(tf[n]),t.a));return r.push(Ho(t.b,vf,t.a)),X(r)}function Ls(t){var e=Ms("local"),n=Ms("session"),r=Ms("none");return Go(t.b,e,t.a).then(function(){return t.b.get(n,t.a)}).then(function(i){return i?n:t.b.get(r,t.a).then(function(n){return n?r:t.b.get(e,t.a).then(function(n){return n?e:t.b.get(vf,t.a).then(function(t){return t?Ms(t):e})})})}).then(function(e){return t.c=e,Ps(t,e.A)}).s(function(){t.c||(t.c=e)})}function Ms(t){return{name:"authUser",A:t}}function Fs(t){return Vs(t,function(){return t.b.set(vf,t.c.A,t.a)})}function Us(t,e){return Vs(t,function(){return t.b.set(t.c,e.C(),t.a)})}function js(t){return Vs(t,function(){return Ho(t.b,t.c,t.a)})}function qs(t,e){return Vs(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),ks(t||{})})})}function Vs(t,e){return t.f=t.f.then(e,e),t.f}function Bs(t){if(this.l=!1,Sn(this,"settings",new xa),Sn(this,"app",t),!tu(this).options||!tu(this).options.apiKey)throw new On("invalid-api-key");t=r.a.SDK_VERSION?en(r.a.SDK_VERSION):null,this.b=new Si(tu(this).options&&tu(this).options.apiKey,Bn(Fh),t),this.N=[],this.m=[],this.I=[],this.Tb=r.a.INTERNAL.createSubscribe(f(this.oc,this)),this.O=void 0,this.Ub=r.a.INTERNAL.createSubscribe(f(this.pc,this)),$s(this,null),this.h=new xs(tu(this).options.apiKey+":"+tu(this).name),this.w=new Ds(tu(this).options.apiKey+":"+tu(this).name),this.V=ou(this,Xs(this)),this.i=ou(this,Js(this)),this.X=!1,this.ka=f(this.Oc,this),this.Ha=f(this.Z,this),this.ra=f(this.bc,this),this.sa=f(this.mc,this),this.ta=f(this.nc,this),Hs(this),this.INTERNAL={},this.INTERNAL.delete=f(this.delete,this),this.INTERNAL.logFramework=f(this.vc,this),this.u=0,Mt.call(this),Qs(this),this.G=[]}function Ws(t){mt.call(this,"languageCodeChanged"),this.g=t}function Ks(t){mt.call(this,"frameworkChanged"),this.c=t}function Qs(t){Object.defineProperty(t,"lc",{get:function(){return this.ea()},set:function(t){this.pa(t)},enumerable:!1}),t.W=null}function Gs(t){return t.Sb||$(new On("auth-domain-config-required"))}function Hs(t){var e=tu(t).options.authDomain,n=tu(t).options.apiKey;e&&an()&&(t.Sb=t.V.then(function(){if(!t.l){if(t.a=Ta(e,n,tu(t).name),t.a.subscribe(t),eu(t)&&as(eu(t)),t.D){as(t.D);var r=t.D;r.pa(t.ea()),Ya(r,t),r=t.D,Xa(r,t.G),Ja(r,t),t.D=null}return t.a}}))}function zs(t,e){var n={};return n.apiKey=tu(t).options.apiKey,n.authDomain=tu(t).options.authDomain,n.appName=tu(t).name,t.V.then(function(){return As(n,e,t.w,t.ya())}).then(function(e){return eu(t)&&e.uid==eu(t).uid?(ds(eu(t),e),t.Z(e)):($s(t,e),as(e),t.Z(e))}).then(function(){ru(t)})}function $s(t,e){eu(t)&&(is(eu(t),t.Ha),At(eu(t),"tokenChanged",t.ra),At(eu(t),"userDeleted",t.sa),At(eu(t),"userInvalidated",t.ta),ns(eu(t))),e&&(e.N.push(t.Ha),St(e,"tokenChanged",t.ra),St(e,"userDeleted",t.sa),St(e,"userInvalidated",t.ta),0<t.u&&es(e)),Sn(t,"currentUser",e),e&&(e.pa(t.ea()),Ya(e,t),Xa(e,t.G),Ja(e,t))}function Ys(t){var e=Rs(t.w,tu(t).options.authDomain).then(function(e){return(t.D=e)&&(e.ba=t.w),Os(t.w)});return ou(t,e)}function Xs(t){var e=tu(t).options.authDomain,n=Ys(t).then(function(){return qs(t.h,e)}).then(function(e){return e?(e.ba=t.w,t.D&&(t.D.aa||null)==(e.aa||null)?e:e.reload().then(function(){return Us(t.h,e).then(function(){return e})}).s(function(n){return"auth/network-request-failed"==n.code?e:js(t.h)})):null}).then(function(e){$s(t,e||null)});return ou(t,n)}function Js(t){return t.V.then(function(){return t.fa()}).s(function(){}).then(function(){if(!t.l)return t.ka()}).s(function(){}).then(function(){if(!t.l){t.X=!0;var e=t.h;e.b.addListener(Ms("local"),e.a,t.ka)}})}function Zs(t,e){var n=null,r=null;return ou(t,e.then(function(e){return n=Tr(e),r=Kn(e),zs(t,e)}).then(function(){return In({user:eu(t),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function tu(t){return t.app}function eu(t){return t.currentUser}function nu(t){return eu(t)&&eu(t)._lat||null}function ru(t){if(t.X){for(var e=0;e<t.m.length;e++)t.m[e]&&t.m[e](nu(t));if(t.O!==t.getUid()&&t.I.length)for(t.O=t.getUid(),e=0;e<t.I.length;e++)t.I[e]&&t.I[e](nu(t))}}function iu(t,e){t.I.push(e),ou(t,t.i.then(function(){!t.l&&I(t.I,e)&&t.O!==t.getUid()&&(t.O=t.getUid(),e(nu(t)))}))}function ou(t,e){return t.N.push(e),e.ia(function(){k(t.N,e)}),e}function au(){}function su(){this.a={},this.b=1e12}function uu(t,e){return(e=cu(e))?t.a[e]||null:null}function cu(t){return(t=void 0===t?1e12:t)?t.toString():null}function hu(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=Ae(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():St(this.f,"click",this.i)}function lu(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function fu(){}function pu(){this.b=qu.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}function du(t,e,n,r,i,o,a){if(Sn(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.l=e,this.g=null,a?(gf||(gf=new fu),a=gf):(wf||(wf=new pu),a=wf),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Sf])throw new On("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Cf],!qu.document)throw new On("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Ae(e)||!this.i&&Ae(e).hasChildNodes())throw new On("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.u=new Si(t,o||null,i||null),this.v=r||function(){return null};var s=this;this.o=[];var u=this.a[Ef];this.a[Ef]=function(t){if(yu(s,t),"function"==typeof u)u(t);else if("string"==typeof u){var e=rn(u,qu);"function"==typeof e&&e(t)}};var c=this.a[Tf];this.a[Tf]=function(){if(yu(s,null),"function"==typeof c)c();else if("string"==typeof c){var t=rn(c,qu);"function"==typeof t&&t()}}}function yu(t,e){for(var n=0;n<t.o.length;n++)try{t.o[n](e)}catch(t){}}function vu(t,e){A(t.o,function(t){return t==e})}function mu(t,e){return t.h.push(e),e.ia(function(){k(t.h,e)}),e}function gu(t){if(t.D)throw new On("internal-error","RecaptchaVerifier instance has been destroyed.")}function bu(t,e,n){var i=!1;try{this.b=n||r.a.app()}catch(t){throw new On("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new On("invalid-api-key");n=this.b.options.apiKey;var o=this,a=null;try{a=this.b.auth().ya()}catch(t){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}a=r.a.SDK_VERSION?en(r.a.SDK_VERSION,a):null,du.call(this,n,t,e,function(){try{var t=o.b.auth().ea()}catch(e){t=null}return t},a,Bn(Fh),i)}function _u(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new On("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=If.length)throw new On("internal-error","Argument validator received an unsupported number of arguments.");n=If[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new On("argument-error",t+" failed: "+r)}function wu(e,n){return{name:e||"",K:"a valid string",optional:!!n,M:t}}function Eu(t,n){return{name:t||"",K:"a boolean",optional:!!n,M:e}}function Tu(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:c}}function Su(t,e){return{name:t||"",K:"a function",optional:!!e,M:u}}function Cu(t,e){return{name:t||"",K:"null",optional:!!e,M:o}}function Iu(){return{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}}}function ku(){return{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof Bs)}}}function Au(){return{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof r.a.app.App)}}}function Nu(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.la||!n)}}}function Du(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}}function Ou(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!!(e&&t(e.type)&&u(e.verify))}}}function Ru(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function xu(t,e){for(var n in e){var r=e[n].name;t[r]=Mu(r,t[n],e[n].j)}}function Pu(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:p(function(t){return this[t]},n),set:p(function(t,e,n,r){_u(t,[n],[r],!0),this[e]=r},r,n,e[n].ub),enumerable:!0})}}function Lu(t,e,n,r){t[e]=Mu(e,n,r)}function Mu(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return _u(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=Fu(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}function Fu(t){return t=t.split("."),t[t.length-1]}var Uu,ju=ju||{},qu=this,Vu=/^[\w+\/_-]+[=]{0,2}$/,Bu=null,Wu="closure_uid_"+(1e9*Math.random()>>>0),Ku=0,Qu=Date.now||function(){return+new Date};d(v,Error),v.prototype.name="CustomError",d(m,v),m.prototype.name="AssertionError",b.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var Gu=new b(function(){return new T},function(t){t.reset()});w.prototype.add=function(t,e){var n=Gu.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},T.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},T.prototype.reset=function(){this.next=this.b=this.a=null};var Hu,zu=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(e,n){if(t(e))return t(n)&&1==n.length?e.indexOf(n,0):-1;for(var r=0;r<e.length;r++)if(r in e&&e[r]===n)return r;return-1},$u=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(e,n,r){for(var i=e.length,o=t(e)?e.split(""):e,a=0;a<i;a++)a in o&&n.call(r,o[a],a,e)},Yu=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(e,n){for(var r=e.length,i=Array(r),o=t(e)?e.split(""):e,a=0;a<r;a++)a in o&&(i[a]=n.call(void 0,o[a],a,e));return i},Xu=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(e,n){for(var r=e.length,i=t(e)?e.split(""):e,o=0;o<r;o++)if(o in i&&n.call(void 0,i[o],o,e))return!0;return!1},Ju=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},Zu=/&/g,tc=/</g,ec=/>/g,nc=/"/g,rc=/'/g,ic=/\x00/g,oc=/[\x00&<>"']/;t:{var ac=qu.navigator;if(ac){var sc=ac.userAgent;if(sc){Hu=sc;break t}}Hu=""}var uc,cc,hc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),lc=!1,fc=new w,pc=0,dc=2,yc=3;G.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var vc=new b(function(){return new G},function(t){t.reset()});Q.prototype.then=function(t,e,n){return et(this,u(t)?t:null,u(e)?e:null,n)},Q.prototype.$goog_Thenable=!0,Uu=Q.prototype,Uu.ia=function(t,e){return t=H(t,t,e),t.c=!0,tt(this,t),this},Uu.s=function(t,e){return et(this,null,t,e)},Uu.cancel=function(t){this.a==pc&&B(function(){Z(this,new ht(t))},this)},Uu.Pc=function(t){this.a=pc,nt(this,dc,t)},Uu.Qc=function(t){this.a=pc,nt(this,yc,t)},Uu.Yb=function(){for(var t;t=at(this);)st(this,t,this.a,this.i);this.h=!1};var mc=q;d(ht,v),ht.prototype.name="cancel";var gc=0,bc={};lt.prototype.qa=!1,lt.prototype.va=function(){if(this.ja)for(;this.ja.length;)this.ja.shift()()},pt[" "]=n;var _c,wc=x("Opera"),Ec=x("Trident")||x("MSIE"),Tc=x("Edge"),Sc=Tc||Ec,Cc=x("Gecko")&&!(O(Hu.toLowerCase(),"webkit")&&!x("Edge"))&&!(x("Trident")||x("MSIE"))&&!x("Edge"),Ic=O(Hu.toLowerCase(),"webkit")&&!x("Edge");t:{var kc="",Ac=function(){var t=Hu;return Cc?/rv:([^\);]+)(\)|;)/.exec(t):Tc?/Edge\/([\d\.]+)/.exec(t):Ec?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Ic?/WebKit\/(\S+)/.exec(t):wc?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(Ac&&(kc=Ac?Ac[1]:""),Ec){var Nc=yt();if(null!=Nc&&Nc>parseFloat(kc)){_c=String(Nc);break t}}_c=kc}var Dc,Oc={},Rc=qu.document;Dc=Rc&&Ec?yt()||("CSS1Compat"==Rc.compatMode?parseInt(_c,10):5):void 0;var xc=Object.freeze||function(t){return t},Pc=!Ec||9<=Number(Dc),Lc=Ec&&!vt("9"),Mc=function(){if(!qu.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{qu.addEventListener("test",n,e),qu.removeEventListener("test",n,e)}catch(t){}return t}();mt.prototype.preventDefault=function(){this.Kb=!1},d(gt,mt);var Fc=xc({2:"touch",3:"pen",4:"mouse"});gt.prototype.preventDefault=function(){gt.pb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Lc)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},gt.prototype.f=function(){return this.a};var Uc="closure_listenable_"+(1e6*Math.random()|0),jc=0;wt.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=Tt(t,e,r,i);return-1<a?(e=t[a],n||(e.Ia=!1)):(e=new bt(e,this.src,o,!!r,i),e.Ia=n,t.push(e)),e};var qc="closure_lm_"+(1e6*Math.random()|0),Vc={},Bc=0,Wc="__closure_events_fn_"+(1e9*Math.random()>>>0);d(Mt,lt),Mt.prototype[Uc]=!0,Mt.prototype.addEventListener=function(t,e,n,r){St(this,t,e,n,r)},Mt.prototype.removeEventListener=function(t,e,n,r){At(this,t,e,n,r)},Mt.prototype.dispatchEvent=function(e){var n,r=this.Wa;if(r)for(n=[];r;r=r.Wa)n.push(r);r=this.Rb;var i=e.type||e;if(t(e))e=new mt(e,r);else if(e instanceof mt)e.target=e.target||r;else{var o=e;e=new mt(i,r),F(e,o)}if(o=!0,n)for(var a=n.length-1;0<=a;a--){var s=e.b=n[a];o=jt(s,i,!0,e)&&o}if(s=e.b=r,o=jt(s,i,!0,e)&&o,o=jt(s,i,!1,e)&&o,n)for(a=0;a<n.length;a++)s=e.b=n[a],o=jt(s,i,!1,e)&&o;return o},Mt.prototype.va=function(){if(Mt.pb.va.call(this),this.o){var t,e=this.o,n=0;for(t in e.a){for(var r=e.a[t],i=0;i<r.length;i++)++n,_t(r[i]);delete e.a[t],e.b--}}this.Wa=null},Uu=Qt.prototype,Uu.S=function(){Gt(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Uu.U=function(){return Gt(this),this.a.concat()},Uu.clear=function(){this.b={},this.c=this.a.length=0},Uu.get=function(t,e){return Ht(this.b,t)?this.b[t]:e},Uu.set=function(t,e){Ht(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Uu.forEach=function(t,e){for(var n=this.U(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Kc=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;$t.prototype.toString=function(){var t=[],e=this.c;e&&t.push(ie(e,Qc,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.o)&&t.push(ie(e,Qc,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&t.push(":",String(n))),(n=this.g)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(ie(n,"/"==n.charAt(0)?Hc:Gc,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.h)&&t.push("#",ie(n,$c)),t.join("")};var Qc=/[#\/\?@]/g,Gc=/[#\?:]/g,Hc=/[#\?]/g,zc=/[#\?@]/g,$c=/#/g;Uu=ae.prototype,Uu.add=function(t,e){se(this),this.c=null,t=fe(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Uu.clear=function(){this.a=this.c=null,this.b=0},Uu.forEach=function(t,e){se(this),this.a.forEach(function(n,r){$u(n,function(n){t.call(e,n,r,this)},this)},this)},Uu.U=function(){se(this);for(var t=this.a.S(),e=this.a.U(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Uu.S=function(e){se(this);var n=[];if(t(e))he(this,e)&&(n=N(n,this.a.get(fe(this,e))));else{e=this.a.S();for(var r=0;r<e.length;r++)n=N(n,e[r])}return n},Uu.set=function(t,e){return se(this),this.c=null,t=fe(this,t),he(this,t)&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Uu.get=function(t,e){return t?(t=this.S(t),0<t.length?String(t[0]):e):e},Uu.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.U(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.S(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var Yc=!Ec||9<=Number(Dc);de.prototype.na=!0,de.prototype.ma=function(){return this.a},de.prototype.toString=function(){return"Const{"+this.a+"}"};var Xc={},Jc={};ve.prototype.na=!0,ve.prototype.ma=function(){return this.a},ve.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Zc=/%{(\w+)}/g,th=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^\/\\]|[^:\/\\%]+\/|[^:\/\\%]*[?#]|about:blank#)/i,eh={};_e.prototype.na=!0,_e.prototype.ma=function(){return this.a},_e.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var nh=/^(?:(?:https?|mailto|ftp):|[^:\/?#]*(?:[\/?#]|$))/i,rh={};Te("about:blank"),Se.prototype.na=!0,Se.prototype.ma=function(){return this.a},Se.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var ih={};Ie("<!DOCTYPE html>"),Ie(""),Ie("<br>");var oh={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},ah={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},sh=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g,uh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ch=/^[^@]+@[^@]+$/,hh="Firefox",lh="Chrome",fh={Wc:"FirebaseCore-web",Yc:"FirebaseUI-web"};vn.prototype.get=function(){var t=qu.navigator;return(t&&"boolean"==typeof t.onLine&&(sn()||"chrome-extension:"===un()||void 0!==t.connection)?t.onLine:1)?this.b?this.c:this.a:Math.min(5e3,this.a)};var ph,dh={};try{var yh={};Object.defineProperty(yh,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(yh,"abcd",{configurable:!0,enumerable:!0,value:2}),ph=2==yh.abcd}catch(t){ph=!1}var vh="EMAIL_SIGNIN",mh="email",gh="newEmail",bh="requestType",_h="email",wh="fromEmail",Eh="data",Th="operation";d(On,Error),On.prototype.C=function(){return{code:this.code,message:this.message}},On.prototype.toJSON=function(){return this.C()};var Sh="auth/",Ch={"argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The OIDC ID token requires a valid unhashed nonce.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},Ih="android",kh="dynamicLinkDomain",Ah="handleCodeInApp",Nh="iOS",Dh="url",Oh="installApp",Rh="minimumVersion",xh="packageName",Ph="bundleId",Lh=null,Mh=null;jn.prototype.f=function(){return this.b};var Fh,Uh={bd:{bb:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",jb:"https://securetoken.googleapis.com/v1/token",id:"p"},dd:{bb:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",jb:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},ed:{bb:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",jb:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};Fh=Bn("__EID__")?"__EID__":void 0;var jh="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),qh=["client_id","response_type","scope","redirect_uri","state"],Vh={Xc:{Na:"locale",Ba:500,Aa:600,Oa:"facebook.com",ib:qh},Zc:{Na:null,Ba:500,Aa:620,Oa:"github.com",ib:qh},$c:{Na:"hl",Ba:515,Aa:680,Oa:"google.com",ib:qh},fd:{Na:"lang",Ba:485,Aa:705,Oa:"twitter.com",ib:jh}},Bh="idToken",Wh="providerId";d(Gn,Qn),d(Hn,Gn),d(zn,Gn),d($n,Gn),d(Yn,Gn),tr.prototype.la=function(t){return Wi(t,er(this))},tr.prototype.b=function(t,e){var n=er(this);return n.idToken=e,Ki(t,n)},tr.prototype.f=function(t,e){return Zn(Qi(t,er(this)),e)},tr.prototype.C=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},nr.prototype.la=function(t){return Wi(t,rr(this))},nr.prototype.b=function(t,e){var n=rr(this);return n.idToken=e,Ki(t,n)},nr.prototype.f=function(t,e){return Zn(Qi(t,rr(this)),e)},nr.prototype.C=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},ir.prototype.Da=function(t){return this.zb=M(t),this},d(or,ir),d(ar,ir),ar.prototype.ua=function(t){return I(this.a,t)||this.a.push(t),this},ar.prototype.Fb=function(){return D(this.a)},ar.prototype.credential=function(t,e,n){if(!t&&!e)throw new On("argument-error","credential failed: must provide the ID token and/or the access token.");return new nr(this.providerId,{idToken:t||null,accessToken:e||null,nonce:n||null},this.providerId)},d(sr,ar),Sn(sr,"PROVIDER_ID","facebook.com"),Sn(sr,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),d(cr,ar),Sn(cr,"PROVIDER_ID","github.com"),Sn(cr,"GITHUB_SIGN_IN_METHOD","github.com"),d(lr,ar),Sn(lr,"PROVIDER_ID","google.com"),Sn(lr,"GOOGLE_SIGN_IN_METHOD","google.com"),d(pr,ir),Sn(pr,"PROVIDER_ID","twitter.com"),Sn(pr,"TWITTER_SIGN_IN_METHOD","twitter.com"),yr.prototype.la=function(t){return this.signInMethod==vr.EMAIL_LINK_SIGN_IN_METHOD?Hi(t,wl,{email:this.a,oobCode:this.c}):Hi(t,Ul,{email:this.a,password:this.c})},yr.prototype.b=function(t,e){return this.signInMethod==vr.EMAIL_LINK_SIGN_IN_METHOD?Hi(t,El,{idToken:e,email:this.a,oobCode:this.c}):Hi(t,Rl,{idToken:e,email:this.a,password:this.c})},yr.prototype.f=function(t,e){return Zn(this.la(t),e)},yr.prototype.C=function(){return{email:this.a,password:this.c,signInMethod:this.signInMethod}},Cn(vr,{PROVIDER_ID:"password"}),Cn(vr,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Cn(vr,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),br.prototype.la=function(t){return t.Va(_r(this))},br.prototype.b=function(t,e){var n=_r(this);return n.idToken=e,Hi(t,ql,n)},br.prototype.f=function(t,e){var n=_r(this);return n.operation="REAUTH",t=Hi(t,Vl,n),Zn(t,e)},br.prototype.C=function(){var t={providerId:"phone"};return this.a.Ua&&(t.verificationId=this.a.Ua),this.a.Ta&&(t.verificationCode=this.a.Ta),this.a.Fa&&(t.temporaryProof=this.a.Fa),this.a.$&&(t.phoneNumber=this.a.$),t},wr.prototype.Va=function(e,n){var r=this.a.b;return z(n.verify()).then(function(i){if(!t(i))throw new On("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(n.type){case"recaptcha":return Ui(r,{phoneNumber:e,recaptchaToken:i}).then(function(t){return"function"==typeof n.reset&&n.reset(),t},function(t){throw"function"==typeof n.reset&&n.reset(),t});default:throw new On("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Cn(wr,{PROVIDER_ID:"phone"}),Cn(wr,{PHONE_SIGN_IN_METHOD:"phone"}),Cr.prototype.C=function(){return{type:this.b,eventId:this.c,urlResponse:this.f,sessionId:this.g,postBody:this.h,error:this.a&&this.a.C()}};var Kh=null;kr.prototype.subscribe=function(t){var e=this;this.a.push(t),this.b||(this.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=rn("universalLinks.subscribe",qu))&&t(null,this.b))},kr.prototype.unsubscribe=function(t){A(this.a,function(e){return e==t})},d(Ar,On),d(Nr,On),Nr.prototype.C=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber);var e=this.credential&&this.credential.C();return e&&F(t,e),t},Nr.prototype.toJSON=function(){return this.C()},Or.prototype.c=null;var Qh;d(xr,Or),xr.prototype.a=function(){var t=Pr(this);return t?new ActiveXObject(t):new XMLHttpRequest},xr.prototype.b=function(){var t={};return Pr(this)&&(t[0]=!0,t[1]=!0),t},Qh=new xr,d(Lr,Or),Lr.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Mr;throw Error("Unsupported browser")},Lr.prototype.b=function(){return{}},Uu=Mr.prototype,Uu.open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},Uu.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},Uu.abort=function(){this.a.abort()},Uu.setRequestHeader=function(){},Uu.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},Uu.fc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Fr(this,4)},Uu.Gb=function(){this.status=500,this.response=this.responseText="",Fr(this,4)},Uu.kc=function(){this.Gb()},Uu.gc=function(){this.status=200,Fr(this,1)},Uu.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Ur.prototype.a=null;var Gh=0;Ur.prototype.reset=function(t,e,n,r,i){"number"==typeof i||Gh++,r||Qu(),delete this.a},qr.prototype.toString=function(){return this.name};var Hh=new qr("SEVERE",1e3),zh=new qr("WARNING",900),$h=new qr("CONFIG",700),Yh=new qr("FINE",500);jr.prototype.log=function(t,e,n){if(t.value>=Vr(this).value)for(u(e)&&(e=e()),t=new Ur(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Xh={},Jh=null;d(Kr,Or),Kr.prototype.a=function(){return new Qr(this.f)},Kr.prototype.b=function(t){return function(){return t}}({}),d(Qr,Mt);var Zh=0;Uu=Qr.prototype,Uu.open=function(t,e){if(this.readyState!=Zh)throw this.abort(),Error("Error reopening a connection");this.m=t,this.g=e,this.readyState=1,zr(this)},Uu.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.m,credentials:void 0,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.g,e)).then(this.jc.bind(this),this.La.bind(this))},Uu.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Hr(this,!1)),this.readyState=Zh},Uu.jc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,zr(this)),this.a&&(this.readyState=3,zr(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.hc.bind(this),this.La.bind(this)):void 0!==qu.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,Gr(this)):t.text().then(this.ic.bind(this),this.La.bind(this)))))},Uu.ec=function(t){if(this.a){var e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?Hr(this,!0):zr(this),3==this.readyState&&Gr(this)}},Uu.ic=function(t){this.a&&(this.response=this.responseText=t,Hr(this,!0))},Uu.hc=function(t){this.a&&(this.response=t,Hr(this,!0))},Uu.La=function(t){var e=this.h;e&&e.log(zh,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&Hr(this,!0)},Uu.setRequestHeader=function(t,e){this.i.append(t,e)},Uu.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(zh,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},Uu.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(zh,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},d($r,Mt);var tl="";$r.prototype.b=Br("goog.net.XhrIo");var el=/^https?$/i,nl=["POST","PUT"];Uu=$r.prototype,Uu.Ga=function(){void 0!==ju&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Wr(this.b,si(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},Uu.abort=function(){this.a&&this.c&&(Wr(this.b,si(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ni(this))},Uu.va=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),ni(this,!0)),$r.pb.va.call(this)},Uu.Jb=function(){this.qa||(this.I||this.i||this.f?ei(this):this.yc())},Uu.yc=function(){ei(this)},Uu.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case tl:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Hh,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return Wr(this.b,"Can not get response: "+t.message),null}},ui.prototype.cancel=function(t){if(this.a)this.c instanceof ui&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):0>=--e.o&&e.cancel()}this.v?this.v.call(this.u,this):this.l=!0,this.a||(t=new vi(this),hi(this),ci(this,!1,t))}},ui.prototype.m=function(t,e){this.i=!1,ci(this,t,e)},ui.prototype.then=function(t,e,n){var r,i,o=new Q(function(t,e){r=t,i=e});return fi(this,r,function(t){t instanceof vi?o.cancel():i(t)}),o.then(t,e,n)},ui.prototype.$goog_Thenable=!0,d(yi,v),yi.prototype.message="Deferred has already fired",yi.prototype.name="AlreadyCalledError",d(vi,v),vi.prototype.message="Deferred was canceled",vi.prototype.name="CanceledError",mi.prototype.c=function(){throw delete rl[this.a],this.b};var rl={},il=0,ol=1;d(Ei,v),d(Ti,Or),Ti.prototype.a=function(){return new this.f},Ti.prototype.b=function(){return{}};var al,sl="idToken",ul=new vn(3e4,6e4),cl={"Content-Type":"application/x-www-form-urlencoded"},hl=new vn(3e4,6e4),ll={"Content-Type":"application/json"};Si.prototype.m=function(t,e,n,r,i,o){if(Ye()&&(void 0===qu.fetch||void 0===qu.Headers||void 0===qu.Request))throw new On("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new $r(this.c);if(o){a.g=Math.max(0,o);var s=setTimeout(function(){a.dispatchEvent("timeout")},o)}Ft(a,"complete",function(){s&&clearTimeout(s);var t=null;try{t=JSON.parse(ai(this))||null}catch(e){t=null}e&&e(t)}),Ut(a,"ready",function(){s&&clearTimeout(s),ft(this)}),Ut(a,"timeout",function(){s&&clearTimeout(s),ft(this),e&&e(null)}),Yr(a,t,n,r,i)};var fl=new de(Jc,"https://apis.google.com/js/client.js?onload=%{onload}"),pl="__fcb"+Math.floor(1e6*Math.random()).toString();Si.prototype.l=function(t,e,n,r,i){var o=this;al.then(function(){window.gapi.client.setApiKey(o.b);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})}).s(function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},Si.prototype.Ra=function(){return Hi(this,xl,{})},Si.prototype.qb=function(t,e){return Hi(this,Ol,{idToken:t,email:e})},Si.prototype.rb=function(t,e){return Hi(this,Rl,{idToken:t,password:e})};var dl={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};Uu=Si.prototype,Uu.sb=function(t,e){var n={idToken:t},r=[];return P(dl,function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),Hi(this,Ol,n)},Uu.lb=function(t,e){return t={requestType:"PASSWORD_RESET",email:t},F(t,e),Hi(this,Il,t)},Uu.mb=function(t,e){return t={requestType:"EMAIL_SIGNIN",email:t},F(t,e),Hi(this,Sl,t)},Uu.kb=function(t,e){return t={requestType:"VERIFY_EMAIL",idToken:t},F(t,e),Hi(this,Cl,t)},Uu.Va=function(t){return Hi(this,jl,t)},Uu.$a=function(t,e){return Hi(this,Nl,{oobCode:t,newPassword:e})},Uu.Ja=function(t){return Hi(this,vl,{oobCode:t})},Uu.Xa=function(t){return Hi(this,yl,{oobCode:t})};var yl={endpoint:"setAccountInfo",B:Gi,da:"email"},vl={endpoint:"resetPassword",B:Gi,J:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e)throw new On("internal-error")}},ml={endpoint:"signupNewUser",B:function(t){if(Oi(t),!t.password)throw new On("weak-password")},J:Mi,R:!0},gl={endpoint:"createAuthUri"},bl={endpoint:"deleteAccount",T:["idToken"]},_l={endpoint:"setAccountInfo",T:["idToken","deleteProvider"],B:function(t){if(!a(t.deleteProvider))throw new On("internal-error")}},wl={endpoint:"emailLinkSignin",T:["email","oobCode"],B:Oi,J:Mi,R:!0},El={endpoint:"emailLinkSignin",T:["idToken","email","oobCode"],B:Oi,J:Mi,R:!0},Tl={endpoint:"getAccountInfo"},Sl={endpoint:"getOobConfirmationCode",T:["requestType"],B:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new On("internal-error");Oi(t)},da:"email"},Cl={endpoint:"getOobConfirmationCode",T:["idToken","requestType"],B:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new On("internal-error")},da:"email"},Il={endpoint:"getOobConfirmationCode",T:["requestType"],B:function(t){if("PASSWORD_RESET"!=t.requestType)throw new On("internal-error");Oi(t)},da:"email"},kl={vb:!0,endpoint:"getProjectConfig",Ib:"GET"},Al={vb:!0,endpoint:"getRecaptchaParam",Ib:"GET",J:function(t){if(!t.recaptchaSiteKey)throw new On("internal-error")}},Nl={endpoint:"resetPassword",B:Gi,da:"email"},Dl={endpoint:"sendVerificationCode",T:["phoneNumber","recaptchaToken"],da:"sessionInfo"},Ol={endpoint:"setAccountInfo",T:["idToken"],B:Ri,R:!0},Rl={endpoint:"setAccountInfo",T:["idToken"],B:function(t){if(Ri(t),!t.password)throw new On("weak-password")},J:Mi,R:!0},xl={endpoint:"signupNewUser",J:Mi,R:!0},Pl={endpoint:"verifyAssertion",B:qi,Pa:Vi,J:Bi,R:!0},Ll={endpoint:"verifyAssertion",B:qi,Pa:Vi,J:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new On("user-not-found");if(t.errorMessage)throw zi(t.errorMessage);if(!t[sl])throw new On("internal-error")},R:!0},Ml={endpoint:"verifyAssertion",B:function(t){if(qi(t),!t.idToken)throw new On("internal-error")},Pa:Vi,J:Bi,R:!0},Fl={endpoint:"verifyCustomToken",B:function(t){if(!t.token)throw new On("invalid-custom-token")},J:Mi,R:!0},Ul={endpoint:"verifyPassword",B:function(t){if(Oi(t),!t.password)throw new On("wrong-password")},J:Mi,R:!0},jl={endpoint:"verifyPhoneNumber",B:Fi,J:Mi},ql={endpoint:"verifyPhoneNumber",B:function(t){if(!t.idToken)throw new On("internal-error");Fi(t)},J:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Dr(t);Mi(t)}},Vl={Xb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",B:Fi,J:Mi},Bl=new de(Jc,"https://apis.google.com/js/api.js?onload=%{onload}"),Wl=new vn(3e4,6e4),Kl=new vn(5e3,15e3),Ql=null;eo.prototype.toString=function(){return this.f?Zt(this.a,"v",this.f):ce(this.a.a,"v"),this.b?Zt(this.a,"eid",this.b):ce(this.a.a,"eid"),this.c.length?Zt(this.a,"fw",this.c.join(",")):ce(this.a.a,"fw"),this.a.toString()},no.prototype.toString=function(){var t=ne(this.m,"/__/auth/handler");if(Zt(t,"apiKey",this.l),Zt(t,"appName",this.c),Zt(t,"authType",this.o),this.a.isOAuthProvider){var e=this.a;try{var n=r.a.app(this.c).auth().ea()}catch(t){n=null}e.ab=n,Zt(t,"providerId",this.a.providerId),e=this.a,n=ln(e.zb);for(var i in n)n[i]=n[i].toString();i=e.Fc,n=M(n);for(var o=0;o<i.length;o++){var a=i[o];a in n&&delete n[a]}e.eb&&e.ab&&!n[e.eb]&&(n[e.eb]=e.ab),L(n)||Zt(t,"customParameters",hn(n))}if("function"==typeof this.a.Fb&&(e=this.a.Fb(),e.length&&Zt(t,"scopes",e.join(","))),this.i?Zt(t,"redirectUrl",this.i):ce(t.a,"redirectUrl"),this.g?Zt(t,"eventId",this.g):ce(t.a,"eventId"),this.h?Zt(t,"v",this.h):ce(t.a,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!te(t,s)&&Zt(t,s,this.b[s]);return this.f?Zt(t,"eid",this.f):ce(t.a,"eid"),s=ro(this.c),s.length&&Zt(t,"fw",s.join(",")),t.toString()},Uu=io.prototype,Uu.Ea=function(t,e,n){var r=new On("popup-closed-by-user"),i=new On("web-storage-unsupported"),o=this,a=!1;return this.ga().then(function(){ho(o).then(function(n){n||(t&&We(t),e(i),a=!0)})}).s(function(){}).then(function(){if(!a)return Qe(t)}).then(function(){if(!a)return Vt(n).then(function(){e(r)})})},Uu.Mb=function(){var t=nn();return!cn(t)&&!dn(t)},Uu.Hb=function(){return!1},Uu.Db=function(t,e,n,r,i,o,a){if(!t)return $(new On("popup-blocked"));if(a&&!cn())return this.ga().s(function(e){We(t),i(e)}),r(),z();this.a||(this.a=oo(so(this)));var s=this;return this.a.then(function(){var e=s.ga().s(function(e){throw We(t),i(e),e});return r(),e}).then(function(){if(Sr(n),!a){je(uo(s.l,s.f,s.b,e,n,null,o,s.c,void 0,s.h),t)}}).s(function(t){throw"auth/network-request-failed"==t.code&&(s.a=null),t})},Uu.Ca=function(t,e,n){this.a||(this.a=oo(so(this)));var r=this;return this.a.then(function(){Sr(e),je(uo(r.l,r.f,r.b,t,e,Ue(),n,r.c,void 0,r.h))}).s(function(t){throw"auth/network-request-failed"==t.code&&(r.a=null),t})},Uu.ga=function(){var t=this;return ao(this).then(function(){return t.i.gb}).s(function(){throw t.a=null,new On("network-request-failed")})},Uu.Qb=function(){return!0},Uu.wa=function(t){this.g.push(t)},Uu.Ka=function(t){A(this.g,function(e){return e==t})},Uu=lo.prototype,Uu.get=function(t){return z(this.a.getItem(t)).then(function(t){return t&&fn(t)})},Uu.set=function(t,e){return z(this.a.setItem(t,hn(e)))},Uu.P=function(t){return z(this.a.removeItem(t))},Uu.Y=function(){},Uu.ca=function(){};var Gl=[];fo.prototype.f=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];$u(r,function(e){i.push(z().then(function(){return e(t.origin,t.data.data)}))}),J(i).then(function(r){var i=[];$u(r,function(t){i.push({fulfilled:t.Eb,value:t.value,reason:t.reason?t.reason.message:void 0})}),$u(i,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})})}},fo.prototype.subscribe=function(t,e){L(this.a)&&this.b.addEventListener("message",this.c),void 0===this.a[t]&&(this.a[t]=[]),this.a[t].push(e)},fo.prototype.unsubscribe=function(t,e){void 0!==this.a[t]&&e?(A(this.a[t],function(t){return t==e}),0==this.a[t].length&&delete this.a[t]):e||delete this.a[t],L(this.a)&&this.b.removeEventListener("message",this.c)},yo.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},vo.prototype.close=function(){for(;0<this.a.length;)go(this,this.a[0]);this.b=!0};var Hl;Uu=bo.prototype,Uu.set=function(t,e){var n,r=!1,i=this;return Eo(this).then(function(e){return n=e,e=So(Co(n,!0)),Io(e.get(t))}).then(function(o){var a=So(Co(n,!0));return o?(o.value=e,Io(a.put(o))):(i.b++,r=!0,o={},o.fbase_key=t,o.value=e,Io(a.add(o)))}).then(function(){return i.c[t]=e,ko(i,t)}).ia(function(){r&&i.b--})},Uu.get=function(t){return Eo(this).then(function(e){return Io(So(Co(e,!1)).get(t))}).then(function(t){return t&&t.value})},Uu.P=function(t){var e=!1,n=this;return Eo(this).then(function(r){return e=!0,n.b++,Io(So(Co(r,!0)).delete(t))}).then(function(){return delete n.c[t],ko(n,t)}).ia(function(){e&&n.b--})},Uu.Y=function(t){0==this.a.length&&No(this),this.a.push(t)},Uu.ca=function(t){A(this.a,function(e){return e==t}),0==this.a.length&&Do(this)},Uu=Oo.prototype,Uu.get=function(t){return this.b.then(function(e){return e.get(t)})},Uu.set=function(t,e){return this.b.then(function(n){return n.set(t,e)})},Uu.P=function(t){return this.b.then(function(e){return e.P(t)})},Uu.Y=function(t){this.a.push(t)},Uu.ca=function(t){A(this.a,function(e){return e==t})},Uu=Ro.prototype,Uu.get=function(t){return z(this.a[t])},Uu.set=function(t,e){return this.a[t]=e,z()},Uu.P=function(t){return delete this.a[t],z()},Uu.Y=function(){},Uu.ca=function(){},Uu=xo.prototype,Uu.get=function(t){var e=this;return z().then(function(){return fn(e.a.getItem(t))})},Uu.set=function(t,e){var n=this;return z().then(function(){var r=hn(e);null===r?n.P(t):n.a.setItem(t,r)})},Uu.P=function(t){var e=this;return z().then(function(){e.a.removeItem(t)})},Uu.Y=function(t){qu.window&&St(qu.window,"storage",t)},Uu.ca=function(t){qu.window&&At(qu.window,"storage",t)},Uu=Mo.prototype,Uu.get=function(){return z(null)},Uu.set=function(){return z()},Uu.P=function(){return z()},Uu.Y=function(){},Uu.ca=function(){},Uu=Fo.prototype,Uu.get=function(t){var e=this;return z().then(function(){return fn(e.a.getItem(t))})},Uu.set=function(t,e){var n=this;return z().then(function(){var r=hn(e);null===r?n.P(t):n.a.setItem(t,r)})},Uu.P=function(t){var e=this;return z().then(function(){e.a.removeItem(t)})},Uu.Y=function(){},Uu.ca=function(){};var zl,$l,Yl={A:xo,Sa:Fo},Xl={A:xo,Sa:Fo},Jl={A:lo,Sa:Mo},Zl={A:xo,Sa:Mo},tf={ad:"local",NONE:"none",cd:"session"};Uu=Bo.prototype,Uu.get=function(t,e){return Ko(this,t.A).get(Qo(t,e))},Uu.set=function(t,e,n){var r=Qo(t,n),i=this,o=Ko(this,t.A);return o.set(r,e).then(function(){return o.get(r)}).then(function(e){"local"==t.A&&(i.b[r]=e)})},Uu.addListener=function(t,e,n){t=Qo(t,e),this.o&&(this.b[t]=qu.localStorage.getItem(t)),L(this.a)&&(Ko(this,"local").Y(this.f),this.h||(Fe()||!_n())&&qu.indexedDB||!this.o||zo(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},Uu.removeListener=function(t,e,n){t=Qo(t,e),this.a[t]&&(A(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),L(this.a)&&(Ko(this,"local").ca(this.f),$o(this))},Uu.Pb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=qu.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.Ya(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Ko(this,"local").ca(this.f):$o(this),this.m)if(n=qu.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?qu.localStorage.setItem(e,r):qu.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===qu.localStorage.getItem(e)||(o.b[e]=qu.localStorage.getItem(e),o.Ya(e))},Ec&&Dc&&10==Dc&&qu.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else $u(t,f(this.Ya,this))},Uu.Ya=function(t){this.a[t]&&$u(this.a[t],function(t){t()})};var ef,nf={name:"authEvent",A:"local"};d(ta,Zo);for(var rf=64,of=rf-1,af=[],sf=0;sf<of;sf++)af[sf]=0;var uf=N(128,af);ta.prototype.reset=function(){this.g=this.c=0,this.a=qu.Int32Array?new Int32Array(this.h):D(this.h)};var cf=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];d(ra,ta);var hf=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];Uu=ia.prototype,Uu.ga=function(){return this.za?this.za:this.za=He().then(function(){if("function"!=typeof rn("universalLinks.subscribe",qu))throw oa("cordova-universal-links-plugin-fix is not installed");if(void 0===rn("BuildInfo.packageName",qu))throw oa("cordova-plugin-buildinfo is not installed");if("function"!=typeof rn("cordova.plugins.browsertab.openUrl",qu))throw oa("cordova-plugin-browsertab is not installed");if("function"!=typeof rn("cordova.InAppBrowser.open",qu))throw oa("cordova-plugin-inappbrowser is not installed")},function(){throw new On("cordova-not-ready")})},Uu.Ea=function(t,e){return e(new On("operation-not-supported-in-this-environment")),z()},Uu.Db=function(){return $(new On("operation-not-supported-in-this-environment"))},Uu.Qb=function(){return!1},Uu.Mb=function(){return!0},Uu.Hb=function(){return!0},Uu.Ca=function(t,e,n){if(this.c)return $(new On("redirect-operation-pending"));var r=this,i=qu.document,o=null,a=null,s=null,u=null;return this.c=z().then(function(){return Sr(e),ha(r)}).then(function(){return ua(r,t,e,n)}).then(function(){return new Q(function(t,e){a=function(){var e=rn("cordova.plugins.browsertab.close",qu);return t(),"function"==typeof e&&e(),r.a&&"function"==typeof r.a.close&&(r.a.close(),r.a=null),!1},r.wa(a),s=function(){o||(o=Vt(2e3).then(function(){e(new On("redirect-cancelled-by-user"))}))},u=function(){mn()&&s()},i.addEventListener("resume",s,!1),nn().toLowerCase().match(/android/)||i.addEventListener("visibilitychange",u,!1)}).s(function(t){return la(r).then(function(){throw t})})}).ia(function(){s&&i.removeEventListener("resume",s,!1),u&&i.removeEventListener("visibilitychange",u,!1),o&&o.cancel(),a&&r.Ka(a),r.c=null})},Uu.wa=function(t){this.b.push(t),ha(this).s(function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Cr("unknown",null,null,null,new On("no-auth-event")),t(e))})},Uu.Ka=function(t){A(this.b,function(e){return e==t})};var lf={name:"pendingRedirect",A:"session"};Uu=ma.prototype,Uu.reset=function(){this.f=!1,this.a.Ka(this.i),this.a=ga(this.u,this.o,this.l)},Uu.Za=function(){this.b.Za()},Uu.subscribe=function(t){if(I(this.h,t)||this.h.push(t),!this.f){var e=this;va(this.g).then(function(t){t?ya(e.g).then(function(){ba(e).s(function(t){var n=new Cr("unknown",null,null,null,new On("operation-not-supported-in-this-environment"));Ea(t)&&e.cb(n)})}):_a(e)}).s(function(){_a(e)})}},Uu.unsubscribe=function(t){A(this.h,function(e){return e==t})},Uu.cb=function(t){if(!t)throw new On("invalid-auth-event");for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.wb(t.b,t.c)){(e=this.c[t.b])&&e.h(t,r),e=!0;break}}return Ca(this.b),e};var ff=new vn(2e3,1e4),pf=new vn(3e4,6e4);ma.prototype.fa=function(){return this.b.fa()},ma.prototype.Ca=function(t,e,n){var r,i=this;return da(this.g).then(function(){return i.a.Ca(t,e,n).s(function(t){if(Ea(t))throw new On("operation-not-supported-in-this-environment");return r=t,ya(i.g).then(function(){throw r})}).then(function(){return i.a.Qb()?new Q(function(){}):ya(i.g).then(function(){return i.fa()}).then(function(){}).s(function(){})})})},ma.prototype.Ea=function(t,e,n,r){return this.a.Ea(n,function(n){t.ha(e,null,n,r)},ff.get())};var df={};Sa.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Sa.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.b,r=t.c,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Na(this,!0,null,t.a),z()):e.xa(n,r)?Ia(this,t,e):$(new On("invalid-auth-event")):(Na(this,!1,null,null),z())}else $(new On("invalid-auth-event"))},Sa.prototype.Za=function(){this.g&&!this.i&&Na(this,!1,null,null)},Sa.prototype.fa=function(){var t=this;return new Q(function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),Da(t))})},Oa.prototype.h=function(t,e){if(t){var n=t.b,r=t.c;t.a?(e.ha(t.b,null,t.a,t.c),z()):e.xa(n,r)?Ra(t,e):$(new On("invalid-auth-event"))}else $(new On("invalid-auth-event"))},Pa.prototype.confirm=function(t){return t=Er(this.verificationId,t),this.a(t)},Fa.prototype.start=function(){this.a=this.c,ja(this,!0)},Fa.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},qa.prototype.C=function(){return{apiKey:this.f.b,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},qa.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?$(new On("user-token-expired")):t||!this.b||Qu()>this.c-3e4?this.a?Ka(this,{grant_type:"refresh_token",refresh_token:this.a}):z(null):z({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},Qa.prototype.C=function(){return{lastLoginAt:this.b,createdAt:this.a}},d(za,mt),d($a,Mt),$a.prototype.pa=function(t){this.ka=t,Ci(this.b,t)},$a.prototype.ea=function(){return this.ka},$a.prototype.ya=function(){return D(this.O)},$a.prototype.Ha=function(){this.w.b&&(this.w.stop(),this.w.start())},Sn($a.prototype,"providerId","firebase"),Uu=$a.prototype,Uu.reload=function(){var t=this;return Cs(this,cs(this).then(function(){return ys(t).then(function(){return os(t)}).then(us)}))},Uu.dc=function(t){return this.F(t).then(function(t){return new Ma(t)})},Uu.F=function(t){var e=this;return Cs(this,cs(this).then(function(){return e.h.getToken(t)}).then(function(t){if(!t)throw new On("internal-error");return t.accessToken!=e.ra&&(rs(e,t.accessToken),e.dispatchEvent(new za("tokenChanged"))),ps(e,"refreshToken",t.refreshToken),t.accessToken}))},Uu.zc=function(t){if(!(t=t.users)||!t.length)throw new On("internal-error");t=t[0],ss(this,{uid:t.localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt});for(var e=gs(t),n=0;n<e.length;n++)ls(this,e[n]);ps(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length))},Uu.hb=function(t){var e=this,n=null;return Cs(this,t.f(this.b,this.uid).then(function(t){return vs(e,t),n=_s(e,t,"reauthenticate"),e.i=null,e.reload()}).then(function(){return n}),!0)},Uu.Ac=function(t){return Tn("firebase.User.prototype.reauthenticateWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential instead."),this.hb(t).then(function(){})},Uu.fb=function(t){var e=this,n=null;return Cs(this,bs(this,t.providerId).then(function(){return e.F()}).then(function(n){return t.b(e.b,n)}).then(function(t){return n=_s(e,t,"link"),ws(e,t)}).then(function(){return n}))},Uu.rc=function(t){return Tn("firebase.User.prototype.linkWithCredential is deprecated. Please use firebase.User.prototype.linkAndRetrieveDataWithCredential instead."),this.fb(t).then(function(t){return t.user})},Uu.sc=function(t,e){var n=this;return Cs(this,bs(this,"phone").then(function(){return La(Za(n),t,e,f(n.fb,n))}))},Uu.Bc=function(t,e){var n=this;return Cs(this,z().then(function(){return La(Za(n),t,e,f(n.hb,n))}),!0)},Uu.qb=function(t){var e=this;return Cs(this,this.F().then(function(n){return e.b.qb(n,t)}).then(function(t){return vs(e,t),e.reload()}))},Uu.Tc=function(t){var e=this;return Cs(this,this.F().then(function(n){return t.b(e.b,n)}).then(function(t){return vs(e,t),e.reload()}))},Uu.rb=function(t){var e=this;return Cs(this,this.F().then(function(n){return e.b.rb(n,t)}).then(function(t){return vs(e,t),e.reload()}))},Uu.sb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return cs(this);var e=this;return Cs(this,this.F().then(function(n){return e.b.sb(n,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(t){return vs(e,t),ps(e,"displayName",t.displayName||null),ps(e,"photoURL",t.photoUrl||null),$u(e.providerData,function(t){"password"===t.providerId&&(Sn(t,"displayName",e.displayName),Sn(t,"photoURL",e.photoURL))}),os(e)}).then(us))},Uu.Rc=function(t){var e=this;return Cs(this,ys(this).then(function(n){return I(hs(e),t)?ji(e.b,n,[t]).then(function(t){var n={};return $u(t.providerUserInfo||[],function(t){n[t.providerId]=!0}),$u(hs(e),function(t){n[t]||fs(e,t)}),n[wr.PROVIDER_ID]||Sn(e,"phoneNumber",null),os(e)}):os(e).then(function(){throw new On("no-such-provider")})}))},Uu.delete=function(){var t=this;return Cs(this,this.F().then(function(e){return Hi(t.b,bl,{idToken:e})}).then(function(){t.dispatchEvent(new za("userDeleted"))})).then(function(){for(var e=0;e<t.G.length;e++)t.G[e].cancel("app-deleted");Ya(t,null),Ja(t,null),t.G=[],t.D=!0,ns(t),Sn(t,"refreshToken",null),t.a&&t.a.unsubscribe(t)})},Uu.wb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.aa||null)==e||"reauthViaRedirect"==t&&(this.aa||null)==e)},Uu.ha=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},Uu.xa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?f(this.Bb,this):"reauthViaPopup"==t&&e==(this.g||null)?f(this.Cb,this):"linkViaRedirect"==t&&(this.aa||null)==e?f(this.Bb,this):"reauthViaRedirect"==t&&(this.aa||null)==e?f(this.Cb,this):null},Uu.tc=function(t){var e=this;return Es(this,"linkViaPopup",t,function(){return bs(e,t.providerId).then(function(){return os(e)})},!1)},Uu.Cc=function(t){return Es(this,"reauthViaPopup",t,function(){return z()},!0)},Uu.uc=function(t){var e=this;return Ts(this,"linkViaRedirect",t,function(){return bs(e,t.providerId)},!1)},Uu.Dc=function(t){return Ts(this,"reauthViaRedirect",t,function(){return z()},!0)},Uu.Bb=function(t,e,n){var r=this;this.c&&(this.c.cancel(),this.c=null);var i=null;return Cs(this,this.F().then(function(i){return Ki(r.b,{requestUri:t,postBody:n,sessionId:e,idToken:i})}).then(function(t){return i=_s(r,t,"link"),ws(r,t)}).then(function(){return i}))},Uu.Cb=function(t,e,n){var r=this;this.c&&(this.c.cancel(),this.c=null);var i=null;return Cs(this,z().then(function(){return Zn(Qi(r.b,{requestUri:t,sessionId:e,postBody:n}),r.uid)}).then(function(t){return i=_s(r,t,"reauthenticate"),vs(r,t),r.i=null,r.reload()}).then(function(){return i}),!0)},Uu.kb=function(t){var e=this,n=null;return Cs(this,this.F().then(function(e){return n=e,void 0===t||L(t)?{}:Pn(new xn(t))}).then(function(t){return e.b.kb(n,t)}).then(function(t){if(e.email!=t)return e.reload()}).then(function(){}))},Uu.toJSON=function(){return this.C()},Uu.C=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.u,stsTokenManager:this.h.C(),redirectEventId:this.aa||null};return this.metadata&&F(t,this.metadata.C()),$u(this.providerData,function(e){t.providerData.push(kn(e))}),t};var yf={name:"redirectUser",A:"session"};xs.prototype.g=function(){var t=this,e=Ms("local");Vs(this,function(){return z().then(function(){return t.c&&"local"!=t.c.A?t.b.get(e,t.a):null}).then(function(n){if(n)return Ps(t,"local").then(function(){t.c=e})})})};var vf={name:"persistence",A:"session"};xs.prototype.nb=function(t){var e=null,n=this;return Vo(t),Vs(this,function(){return t!=n.c.A?n.b.get(n.c,n.a).then(function(r){return e=r,Ps(n,t)}).then(function(){if(n.c=Ms(t),e)return n.b.set(n.c,e,n.a)}):z()})},d(Bs,Mt),d(Ws,mt),d(Ks,mt),Uu=Bs.prototype,Uu.nb=function(t){return t=this.h.nb(t),ou(this,t)},Uu.pa=function(t){this.W===t||this.l||(this.W=t,Ci(this.b,this.W),this.dispatchEvent(new Ws(this.ea())))},Uu.ea=function(){return this.W},Uu.Uc=function(){var t=qu.navigator;this.pa(t?t.languages&&t.languages[0]||t.language||t.userLanguage||null:null)},Uu.vc=function(t){this.G.push(t),Ii(this.b,r.a.SDK_VERSION?en(r.a.SDK_VERSION,this.G):null),this.dispatchEvent(new Ks(this.G))},Uu.ya=function(){return D(this.G)},Uu.toJSON=function(){return{apiKey:tu(this).options.apiKey,authDomain:tu(this).options.authDomain,appName:tu(this).name,currentUser:eu(this)&&eu(this).C()}},Uu.wb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},Uu.ha=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},Uu.xa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?f(this.ac,this):null},Uu.ac=function(t,e,n){var r=this;t={requestUri:t,postBody:n,sessionId:e},this.c&&(this.c.cancel(),this.c=null);var i=null,o=null,a=Wi(r.b,t).then(function(t){return i=Tr(t),o=Kn(t),t});return t=r.V.then(function(){return a}).then(function(t){return zs(r,t)}).then(function(){return In({user:eu(r),credential:i,additionalUserInfo:o,operationType:"signIn"})}),ou(this,t)},Uu.Mc=function(t){if(!an())return $(new On("operation-not-supported-in-this-environment"));var e=this,n=Wn(t.providerId),i=pn(),o=null;(!cn()||$e())&&tu(this).options.authDomain&&t.isOAuthProvider&&(o=uo(tu(this).options.authDomain,tu(this).options.apiKey,tu(this).name,"signInViaPopup",t,null,i,r.a.SDK_VERSION||null));var a=Ke(o,n&&n.Ba,n&&n.Aa);return n=Gs(this).then(function(e){return wa(e,a,"signInViaPopup",t,i,!!o)}).then(function(){return new Q(function(t,n){e.ha("signInViaPopup",null,new On("cancelled-popup-request"),e.g),e.f=t,e.v=n,e.g=i,e.c=e.a.Ea(e,"signInViaPopup",a,i)})}).then(function(t){return a&&We(a),t?In(t):null}).s(function(t){throw a&&We(a),t}),ou(this,n)},Uu.Nc=function(t){if(!an())return $(new On("operation-not-supported-in-this-environment"));var e=this;return ou(this,Gs(this).then(function(){return Fs(e.h)}).then(function(){return e.a.Ca("signInViaRedirect",t)}))},Uu.fa=function(){if(!an())return $(new On("operation-not-supported-in-this-environment"));var t=this;return ou(this,Gs(this).then(function(){return t.a.fa()}).then(function(t){return t?In(t):null}))},Uu.Sc=function(t){if(!t)return $(new On("null-user"));var e=this,n={};n.apiKey=tu(this).options.apiKey,n.authDomain=tu(this).options.authDomain,n.appName=tu(this).name;var r=Ns(t,n,e.w,e.ya());return ou(this,this.i.then(function(){if(tu(e).options.apiKey!=t.l)return r.reload()}).then(function(){return eu(e)&&t.uid==eu(e).uid?(ds(eu(e),t),e.Z(t)):($s(e,r),as(r),e.Z(r))}).then(function(){ru(e)}))},Uu.ob=function(){var t=this;return ou(this,this.i.then(function(){return eu(t)?($s(t,null),js(t.h).then(function(){ru(t)})):z()}))},Uu.Oc=function(){var t=this;return qs(this.h,tu(this).options.authDomain).then(function(e){if(!t.l){var n;if(n=eu(t)&&e){n=eu(t).uid;var r=e.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return ds(eu(t),e),eu(t).F();(eu(t)||e)&&($s(t,e),e&&(as(e),e.ba=t.w),t.a&&t.a.subscribe(t),ru(t))}})},Uu.Z=function(t){return Us(this.h,t)},Uu.bc=function(){ru(this),this.Z(eu(this))},Uu.mc=function(){this.ob()},Uu.nc=function(){this.ob()},Uu.oc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(eu(e))})},Uu.pc=function(t){var e=this;iu(this,function(){t.next(eu(e))})},Uu.xc=function(t,e,n){var i=this;return this.X&&r.a.Promise.resolve().then(function(){u(t)?t(eu(i)):u(t.next)&&t.next(eu(i))}),this.Tb(t,e,n)},Uu.wc=function(t,e,n){var i=this;return this.X&&r.a.Promise.resolve().then(function(){i.O=i.getUid(),u(t)?t(eu(i)):u(t.next)&&t.next(eu(i))}),this.Ub(t,e,n)},Uu.cc=function(t){var e=this;return ou(this,this.i.then(function(){return eu(e)?eu(e).F(t).then(function(t){return{accessToken:t}}):null}))},Uu.Nb=function(t){var e=this;return this.i.then(function(){return Zs(e,Hi(e.b,Fl,{token:t}))}).then(function(t){var n=t.user;return ps(n,"isAnonymous",!1),e.Z(n),t})},Uu.Gc=function(t){return Tn("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCustomToken is deprecated. Please use firebase.auth.Auth.prototype.signInWithCustomToken instead."),this.Nb(t)},Uu.Hc=function(t,e){return Tn("firebase.auth.Auth.prototype.signInAndRetrieveDataWithEmailAndPassword is deprecated. Please use firebase.auth.Auth.prototype.signInWithEmailAndPassword instead."),this.Ob(t,e)},Uu.Ob=function(t,e){var n=this;return this.i.then(function(){return Zs(n,Hi(n.b,Ul,{email:t,password:e}))})},Uu.yb=function(t,e){var n=this;return this.i.then(function(){return Zs(n,Hi(n.b,ml,{email:t,password:e}))})},Uu.Wb=function(t,e){return Tn("firebase.auth.Auth.prototype.createUserAndRetrieveDataWithEmailAndPassword is deprecated. Please use firebase.auth.Auth.prototype.createUserWithEmailAndPassword instead."),this.yb(t,e)},Uu.Jc=function(t){return Tn("firebase.auth.Auth.prototype.signInWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential instead."),this.Qa(t).then(function(t){return t.user})},Uu.Qa=function(t){var e=this;return this.i.then(function(){return Zs(e,t.la(e.b))})},Uu.Ra=function(){var t=this;return this.i.then(function(){var e=eu(t);if(e&&e.isAnonymous){return In({user:e,credential:null,additionalUserInfo:In({providerId:null,isNewUser:!1}),operationType:"signIn"})}return Zs(t,t.b.Ra()).then(function(e){var n=e.user;return ps(n,"isAnonymous",!0),t.Z(n),e})})},Uu.Ic=function(){return Tn("firebase.auth.Auth.prototype.signInAnonymouslyAndRetrieveData is deprecated. Please use firebase.auth.Auth.prototype.signInAnonymously instead."),this.Ra()},Uu.getUid=function(){return eu(this)&&eu(this).uid||null},Uu.Vb=function(t){this.addAuthTokenListener(t),0<++this.u&&eu(this)&&es(eu(this))},Uu.Ec=function(t){var e=this;$u(this.m,function(n){n==t&&e.u--}),0>this.u&&(this.u=0),0==this.u&&eu(this)&&ns(eu(this)),this.removeAuthTokenListener(t)},Uu.addAuthTokenListener=function(t){var e=this;this.m.push(t),ou(this,this.i.then(function(){e.l||I(e.m,t)&&t(nu(e))}))},Uu.removeAuthTokenListener=function(t){A(this.m,function(e){return e==t})},Uu.delete=function(){this.l=!0;for(var t=0;t<this.N.length;t++)this.N[t].cancel("app-deleted");return this.N=[],this.h&&(t=this.h,t.b.removeListener(Ms("local"),t.a,this.ka)),this.a&&(this.a.unsubscribe(this),this.a.Za()),r.a.Promise.resolve()},Uu.Zb=function(t){return Tn("firebase.auth.Auth.prototype.fetchProvidersForEmail is deprecated. Please use firebase.auth.Auth.prototype.fetchSignInMethodsForEmail instead."),ou(this,xi(this.b,t))},Uu.$b=function(t){return ou(this,Pi(this.b,t))},Uu.qc=function(t){return!!gr(t)},Uu.mb=function(t,e){var n=this;return ou(this,z().then(function(){var t=new xn(e);if(!t.c)throw new On("argument-error",Ah+" must be true when sending sign in link to email");return Pn(t)}).then(function(e){return n.b.mb(t,e)}).then(function(){}))},Uu.Vc=function(t){return this.Ja(t).then(function(t){return t.data.email})},Uu.$a=function(t,e){return ou(this,this.b.$a(t,e).then(function(){}))},Uu.Ja=function(t){return ou(this,this.b.Ja(t).then(function(t){return new Dn(t)}))},Uu.Xa=function(t){return ou(this,this.b.Xa(t).then(function(){}))},Uu.lb=function(t,e){var n=this;return ou(this,z().then(function(){return void 0===e||L(e)?{}:Pn(new xn(e))}).then(function(e){return n.b.lb(t,e)}).then(function(){}))},Uu.Lc=function(t,e){return ou(this,La(this,t,e,f(this.Qa,this)))},Uu.Kc=function(t,e){var n=this;return ou(this,z().then(function(){var r=mr(t,e||Ue());return n.Qa(r)}))},au.prototype.render=function(){},au.prototype.reset=function(){},au.prototype.getResponse=function(){},au.prototype.execute=function(){};var mf=null;su.prototype.render=function(t,e){return this.a[this.b.toString()]=new hu(t,e),this.b++},su.prototype.reset=function(t){var e=uu(this,t);t=cu(t),e&&t&&(e.delete(),delete this.a[t])},su.prototype.getResponse=function(t){return(t=uu(this,t))?t.getResponse():null},su.prototype.execute=function(t){(t=uu(this,t))&&t.execute()},hu.prototype.getResponse=function(){return lu(this),this.b},hu.prototype.execute=function(){lu(this);var t=this;this.a||(this.a=setTimeout(function(){t.b=Ze();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout(function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()},6e4)},500))},hu.prototype.delete=function(){lu(this),this.g=!0,clearTimeout(this.a),this.a=null,At(this.f,"click",this.i)},fu.prototype.g=function(){return mf||(mf=new su),z(mf)},fu.prototype.c=function(){};var gf=null,bf=new de(Jc,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),_f=new vn(3e4,6e4);pu.prototype.g=function(t){var e=this;return new Q(function(n,r){var i=setTimeout(function(){r(new On("network-request-failed"))},_f.get());if(!qu.grecaptcha||t!==e.f&&!e.b){qu[e.a]=function(){if(qu.grecaptcha){e.f=t;var o=qu.grecaptcha.render;qu.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(qu.grecaptcha)}else clearTimeout(i),r(new On("internal-error"));delete qu[e.a]};z(gi(ge(bf,{onload:e.a,hl:t||""}))).s(function(){clearTimeout(i),r(new On("internal-error","Unable to load external reCAPTCHA dependencies!"))})}else clearTimeout(i),n(qu.grecaptcha)})},pu.prototype.c=function(){this.b--};var wf=null,Ef="callback",Tf="expired-callback",Sf="sitekey",Cf="size";Uu=du.prototype,Uu.za=function(){var t=this;return this.f?this.f:this.f=mu(this,z().then(function(){if(sn()&&!Ye())return Ge();throw new On("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return t.m.g(t.v())}).then(function(e){return t.g=e,Hi(t.u,Al,{})}).then(function(e){t.a[Sf]=e.recaptchaSiteKey}).s(function(e){throw t.f=null,e}))},Uu.render=function(){gu(this);var t=this;return mu(this,this.za().then(function(){if(null===t.c){var e=t.l;if(!t.i){var n=Ae(e);e=De("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c}))},Uu.verify=function(){gu(this);var t=this;return mu(this,this.render().then(function(e){return new Q(function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(vu(t,i),n(e))};t.o.push(i),t.i&&t.g.execute(t.c)}})}))},Uu.reset=function(){gu(this),null!==this.c&&this.g.reset(this.c)},Uu.clear=function(){gu(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=Ae(this.l);for(var e;e=t.firstChild;)t.removeChild(e)}},d(bu,du);var If="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");xu(Bs.prototype,{Xa:{name:"applyActionCode",j:[wu("code")]},Ja:{name:"checkActionCode",j:[wu("code")]},$a:{name:"confirmPasswordReset",j:[wu("code"),wu("newPassword")]},yb:{name:"createUserWithEmailAndPassword",j:[wu("email"),wu("password")]},Wb:{name:"createUserAndRetrieveDataWithEmailAndPassword",j:[wu("email"),wu("password")]},Zb:{name:"fetchProvidersForEmail",j:[wu("email")]},$b:{name:"fetchSignInMethodsForEmail",j:[wu("email")]},fa:{name:"getRedirectResult",j:[]},qc:{name:"isSignInWithEmailLink",j:[wu("emailLink")]},wc:{name:"onAuthStateChanged",j:[Ru(Tu(),Su(),"nextOrObserver"),Su("opt_error",!0),Su("opt_completed",!0)]},xc:{name:"onIdTokenChanged",j:[Ru(Tu(),Su(),"nextOrObserver"),Su("opt_error",!0),Su("opt_completed",!0)]},lb:{name:"sendPasswordResetEmail",j:[wu("email"),Ru(Tu("opt_actionCodeSettings",!0),Cu(null,!0),"opt_actionCodeSettings",!0)]},mb:{name:"sendSignInLinkToEmail",j:[wu("email"),Tu("actionCodeSettings")]},nb:{name:"setPersistence",j:[wu("persistence")]},Qa:{name:"signInAndRetrieveDataWithCredential",j:[Nu()]},Ra:{name:"signInAnonymously",j:[]},Ic:{name:"signInAnonymouslyAndRetrieveData",j:[]},Jc:{name:"signInWithCredential",j:[Nu()]},Nb:{name:"signInWithCustomToken",j:[wu("token")]},Gc:{name:"signInAndRetrieveDataWithCustomToken",j:[wu("token")]},Ob:{name:"signInWithEmailAndPassword",j:[wu("email"),wu("password")]},Kc:{name:"signInWithEmailLink",j:[wu("email"),wu("emailLink",!0)]},Hc:{name:"signInAndRetrieveDataWithEmailAndPassword",j:[wu("email"),wu("password")]},Lc:{name:"signInWithPhoneNumber",j:[wu("phoneNumber"),Ou()]},Mc:{name:"signInWithPopup",j:[Du()]},Nc:{name:"signInWithRedirect",j:[Du()]},Sc:{name:"updateCurrentUser",j:[Ru(function(t){return{name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof $a)}}}(),Cu(),"user")]},ob:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[wu(null,!0)]},Uc:{name:"useDeviceLanguage",j:[]},Vc:{name:"verifyPasswordResetCode",j:[wu("code")]}}),Pu(Bs.prototype,{lc:{name:"languageCode",ub:Ru(wu(),Cu(),"languageCode")}}),Bs.Persistence=tf,Bs.Persistence.LOCAL="local",Bs.Persistence.SESSION="session",Bs.Persistence.NONE="none",xu($a.prototype,{delete:{name:"delete",j:[]},dc:{name:"getIdTokenResult",j:[Eu("opt_forceRefresh",!0)]},F:{name:"getIdToken",j:[Eu("opt_forceRefresh",!0)]},fb:{name:"linkAndRetrieveDataWithCredential",j:[Nu()]},rc:{name:"linkWithCredential",j:[Nu()]},sc:{name:"linkWithPhoneNumber",j:[wu("phoneNumber"),Ou()]},tc:{name:"linkWithPopup",j:[Du()]},uc:{name:"linkWithRedirect",j:[Du()]},hb:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Nu()]},Ac:{name:"reauthenticateWithCredential",j:[Nu()]},Bc:{name:"reauthenticateWithPhoneNumber",j:[wu("phoneNumber"),Ou()]},Cc:{name:"reauthenticateWithPopup",j:[Du()]},Dc:{name:"reauthenticateWithRedirect",j:[Du()]},reload:{name:"reload",j:[]},kb:{name:"sendEmailVerification",j:[Ru(Tu("opt_actionCodeSettings",!0),Cu(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[wu(null,!0)]},Rc:{name:"unlink",j:[wu("provider")]},qb:{name:"updateEmail",j:[wu("email")]},rb:{name:"updatePassword",j:[wu("password")]},Tc:{name:"updatePhoneNumber",j:[Nu("phone")]},sb:{name:"updateProfile",j:[Tu("profile")]}}),xu(su.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),xu(au.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),xu(Q.prototype,{ia:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),Pu(xa.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",ub:Eu("appVerificationDisabledForTesting")}}),xu(Pa.prototype,{confirm:{name:"confirm",j:[wu("verificationCode")]}}),Lu(vr,"credential",function(t,e){return new yr(t,e)},[wu("email"),wu("password")]),xu(sr.prototype,{ua:{name:"addScope",j:[wu("scope")]},Da:{name:"setCustomParameters",j:[Tu("customOAuthParameters")]}}),Lu(sr,"credential",ur,[Ru(wu(),Tu(),"token")]),Lu(vr,"credentialWithLink",mr,[wu("email"),wu("emailLink")]),xu(cr.prototype,{ua:{name:"addScope",j:[wu("scope")]},Da:{name:"setCustomParameters",j:[Tu("customOAuthParameters")]}}),Lu(cr,"credential",hr,[Ru(wu(),Tu(),"token")]),xu(lr.prototype,{ua:{name:"addScope",j:[wu("scope")]},Da:{name:"setCustomParameters",j:[Tu("customOAuthParameters")]}}),Lu(lr,"credential",fr,[Ru(wu(),Ru(Tu(),Cu()),"idToken"),Ru(wu(),Cu(),"accessToken",!0)]),xu(pr.prototype,{Da:{name:"setCustomParameters",j:[Tu("customOAuthParameters")]}}),Lu(pr,"credential",dr,[Ru(wu(),Tu(),"token"),wu("secret",!0)]),xu(ar.prototype,{ua:{name:"addScope",j:[wu("scope")]},credential:{name:"credential",j:[Ru(wu(),Cu(),"idToken",!0),Ru(wu(),Cu(),"accessToken",!0),Ru(wu(),Cu(),"nonce",!0)]},Da:{name:"setCustomParameters",j:[Tu("customOAuthParameters")]}}),Lu(wr,"credential",Er,[wu("verificationId"),wu("verificationCode")]),xu(wr.prototype,{Va:{name:"verifyPhoneNumber",j:[wu("phoneNumber"),Ou()]}}),xu(On.prototype,{toJSON:{name:"toJSON",j:[wu(null,!0)]}}),xu(Nr.prototype,{toJSON:{name:"toJSON",j:[wu(null,!0)]}}),xu(Ar.prototype,{toJSON:{name:"toJSON",j:[wu(null,!0)]}}),xu(bu.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),function(){if(void 0===r.a||!r.a.INTERNAL||!r.a.INTERNAL.registerService)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={Auth:Bs,Error:On};Lu(t,"EmailAuthProvider",vr,[]),Lu(t,"FacebookAuthProvider",sr,[]),Lu(t,"GithubAuthProvider",cr,[]),Lu(t,"GoogleAuthProvider",lr,[]),Lu(t,"TwitterAuthProvider",pr,[]),Lu(t,"OAuthProvider",ar,[wu("providerId")]),Lu(t,"SAMLAuthProvider",or,[wu("providerId")]),Lu(t,"PhoneAuthProvider",wr,[ku()]),Lu(t,"RecaptchaVerifier",bu,[Ru(wu(),Iu(),"recaptchaContainer"),Tu("recaptchaParameters",!0),Au()]),r.a.INTERNAL.registerService("auth",function(t,e){return t=new Bs(t),e({INTERNAL:{getUid:f(t.getUid,t),getToken:f(t.cc,t),addAuthTokenListener:f(t.Vb,t),removeAuthTokenListener:f(t.Ec,t)}}),t},t,function(t,e){if("create"===t)try{e.auth()}catch(t){}}),r.a.INTERNAL.extendNamespace({User:$a})}()}).apply(void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}.call(e,n("DuR2"))},"g+rL":function(t,e,n){n("Ld14")("observable")},gCWN:function(t,e){},gLsf:function(t,e,n){var r=n("AMIE"),i=n("YveC").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},hE1C:function(t,e,n){n("Ld14")("iterator")},hEnP:function(t,e,n){var r=n("9mDF"),i=n("gLsf").f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return i(t)}catch(t){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?s(t):i(r(t))}},hGaF:function(t,e,n){var r=n("r54x"),i=/#|\.prototype\./,o=function(t,e){var n=s[a(t)];return n==c||n!=u&&("function"==typeof e?r(e):!!e)},a=o.normalize=function(t){return String(t).replace(i,".").toLowerCase()},s=o.data={},u=o.NATIVE="N",c=o.POLYFILL="P";t.exports=o},hKsM:function(t,e,n){n("Ld14")("replace")},hcE8:function(t,e){t.exports="object"==typeof window&&window&&window.Math==Math?window:"object"==typeof self&&self&&self.Math==Math?self:Function("return this")()},hffE:function(t,e,n){"use strict";var r=n("whWw"),i=n("1rEs"),o=n("C1ru");t.exports=function(t,e,n){var a=r(e);a in t?i.f(t,a,o(0,n)):t[a]=n}},hgbu:function(t,e,n){var r=n("a/OS")("wks"),i=n("GmwO"),o=n("YjQv").Symbol,a="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))}).store=r},hiy0:function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on "+t);return t}},ht0Q:function(t,e,n){var r=n("YjQv"),i=r.navigator;t.exports=i&&i.userAgent||""},i9tX:function(t,e,n){var r=n("hcE8"),i=n("He3V").f,o=n("wkr2"),a=n("+opI"),s=n("C/Wh"),u=n("PYrI"),c=n("hGaF");t.exports=function(t,e){var n,h,l,f,p,d=t.target,y=t.global,v=t.stat;if(n=y?r:v?r[d]||s(d,{}):(r[d]||{}).prototype)for(h in e){if(f=e[h],t.noTargetGet?(p=i(n,h),l=p&&p.value):l=n[h],!c(y?h:d+(v?".":"#")+h,t.forced)&&void 0!==l){if(typeof f==typeof l)continue;u(f,l)}(t.sham||l&&l.sham)&&o(f,"sham",!0),a(n,h,f,t)}}},iANj:function(t,e){var n=t.exports={version:"2.6.5"};"number"==typeof __e&&(__e=n)},izte:function(t,e,n){var r=n("hcE8"),i=n("C/Wh"),o=r["__core-js_shared__"]||i("__core-js_shared__",{});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.0.0",mode:n("pzR0")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},jAiL:function(t,e,n){var r=n("izte")("wks"),i=n("17Rs"),o=n("hcE8").Symbol,a=n("9+GO");t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))}},jE0U:function(t,e,n){"use strict";(function(r){/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function i(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}function o(t){var e={};"?"===t.charAt(0)&&(t=t.substring(1));for(var n=0,r=t.split("&");n<r.length;n++){var i=r[n];if(0!==i.length){var o=i.split("=");2===o.length?e[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):F("Invalid query segment '"+i+"' in query '"+t+"'")}}return e}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function a(t,e){return W(t.name,e.name)}function s(t,e){return W(t,e)}function u(t,e){if(void 0===e&&(e=null),null===t)return $t.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),b.assert(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t){return new Ft(t,u(e))}if(t instanceof Array||!Jt){var n=$t.EMPTY_NODE,r=t;return b.forEach(r,function(t,e){if(b.contains(r,t)&&"."!==t.substring(0,1)){var i=u(e);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}}),n.updatePriority(u(e))}var i=[],o=!1,c=t;if(b.forEach(c,function(t,e){if("string"!=typeof t||"."!==t.substring(0,1)){var n=u(c[t]);n.isEmpty()||(o=o||!n.getPriority().isEmpty(),i.push(new Ot(t,n)))}}),0==i.length)return $t.EMPTY_NODE;var h=Gt(i,a,function(t){return t.name},s);if(o){var l=Gt(i,jt.getCompare());return new $t(h,u(e),new zt({".priority":l},{".priority":jt}))}return new $t(h,u(e),zt.Default)}function c(e){var n=e.INTERNAL.registerService("database",function(t,e,n){return Cn.getInstance().databaseFromApp(t,n)},{Reference:_n,Query:ce,Database:In,DataSnapshot:ie,enableLogging:R,INTERNAL:Mn,ServerValue:Qn,TEST_ACCESS:Kn},null,!0);b.isNodeSdk()&&(t.exports=n)}Object.defineProperty(e,"__esModule",{value:!0});var h,l,f,p,d,y,v,m=function(t){return t&&"object"==typeof t&&"default"in t?t.default:t}(n("O4tu")),g=n("TToO"),b=n("Pxmi"),_=n("fjI4"),w=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),b.stringify(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:b.jsonEval(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),E=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return b.contains(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),T=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new w(e)}}catch(t){}return new E},S=T("localStorage"),C=T("sessionStorage"),I=new _.Logger("@firebase/database"),k=function(){var t=1;return function(){return t++}}(),A=function(t){var e=b.stringToByteArray(t),n=new b.Sha1;n.update(e);var r=n.digest();return b.base64.encodeByteArray(r)},N=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++)Array.isArray(t[r])||t[r]&&"object"==typeof t[r]&&"number"==typeof t[r].length?n+=N.apply(null,t[r]):"object"==typeof t[r]?n+=b.stringify(t[r]):n+=t[r],n+=" ";return n},D=null,O=!0,R=function(t,e){b.assert(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(I.logLevel=_.LogLevel.VERBOSE,D=I.log.bind(I),e&&C.set("logging_enabled",!0)):"function"==typeof t?D=t:(D=null,C.remove("logging_enabled"))},x=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===O&&(O=!1,null===D&&!0===C.get("logging_enabled")&&R(!0)),D){var n=N.apply(null,t);D(n)}},P=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];x.apply(void 0,[t].concat(e))}},L=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+N.apply(void 0,t);I.error(n)},M=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+N.apply(void 0,t);throw I.error(n),new Error(n)},F=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+N.apply(void 0,t);I.warn(n)},U=function(){"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&F("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},j=function(t){return"number"==typeof t&&(t!=t||t==Number.POSITIVE_INFINITY||t==Number.NEGATIVE_INFINITY)},q=function(t){if(b.isNodeSdk()||"complete"===document.readyState)t();else{var e=!1,n=function(){if(!document.body)return void setTimeout(n,Math.floor(10));e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}},V="[MIN_NAME]",B="[MAX_NAME]",W=function(t,e){if(t===e)return 0;if(t===V||e===B)return-1;if(e===V||t===B)return 1;var n=tt(t),r=tt(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},K=function(t,e){return t===e?0:t<e?-1:1},Q=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+b.stringify(e))},G=function(t){if("object"!=typeof t||null===t)return b.stringify(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=b.stringify(e[i]),r+=":",r+=G(t[e[i]]);return r+="}"},H=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r},z=function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;++n)e(n,t[n]);else b.forEach(t,function(t,n){return e(n,t)})},$=function(t){b.assert(!j(t),"Invalid JSON number");var e,n,r,i,o,a,s;for(0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,t=Math.abs(t),t>=Math.pow(2,-1022)?(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023),n=i+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074)))),a=[],o=52;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse(),s=a.join("");var u="";for(o=0;o<64;o+=8){var c=parseInt(s.substr(o,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()},Y=function(){return!("object"!=typeof window||!window.chrome||!window.chrome.extension||/^chrome/.test(window.location.href))},X=function(){return"object"==typeof Windows&&"object"==typeof Windows.UI},J=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==t?n="Client doesn't have permission to access the desired data.":"unavailable"==t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r},Z=new RegExp("^-?\\d{1,10}$"),tt=function(t){if(Z.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},et=function(t){try{t()}catch(t){setTimeout(function(){var e=t.stack||"";throw F("Exception was thrown by user callback.",e),t},Math.floor(0))}},nt=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},rt=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},it=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!0,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(var r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else for(var i=e.split("/"),r=0;r<i.length;r++)i[r].length>0&&n.push(i[r]);return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=W(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),ot=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=b.stringLength(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=b.stringLength(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=b.stringLength(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0==this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),at="long_polling",st=function(){function t(t,e,n,r,i){void 0===i&&(i=""),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=S.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&S.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){b.assert("string"==typeof t,"typeof type must == string"),b.assert("object"==typeof e,"typeof params must == object");var n;if("websocket"===t)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==at)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return b.forEach(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}(),ut=function(t){var e=ct(t),n=e.subdomain;"firebase"===e.domain&&M(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!=n||"localhost"===e.domain||M("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||U();var r="ws"===e.scheme||"wss"===e.scheme;return{repoInfo:new st(e.host,e.secure,n,r),path:new it(e.pathString)}},ct=function(t){var e="",n="",r="",a="",s=!0,u="https",c=443;if("string"==typeof t){var h=t.indexOf("//");h>=0&&(u=t.substring(0,h-1),t=t.substring(h+2));var l=t.indexOf("/");-1===l&&(l=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(l,f)),l<f&&(a=i(t.substring(l,f)));var p=o(t.substring(Math.min(t.length,f)));h=e.indexOf(":"),h>=0?(s="https"===u||"wss"===u,c=parseInt(e.substring(h+1),10)):h=t.length;var d=e.split(".");3===d.length?(n=d[1],r=d[0].toLowerCase()):2===d.length?n=d[0]:"localhost"===d[0].slice(0,h).toLowerCase()&&(n="localhost"),""===r&&"ns"in p&&(r=p.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:s,scheme:u,pathString:a}},ht=/[\[\].#$\/\u0000-\u001F\u007F]/,lt=/[\[\].#$\u0000-\u001F\u007F]/,ft=function(t){return"string"==typeof t&&0!==t.length&&!ht.test(t)},pt=function(t){return"string"==typeof t&&0!==t.length&&!lt.test(t)},dt=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),pt(t)},yt=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!j(t)||t&&"object"==typeof t&&b.contains(t,".sv")},vt=function(t,e,n,r,i){i&&void 0===n||mt(b.errorPrefix(t,e,i),n,r)},mt=function(t,e,n){var r=n instanceof it?new ot(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(j(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>10485760/3&&b.stringLength(e)>10485760)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,o=!1;if(b.forEach(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!ft(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),mt(t,n,r),r.pop()}),i&&o)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},gt=function(t,e){var n,r;for(n=0;n<e.length;n++){r=e[n];for(var i=r.slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!ft(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(it.comparePaths);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&a.contains(r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}},bt=function(t,e,n,r,i){if(!i||void 0!==n){var o=b.errorPrefix(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var a=[];b.forEach(n,function(t,e){var n=new it(t);if(mt(o,e,r.child(n)),".priority"===n.getBack()&&!yt(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)}),gt(o,a)}},_t=function(t,e,n,r){if(!r||void 0!==n){if(j(n))throw new Error(b.errorPrefix(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!yt(n))throw new Error(b.errorPrefix(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},wt=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(b.errorPrefix(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Et=function(t,e,n,r){if(!(r&&void 0===n||ft(n)))throw new Error(b.errorPrefix(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Tt=function(t,e,n,r){if(!(r&&void 0===n||pt(n)))throw new Error(b.errorPrefix(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},St=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Tt(t,e,n,r)},Ct=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},It=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!ft(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!dt(r))throw new Error(b.errorPrefix(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},kt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(b.errorPrefix(t,e,r)+"must be a boolean.")},At=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){b.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),b.validateCallback("OnDisconnect.cancel",1,t,!0);var e=new b.Deferred;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){b.validateArgCount("OnDisconnect.remove",0,1,arguments.length),Ct("OnDisconnect.remove",this.path_),b.validateCallback("OnDisconnect.remove",1,t,!0);var e=new b.Deferred;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){b.validateArgCount("OnDisconnect.set",1,2,arguments.length),Ct("OnDisconnect.set",this.path_),vt("OnDisconnect.set",1,t,this.path_,!1),b.validateCallback("OnDisconnect.set",2,e,!0);var n=new b.Deferred;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){b.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),Ct("OnDisconnect.setWithPriority",this.path_),vt("OnDisconnect.setWithPriority",1,t,this.path_,!1),_t("OnDisconnect.setWithPriority",2,e,!1),b.validateCallback("OnDisconnect.setWithPriority",3,n,!0);var r=new b.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(b.validateArgCount("OnDisconnect.update",1,2,arguments.length),Ct("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,F("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}bt("OnDisconnect.update",1,t,this.path_,!1),b.validateCallback("OnDisconnect.update",2,e,!0);var i=new b.Deferred;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),Nt=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return b.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Dt=function(){var t="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",e=0,n=[];return function(r){var i=r===e;e=r;var o,a=new Array(8);for(o=7;o>=0;o--)a[o]=t.charAt(r%64),r=Math.floor(r/64);b.assert(0===r,"Cannot push at time == 0");var s=a.join("");if(i){for(o=11;o>=0&&63===n[o];o--)n[o]=0;n[o]++}else for(o=0;o<12;o++)n[o]=Math.floor(64*Math.random());for(o=0;o<12;o++)s+=t.charAt(n[o]);return b.assert(20===s.length,"nextPushId: Length should be 20."),s}}(),Ot=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Rt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Ot(V,t),r=new Ot(V,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Ot.MIN},t}(),xt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return g.__extends(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return h},set:function(t){h=t},enumerable:!0,configurable:!0}),e.prototype.compare=function(t,e){return W(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw b.assertionError("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Ot.MIN},e.prototype.maxPost=function(){return new Ot(B,h)},e.prototype.makePost=function(t,e){return b.assert("string"==typeof t,"KeyIndex indexValue must always be a string."),new Ot(t,h)},e.prototype.toString=function(){return".key"},e}(Rt),Pt=new xt,Lt=function(t){return"number"==typeof t?"number:"+$(t):"string:"+t},Mt=function(t){if(t.isLeafNode()){var e=t.val();b.assert("string"==typeof e||"number"==typeof e||"object"==typeof e&&b.contains(e,".sv"),"Priority must be a string or number.")}else b.assert(t===l||t.isEmpty(),"priority of unexpected type.");b.assert(t===l||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Ft=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,b.assert(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Mt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return f},set:function(t){f=t},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(b.assert(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Lt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?$(this.value_):this.value_,this.lazyHash_=A(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(b.assert(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(r);return b.assert(i>=0,"Unknown leaf type: "+n),b.assert(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Ut=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return g.__extends(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?W(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Ot.MIN},e.prototype.maxPost=function(){return new Ot(B,new Ft("[PRIORITY-POST]",d))},e.prototype.makePost=function(t,e){var n=p(t);return new Ot(e,new Ft("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Rt),jt=new Ut,qt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Vt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Wt.EMPTY_NODE,this.right=null!=o?o:Wt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r,i;return i=this,r=n(t,i.key),i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Wt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()},t.prototype.remove=function(t,e){var n,r;if(n=this,e(t,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Wt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){var t;if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");if((t=this.left.check_())!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Bt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Vt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Wt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Vt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Vt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new qt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new qt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new qt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new qt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Bt,t}(),Kt=Math.log(2),Qt=function(){function t(t){this.count=function(t){return parseInt(Math.log(t)/Kt,10)}(t+1),this.current_=this.count-1;var e=function(t){return parseInt(Array(t+1).join("1"),2)}(this.count);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Gt=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,a,s=r-e;if(0==s)return null;if(1==s)return o=t[e],a=n?n(o):o,new Vt(a,o.node,Vt.BLACK,null,null);var u=parseInt(s/2,10)+e,c=i(e,u),h=i(u+1,r);return o=t[u],a=n?n(o):o,new Vt(a,o.node,Vt.BLACK,c,h)},o=new Qt(t.length),a=function(e){for(var r=null,o=null,a=t.length,s=function(e,r){var o=a-e,s=a;a-=e;var c=i(o+1,s),h=t[o],l=n?n(h):h;u(new Vt(l,h.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var h=e.nextBitIsOne(),l=Math.pow(2,e.count-(c+1));h?s(l,Vt.BLACK):(s(l,Vt.BLACK),s(l,Vt.RED))}return o}(o);return new Wt(r||e,a)},Ht={},zt=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return b.assert(Ht&&jt,"ChildrenNode.ts has not been loaded"),y=y||new t({".priority":Ht},{".priority":jt})},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var e=b.safeGet(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e===Ht?null:e},t.prototype.hasIndex=function(t){return b.contains(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){b.assert(e!==Pt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r=[],i=!1,o=n.getIterator(Ot.Wrap),a=o.getNext();a;)i=i||e.isDefinedOn(a.node),r.push(a),a=o.getNext();var s;s=i?Gt(r,e.getCompare()):Ht;var u=e.toString(),c=b.clone(this.indexSet_);c[u]=e;var h=b.clone(this.indexes_);return h[u]=s,new t(h,c)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(b.map(this.indexes_,function(t,i){var o=b.safeGet(r.indexSet_,i);if(b.assert(o,"Missing index implementation for "+i),t===Ht){if(o.isDefinedOn(e.node)){for(var a=[],s=n.getIterator(Ot.Wrap),u=s.getNext();u;)u.name!=e.name&&a.push(u),u=s.getNext();return a.push(e),Gt(a,o.getCompare())}return Ht}var c=n.get(e.name),h=t;return c&&(h=h.remove(new Ot(e.name,c))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(b.map(this.indexes_,function(t){if(t===Ht)return t;var r=n.get(e.name);return r?t.remove(new Ot(e.name,r)):t}),this.indexSet_)},t}(),$t=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Mt(this.priorityNode_),this.children_.isEmpty()&&b.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return v||(v=new t(new Wt(s),null,zt.Default))},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||v},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?v:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(b.assert(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Ot(e,n),i=void 0,o=void 0,a=void 0;return n.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(r,this.children_)),a=i.isEmpty()?v:this.priorityNode_,new t(i,a,o)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;b.assert(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(jt,function(a,s){n[a]=s.val(e),r++,o&&t.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1}),!e&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Lt(this.getPriority().val())+":"),this.forEachChild(jt,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":A(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Ot(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Ot(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Ot(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Ot.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Ot.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Xt?-1:0},t.prototype.withIndex=function(e){if(e===Pt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Pt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(jt),r=e.getIterator(jt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Pt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),Yt=function(t){function e(){return t.call(this,new Wt(s),$t.EMPTY_NODE,zt.Default)||this}return g.__extends(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return $t.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}($t),Xt=new Yt;Object.defineProperties(Ot,{MIN:{value:new Ot(V,$t.EMPTY_NODE)},MAX:{value:new Ot(B,Xt)}}),xt.__EMPTY_NODE=$t.EMPTY_NODE,Ft.__childrenNodeConstructor=$t,function(t){l=t}(Xt),function(t){d=t}(Xt);/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Jt=!0;!function(t){p=t}(u);/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Zt,te,ee=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return g.__extends(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?W(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Ot.MIN},e.prototype.maxPost=function(){return Ot.MAX},e.prototype.makePost=function(t,e){var n=u(t);return new Ot(e,n)},e.prototype.toString=function(){return".value"},e}(Rt),ne=new ee,re=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,b.assert(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return g.__extends(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?W(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=u(t),r=$t.EMPTY_NODE.updateChild(this.indexPath_,n);return new Ot(e,r)},e.prototype.maxPost=function(){var t=$t.EMPTY_NODE.updateChild(this.indexPath_,Xt);return new Ot(B,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(Rt),ie=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return b.validateArgCount("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return b.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return b.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return b.validateArgCount("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){b.validateArgCount("DataSnapshot.child",0,1,arguments.length),e=String(e),Tt("DataSnapshot.child",1,e,!1);var n=new it(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,jt)},t.prototype.hasChild=function(t){b.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),Tt("DataSnapshot.hasChild",1,t,!1);var e=new it(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return b.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;return b.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),b.validateCallback("DataSnapshot.forEach",1,e,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(r,i){return e(new t(i,n.ref_.child(r),jt))})},t.prototype.hasChildren=function(){return b.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),t.prototype.numChildren=function(){return b.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return b.validateArgCount("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}(),oe=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+b.stringify(this.snapshot.exportVal())},t}(),ae=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),se=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new oe("value",this,new ie(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){b.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new ae(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),ue=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,b.contains(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new ae(this,t,e):null},t.prototype.createEvent=function(t,e){b.assert(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new oe(t.type,this,new ie(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){b.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var n=b.getCount(e.callbacks_);if(n===b.getCount(this.callbacks_)){if(1===n){var r=b.getAnyKey(e.callbacks_),i=b.getAnyKey(this.callbacks_);return!(i!==r||e.callbacks_[r]&&this.callbacks_[i]&&e.callbacks_[r]!==this.callbacks_[i])}return b.every(this.callbacks_,function(t,n){return e.callbacks_[t]===n})}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),ce=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return b.assert(Zt,"Reference.ts has not been loaded"),Zt},set:function(t){Zt=t},enumerable:!0,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Pt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!=V)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!=B)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===jt){if(null!=e&&!yt(e)||null!=n&&!yt(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(b.assert(t.getIndex()instanceof re||t.getIndex()===ne,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return b.validateArgCount("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){b.validateArgCount("Query.on",2,4,arguments.length),wt("Query.on",1,e,!1),b.validateCallback("Query.on",2,n,!1);var o=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,o.cancel,o.context);else{var a={};a[e]=n,this.onChildEvent(a,o.cancel,o.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new se(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new ue(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){b.validateArgCount("Query.off",0,3,arguments.length),wt("Query.off",1,t,!0),b.validateCallback("Query.off",2,e,!0),b.validateContextObject("Query.off",3,n,!0);var r=null,i=null;if("value"===t){r=new se(e||null,null,n||null)}else t&&(e&&(i={},i[t]=e),r=new ue(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.once=function(e,n,r,i){var o=this;b.validateArgCount("Query.once",1,4,arguments.length),wt("Query.once",1,e,!1),b.validateCallback("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),s=!0,u=new b.Deferred;u.promise.catch(function(){});var c=function(t){s&&(s=!1,o.off(e,c),n&&n.bind(a.context)(t),u.resolve(t))};return this.on(e,c,function(t){o.off(e,c),a.cancel&&a.cancel.bind(a.context)(t),u.reject(t)}),u.promise},t.prototype.limitToFirst=function(e){if(b.validateArgCount("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(b.validateArgCount("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(b.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Tt("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new it(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new re(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){b.validateArgCount("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(Pt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){b.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(jt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){b.validateArgCount("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(ne);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),b.validateArgCount("Query.startAt",0,2,arguments.length),vt("Query.startAt",1,e,this.path,!0),Et("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),b.validateArgCount("Query.endAt",0,2,arguments.length),vt("Query.endAt",1,e,this.path,!0),Et("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(b.validateArgCount("Query.equalTo",1,2,arguments.length),vt("Query.equalTo",1,t,this.path,!1),Et("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return b.validateArgCount("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return b.validateArgCount("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=G(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(b.validateArgCount("Query.isEqual",1,1,arguments.length),!(e instanceof t)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}var n=this.repo===e.repo,r=this.path.equals(e.path),i=this.queryIdentifier()===e.queryIdentifier();return n&&r&&i},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,b.validateCallback(t,3,r.cancel,!0),r.context=n,b.validateContextObject(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(b.errorPrefix(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}(),he=function(){function t(){this.set={}}return t.prototype.add=function(t,e){this.set[t]=null===e||e},t.prototype.contains=function(t){return b.contains(this.set,t)},t.prototype.get=function(t){return this.contains(t)?this.set[t]:void 0},t.prototype.remove=function(t){delete this.set[t]},t.prototype.clear=function(){this.set={}},t.prototype.isEmpty=function(){return b.isEmpty(this.set)},t.prototype.count=function(){return b.getCount(this.set)},t.prototype.each=function(t){b.forEach(this.set,function(e,n){return t(e,n)})},t.prototype.keys=function(){var t=[];return b.forEach(this.set,function(e){t.push(e)}),t},t}(),le=function(){function t(){this.value_=null,this.children_=null}return t.prototype.find=function(t){if(null!=this.value_)return this.value_.getChild(t);if(t.isEmpty()||null==this.children_)return null;var e=t.getFront();if(t=t.popFront(),this.children_.contains(e)){return this.children_.get(e).find(t)}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value_=n,this.children_=null;else if(null!==this.value_)this.value_=this.value_.updateChild(e,n);else{null==this.children_&&(this.children_=new he);var r=e.getFront();this.children_.contains(r)||this.children_.add(r,new t);var i=this.children_.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value_=null,this.children_=null,!0;if(null!==this.value_){if(this.value_.isLeafNode())return!1;var e=this.value_;this.value_=null;var n=this;return e.forEachChild(jt,function(t,e){n.remember(new it(t),e)}),this.forget(t)}if(null!==this.children_){var r=t.getFront();if(t=t.popFront(),this.children_.contains(r)){this.children_.get(r).forget(t)&&this.children_.remove(r)}return!!this.children_.isEmpty()&&(this.children_=null,!0)}return!0},t.prototype.forEachTree=function(t,e){null!==this.value_?e(t,this.value_):this.forEachChild(function(n,r){var i=new it(t.toString()+"/"+n);r.forEachTree(i,e)})},t.prototype.forEachChild=function(t){null!==this.children_&&this.children_.each(function(e,n){t(e,n)})},t}(),fe=function(t){return t=t||{},t.timestamp=t.timestamp||(new Date).getTime(),t},pe=function(t,e){return t&&"object"==typeof t?(b.assert(".sv"in t,"Unexpected leaf node or priority contents"),e[t[".sv"]]):t},de=function(t,e){var n=new le;return t.forEachTree(new it(""),function(t,r){n.remember(t,ye(r,e))}),n},ye=function(t,e){var n,r=t.getPriority().val(),i=pe(r,e);if(t.isLeafNode()){var o=t,a=pe(o.getValue(),e);return a!==o.getValue()||i!==o.getPriority().val()?new Ft(a,u(i)):t}var s=t;return n=s,i!==s.getPriority().val()&&(n=n.updatePriority(new Ft(i))),s.forEachChild(jt,function(t,r){var i=ye(r,e);i!==r&&(n=n.updateImmediateChild(t,i))}),n};!function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(te||(te={}));var ve,me,ge=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,b.assert(!r||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),be=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=te.ACK_USER_WRITE,this.source=ge.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return b.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new it(e));return new t(it.Empty,n,this.revert)}return b.assert(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),_e=function(){return ve||(ve=new Wt(K)),ve},we=function(){function t(t,e){void 0===e&&(e=_e()),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return b.forEach(e,function(t,e){n=n.set(new it(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:it.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);if(null!=i){return{path:new it(n).child(i.path),value:i.value}}return null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=this.children.get(r)||t.Empty,o=i.set(e.popFront(),n),a=this.children.insert(r,o);return new t(this.value,a)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r=e.getFront(),i=this.children.get(r)||t.Empty,o=i.setTree(e.popFront(),n),a=void 0;return a=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new t(this.value,a)},t.prototype.fold=function(t){return this.fold_(it.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(t.child(r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,it.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,it.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_(it.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(t.child(n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t.Empty=new t(null),t}(),Ee=function(){function t(t,e){this.source=t,this.path=e,this.type=te.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,it.Empty):new t(this.source,this.path.popFront())},t}(),Te=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=te.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,it.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),Se=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=te.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new it(e));return n.isEmpty()?null:n.value?new Te(this.source,it.Empty,n.value):new t(this.source,it.Empty,n)}return b.assert(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Ce=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Ie=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new Ce(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new Ce(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new Ce($t.EMPTY_NODE,!1,!1),new Ce($t.EMPTY_NODE,!1,!1)),t}(),ke=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),Ae=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,o){b.assert(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()==n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(ke.childRemovedChange(e,a)):b.assert(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(ke.childAddedChange(e,n)):o.trackChildChange(ke.childChangedChange(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(jt,function(t,r){e.hasChild(t)||n.trackChildChange(ke.childRemovedChange(t,r))}),e.isLeafNode()||e.forEachChild(jt,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(ke.childChangedChange(e,r,i))}else n.trackChildChange(ke.childAddedChange(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?$t.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),Ne=function(){function t(){this.changeMap_={}}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;b.assert(e==ke.CHILD_ADDED||e==ke.CHILD_CHANGED||e==ke.CHILD_REMOVED,"Only child changes supported for tracking"),b.assert(".priority"!==n,"Only non-priority child changes can be tracked.");var r=b.safeGet(this.changeMap_,n);if(r){var i=r.type;if(e==ke.CHILD_ADDED&&i==ke.CHILD_REMOVED)this.changeMap_[n]=ke.childChangedChange(n,t.snapshotNode,r.snapshotNode);else if(e==ke.CHILD_REMOVED&&i==ke.CHILD_ADDED)delete this.changeMap_[n];else if(e==ke.CHILD_REMOVED&&i==ke.CHILD_CHANGED)this.changeMap_[n]=ke.childRemovedChange(n,r.oldSnap);else if(e==ke.CHILD_CHANGED&&i==ke.CHILD_ADDED)this.changeMap_[n]=ke.childAddedChange(n,t.snapshotNode);else{if(e!=ke.CHILD_CHANGED||i!=ke.CHILD_CHANGED)throw b.assertionError("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap_[n]=ke.childChangedChange(n,t.snapshotNode,r.oldSnap)}}else this.changeMap_[n]=t},t.prototype.getChanges=function(){return b.getValues(this.changeMap_)},t}(),De=function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}(),Oe=new De,Re=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Ce(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),xe=function(){function t(t,e){this.viewCache=t,this.changes=e}return t}(),Pe=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){b.assert(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),b.assert(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var o,a,s=new Ne;if(n.type===te.OVERWRITE){var u=n;u.source.fromUser?o=this.applyUserOverwrite_(e,u.path,u.snap,r,i,s):(b.assert(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.getServerCache().isFiltered()&&!u.path.isEmpty(),o=this.applyServerOverwrite_(e,u.path,u.snap,r,i,a,s))}else if(n.type===te.MERGE){var c=n;c.source.fromUser?o=this.applyUserMerge_(e,c.path,c.children,r,i,s):(b.assert(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.getServerCache().isFiltered(),o=this.applyServerMerge_(e,c.path,c.children,r,i,a,s))}else if(n.type===te.ACK_USER_WRITE){var h=n;o=h.revert?this.revertUserWrite_(e,h.path,r,i,s):this.ackUserWrite_(e,h.path,h.affectedTree,r,i,s)}else{if(n.type!==te.LISTEN_COMPLETE)throw b.assertionError("Unknown operation type: "+n.type);o=this.listenComplete_(e,n.path,r,s)}var l=s.getChanges();return t.maybeAddValueEvent_(e,o,l),new xe(o,l)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(ke.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,s=void 0;if(e.isEmpty())if(b.assert(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var u=t.getCompleteServerSnap(),c=u instanceof $t?u:$t.EMPTY_NODE,h=n.calcCompleteEventChildren(c);a=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var l=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var f=e.getFront();if(".priority"==f){b.assert(1==e.getLength(),"Can't have a priority with additional path components");var p=o.getNode();s=t.getServerCache().getNode();var d=n.calcEventCacheAfterServerOverwrite(e,p,s);a=null!=d?this.filter_.updatePriority(p,d):o.getNode()}else{var y=e.popFront(),v=void 0;if(o.isCompleteForChild(f)){s=t.getServerCache().getNode();var m=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),s);v=null!=m?o.getNode().getImmediateChild(f).updateChild(y,m):o.getNode().getImmediateChild(f)}else v=n.calcCompleteChild(f,t.getServerCache());a=null!=v?this.filter_.updateChild(o.getNode(),f,v,y,r,i):o.getNode()}}return t.updateEventSnap(a,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,a){var s,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())s=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var h=u.getNode().updateChild(e,n);s=c.updateFullNode(u.getNode(),h,null)}else{var l=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var f=e.popFront(),p=u.getNode().getImmediateChild(l),d=p.updateChild(f,n);s=".priority"==l?c.updatePriority(u.getNode(),d):c.updateChild(u.getNode(),l,d,f,Oe,null)}var y=t.updateServerSnap(s,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),v=new Re(r,y,i);return this.generateEventCacheAfterServerEvent_(y,e,r,v,a)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var a,s,u=t.getEventCache(),c=new Re(r,t,i);if(e.isEmpty())s=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),a=t.updateEventSnap(s,!0,this.filter_.filtersNodes());else{var h=e.getFront();if(".priority"===h)s=this.filter_.updatePriority(t.getEventCache().getNode(),n),a=t.updateEventSnap(s,u.isFullyInitialized(),u.isFiltered());else{var l=e.popFront(),f=u.getNode().getImmediateChild(h),p=void 0;if(l.isEmpty())p=n;else{var d=c.getCompleteChild(h);p=null!=d?".priority"===l.getBack()&&d.getChild(l.parent()).isEmpty()?d:d.updateChild(l,n):$t.EMPTY_NODE}if(f.equals(p))a=t;else{var y=this.filter_.updateChild(u.getNode(),h,p,l,c,o);a=t.updateEventSnap(y,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return a},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,a){var s=this,u=e;return r.foreach(function(r,c){var h=n.child(r);t.cacheHasChild_(e,h.getFront())&&(u=s.applyUserOverwrite_(u,h,c,i,o,a))}),r.foreach(function(r,c){var h=n.child(r);t.cacheHasChild_(e,h.getFront())||(u=s.applyUserOverwrite_(u,h,c,i,o,a))}),u},t.prototype.applyMerge_=function(t,e){return e.foreach(function(e,n){t=t.updateChild(e,n)}),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,a){var s=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:we.Empty.setTree(e,n);var h=t.getServerCache().getNode();return u.children.inorderTraversal(function(e,n){if(h.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),l=s.applyMerge_(u,n);c=s.applyServerOverwrite_(c,new it(e),l,r,i,o,a)}}),u.children.inorderTraversal(function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!h.hasChild(e)&&!u){var l=t.getServerCache().getNode().getImmediateChild(e),f=s.applyMerge_(l,n);c=s.applyServerOverwrite_(c,new it(e),f,r,i,o,a)}}),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var a=t.getServerCache().isFiltered(),s=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&s.isFullyInitialized()||s.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,s.getNode().getChild(e),r,i,a,o);if(e.isEmpty()){var u=we.Empty;return s.getNode().forEachChild(Pt,function(t,e){u=u.set(new it(t),e)}),this.applyServerMerge_(t,e,u,r,i,a,o)}return t}var c=we.Empty;return n.foreach(function(t,n){var r=e.child(t);s.isCompleteForPath(r)&&(c=c.set(t,s.getNode().getChild(r)))}),this.applyServerMerge_(t,e,c,r,i,a,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,Oe,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var a=new Re(n,t,r),s=t.getEventCache().getNode(),u=void 0;if(e.isEmpty()||".priority"===e.getFront()){var c=void 0;if(t.getServerCache().isFullyInitialized())c=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();b.assert(h instanceof $t,"serverChildren would be complete if leaf node"),c=n.calcCompleteEventChildren(h)}c=c,u=this.filter_.updateFullNode(s,c,i)}else{var l=e.getFront(),f=n.calcCompleteChild(l,t.getServerCache());null==f&&t.getServerCache().isCompleteForChild(l)&&(f=s.getImmediateChild(l)),u=null!=f?this.filter_.updateChild(s,l,f,e.popFront(),a,i):t.getEventCache().getNode().hasChild(l)?this.filter_.updateChild(s,l,$t.EMPTY_NODE,e.popFront(),a,i):s,u.isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap()),o.isLeafNode()&&(u=this.filter_.updateFullNode(u,o,i)))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(it.Empty),t.updateEventSnap(u,o,this.filter_.filtersNodes())},t}(),Le=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach(function(t){t.type===ke.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(ke.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(i,ke.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,ke.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,ke.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,ke.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,ke.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,a=n.filter(function(t){return t.type===e});a.sort(this.compareChanges_.bind(this)),a.forEach(function(e){var n=o.materializeSingleChange_(e,i);r.forEach(function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))})})},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type?t:(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_),t)},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw b.assertionError("Should only compare child_ events.");var n=new Ot(t.childName,t.snapshotNode),r=new Ot(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),Me=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new Ae(n.getIndex()),i=n.getNodeFilter();this.processor_=new Pe(i);var o=e.getServerCache(),a=e.getEventCache(),s=r.updateFullNode($t.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode($t.EMPTY_NODE,a.getNode(),null),c=new Ce(s,o.isFullyInitialized(),r.filtersNodes()),h=new Ce(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=new Ie(h,c),this.eventGenerator_=new Le(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){b.assert(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach(function(t){e=e;var i=t.createCancelEvent(e,r);i&&n.push(i)})}if(t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var a=this.eventRegistrations_[o];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===te.MERGE&&null!==t.source.queryId&&(b.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),b.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),b.assert(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];if(!e.getNode().isLeafNode()){e.getNode().forEachChild(jt,function(t,e){n.push(ke.childAddedChange(t,e))})}return e.isFullyInitialized()&&n.push(ke.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,r)},t}(),Fe=function(){function t(){this.views_={}}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return b.assert(me,"Reference.ts has not been loaded"),me},set:function(t){b.assert(!me,"__referenceConstructor has already been defined"),me=t},enumerable:!0,configurable:!0}),t.prototype.isEmpty=function(){return b.isEmpty(this.views_)},t.prototype.applyOperation=function(t,e,n){var r=t.source.queryId;if(null!==r){var i=b.safeGet(this.views_,r);return b.assert(null!=i,"SyncTree gave us an op for an invalid query."),i.applyOperation(t,e,n)}var o=[];return b.forEach(this.views_,function(r,i){o=o.concat(i.applyOperation(t,e,n))}),o},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),a=b.safeGet(this.views_,o);if(!a){var s=n.calcCompleteEventCache(i?r:null),u=!1;s?u=!0:r instanceof $t?(s=n.calcCompleteEventChildren(r),u=!1):(s=$t.EMPTY_NODE,u=!1);var c=new Ie(new Ce(s,u,!1),new Ce(r,i,!1));a=new Me(t,c),this.views_[o]=a}return a.addEventRegistration(e),a.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var i=e.queryIdentifier(),o=[],a=[],s=this.hasCompleteView();if("default"===i){var u=this;b.forEach(this.views_,function(t,e){a=a.concat(e.removeEventRegistration(n,r)),e.isEmpty()&&(delete u.views_[t],e.getQuery().getQueryParams().loadsAllData()||o.push(e.getQuery()))})}else{var c=b.safeGet(this.views_,i);c&&(a=a.concat(c.removeEventRegistration(n,r)),c.isEmpty()&&(delete this.views_[i],c.getQuery().getQueryParams().loadsAllData()||o.push(c.getQuery())))}return s&&!this.hasCompleteView()&&o.push(new t.__referenceConstructor(e.repo,e.path)),{removed:o,events:a}},t.prototype.getQueryViews=function(){var t=this;return Object.keys(this.views_).map(function(e){return t.views_[e]}).filter(function(t){return!t.getQuery().getQueryParams().loadsAllData()})},t.prototype.getCompleteServerCache=function(t){var e=null;return b.forEach(this.views_,function(n,r){e=e||r.getCompleteServerCache(t)}),e},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return b.safeGet(this.views_,e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){return b.findValue(this.views_,function(t){return t.getQuery().getQueryParams().loadsAllData()})||null},t}(),Ue=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new we(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,a=it.relativePath(i,e);return o=o.updateChild(a,n),new t(this.writeTree_.set(i,o))}var s=new we(n);return new t(this.writeTree_.setTree(e,s))},t.prototype.addWrites=function(t,e){var n=this;return b.forEach(e,function(e,r){n=n.addWrite(t.child(e),r)}),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,we.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(it.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(jt,function(e,n){t.push(new Ot(e,n))}):this.writeTree_.children.inorderTraversal(function(e,n){null!=n.value&&t.push(new Ot(e,n.value))}),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new we(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(e){return t.applySubtreeWrite_(it.Empty,this.writeTree_,e)},t.Empty=new t(new we(null)),t.applySubtreeWrite_=function(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal(function(n,o){".priority"===n?(b.assert(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=t.applySubtreeWrite_(e.child(n),o,r)}),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(e.child(".priority"),i)),r},t}(),je=function(){function t(){this.visibleWrites_=Ue.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new qe(t,this)},t.prototype.addOverwrite=function(t,e,n,r){b.assert(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){b.assert(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex(function(e){return e.writeId===t});b.assert(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,o=!1,a=this.allWrites_.length-1;i&&a>=0;){var s=this.allWrites_[a];s.visible&&(a>=n&&this.recordContainsPath_(s,r.path)?i=!1:r.path.contains(s.path)&&(o=!0)),a--}if(i){if(o)return this.resetTree_(),!0;if(r.snap)this.visibleWrites_=this.visibleWrites_.removeWrite(r.path);else{var u=r.children;b.forEach(u,function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))})}return!0}return!1},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(e);if(!i&&o.isEmpty())return n;if(i||null!=n||o.hasCompleteWrite(it.Empty)){var a=function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},s=t.layerTree_(this.allWrites_,a,e),u=n||$t.EMPTY_NODE;return s.apply(u)}return null}var c=this.visibleWrites_.getCompleteNode(e);if(null!=c)return c;var h=this.visibleWrites_.childCompoundWrite(e);if(h.isEmpty())return n;if(null!=n||h.hasCompleteWrite(it.Empty)){var u=n||$t.EMPTY_NODE;return h.apply(u)}return null},t.prototype.calcCompleteEventChildren=function(t,e){var n=$t.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(jt,function(t,e){n=n.updateImmediateChild(t,e)}),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(jt,function(t,e){var r=i.childCompoundWrite(new it(t)).apply(e);n=n.updateImmediateChild(t,r)}),i.getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){b.assert(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);if(null!=i)return i;if(n.isCompleteForChild(e)){return this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e))}return null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var a,s=this.visibleWrites_.childCompoundWrite(t),u=s.getCompleteNode(it.Empty);if(null!=u)a=u;else{if(null==e)return[];a=s.apply(e)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];for(var c=[],h=o.getCompare(),l=i?a.getReverseIteratorFrom(n,o):a.getIteratorFrom(n,o),f=l.getNext();f&&c.length<r;)0!==h(f,n)&&c.push(f),f=l.getNext();return c},t.prototype.recordContainsPath_=function(t,e){return t.snap?t.path.contains(e):!!b.findKey(t.children,function(n,r){return t.path.child(r).contains(e)})},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,it.Empty),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=Ue.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var a=o.path,s=void 0;if(o.snap)n.contains(a)?(s=it.relativePath(n,a),r=r.addWrite(s,o.snap)):a.contains(n)&&(s=it.relativePath(a,n),r=r.addWrite(it.Empty,o.snap.getChild(s)));else{if(!o.children)throw b.assertionError("WriteRecord should have .snap or .children");if(n.contains(a))s=it.relativePath(n,a),r=r.addWrites(s,o.children);else if(a.contains(n))if(s=it.relativePath(a,n),s.isEmpty())r=r.addWrites(it.Empty,o.children);else{var u=b.safeGet(o.children,s.getFront());if(u){var c=u.getChild(s.popFront());r=r.addWrite(it.Empty,c)}}}}}return r},t}(),qe=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),Ve=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=we.Empty,this.pendingWriteTree_=new je,this.tagToQueryMap_={},this.queryToTagMap_={}}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new Te(ge.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=we.fromObject(e);return this.applyOperationToSyncPoints_(new Se(ge.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=we.Empty;return null!=n.snap?r=r.set(it.Empty,!0):b.forEach(n.children,function(t,e){r=r.set(new it(t),e)}),this.applyOperationToSyncPoints_(new be(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new Te(ge.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=we.fromObject(e);return this.applyOperationToSyncPoints_(new Se(ge.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new Ee(ge.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),a=o.path,s=o.queryId,u=it.relativePath(a,e),c=new Te(ge.forServerTaggedQuery(s),u,n);return this.applyTaggedOperation_(a,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),a=o.path,s=o.queryId,u=it.relativePath(a,e),c=we.fromObject(n),h=new Se(ge.forServerTaggedQuery(s),u,c);return this.applyTaggedOperation_(a,h)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,a=i.queryId,s=it.relativePath(o,e),u=new Ee(ge.forServerTaggedQuery(a),s);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,function(t,e){var n=it.relativePath(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()});var a=this.syncPointTree_.get(r);a?(o=o||a.hasCompleteView(),i=i||a.getCompleteServerCache(it.Empty)):(a=new Fe,this.syncPointTree_=this.syncPointTree_.set(r,a));var s;if(null!=i)s=!0;else{s=!1,i=$t.EMPTY_NODE;this.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=e.getCompleteServerCache(it.Empty);n&&(i=i.updateImmediateChild(t,n))})}var u=a.viewExistsForQuery(e);if(!u&&!e.getQueryParams().loadsAllData()){var c=t.makeQueryKey_(e);b.assert(!(c in this.queryToTagMap_),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap_[c]=h,this.tagToQueryMap_["_"+h]=c}var l=this.pendingWriteTree_.childWrites(r),f=a.addEventRegistration(e,n,l,i,s);if(!u&&!o){var p=a.viewForQuery(e);f=f.concat(this.setupListener_(e,p))}return f},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,a=this.syncPointTree_.get(o),s=[];if(a&&("default"===e.queryIdentifier()||a.viewExistsForQuery(e))){var u=a.removeEventRegistration(e,n,r);a.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;s=u.events;var h=-1!==c.findIndex(function(t){return t.getQueryParams().loadsAllData()}),l=this.syncPointTree_.findOnPath(o,function(t,e){return e.hasCompleteView()});if(h&&!l){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(f),d=0;d<p.length;++d){var y=p[d],v=y.getQuery(),m=this.createListenerForView_(y);this.listenProvider_.startListening(t.queryForListening_(v),this.tagForQuery_(v),m.hashFn,m.onComplete)}}if(!l&&c.length>0&&!r)if(h){this.listenProvider_.stopListening(t.queryForListening_(e),null)}else c.forEach(function(e){var n=i.queryToTagMap_[t.makeQueryKey_(e)];i.listenProvider_.stopListening(t.queryForListening_(e),n)});this.removeTags_(c)}return s},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,function(e,n){var r=it.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i});return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView()){return[e.getCompleteView()]}var r=[];return e&&(r=e.getQueryViews()),b.forEach(n,function(t,e){r=r.concat(e)}),r})},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap_[i];delete this.queryToTagMap_[i],delete this.tagToQueryMap_["_"+o]}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),o=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),i,o.hashFn,o.onComplete),s=this.syncPointTree_.subtree(r);if(i)b.assert(!s.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),b.forEach(n,function(t,e){r=r.concat(e)}),r}),c=0;c<u.length;++c){var h=u[c];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||$t.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=J(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return b.assert(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new it(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap_["_"+t]},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return b.safeGet(this.queryToTagMap_,n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);b.assert(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(it.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(it.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(it.Empty));var o=[],a=t.path.getFront(),s=t.operationForChild(a),u=e.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,h=r.child(a);o=o.concat(this.applyOperationHelper_(s,u,c,h))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(it.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(it.Empty));var a=[];return e.children.inorderTraversal(function(e,o){var s=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(a=a.concat(i.applyOperationDescendantsHelper_(c,o,s,u)))}),o&&(a=a.concat(o.applyOperation(t,r,n))),a},t.nextQueryTag_=1,t}(),Be=function(){function t(){this.rootNode_=$t.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),We=function(){function t(t){this.app_=t}return t.prototype.getToken=function(t){return this.app_.INTERNAL.getToken(t).then(null,function(t){return t&&"auth/token-not-initialized"===t.code?(x("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})},t.prototype.addTokenChangeListener=function(t){this.app_.INTERNAL.addAuthTokenListener(t)},t.prototype.removeTokenChangeListener=function(t){this.app_.INTERNAL.removeAuthTokenListener(t)},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',F(t)},t}(),Ke=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),b.contains(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return b.deepCopy(this.counters_)},t}(),Qe=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Ke),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),Ge=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=b.clone(t);return this.last_&&b.forEach(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),He=1e4,ze=3e4,$e=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Ge(t);var n=He+(ze-He)*Math.random();rt(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;b.forEach(e,function(e,i){i>0&&b.contains(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),rt(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Ye=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new Xe(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.equals(t)})},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.contains(t)||t.contains(e)})},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];if(r){t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1}}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),Xe=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();D&&x("event: "+e.toString()),et(n)}}},t.prototype.getPath=function(){return this.path_},t}(),Je=function(){function t(t){this.allowedEvents_=t,this.listeners_={},b.assert(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=this.listeners_[t].slice(),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){b.assert(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),Ze=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return g.__extends(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return b.assert("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(Je),tn=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||b.isMobileCordova()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return g.__extends(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return b.assert("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(Je),en=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=this;this.pendingResponses[this.currentResponseNum];){if("break"===function(){var t=r.pendingResponses[r.currentResponseNum];delete r.pendingResponses[r.currentResponseNum];for(var e=0;e<t.length;++e)!function(e){t[e]&&et(function(){n.onMessage_(t[e])})}(e);if(r.currentResponseNum===r.closeAfterResponse)return r.onClose&&(r.onClose(),r.onClose=null),"break";r.currentResponseNum++}())break}},t}(),nn="pLPCommand",rn="pRTLPCB",on=function(){function t(t,e,n,r){this.connId=t,this.repoInfo=e,this.transportSessionId=n,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=P(t),this.stats_=Qe.getCollection(e),this.urlFn=function(t){return e.connectionURL(at,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new en(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),q(function(){if(!n.isClosed_){n.scriptTagHolder=new an(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[0],i=t[1],o=t[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"==r)n.id=i,n.password=o;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);i?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(i,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[0],i=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(r,i)},function(){n.onClosed_()},n.urlFn);var t={};t.start="t",t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),!b.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return t.forceAllow_||!t.forceDisallow_&&"undefined"!=typeof document&&null!=document.createElement&&!Y()&&!X()&&!b.isNodeSdk()},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=b.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=b.base64Encode(e),r=H(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!b.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var n={};n.dframe="t",n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=b.stringify(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),an=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new he,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,b.isNodeSdk())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=k(),window[nn+this.uniqueCallbackIdentifier]=e,window[rn+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)){o='<script>document.domain="'+document.domain+'";<\/script>'}var a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(t){x("frame writing exception"),t.stack&&x(t.stack),x(t)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||x("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var e=this;if(this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)},Math.floor(0))),b.isNodeSdk()&&this.myID){var n={};n.disconn="t",n.id=this.myID,n.pw=this.myPW;var r=this.urlFn(n);t.nodeRestRequest(r)}var i=this.onDisconnect;i&&(this.onDisconnect=null,i())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.count()<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e,1);var r=function(){n.outstandingRequests.remove(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3)),o=function(){clearTimeout(i),r()};this.addTag(t,o)},t.prototype.addTag=function(t,e){var n=this;b.isNodeSdk()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){x("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(t){}},Math.floor(1))},t}(),sn=null;"undefined"!=typeof MozWebSocket?sn=MozWebSocket:"undefined"!=typeof WebSocket&&(sn=WebSocket);var un=function(){function t(e,n,r,i){this.connId=e,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=P(this.connId),this.stats_=Qe.getCollection(n),this.connURL=t.connectionURL_(n,r,i)}return t.connectionURL_=function(t,e,n){var r={};return r.v="5",!b.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL("websocket",r)},t.prototype.open=function(t,e){var i=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,S.set("previous_websocket_failure",!0);try{if(b.isNodeSdk()){var o=b.CONSTANTS.NODE_ADMIN?"AdminNode":"Node",a={headers:{"User-Agent":"Firebase/5/"+m.SDK_VERSION+"/"+r.platform+"/"+o}},s=n.i({NODE_ENV:"production"}),u=0==this.connURL.indexOf("wss://")?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;u&&(a.proxy={origin:u}),this.mySock=new sn(this.connURL,[],a)}else this.mySock=new sn(this.connURL)}catch(t){this.log_("Error instantiating WebSocket.");var c=t.message||t.data;return c&&this.log_(c),void this.onClosed_()}this.mySock.onopen=function(){i.log_("Websocket connected."),i.everConnected_=!0},this.mySock.onclose=function(){i.log_("Websocket connection was disconnected."),i.mySock=null,i.onClosed_()},this.mySock.onmessage=function(t){i.handleIncomingFrame(t)},this.mySock.onerror=function(t){i.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&i.log_(e),i.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&null!==sn&&!t.forceDisallow_},t.previouslyFailed=function(){return S.isInMemoryStorage||!0===S.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){S.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length==this.totalFrames){var e=this.frames.join("");this.frames=null;var n=b.jsonEval(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(b.assert(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=b.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=H(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),cn=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[on,un]},enumerable:!0,configurable:!0}),t.prototype.initTransports_=function(e){var n=un&&un.isAvailable(),r=n&&!un.previouslyFailed();if(e.webSocketOnly&&(n||F("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[un];else{var i=this.transports_=[];z(t.ALL_TRANSPORTS,function(t,e){e&&e.isAvailable()&&i.push(e)})}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),hn=function(){function t(t,e,n,r,i,o,a){this.id=t,this.repoInfo_=e,this.onMessage_=n,this.onReady_=r,this.onDisconnect_=i,this.onKill_=o,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=P("c:"+this.id+":"),this.transportManager_=new cn(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=rt(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!=e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=Q("t",t),n=Q("d",t);if("c"==e)this.onSecondaryControl_(n);else{if("d"!=e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=Q("t",t),n=Q("d",t);"c"==e?this.onControl_(n):"d"==e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||--this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy())},t.prototype.onControl_=function(t){var e=Q("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?L("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):L("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0==this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&F("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),rt(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):rt(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(S.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),ln=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),fn=1e3,pn=3e5,dn=function(t){function e(n,r,i,o,a,s){var u=t.call(this)||this;if(u.repoInfo_=n,u.onDataUpdate_=r,u.onConnectStatus_=i,u.onServerInfoUpdate_=o,u.authTokenProvider_=a,u.authOverride_=s,u.id=e.nextPersistentConnectionId_++,u.log_=P("p:"+u.id+":"),u.interruptReasons_={},u.listens_={},u.outstandingPuts_=[],u.outstandingPutCount_=0,u.onDisconnectRequestQueue_=[],u.connected_=!1,u.reconnectDelay_=fn,u.maxReconnectDelay_=pn,u.securityDebugCallback_=null,u.lastSessionId=null,u.establishConnectionTimer_=null,u.visible_=!1,u.requestCBHash_={},u.requestNumber_=0,u.realtime_=null,u.authToken_=null,u.forceTokenRefresh_=!1,u.invalidAuthTokenCount_=0,u.firstConnection_=!0,u.lastConnectionAttemptTime_=null,u.lastConnectionEstablishedTime_=null,s&&!b.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return u.scheduleConnect_(0),Ze.getInstance().on("visible",u.onVisible_,u),-1===n.host.indexOf("fblocal")&&tn.getInstance().on("online",u.onOnline_,u),u}return g.__extends(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(b.stringify(i)),b.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens_[o]=this.listens_[o]||{},b.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),b.assert(!this.listens_[o][i],"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens_[o][i]=a,this.connected_&&this.sendListen_(a)},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var a={p:i};t.tag&&(a.q=r.queryObject(),a.t=t.tag),a.h=t.hashFn(),this.sendRequest("q",a,function(a){var s=a.d,u=a.s;e.warnOnListenWarnings_(s,r),(n.listens_[i]&&n.listens_[i][o])===t&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,s))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&b.contains(t,"w")){var n=b.safeGet(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();F("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||b.isAdmin(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=b.isValidFormat(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),b.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){if("ok"!==t.s){var n=t.d;e.log_("reportStats","Error sending stats: "+n)}})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+b.stringify(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):L("Unrecognized action received from server: "+b.stringify(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;b.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=fn,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=fn,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){var t=(new Date).getTime()-this.lastConnectionEstablishedTime_;t>3e4&&(this.reconnectDelay_=fn),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,o=this,a=this.lastSessionId,s=!1,u=null,c=function(){u?u.close():(s=!0,r())},h=function(t){b.assert(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)};this.realtime_={close:c,sendRequest:h};var l=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(l).then(function(e){s?x("getToken() completed but was canceled"):(x("getToken() completed. Creating connection."),o.authToken_=e&&e.accessToken,u=new hn(i,o.repoInfo_,t,n,r,function(t){F(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},a))}).then(null,function(t){o.log_("Failed to get token: "+t),s||(b.CONSTANTS.NODE_ADMIN&&F(t),c())})}},e.prototype.interrupt=function(t){x("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){x("Resuming connection for reason: "+t),delete this.interruptReasons_[t],b.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=fn,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return G(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new it(t).toString();return void 0!==this.listens_[r]?(n=this.listens_[r][e],delete this.listens_[r][e],0===b.getCount(this.listens_[r])&&delete this.listens_[r]):n=void 0,n},e.prototype.onAuthRevoked_=function(t,e){x("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||++this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken())},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t=this;this.tryAuth(),b.forEach(this.listens_,function(e,n){b.forEach(n,function(e,n){t.sendListen_(n)})});for(var e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){var n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}},e.prototype.sendConnectStats_=function(){var t={},e="js";b.CONSTANTS.NODE_ADMIN?e="admin_node":b.CONSTANTS.NODE_CLIENT&&(e="node"),t["sdk."+e+"."+m.SDK_VERSION.replace(/\./g,"-")]=1,b.isMobileCordova()?t["framework.cordova"]=1:b.isReactNative()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=tn.getInstance().currentlyOnline();return b.isEmpty(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(ln),yn=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=P("p:rest:"),i.listens_={},i}return g.__extends(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(b.assert(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var o=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var s=e.getListenId_(t,r),u={};this.listens_[s]=u;var c=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",c,function(t,e){var n=e;if(404===t&&(n=null,t=null),null===t&&o.onDataUpdate_(a,n,!1,r),b.safeGet(o.listens_,s)===u){var c;c=t?401==t?"permission_denied":"rest_error:"+t:"ok",i(c,null)}})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then(function(i){var o=i&&i.accessToken;o&&(e.auth=o);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+b.querystring(e);r.log_("Sending REST request for "+a);var s=new XMLHttpRequest;s.onreadystatechange=function(){if(n&&4===s.readyState){r.log_("REST Response for "+a+" received. status:",s.status,"response:",s.responseText);var t=null;if(s.status>=200&&s.status<300){try{t=b.jsonEval(s.responseText)}catch(t){F("Failed to parse JSON response for "+a+": "+s.responseText)}n(null,t)}else 401!==s.status&&404!==s.status&&F("Got unsuccessful REST response for "+a+" Status: "+s.status),n(s.status);n=null}},s.open("GET",a,!0),s.send()})},e}(ln),vn=function(){function t(t,e,n){var r=this;this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ye,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new le,this.persistentConnection_=null;var i=new We(n);if(this.stats_=Qe.getCollection(t),e||nt())this.server_=new yn(this.repoInfo_,this.onDataUpdate_.bind(this),i),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var o=n.options.databaseAuthVariableOverride;if(void 0!==o&&null!==o){if("object"!=typeof o)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{b.stringify(o)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new dn(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),i,o),this.server_=this.persistentConnection_}i.addTokenChangeListener(function(t){r.server_.refreshAuthToken(t)}),this.statsReporter_=Qe.getOrCreateReporter(t,function(){return new $e(r.stats_,r.server_)}),this.transactions_init_(),this.infoData_=new Be,this.infoSyncTree_=new Ve({startListening:function(t,e,n,i){var o=[],a=r.infoData_.getNode(t.path);return a.isEmpty()||(o=r.infoSyncTree_.applyServerOverwrite(t.path,a),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Ve({startListening:function(t,e,n,i){return r.server_.listen(t,n,e,function(e,n){var o=i(e,n);r.eventQueue_.raiseEventsForChangedPath(t.path,o)}),[]},stopListening:function(t,e){r.server_.unlisten(t,e)}})}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new it(".info/serverTimeOffset")),e=t.val()||0;return(new Date).getTime()+e},t.prototype.generateServerValues=function(){return fe({timestamp:this.serverTime()})},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new it(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(r)if(n){var a=b.map(e,function(t){return u(t)});o=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var s=u(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,s,r)}else if(n){var c=b.map(e,function(t){return u(t)});o=this.serverSyncTree_.applyServerMerge(i,c)}else{var h=u(e);o=this.serverSyncTree_.applyServerOverwrite(i,h)}var l=i;o.length>0&&(l=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(l,o)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;z(t,function(t,n){e.updateInfo_(n,t)})},t.prototype.updateInfo_=function(t,e){var n=new it("/.info/"+t),r=u(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),a=u(e,n),s=ye(a,o),c=this.getNextWriteId_(),h=this.serverSyncTree_.applyUserOverwrite(t,s,c,!0);this.eventQueue_.queueEvents(h),this.server_.put(t.toString(),a.val(!0),function(e,n){var o="ok"===e;o||F("set at "+t+" failed: "+e);var a=i.serverSyncTree_.ackUserWrite(c,!o);i.eventQueue_.raiseEventsForChangedPath(t,a),i.callOnCompleteCallback(r,e,n)});var l=this.abortTransactions_(t);this.rerunTransactions_(l),this.eventQueue_.raiseEventsForChangedPath(l,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),a={};if(b.forEach(e,function(t,e){i=!1;var n=u(e);a[t]=ye(n,o)}),i)x("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var s=this.getNextWriteId_(),c=this.serverSyncTree_.applyUserMerge(t,a,s);this.eventQueue_.queueEvents(c),this.server_.merge(t.toString(),e,function(e,i){var o="ok"===e;o||F("update at "+t+" failed: "+e);var a=r.serverSyncTree_.ackUserWrite(s,!o),u=a.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,a),r.callOnCompleteCallback(n,e,i)}),b.forEach(e,function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)}),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=de(this.onDisconnect_,e),r=[];n.forEachTree(it.Empty,function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)}),this.onDisconnect_=new le,this.eventQueue_.raiseEventsForChangedPath(it.Empty,r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)})},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=u(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)})},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=u(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)})},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(b.isEmpty(e))return x("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,function(i,o){"ok"===i&&b.forEach(e,function(e,n){var i=u(n);r.onDisconnect_.remember(t.child(e),i)}),r.callOnCompleteCallback(n,i,o)})},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new Ge(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0);b.forEach(e,function(t,e){for(var r=t.length;r<n+2;r++)t+=" ";console.log(t+e)})}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),x.apply(void 0,[n].concat(t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&et(function(){if("ok"==e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}})},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new In(this))},enumerable:!0,configurable:!0}),t}(),mn=function(){function t(e){this.indexedFilter_=new Ae(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Ot(e,n))||(n=$t.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=$t.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority($t.EMPTY_NODE);var i=this;return e.forEachChild(jt,function(t,e){i.matches(new Ot(t,e))||(r=r.updateImmediateChild(t,$t.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),gn=function(){function t(t){this.rangedFilter_=new mn(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Ot(e,n))||(n=$t.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=$t.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=$t.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext(),s=void 0;if(!(s=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=e.withIndex(this.index_),r=r.updatePriority($t.EMPTY_NODE);var u=void 0,c=void 0,h=void 0,i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();h=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();for(var o=0,f=!1;i.hasNext();){var a=i.getNext();!f&&h(u,a)<=0&&(f=!0);var s=f&&o<this.limit_&&h(a,c)<=0;s?o++:r=r.updateImmediateChild(a.name,$t.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(t,e){return a(e,t)}}else o=this.index_.getCompare();var s=t;b.assert(s.numChildren()==this.limit_,"");var u=new Ot(e,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(s.hasChild(e)){for(var l=s.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name==e||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:o(f,u);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(ke.childChangedChange(e,n,l)),s.updateImmediateChild(e,n);null!=i&&i.trackChildChange(ke.childRemovedChange(e,l));var d=s.updateImmediateChild(e,$t.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(ke.childAddedChange(f.name,f.node)),d.updateImmediateChild(f.name,f.node)):d}return n.isEmpty()?t:h&&o(c,u)>=0?(null!=i&&(i.trackChildChange(ke.childRemovedChange(c.name,c.node)),i.trackChildChange(ke.childAddedChange(e,n))),s.updateImmediateChild(e,n).updateImmediateChild(c.name,$t.EMPTY_NODE)):t},t}(),bn=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=jt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return b.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return b.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:V},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return b.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return b.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:B},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return b.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==jt&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_==jt},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new Ae(this.getIndex()):this.hasLimit()?new gn(this):new mn(this)},t.prototype.toRestQueryStringParameters=function(){var e=t.REST_QUERY_CONSTANTS_,n={};if(this.isDefault())return n;var r;return this.index_===jt?r=e.PRIORITY_INDEX:this.index_===ne?r=e.VALUE_INDEX:this.index_===Pt?r=e.KEY_INDEX:(b.assert(this.index_ instanceof re,"Unrecognized index type!"),r=this.index_.toString()),n[e.ORDER_BY]=b.stringify(r),this.startSet_&&(n[e.START_AT]=b.stringify(this.indexStartValue_),this.startNameSet_&&(n[e.START_AT]+=","+b.stringify(this.indexStartName_))),this.endSet_&&(n[e.END_AT]=b.stringify(this.indexEndValue_),this.endNameSet_&&(n[e.END_AT]+=","+b.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[e.LIMIT_TO_FIRST]=this.limit_:n[e.LIMIT_TO_LAST]=this.limit_),n},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),_n=function(t){function e(e,n){if(!(e instanceof vn))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,bn.DEFAULT,!1)||this}return g.__extends(e,t),e.prototype.getKey=function(){return b.validateArgCount("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return b.validateArgCount("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof it||(null===this.path.getFront()?St("Reference.child",1,t,!1):Tt("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){b.validateArgCount("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){b.validateArgCount("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){b.validateArgCount("Reference.set",1,2,arguments.length),Ct("Reference.set",this.path),vt("Reference.set",1,t,this.path,!1),b.validateCallback("Reference.set",2,e,!0);var n=new b.Deferred;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(b.validateArgCount("Reference.update",1,2,arguments.length),Ct("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,F("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}bt("Reference.update",1,t,this.path,!1),b.validateCallback("Reference.update",2,e,!0);var i=new b.Deferred;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(b.validateArgCount("Reference.setWithPriority",2,3,arguments.length),Ct("Reference.setWithPriority",this.path),vt("Reference.setWithPriority",1,t,this.path,!1),_t("Reference.setWithPriority",2,e,!1),b.validateCallback("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new b.Deferred;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return b.validateArgCount("Reference.remove",0,1,arguments.length),Ct("Reference.remove",this.path),b.validateCallback("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(b.validateArgCount("Reference.transaction",1,3,arguments.length),Ct("Reference.transaction",this.path),b.validateCallback("Reference.transaction",1,t,!1),b.validateCallback("Reference.transaction",2,e,!0),kt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new b.Deferred;"function"==typeof e&&r.promise.catch(function(){});var i=function(t,n,i){t?r.reject(t):r.resolve(new Nt(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){b.validateArgCount("Reference.setPriority",1,2,arguments.length),Ct("Reference.setPriority",this.path),_t("Reference.setPriority",1,t,!1),b.validateCallback("Reference.setPriority",2,e,!0);var n=new b.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){b.validateArgCount("Reference.push",0,2,arguments.length),Ct("Reference.push",this.path),vt("Reference.push",1,t,this.path,!0),b.validateCallback("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=Dt(r),o=this.child(i),a=this.child(i);return n=null!=t?o.set(t,e).then(function(){return a}):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),o},e.prototype.onDisconnect=function(){return Ct("Reference.onDisconnect",this.path),new At(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),e}(ce);ce.__referenceConstructor=_n,Fe.__referenceConstructor=_n;/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var wn,En=function(){function t(){this.children={},this.childCount=0,this.value=null}return t}(),Tn=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new En),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n,r=e instanceof it?e:new it(e),i=this;null!==(n=r.getFront());){i=new t(n,i,b.safeGet(i.node_.children,n)||new En),r=r.popFront()}return i},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){b.assert(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;b.forEach(this.node_.children,function(r,i){e(new t(r,n,i))})},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild(function(e){e.forEachDescendant(t,!0,n)}),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild(function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)})},t.prototype.path=function(){return new it(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=b.contains(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}();!function(t){t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT"}(wn||(wn={})),vn.MAX_TRANSACTION_RETRIES_=25,vn.prototype.transactions_init_=function(){this.transactionQueueTree_=new Tn},vn.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},o=new _n(this,t);o.on("value",i);var a=function(){o.off("value",i)},s={path:t,update:e,onComplete:n,status:null,order:k(),applyLocally:r,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},c=this.getLatestState_(t);s.currentInputSnapshot=c;var h=s.update(c.val());if(void 0===h){if(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete){var l=new ie(s.currentInputSnapshot,new _n(this,s.path),jt);s.onComplete(null,!1,l)}}else{mt("transaction failed: Data returned ",h,s.path),s.status=wn.RUN;var f=this.transactionQueueTree_.subTree(t),p=f.getValue()||[];p.push(s),f.setValue(p);var d=void 0;if("object"==typeof h&&null!==h&&b.contains(h,".priority"))d=b.safeGet(h,".priority"),b.assert(yt(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else{d=(this.serverSyncTree_.calcCompleteEventCache(t)||$t.EMPTY_NODE).getPriority().val()}d=d;var y=this.generateServerValues(),v=u(h,d),m=ye(v,y);s.currentOutputSnapshotRaw=v,s.currentOutputSnapshotResolved=m,s.currentWriteId=this.getNextWriteId_();var g=this.serverSyncTree_.applyUserOverwrite(t,m,s.currentWriteId,s.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,g),this.sendReadyTransactions_()}},vn.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||$t.EMPTY_NODE},vn.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);b.assert(n.length>0,"Sending zero length transaction queue");n.every(function(t){return t.status===wn.RUN})&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild(function(t){e.sendReadyTransactions_(t)})},vn.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map(function(t){return t.currentWriteId}),i=this.getLatestState_(t,r),o=i,a=i.hash(),s=0;s<e.length;s++){var u=e[s];b.assert(u.status===wn.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=wn.SENT,u.retryCount++;var c=it.relativePath(t,u.path);o=o.updateChild(c,u.currentOutputSnapshotRaw)}var h=o.val(!0),l=t;this.server_.put(l.toString(),h,function(r){n.log_("transaction put response",{path:l.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=0;a<e.length;a++){if(e[a].status=wn.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[a].currentWriteId)),e[a].onComplete){var s=e[a].currentOutputSnapshotResolved,u=new _n(n,e[a].path),c=new ie(s,u,jt);o.push(e[a].onComplete.bind(null,null,!0,c))}e[a].unwatcher()}n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i);for(var a=0;a<o.length;a++)et(o[a])}else{if("datastale"===r)for(var a=0;a<e.length;a++)e[a].status===wn.SENT_NEEDS_ABORT?e[a].status=wn.NEEDS_ABORT:e[a].status=wn.RUN;else{F("transaction at "+l.toString()+" failed: "+r);for(var a=0;a<e.length;a++)e[a].status=wn.NEEDS_ABORT,e[a].abortReason=r}n.rerunTransactions_(t)}},a)},vn.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},vn.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter(function(t){return t.status===wn.RUN}),o=i.map(function(t){return t.currentWriteId}),a=0;a<t.length;a++){var s=t[a],c=it.relativePath(e,s.path),h=!1,l=void 0;if(b.assert(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),s.status===wn.NEEDS_ABORT)h=!0,l=s.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else if(s.status===wn.RUN)if(s.retryCount>=vn.MAX_TRANSACTION_RETRIES_)h=!0,l="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else{var f=this.getLatestState_(s.path,o);s.currentInputSnapshot=f;var p=t[a].update(f.val());if(void 0!==p){mt("transaction failed: Data returned ",p,s.path);var d=u(p),y="object"==typeof p&&null!=p&&b.contains(p,".priority");y||(d=d.updatePriority(f.getPriority()));var v=s.currentWriteId,m=this.generateServerValues(),g=ye(d,m);s.currentOutputSnapshotRaw=d,s.currentOutputSnapshotResolved=g,s.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(v),1),r=r.concat(this.serverSyncTree_.applyUserOverwrite(s.path,g,s.currentWriteId,s.applyLocally)),r=r.concat(this.serverSyncTree_.ackUserWrite(v,!0))}else h=!0,l="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],h&&(t[a].status=wn.COMPLETED,function(t){setTimeout(t,Math.floor(0))}(t[a].unwatcher),t[a].onComplete))if("nodata"===l){var _=new _n(this,t[a].path),w=t[a].currentInputSnapshot,E=new ie(w,_,jt);n.push(t[a].onComplete.bind(null,null,!1,E))}else n.push(t[a].onComplete.bind(null,new Error(l),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(var a=0;a<n.length;a++)et(n[a]);this.sendReadyTransactions_()}},vn.prototype.getAncestorTransactionNode_=function(t){for(var e,n=this.transactionQueueTree_;null!==(e=t.getFront())&&null===n.getValue();)n=n.subTree(e),t=t.popFront();return n},vn.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},vn.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},vn.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==wn.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},vn.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},vn.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)if(e[o].status===wn.SENT_NEEDS_ABORT);else if(e[o].status===wn.SENT)b.assert(i===o-1,"All SENT items should be at beginning of queue."),i=o,e[o].status=wn.SENT_NEEDS_ABORT,e[o].abortReason="set";else if(b.assert(e[o].status===wn.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete){n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))}-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r);for(var o=0;o<n.length;o++)et(n[o])}};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Sn,Cn=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return Sn||(Sn=new t),Sn},t.prototype.interrupt=function(){for(var t in this.repos_)for(var e in this.repos_[t])this.repos_[t][e].interrupt()},t.prototype.resume=function(){for(var t in this.repos_)for(var e in this.repos_[t])this.repos_[t][e].resume()},t.prototype.databaseFromApp=function(t,e){var n=e||t.options.databaseURL;void 0===n&&M("Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.initializeApp().");var r=ut(n),i=r.repoInfo;return It("Invalid Firebase Database URL",1,r),r.path.isEmpty()||M("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(i,t).database},t.prototype.deleteRepo=function(t){var e=b.safeGet(this.repos_,t.app.name);e&&b.safeGet(e,t.repoInfo_.toURLString())===t||M("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},t.prototype.createRepo=function(t,e){var n=b.safeGet(this.repos_,e.name);n||(n={},this.repos_[e.name]=n);var r=b.safeGet(n,t.toURLString());return r&&M("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new vn(t,this.useRestClient_,e),n[t.toURLString()]=r,r},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),In=function(){function t(t){this.repo_=t,t instanceof vn||M("Don't call new Database() directly - please use firebase.database()."),this.root_=new _n(t,it.Empty),this.INTERNAL=new kn(this)}return Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),t.prototype.ref=function(t){return this.checkDeleted_("ref"),b.validateArgCount("database.ref",0,1,arguments.length),t instanceof _n?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),b.validateArgCount(e,1,1,arguments.length);var n=ut(t);It(e,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&M(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repo_&&M("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){b.validateArgCount("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){b.validateArgCount("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"}},t}(),kn=function(){function t(t){this.database=t}return t.prototype.delete=function(){return g.__awaiter(this,void 0,void 0,function(){return g.__generator(this,function(t){return this.database.checkDeleted_("delete"),Cn.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})})},t}(),An=function(){un.forceDisallow(),on.forceAllow()},Nn=function(){on.forceDisallow()},Dn=function(){return un.isAvailable()},On=function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},Rn=function(t,e){t.repo.stats(e)},xn=function(t,e){t.repo.statsIncrementCounter(e)},Pn=function(t){return t.repo.dataUpdateCount},Ln=function(t,e){return t.repo.interceptServerData_(e)},Mn=Object.freeze({forceLongPolling:An,forceWebSockets:Nn,isWebSocketsAvailable:Dn,setSecurityDebugCallback:On,stats:Rn,statsIncrementCounter:xn,dataUpdateCount:Pn,interceptServerData:Ln}),Fn=dn;dn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},dn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Un=hn,jn=function(t){var e=dn.prototype.put;return dn.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){dn.prototype.put=e}},qn=st,Vn=function(t){return t.queryIdentifier()},Bn=function(t){return t.repo.persistentConnection_.listens_},Wn=function(t){Cn.getInstance().forceRestClient(t)},Kn=Object.freeze({DataConnection:Fn,RealTimeConnection:Un,hijackHash:jn,ConnectionTarget:qn,queryIdentifier:Vn,listens:Bn,forceRestClient:Wn}),Qn=In.ServerValue;c(m),e.DataSnapshot=ie,e.Database=In,e.OnDisconnect=At,e.Query=ce,e.Reference=_n,e.ServerValue=Qn,e.enableLogging=R,e.registerDatabase=c}).call(e,n("W2nU"))},jE8y:function(t,e,n){var r=n("MzAl");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,t.call(n,[]),e=n instanceof Array}catch(t){}return function(n,i){return r(n,i),e?t.call(n,i):n.__proto__=i,n}}():void 0)},jgJS:function(t,e,n){var r=n("raVe"),i=n("jAiL")("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),i))?n:o?r(e):"Object"==(s=r(e))&&"function"==typeof e.callee?"Arguments":s}},jq8k:function(t,e,n){n("Ld14")("isConcatSpreadable")},jyFz:function(t,e,n){var r=function(){return this}()||Function("return this")(),i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=n("SldL"),i)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(t){r.regeneratorRuntime=void 0}},kkvn:function(t,e,n){var r,i,o,a=n("3fMt"),s=n("eg8w"),u=n("+iDZ"),c=n("PY1i"),h=n("YjQv"),l=h.process,f=h.setImmediate,p=h.clearImmediate,d=h.MessageChannel,y=h.Dispatch,v=0,m={},g=function(){var t=+this;if(m.hasOwnProperty(t)){var e=m[t];delete m[t],e()}},b=function(t){g.call(t.data)};f&&p||(f=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return m[++v]=function(){s("function"==typeof t?t:Function(t),e)},r(v),v},p=function(t){delete m[t]},"process"==n("NZra")(l)?r=function(t){l.nextTick(a(g,t,1))}:y&&y.now?r=function(t){y.now(a(g,t,1))}:d?(i=new d,o=i.port2,i.port1.onmessage=b,r=a(o.postMessage,o,1)):h.addEventListener&&"function"==typeof postMessage&&!h.importScripts?(r=function(t){h.postMessage(t+"","*")},h.addEventListener("message",b,!1)):r="onreadystatechange"in c("script")?function(t){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),g.call(t)}}:function(t){setTimeout(a(g,t,1),0)}),t.exports={set:f,clear:p}},kpD2:function(t,e,n){t.exports=n("z3Ps")},ksFB:function(t,e,n){var r=n("wiaE"),i=n("+MZ2");t.exports=function(t){return r(i(t))}},kxiW:function(t,e,n){"use strict";n("DFDv");var r=function(t){return t&&"object"==typeof t&&"default"in t?t.default:t}(n("O4tu"));n("fqSz"),n("jE0U"),n("Wk+B"),n("aEs4"),n("dqyG"),n("D8I6"),/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport * as firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),t.exports=r},"l/2K":function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},ls6R:function(t,e){!function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function n(t){return"string"!=typeof t&&(t=String(t)),t}function r(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return m.iterable&&(e[Symbol.iterator]=function(){return e}),e}function i(t){this.map={},t instanceof i?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function o(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function a(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function s(t){var e=new FileReader,n=a(e);return e.readAsArrayBuffer(t),n}function u(t){var e=new FileReader,n=a(e);return e.readAsText(t),n}function c(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}function h(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function l(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(m.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(m.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(m.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(m.arrayBuffer&&m.blob&&b(t))this._bodyArrayBuffer=h(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!m.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!_(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=h(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):m.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},m.blob&&(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},m.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(t){var e=t.toUpperCase();return w.indexOf(e)>-1?e:t}function p(t,e){e=e||{};var n=e.body;if(t instanceof p){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new i(t.headers)),this.method=t.method,this.mode=t.mode,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new i(e.headers)),this.method=f(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function d(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}}),e}function y(t){var e=new i;return t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}}),e}function v(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new i(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var m={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(m.arrayBuffer)var g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],b=function(t){return t&&DataView.prototype.isPrototypeOf(t)},_=ArrayBuffer.isView||function(t){return t&&g.indexOf(Object.prototype.toString.call(t))>-1};i.prototype.append=function(t,r){t=e(t),r=n(r);var i=this.map[t];this.map[t]=i?i+","+r:r},i.prototype.delete=function(t){delete this.map[e(t)]},i.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},i.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},i.prototype.set=function(t,r){this.map[e(t)]=n(r)},i.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},i.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),r(t)},i.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),r(t)},i.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),r(t)},m.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},l.call(p.prototype),l.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},v.error=function(){var t=new v(null,{status:0,statusText:""});return t.type="error",t};var E=[301,302,303,307,308];v.redirect=function(t,e){if(-1===E.indexOf(e))throw new RangeError("Invalid status code");return new v(null,{status:e,headers:{location:t}})},t.Headers=i,t.Request=p,t.Response=v,t.fetch=function(t,e){return new Promise(function(n,r){var i=new p(t,e),o=new XMLHttpRequest;o.onload=function(){var t={status:o.status,statusText:o.statusText,headers:y(o.getAllResponseHeaders()||"")};t.url="responseURL"in o?o.responseURL:t.headers.get("X-Request-URL");var e="response"in o?o.response:o.responseText;n(new v(e,t))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials?o.withCredentials=!0:"omit"===i.credentials&&(o.withCredentials=!1),"responseType"in o&&m.blob&&(o.responseType="blob"),i.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),o.send(void 0===i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},m1su:function(t,e,n){n("qnda"),t.exports=n("flBj")("Array","find")},mWhC:function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},mgCp:function(t,e,n){"use strict";var r,i,o,a,s=n("c8Kh"),u=n("YjQv"),c=n("3fMt"),h=n("FHqv"),l=n("Wdy1"),f=n("8ANE"),p=n("SWGL"),d=n("4S0F"),y=n("dudK"),v=n("BfX3"),m=n("kkvn").set,g=n("LKnP")(),b=n("3HN9"),_=n("AgWD"),w=n("ht0Q"),E=n("qC2Z"),T=u.TypeError,S=u.process,C=S&&S.versions,I=C&&C.v8||"",k=u.Promise,A="process"==h(S),N=function(){},D=i=b.f,O=!!function(){try{var t=k.resolve(1),e=(t.constructor={})[n("hgbu")("species")]=function(t){t(N,N)};return(A||"function"==typeof PromiseRejectionEvent)&&t.then(N)instanceof e&&0!==I.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(t){}}(),R=function(t){var e;return!(!f(t)||"function"!=typeof(e=t.then))&&e},x=function(t,e){if(!t._n){t._n=!0;var n=t._c;g(function(){for(var r=t._v,i=1==t._s,o=0;n.length>o;)!function(e){var n,o,a,s=i?e.ok:e.fail,u=e.resolve,c=e.reject,h=e.domain;try{s?(i||(2==t._h&&M(t),t._h=1),!0===s?n=r:(h&&h.enter(),n=s(r),h&&(h.exit(),a=!0)),n===e.promise?c(T("Promise-chain cycle")):(o=R(n))?o.call(n,u,c):u(n)):c(r)}catch(t){h&&!a&&h.exit(),c(t)}}(n[o++]);t._c=[],t._n=!1,e&&!t._h&&P(t)})}},P=function(t){m.call(u,function(){var e,n,r,i=t._v,o=L(t);if(o&&(e=_(function(){A?S.emit("unhandledRejection",i,t):(n=u.onunhandledrejection)?n({promise:t,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)}),t._h=A||L(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},L=function(t){return 1!==t._h&&0===(t._a||t._c).length},M=function(t){m.call(u,function(){var e;A?S.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})})},F=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),x(e,!0))},U=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw T("Promise can't be resolved itself");(e=R(t))?g(function(){var r={_w:n,_d:!1};try{e.call(t,c(U,r,1),c(F,r,1))}catch(t){F.call(r,t)}}):(n._v=t,n._s=1,x(n,!1))}catch(t){F.call({_w:n,_d:!1},t)}}};O||(k=function(t){d(this,k,"Promise","_h"),p(t),r.call(this);try{t(c(U,this,1),c(F,this,1))}catch(t){F.call(this,t)}},r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n("nJ75")(k.prototype,{then:function(t,e){var n=D(v(this,k));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=A?S.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&x(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new r;this.promise=t,this.resolve=c(U,t,1),this.reject=c(F,t,1)},b.f=D=function(t){return t===k||t===a?new o(t):i(t)}),l(l.G+l.W+l.F*!O,{Promise:k}),n("LhDF")(k,"Promise"),n("EFoD")("Promise"),a=n("iANj").Promise,l(l.S+l.F*!O,"Promise",{reject:function(t){var e=D(this);return(0,e.reject)(t),e.promise}}),l(l.S+l.F*(s||!O),"Promise",{resolve:function(t){return E(s&&this===a?k:this,t)}}),l(l.S+l.F*!(O&&n("wWcv")(function(t){k.all(t).catch(N)})),"Promise",{all:function(t){var e=this,n=D(e),r=n.resolve,i=n.reject,o=_(function(){var n=[],o=0,a=1;y(t,!1,function(t){var s=o++,u=!1;n.push(void 0),a++,e.resolve(t).then(function(t){u||(u=!0,n[s]=t,--a||r(n))},i)}),--a||r(n)});return o.e&&i(o.v),n.promise},race:function(t){var e=this,n=D(e),r=n.reject,i=_(function(){y(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},mypn:function(t,e,n){(function(t,e){!function(t,n){"use strict";function r(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return c[u]=r,s(u),u++}function i(t){delete c[t]}function o(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}function a(t){if(h)setTimeout(a,0,t);else{var e=c[t];if(e){h=!0;try{o(e)}finally{i(t),h=!1}}}}if(!t.setImmediate){var s,u=1,c={},h=!1,l=t.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(t);f=f&&f.setTimeout?f:t,"[object process]"==={}.toString.call(t.process)?function(){s=function(t){e.nextTick(function(){a(t)})}}():function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&a(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),s=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){a(t.data)},s=function(e){t.port2.postMessage(e)}}():l&&"onreadystatechange"in l.createElement("script")?function(){var t=l.documentElement;s=function(e){var n=l.createElement("script");n.onreadystatechange=function(){a(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():function(){s=function(t){setTimeout(a,0,t)}}(),f.setImmediate=r,f.clearImmediate=i}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,n("DuR2"),n("W2nU"))},nJ75:function(t,e,n){var r=n("aLzV");t.exports=function(t,e,n){for(var i in e)n&&t[i]?t[i]=e[i]:r(t,i,e[i]);return t}},nbYV:function(t,e,n){"use strict";var r=n("xDUa"),i=n("40x7"),o=n("CTE+")("startsWith"),a="".startsWith;n("i9tX")({target:"String",proto:!0,forced:!o},{startsWith:function(t){var e=i(this,t,"startsWith"),n=r(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),o=String(t);return a?a.call(e,o,n):e.slice(n,n+o.length)===o}})},nhXg:function(t,e,n){n("Ld14")("toPrimitive")},"o/tC":function(t,e,n){var r=n("q0qZ"),i=n("1rEs"),o=n("5+O3"),a=n("/09a");t.exports=r?Object.defineProperties:function(t,e){o(t);for(var n,r=a(e),s=r.length,u=0;s>u;)i.f(t,n=r[u++],e[n]);return t}},odTk:function(t,e,n){t.exports=n("hcE8")},ot7w:function(t,e,n){"use strict";var r=n("UFcy").IteratorPrototype,i=n("43zn"),o=n("C1ru"),a=n("GB3+"),s=n("eZ0g"),u=function(){return this};t.exports=function(t,e,n){var c=e+" Iterator";return t.prototype=i(r,{next:o(1,n)}),a(t,c,!1,!0),s[c]=u,t}},pEGt:function(t,e,n){var r=n("DvwR"),i=n("B5V0");t.exports=Object.keys||function(t){return r(t,i)}},pVRE:function(t,e,n){var r=n("r54x"),i=n("jAiL")("species");t.exports=function(t){return!r(function(){var e=[],n=e.constructor={};return n[i]=function(){return{foo:1}},1!==e[t](Boolean).foo})}},pXic:function(t,e,n){n("i9tX")({target:"String",proto:!0},{repeat:n("8phf")})},pzR0:function(t,e){t.exports=!1},q0qZ:function(t,e,n){t.exports=!n("r54x")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},qC2Z:function(t,e,n){var r=n("FKWp"),i=n("8ANE"),o=n("3HN9");t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},qnda:function(t,e,n){"use strict";var r=n("649e")(5),i=!0;"find"in[]&&Array(1).find(function(){i=!1}),n("i9tX")({target:"Array",proto:!0,forced:i},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n("HLWT")("find")},"qs+f":function(t,e,n){t.exports=!n("zyKz")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},"r3+g":function(t,e,n){var r=n("GCs6"),i=n("FKWp"),o=n("pEGt");t.exports=n("qs+f")?Object.defineProperties:function(t,e){i(t);for(var n,a=o(e),s=a.length,u=0;s>u;)r.f(t,n=a[u++],e[n]);return t}},r54x:function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},rF9q:function(t,e,n){var r=n("raVe");t.exports=Array.isArray||function(t){return"Array"==r(t)}},rUAC:function(t,e,n){var r=n("mWhC"),i=n("hiy0");t.exports=function(t,e,n){var o,a,s=String(i(t)),u=r(e),c=s.length;return u<0||u>=c?n?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?n?s.charAt(u):o:n?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}},raVe:function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},rjj0:function(t,e,n){function r(t){for(var e=0;e<t.length;e++){var n=t[e],r=h[n.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](n.parts[i]);for(;i<n.parts.length;i++)r.parts.push(o(n.parts[i]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{for(var a=[],i=0;i<n.parts.length;i++)a.push(o(n.parts[i]));h[n.id]={id:n.id,refs:1,parts:a}}}}function i(){var t=document.createElement("style");return t.type="text/css",l.appendChild(t),t}function o(t){var e,n,r=document.querySelector("style["+m+'~="'+t.id+'"]');if(r){if(d)return y;r.parentNode.removeChild(r)}if(g){var o=p++;r=f||(f=i()),e=a.bind(null,r,o,!1),n=a.bind(null,r,o,!0)}else r=i(),e=s.bind(null,r),n=function(){r.parentNode.removeChild(r)};return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else n()}}function a(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=b(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function s(t,e){var n=e.css,r=e.media,i=e.sourceMap;if(r&&t.setAttribute("media",r),v.ssrId&&t.setAttribute(m,e.id),i&&(n+="\n/*# sourceURL="+i.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var u="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!u)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var c=n("tTVk"),h={},l=u&&(document.head||document.getElementsByTagName("head")[0]),f=null,p=0,d=!1,y=function(){},v=null,m="data-vue-ssr-id",g="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());t.exports=function(t,e,n,i){d=n,v=i||{};var o=c(t,e);return r(o),function(e){for(var n=[],i=0;i<o.length;i++){var a=o[i],s=h[a.id];s.refs--,n.push(s)}e?(o=c(t,e),r(o)):o=[];for(var i=0;i<n.length;i++){var s=n[i];if(0===s.refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete h[s.id]}}}};var b=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},rx2W:function(t,e,n){n("pXic"),t.exports=n("flBj")("String","repeat")},siPu:function(t,e,n){var r=n("izte")("keys"),i=n("17Rs");t.exports=function(t){return r[t]||(r[t]=i(t))}},tAQF:function(t,e,n){n("Ld14")("patternMatch")},tRuv:function(t,e,n){n("Ld14")("hasInstance")},tTVk:function(t,e){t.exports=function(t,e){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],a=o[0],s=o[1],u=o[2],c=o[3],h={id:t+":"+i,css:s,media:u,sourceMap:c};r[a]?r[a].parts.push(h):n.push(r[a]={id:a,parts:[h]})}return n}},tf1T:function(t,e,n){"use strict";(function(t,e){function n(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){return e.reject(n)})})}function r(){}function i(t,e){return function(){t.apply(e,arguments)}}function o(t){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(t,this)}function a(t,e){for(;3===t._state;)t=t._value;if(0===t._state)return void t._deferreds.push(e);t._handled=!0,o._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null===n)return void(1===t._state?s:u)(e.promise,t._value);var r;try{r=n(t._value)}catch(t){return void u(e.promise,t)}s(e.promise,r)})}function s(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof o)return t._state=3,t._value=e,void c(t);if("function"==typeof n)return void l(i(n,e),t)}t._state=1,t._value=e,c(t)}catch(e){u(t,e)}}function u(t,e){t._state=2,t._value=e,c(t)}function c(t){2===t._state&&0===t._deferreds.length&&o._immediateFn(function(){t._handled||o._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)a(t,t._deferreds[e]);t._deferreds=null}function h(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function l(t,e){var n=!1;try{t(function(t){n||(n=!0,s(e,t))},function(t){n||(n=!0,u(e,t))})}catch(t){if(n)return;n=!0,u(e,t)}}var f=setTimeout;o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){var n=new this.constructor(r);return a(this,new h(t,e,n)),n},o.prototype.finally=n,o.all=function(t){return new o(function(e,n){function r(t,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){r(t,e)},n)}i[t]=a,0==--o&&e(i)}catch(t){n(t)}}if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var i=Array.prototype.slice.call(t);if(0===i.length)return e([]);for(var o=i.length,a=0;a<i.length;a++)r(a,i[a])})},o.resolve=function(t){return t&&"object"==typeof t&&t.constructor===o?t:new o(function(e){e(t)})},o.reject=function(t){return new o(function(e,n){n(t)})},o.race=function(t){return new o(function(e,n){for(var r=0,i=t.length;r<i;r++)t[r].then(e,n)})},o._immediateFn="function"==typeof t&&function(e){t(e)}||function(t){f(t,0)},o._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var p=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e)return e;throw new Error("unable to locate global object")}();"Promise"in p?p.Promise.prototype.finally||(p.Promise.prototype.finally=n):p.Promise=o}).call(e,n("162o").setImmediate,n("DuR2"))},tn1D:function(t,e,n){var r=n("FKWp");t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&r(o.call(t)),e}}},tz60:function(t,e,n){"use strict";var r=n("0Lvz")(!0);n("4dmN")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},uUYp:function(t,e,n){n("f9UU"),t.exports=n("odTk").Object.assign},vQY2:function(t,e,n){"use strict";var r=n("649e")(6),i=!0;"findIndex"in[]&&Array(1).findIndex(function(){i=!1}),n("i9tX")({target:"Array",proto:!0,forced:i},{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n("HLWT")("findIndex")},"vw/H":function(t,e,n){var r=n("eTT4"),i=Object.prototype;r!==i.toString&&n("+opI")(i,"toString",r,{unsafe:!0})},wWcv:function(t,e,n){var r=n("hgbu")("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},t(o)}catch(t){}return n}},wXdB:function(t,e,n){var r=n("+MZ2");t.exports=function(t){return Object(r(t))}},whWw:function(t,e,n){var r=n("HAas");t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},wiMi:function(t,e,n){"use strict";var r=n("rF9q"),i=n("HAas"),o=n("EJk4"),a=n("xDUa"),s=n("hffE"),u=n("MkIS"),c=n("jAiL")("isConcatSpreadable"),h=!n("r54x")(function(){var t=[];return t[c]=!1,t.concat()[0]!==t}),l=n("pVRE")("concat"),f=function(t){if(!i(t))return!1;var e=t[c];return void 0!==e?!!e:r(t)},p=!h||!l;n("i9tX")({target:"Array",proto:!0,forced:p},{concat:function(t){var e,n,r,i,c,h=o(this),l=u(h,0),p=0;for(e=-1,r=arguments.length;e<r;e++)if(c=-1===e?h:arguments[e],f(c)){if(i=a(c.length),p+i>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<i;n++,p++)n in c&&s(l,p,c[n])}else{if(p>=9007199254740991)throw TypeError("Maximum allowed index exceeded");s(l,p++,c)}return l.length=p,l}})},wiaE:function(t,e,n){var r=n("NZra");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},wkAD:function(t,e,n){n("GB3+")(Math,"Math",!0)},wkr2:function(t,e,n){var r=n("1rEs"),i=n("C1ru");t.exports=n("q0qZ")?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},wzd1:function(t,e,n){var r=n("l/2K"),i=n("EJk4"),o=n("siPu")("IE_PROTO"),a=n("HVdB"),s=Object.prototype;t.exports=a?Object.getPrototypeOf:function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},"x//u":function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},"x/31":function(t,e,n){n("gCWN"),n("tz60"),n("+3lO"),n("mgCp"),n("+GuK"),n("Nrqz"),t.exports=n("iANj").Promise},xDUa:function(t,e,n){var r=n("mWhC"),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},xZWZ:function(t,e,n){!function(t){function e(){return"Markdown.mk_block( "+uneval(this.toString())+", "+uneval(this.trailing)+", "+uneval(this.lineNumber)+" )"}function r(){var t=n("OMJi");return"Markdown.mk_block( "+t.inspect(this.toString())+", "+t.inspect(this.trailing)+", "+t.inspect(this.lineNumber)+" )"}function i(t){for(var e=0,n=-1;-1!==(n=t.indexOf("\n",n+1));)e++;return e}function o(t,e){function n(t){this.len_after=t,this.name="close_"+e}var r=t+"_state",i="strong"==t?"em_state":"strong_state";return function(o,a){if(this[r][0]==e)return this[r].shift(),[o.length,new n(o.length-e.length)];var s=this[i].slice(),u=this[r].slice();this[r].unshift(e);var c=this.processInline(o.substr(e.length)),h=c[c.length-1];this[r].shift();if(h instanceof n){c.pop();return[o.length-h.len_after,[t].concat(c)]}return this[i]=s,this[r]=u,[e.length,e]}}function s(t){for(var e=t.split(""),n=[""],r=!1;e.length;){var i=e.shift();switch(i){case" ":r?n[n.length-1]+=i:n.push("");break;case"'":case'"':r=!r;break;case"\\":i=e.shift();default:n[n.length-1]+=i}}return n}function u(t){return m(t)&&t.length>1&&"object"==typeof t[1]&&!m(t[1])?t[1]:void 0}function c(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function h(t){if("string"==typeof t)return c(t);var e=t.shift(),n={},r=[];for(!t.length||"object"!=typeof t[0]||t[0]instanceof Array||(n=t.shift());t.length;)r.push(h(t.shift()));var i="";for(var o in n)i+=" "+o+'="'+c(n[o])+'"';return"img"==e||"br"==e||"hr"==e?"<"+e+i+"/>":"<"+e+i+">"+r.join("")+"</"+e+">"}function l(t,e,n){var r;n=n||{};var i=t.slice(0);"function"==typeof n.preprocessTreeNode&&(i=n.preprocessTreeNode(i,e));var o=u(i);if(o){i[1]={};for(r in o)i[1][r]=o[r];o=i[1]}if("string"==typeof i)return i;switch(i[0]){case"header":i[0]="h"+i[1].level,delete i[1].level;break;case"bulletlist":i[0]="ul";break;case"numberlist":i[0]="ol";break;case"listitem":i[0]="li";break;case"para":i[0]="p";break;case"markdown":i[0]="html",o&&delete o.references;break;case"code_block":i[0]="pre",r=o?2:1;var a=["code"];a.push.apply(a,i.splice(r,i.length-r)),i[r]=a;break;case"inlinecode":i[0]="code";break;case"img":i[1].src=i[1].href,delete i[1].href;break;case"linebreak":i[0]="br";break;case"link":i[0]="a";break;case"link_ref":i[0]="a";var s=e[o.ref];if(!s)return o.original;delete o.ref,o.href=s.href,s.title&&(o.title=s.title),delete o.original;break;case"img_ref":i[0]="img";var s=e[o.ref];if(!s)return o.original;delete o.ref,o.src=s.href,s.title&&(o.title=s.title),delete o.original}if(r=1,o){for(var c in i[1]){r=2;break}1===r&&i.splice(r,1)}for(;r<i.length;++r)i[r]=l(i[r],e,n);return i}function f(t){for(var e=u(t)?2:1;e<t.length;)"string"==typeof t[e]?e+1<t.length&&"string"==typeof t[e+1]?t[e]+=t.splice(e+1,1)[0]:++e:(f(t[e]),++e)}var d=t.Markdown=function(t){switch(typeof t){case"undefined":this.dialect=d.dialects.Gruber;break;case"object":this.dialect=t;break;default:if(!(t in d.dialects))throw new Error("Unknown Markdown dialect '"+String(t)+"'");this.dialect=d.dialects[t]}this.em_state=[],this.strong_state=[],this.debug_indent=""};t.parse=function(t,e){return new d(e).toTree(t)},t.toHTML=function(e,n,r){var i=t.toHTMLTree(e,n,r);return t.renderJsonML(i)},t.toHTMLTree=function(t,e,n){"string"==typeof t&&(t=this.parse(t,e));var r=u(t),i={};r&&r.references&&(i=r.references);var o=l(t,i,n);return f(o),o};var y=d.mk_block=function(t,n,i){1==arguments.length&&(n="\n\n");var o=new String(t);return o.trailing=n,o.inspect=r,o.toSource=e,void 0!=i&&(o.lineNumber=i),o};d.prototype.split_blocks=function(t,e){t=t.replace(/(\r\n|\n|\r)/g,"\n");var n,r=/([\s\S]+?)($|\n#|\n(?:\s*\n|$)+)/g,o=[],a=1;for(null!=(n=/^(\s*\n)/.exec(t))&&(a+=i(n[0]),r.lastIndex=n[0].length);null!==(n=r.exec(t));)"\n#"==n[2]&&(n[2]="\n",r.lastIndex--),o.push(y(n[1],n[2],a)),a+=i(n[0]);return o},d.prototype.processBlock=function(t,e){var n=this.dialect.block,r=n.__order__;if("__call__"in n)return n.__call__.call(this,t,e);for(var i=0;i<r.length;i++){var o=n[r[i]].call(this,t,e);if(o)return(!m(o)||o.length>0&&!m(o[0]))&&this.debug(r[i],"didn't return a proper array"),o}return[]},d.prototype.processInline=function(t){return this.dialect.inline.__call__.call(this,String(t))},d.prototype.toTree=function(t,e){var n=t instanceof Array?t:this.split_blocks(t),r=this.tree;try{for(this.tree=e||this.tree||["markdown"];n.length;){var i=this.processBlock(n.shift(),n);i.length&&this.tree.push.apply(this.tree,i)}return this.tree}finally{e&&(this.tree=r)}},d.prototype.debug=function(){var t=Array.prototype.slice.call(arguments);t.unshift(this.debug_indent),"undefined"!=typeof print&&print.apply(print,t),"undefined"!=typeof console&&void 0!==console.log&&console.log.apply(null,t)},d.prototype.loop_re_over_block=function(t,e,n){for(var r,i=e.valueOf();i.length&&null!=(r=t.exec(i));)i=i.substr(r[0].length),n.call(this,r);return i},d.dialects={},d.dialects.Gruber={block:{atxHeader:function(t,e){var n=t.match(/^(#{1,6})\s*(.*?)\s*#*\s*(?:\n|$)/);if(n){var r=["header",{level:n[1].length}];return Array.prototype.push.apply(r,this.processInline(n[2])),n[0].length<t.length&&e.unshift(y(t.substr(n[0].length),t.trailing,t.lineNumber+2)),[r]}},setextHeader:function(t,e){var n=t.match(/^(.*)\n([-=])\2\2+(?:\n|$)/);if(n){var r="="===n[2]?1:2,i=["header",{level:r},n[1]];return n[0].length<t.length&&e.unshift(y(t.substr(n[0].length),t.trailing,t.lineNumber+2)),[i]}},code:function(t,e){var n=[],r=/^(?: {0,3}\t| {4})(.*)\n?/;if(t.match(r)){t:for(;;){var i=this.loop_re_over_block(r,t.valueOf(),function(t){n.push(t[1])});if(i.length){e.unshift(y(i,t.trailing));break t}if(!e.length)break t;if(!e[0].match(r))break t;n.push(t.trailing.replace(/[^\n]/g,"").substring(2)),t=e.shift()}return[["code_block",n.join("\n")]]}},horizRule:function(t,e){var n=t.match(/^(?:([\s\S]*?)\n)?[ \t]*([-_*])(?:[ \t]*\2){2,}[ \t]*(?:\n([\s\S]*))?$/);if(n){var r=[["hr"]];return n[1]&&r.unshift.apply(r,this.processBlock(n[1],[])),n[3]&&e.unshift(y(n[3])),r}},lists:function(){function t(t){return new RegExp("(?:^("+u+"{0,"+t+"} {0,3})("+o+")\\s+)|(^"+u+"{0,"+(t-1)+"}[ ]{0,4})")}function e(t){return t.replace(/ {0,3}\t/g,"    ")}function n(t,e,n,r){if(e)return void t.push(["para"].concat(n));var i=t[t.length-1]instanceof Array&&"para"==t[t.length-1][0]?t[t.length-1]:t;r&&t.length>1&&n.unshift(r);for(var o=0;o<n.length;o++){var a=n[o];"string"==typeof a&&i.length>1&&"string"==typeof i[i.length-1]?i[i.length-1]+=a:i.push(a)}}function r(t,e){for(var n=new RegExp("^("+u+"{"+t+"}.*?\\n?)*$"),r=new RegExp("^"+u+"{"+t+"}","gm"),i=[];e.length>0&&n.exec(e[0]);){var o=e.shift(),a=o.replace(r,"");i.push(y(a,o.trailing,o.lineNumber))}return i}function i(t,e,n){var r=t.list,i=r[r.length-1];if(!(i[1]instanceof Array&&"para"==i[1][0]))if(e+1==n.length)i.push(["para"].concat(i.splice(1,i.length-1)));else{var o=i.pop();i.push(["para"].concat(i.splice(1,i.length-1)),o)}}var o="[*+-]|\\d+\\.",a=/[*+-]/,s=new RegExp("^( {0,3})("+o+")[ \t]+"),u="(?: {0,3}\\t| {4})";return function(o,u){function c(t){var e=a.exec(t[2])?["bulletlist"]:["numberlist"];return p.push({list:e,indent:t[1]}),e}var h=o.match(s);if(h){for(var l,f,p=[],d=c(h),y=!1,m=[p[0].list];;){for(var g=o.split(/(?=\n)/),b="",_=0;_<g.length;_++){var w="",E=g[_].replace(/^\n/,function(t){return w=t,""}),T=t(p.length);if(h=E.match(T),void 0!==h[1]){b.length&&(n(l,y,this.processInline(b),w),y=!1,b=""),h[1]=e(h[1]);var S=Math.floor(h[1].length/4)+1;if(S>p.length)d=c(h),l.push(d),l=d[1]=["listitem"];else{var C=!1;for(f=0;f<p.length;f++)if(p[f].indent==h[1]){d=p[f].list,p.splice(f+1,p.length-(f+1)),C=!0;break}C||(S++,S<=p.length?(p.splice(S,p.length-S),d=p[S-1].list):(d=c(h),l.push(d))),l=["listitem"],d.push(l)}w=""}E.length>h[0].length&&(b+=w+E.substr(h[0].length))}b.length&&(n(l,y,this.processInline(b),w),y=!1,b="");var I=r(p.length,u);I.length>0&&(v(p,i,this),l.push.apply(l,this.toTree(I,[])));var k=u[0]&&u[0].valueOf()||"";if(!k.match(s)&&!k.match(/^ /))break;o=u.shift();var A=this.dialect.block.horizRule(o,u);if(A){m.push.apply(m,A);break}v(p,i,this),y=!0}return m}}}(),blockquote:function(t,e){if(t.match(/^>/m)){var n=[];if(">"!=t[0]){for(var r=t.split(/\n/),i=[],o=t.lineNumber;r.length&&">"!=r[0][0];)i.push(r.shift()),o++;var a=y(i.join("\n"),"\n",t.lineNumber);n.push.apply(n,this.processBlock(a,[])),t=y(r.join("\n"),t.trailing,o)}for(;e.length&&">"==e[0][0];){var s=e.shift();t=y(t+t.trailing+s,s.trailing,t.lineNumber)}var c=t.replace(/^> ?/gm,""),h=(this.tree,this.toTree(c,["blockquote"])),l=u(h);return l&&l.references&&(delete l.references,g(l)&&h.splice(1,1)),n.push(h),n}},referenceDefn:function(t,e){var n=/^\s*\[(.*?)\]:\s*(\S+)(?:\s+(?:(['"])(.*?)\3|\((.*?)\)))?\n?/;if(t.match(n)){u(this.tree)||this.tree.splice(1,0,{});var r=u(this.tree);void 0===r.references&&(r.references={});var i=this.loop_re_over_block(n,t,function(t){t[2]&&"<"==t[2][0]&&">"==t[2][t[2].length-1]&&(t[2]=t[2].substring(1,t[2].length-1));var e=r.references[t[1].toLowerCase()]={href:t[2]};void 0!==t[4]?e.title=t[4]:void 0!==t[5]&&(e.title=t[5])});return i.length&&e.unshift(y(i,t.trailing)),[]}},para:function(t,e){return[["para"].concat(this.processInline(t))]}}},d.dialects.Gruber.inline={__oneElement__:function(t,e,n){var r,i;if(e=e||this.dialect.inline.__patterns__,!(r=new RegExp("([\\s\\S]*?)("+(e.source||e)+")").exec(t)))return[t.length,t];if(r[1])return[r[1].length,r[1]];var i;return r[2]in this.dialect.inline&&(i=this.dialect.inline[r[2]].call(this,t.substr(r.index),r,n||[])),i=i||[r[2].length,r[2]]},__call__:function(t,e){function n(t){"string"==typeof t&&"string"==typeof i[i.length-1]?i[i.length-1]+=t:i.push(t)}for(var r,i=[];t.length>0;)r=this.dialect.inline.__oneElement__.call(this,t,e,i),t=t.substr(r.shift()),v(r,n);return i},"]":function(){},"}":function(){},__escape__:/^\\[\\`\*_{}\[\]()#\+.!\-]/,"\\":function(t){return this.dialect.inline.__escape__.exec(t)?[2,t.charAt(1)]:[1,"\\"]},"![":function(t){var e=t.match(/^!\[(.*?)\][ \t]*\([ \t]*([^")]*?)(?:[ \t]+(["'])(.*?)\3)?[ \t]*\)/);if(e){e[2]&&"<"==e[2][0]&&">"==e[2][e[2].length-1]&&(e[2]=e[2].substring(1,e[2].length-1)),e[2]=this.dialect.inline.__call__.call(this,e[2],/\\/)[0];var n={alt:e[1],href:e[2]||""};return void 0!==e[4]&&(n.title=e[4]),[e[0].length,["img",n]]}return e=t.match(/^!\[(.*?)\][ \t]*\[(.*?)\]/),e?[e[0].length,["img_ref",{alt:e[1],ref:e[2].toLowerCase(),original:e[0]}]]:[2,"!["]},"[":function(t){var e=String(t),n=d.DialectHelpers.inline_until_char.call(this,t.substr(1),"]");if(!n)return[1,"["];var r,i,o=1+n[0],a=n[1];t=t.substr(o);var s=t.match(/^\s*\([ \t]*([^"']*)(?:[ \t]+(["'])(.*?)\2)?[ \t]*\)/);if(s){var u=s[1];if(o+=s[0].length,u&&"<"==u[0]&&">"==u[u.length-1]&&(u=u.substring(1,u.length-1)),!s[3])for(var c=1,h=0;h<u.length;h++)switch(u[h]){case"(":c++;break;case")":0==--c&&(o-=u.length-h,u=u.substring(0,h))}return u=this.dialect.inline.__call__.call(this,u,/\\/)[0],i={href:u||""},void 0!==s[3]&&(i.title=s[3]),r=["link",i].concat(a),[o,r]}return s=t.match(/^\s*\[(.*?)\]/),s?(o+=s[0].length,i={ref:(s[1]||String(a)).toLowerCase(),original:e.substr(0,o)},r=["link_ref",i].concat(a),[o,r]):1==a.length&&"string"==typeof a[0]?(i={ref:a[0].toLowerCase(),original:e.substr(0,o)},r=["link_ref",i,a[0]],[o,r]):[1,"["]},"<":function(t){var e;return null!=(e=t.match(/^<(?:((https?|ftp|mailto):[^>]+)|(.*?@.*?\.[a-zA-Z]+))>/))?e[3]?[e[0].length,["link",{href:"mailto:"+e[3]},e[3]]]:"mailto"==e[2]?[e[0].length,["link",{href:e[1]},e[1].substr("mailto:".length)]]:[e[0].length,["link",{href:e[1]},e[1]]]:[1,"<"]},"`":function(t){var e=t.match(/(`+)(([\s\S]*?)\1)/);return e&&e[2]?[e[1].length+e[2].length,["inlinecode",e[3]]]:[1,"`"]},"  \n":function(t){return[3,["linebreak"]]}},d.dialects.Gruber.inline["**"]=o("strong","**"),d.dialects.Gruber.inline.__=o("strong","__"),d.dialects.Gruber.inline["*"]=o("em","*"),d.dialects.Gruber.inline._=o("em","_"),d.buildBlockOrder=function(t){var e=[];for(var n in t)"__order__"!=n&&"__call__"!=n&&e.push(n);t.__order__=e},d.buildInlinePatterns=function(t){var e=[];for(var n in t)if(!n.match(/^__.*__$/)){var r=n.replace(/([\\.*+?|()\[\]{}])/g,"\\$1").replace(/\n/,"\\n");e.push(1==n.length?r:"(?:"+r+")")}e=e.join("|"),t.__patterns__=e;var i=t.__call__;t.__call__=function(t,n){return void 0!=n?i.call(this,t,n):i.call(this,t,e)}},d.DialectHelpers={},d.DialectHelpers.inline_until_char=function(t,e){for(var n=0,r=[];;){if(t.charAt(n)==e)return n++,[n,r];if(n>=t.length)return null;var i=this.dialect.inline.__oneElement__.call(this,t.substr(n));n+=i[0],r.push.apply(r,i.slice(1))}},d.subclassDialect=function(t){function e(){}function n(){}return e.prototype=t.block,n.prototype=t.inline,{block:new e,inline:new n}},d.buildBlockOrder(d.dialects.Gruber.block),d.buildInlinePatterns(d.dialects.Gruber.inline),d.dialects.Maruku=d.subclassDialect(d.dialects.Gruber),d.dialects.Maruku.processMetaHash=function(t){for(var e=s(t),n={},r=0;r<e.length;++r)if(/^#/.test(e[r]))n.id=e[r].substring(1);else if(/^\./.test(e[r]))n.class?n.class=n.class+e[r].replace(/./," "):n.class=e[r].substring(1);else if(/\=/.test(e[r])){var i=e[r].split(/\=/);n[i[0]]=i[1]}return n},d.dialects.Maruku.block.document_meta=function(t,e){if(!(t.lineNumber>1)&&t.match(/^(?:\w+:.*\n)*\w+:.*$/)){u(this.tree)||this.tree.splice(1,0,{});var n=t.split(/\n/);for(p in n){var r=n[p].match(/(\w+):\s*(.*)$/),i=r[1].toLowerCase(),o=r[2];this.tree[1][i]=o}return[]}},d.dialects.Maruku.block.block_meta=function(t,e){var n=t.match(/(^|\n) {0,3}\{:\s*((?:\\\}|[^\}])*)\s*\}$/);if(n){var r,i=this.dialect.processMetaHash(n[2]);if(""===n[1]){var o=this.tree[this.tree.length-1];if(r=u(o),"string"==typeof o)return;r||(r={},o.splice(1,0,r));for(a in i)r[a]=i[a];return[]}var s=t.replace(/\n.*$/,""),c=this.processBlock(s,[]);r=u(c[0]),r||(r={},c[0].splice(1,0,r));for(a in i)r[a]=i[a];return c}},d.dialects.Maruku.block.definition_list=function(t,e){var n,r,i=/^((?:[^\s:].*\n)+):\s+([\s\S]+)$/,o=["dl"];if(r=t.match(i)){for(var a=[t];e.length&&i.exec(e[0]);)a.push(e.shift());for(var s=0;s<a.length;++s){var r=a[s].match(i),u=r[1].replace(/\n$/,"").split(/\n/),c=r[2].split(/\n:\s+/);for(n=0;n<u.length;++n)o.push(["dt",u[n]]);for(n=0;n<c.length;++n)o.push(["dd"].concat(this.processInline(c[n].replace(/(\n)\s+/,"$1"))))}return[o]}},d.dialects.Maruku.block.table=function(t,e){var n,r,i=function(t,e){e=e||"\\s",e.match(/^[\\|\[\]{}?*.+^$]$/)&&(e="\\"+e);for(var n,r=[],i=new RegExp("^((?:\\\\.|[^\\\\"+e+"])*)"+e+"(.*)");n=t.match(i);)r.push(n[1]),t=n[2];return r.push(t),r},o=/^ {0,3}\|(.+)\n {0,3}\|\s*([\-:]+[\-| :]*)\n((?:\s*\|.*(?:\n|$))*)(?=\n|$)/,a=/^ {0,3}(\S(?:\\.|[^\\|])*\|.*)\n {0,3}([\-:]+\s*\|[\-| :]*)\n((?:(?:\\.|[^\\|])*\|.*(?:\n|$))*)(?=\n|$)/;if(r=t.match(o))r[3]=r[3].replace(/^\s*\|/gm,"");else if(!(r=t.match(a)))return;var s=["table",["thead",["tr"]],["tbody"]];r[2]=r[2].replace(/\|\s*$/,"").split("|");var u=[];for(v(r[2],function(t){t.match(/^\s*-+:\s*$/)?u.push({align:"right"}):t.match(/^\s*:-+\s*$/)?u.push({align:"left"}):t.match(/^\s*:-+:\s*$/)?u.push({align:"center"}):u.push({})}),r[1]=i(r[1].replace(/\|\s*$/,""),"|"),n=0;n<r[1].length;n++)s[1][1].push(["th",u[n]||{}].concat(this.processInline(r[1][n].trim())));return v(r[3].replace(/\|\s*$/gm,"").split("\n"),function(t){var e=["tr"];for(t=i(t,"|"),n=0;n<t.length;n++)e.push(["td",u[n]||{}].concat(this.processInline(t[n].trim())));s[2].push(e)},this),[s]},d.dialects.Maruku.inline["{:"]=function(t,e,n){if(!n.length)return[2,"{:"];var r=n[n.length-1];if("string"==typeof r)return[2,"{:"];var i=t.match(/^\{:\s*((?:\\\}|[^\}])*)\s*\}/);if(!i)return[2,"{:"];var o=this.dialect.processMetaHash(i[1]),a=u(r);a||(a={},r.splice(1,0,a));for(var s in o)a[s]=o[s];return[i[0].length,""]},d.dialects.Maruku.inline.__escape__=/^\\[\\`\*_{}\[\]()#\+.!\-|:]/,d.buildBlockOrder(d.dialects.Maruku.block),d.buildInlinePatterns(d.dialects.Maruku.inline);var v,m=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)};v=Array.prototype.forEach?function(t,e,n){return t.forEach(e,n)}:function(t,e,n){for(var r=0;r<t.length;r++)e.call(n||t,t[r],r,t)};var g=function(t){for(var e in t)if(hasOwnProperty.call(t,e))return!1;return!0};t.renderJsonML=function(t,e){e=e||{},e.root=e.root||!1;var n=[];if(e.root)n.push(h(t));else for(t.shift(),!t.length||"object"!=typeof t[0]||t[0]instanceof Array||t.shift();t.length;)n.push(h(t.shift()));return n.join("\n\n")}}(function(){return e}())},yYxz:function(t,e){t.exports={}},yuYM:function(t,e,n){var r=n("yYxz"),i=n("hgbu")("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},yzTm:function(t,e,n){n("Ld14")("unscopables")},z3Ps:function(t,e,n){n("hE1C"),n("GPcm"),n("3mz+"),t.exports=n("PBlj").f("iterator")},z4Y4:function(t,e,n){n("wiMi"),n("vw/H"),n("AaIv"),n("OHLg"),n("45zI"),n("tRuv"),n("jq8k"),n("hE1C"),n("fRlm"),n("hKsM"),n("8MKS"),n("Gor1"),n("Kglm"),n("nhXg"),n("Tpsd"),n("yzTm"),n("wkAD"),n("EU5/"),t.exports=n("odTk").Symbol},zT9F:function(t,e,n){t.exports=n("rx2W")},zmmn:function(t,e,n){t.exports=n("ajkC")},zyKz:function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}}});
//# sourceMappingURL=vendor.c246b5a2da4f901a21d7.js.map